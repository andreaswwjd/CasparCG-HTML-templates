{"version":3,"sources":["webpack:///./src/EFS/Bibelord.vue?e711","webpack:///./src/components/Lottie.vue?d28d","webpack:///src/components/Lottie.vue","webpack:///./src/components/Lottie.vue?4d6a","webpack:///./src/components/Lottie.vue","webpack:///src/EFS/Bibelord.vue","webpack:///./src/EFS/Bibelord.vue?ba48","webpack:///./src/EFS/Bibelord.vue","webpack:///./node_modules/node-libs-browser/mock/process.js","webpack:///./src/EFS/Bibelord.vue?2ea5","webpack:///./node_modules/timers-browserify/main.js","webpack:///./node_modules/core-js/internals/whitespaces.js","webpack:///./node_modules/core-js/internals/string-trim.js","webpack:///./node_modules/setimmediate/setImmediate.js","webpack:///./node_modules/core-js/internals/inherit-if-required.js","webpack:///./node_modules/lottie-web/build/player/lottie.js","webpack:///./node_modules/core-js/modules/es.number.constructor.js","webpack:///./node_modules/path-browserify/index.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","class","active","_b","animationData","delay","intro","outro","l0","f0","l1","f1","staticRenderFns","ref","staticStyle","attrs","data","anim","props","Boolean","Object","type","Array","default","loopFrames","Number","defalt","String","loop","autoplay","l2","mounted","container","$refs","lottie","methods","play","goToAndStop","stop","playSegments","watch","renderer","elements","updateDocumentData","component","components","Lottie","comp","bibelord","next","console","log","update","f2","created","window","sockets","event","exports","nextTick","fn","args","prototype","slice","call","arguments","shift","setTimeout","apply","platform","arch","execPath","title","pid","browser","env","argv","binding","name","Error","path","cwd","chdir","dir","resolve","exit","kill","umask","dlopen","uptime","memoryUsage","uvCounters","features","self","Function","Timeout","id","clearFn","_id","_clearFn","scope","clearTimeout","setInterval","clearInterval","timeout","close","unref","enroll","item","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","_onTimeout","setImmediate","global","clearImmediate","module","requireObjectCoercible","whitespaces","whitespace","ltrim","RegExp","rtrim","createMethod","TYPE","$this","string","replace","start","end","trim","registerImmediate","nextHandle","tasksByHandle","currentlyRunningATask","doc","document","attachTo","getPrototypeOf","toString","process","installNextTickImplementation","canUsePostMessage","installPostMessageImplementation","MessageChannel","installMessageChannelImplementation","createElement","installReadyStateChangeImplementation","installSetTimeoutImplementation","callback","length","i","task","handle","run","undefined","runIfPresent","postMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","messagePrefix","Math","random","onGlobalMessage","source","indexOf","addEventListener","attachEvent","channel","port1","port2","html","documentElement","script","onreadystatechange","removeChild","appendChild","isObject","setPrototypeOf","dummy","Wrapper","NewTarget","NewTargetPrototype","constructor","factory","root","svgNS","locationHref","initialDefaultFrame","subframeEnabled","expressionsPlugin","isSafari","test","navigator","userAgent","cachedColors","bm_rounder","round","bm_rnd","bm_pow","pow","bm_sqrt","sqrt","bm_abs","abs","bm_floor","floor","bm_max","max","bm_min","min","blitter","BMMath","ProjectInterface","propertyNames","len","val","tOfVal","absArr","createSizedArray","defaultCurveSegments","degToRads","PI","roundCorner","roundValues","flag","styleDiv","element","style","position","top","left","display","transformOrigin","webkitTransformOrigin","backfaceVisibility","webkitBackfaceVisibility","transformStyle","webkitTransformStyle","mozTransformStyle","BMEnterFrameEvent","currentTime","totalTime","frameMultiplier","direction","BMCompleteEvent","BMCompleteLoopEvent","totalLoops","currentLoop","BMSegmentStartEvent","firstFrame","totalFrames","BMDestroyEvent","target","BMRenderFrameErrorEvent","nativeError","BMConfigErrorEvent","BMAnimationConfigErrorEvent","createElementID","_count","HSVtoRGB","h","s","v","r","g","b","f","p","q","t","RGBtoHSV","d","addSaturationToRGB","color","offset","hsv","addBrightnessToRGB","addHueToRGB","rgbToHex","hex","colorMap","BaseEvent","triggerEvent","eventName","_cbs","push","removeEventListener","bind","splice","createTypedArray","createRegularArray","value","arr","Float32Array","Int16Array","Uint8ClampedArray","createNS","createElementNS","createTag","DynamicPropertyContainer","addDynamicProperty","prop","dynamicProperties","_isAnimated","iterateDynamicProperties","_mdf","getValue","initDynamicPropertyContainer","getBlendMode","blendModeEnums","0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","mode","Matrix","_cos","cos","_sin","sin","_tan","tan","_rnd","reset","rotate","angle","mCos","mSin","_t","rotateX","rotateY","rotateZ","shear","sx","sy","skew","ax","ay","skewFromAxis","scale","sz","setTransform","a","c","e","j","k","l","m","n","o","translate","tx","ty","tz","transform","a2","b2","c2","d2","e2","g2","h2","i2","j2","k2","m2","n2","o2","p2","_p","_identityCalculated","a1","b1","c1","d1","e1","g1","h1","i1","j1","k1","m1","n1","o1","p1","isIdentity","_identity","equals","matr","clone","cloneFromProps","applyToPoint","x","y","z","applyToX","applyToY","applyToZ","getInverseMatrix","determinant","inverseMatrix","inversePoint","pt","applyToPointArray","inversePoints","pts","retPts","applyToTriplePoints","pt1","pt2","pt3","p0","p4","p5","p12","p13","applyToPointStringified","toCSS","cssValue","roundMatrixProperty","to2dCSS","_a","_d","_e","_f","pool","math","nodecrypto","width","chunks","digits","rngname","startdenom","significance","overflow","mask","seedrandom","seed","options","key","entropy","shortseed","mixkey","flatten","tostring","autoseed","arc4","ARC4","prng","int32","quick","double","S","pass","is_math_call","state","copy","keylen","me","count","obj","depth","result","typ","smear","stringseed","charCodeAt","randomBytes","out","Uint8Array","crypto","msCrypto","getRandomValues","plugins","Date","screen","fromCharCode","BezierFactory","ob","getBezierEasing","beziers","nm","str","bezEasing","BezierEasing","NEWTON_ITERATIONS","NEWTON_MIN_SLOPE","SUBDIVISION_PRECISION","SUBDIVISION_MAX_ITERATIONS","kSplineTableSize","kSampleStepSize","float32ArraySupported","A","aA1","aA2","B","C","calcBezier","aT","getSlope","binarySubdivide","aX","aA","aB","mX1","mX2","currentX","currentT","newtonRaphsonIterate","aGuessT","currentSlope","points","_mSampleValues","_precomputed","get","mY1","mY2","_precompute","_getTForX","_calcSampleValues","mSampleValues","intervalStart","currentSample","lastSample","dist","guessForT","initialSlope","extendPrototype","sources","destination","sourcePrototype","attr","hasOwnProperty","getDescriptor","object","getOwnPropertyDescriptor","createProxyFunction","ProxyFunction","bezFunction","pointOnLine2D","x1","y1","x2","y2","x3","y3","det1","pointOnLine3D","z1","z2","z3","diffDist","dist1","dist2","dist3","getBezierLength","pt4","ptCoord","perc","ptDistance","curveSegments","addedLength","point","lastPoint","lengthData","bezier_length_pool","newElement","percents","lengths","getSegmentsLength","shapeData","segmentsLength","segments_length_pool","closed","pathV","pathO","pathI","_length","totalLength","BezierData","segmentLength","PointData","partial","partialLength","buildBezierData","storedData","bezierName","bezierData","getDistancePerc","initPos","lengthPos","lPerc","getPointInSegment","percent","t1","u1","ptX","ptY","bezier_segment_points","getNewSegment","startPerc","endPerc","t0","u0","u0u0u0","t0u0u0_3","t0t0u0_3","t0t0t0","u0u0u1","t0u0u1_3","t0t0u1_3","t0t0t1","u0u1u1","t0u1u1_3","t0t1u1_3","t0t1t1","u1u1u1","t1u1u1_3","t1t1u1_3","t1t1t1","lastTime","vendors","requestAnimationFrame","cancelAnimationFrame","currTime","getTime","timeToCall","bez","dataFunctionManager","completeLayers","layers","comps","fontManager","layerData","jLen","kLen","completed","tt","td","hasMask","maskProps","masksProperties","convertPathsToAbsoluteValues","findCompLayers","refId","completeShapes","shapes","completeText","__used","JSON","parse","stringify","ks","it","checkVersion","minimum","animVersionString","animVersion","split","checkText","minimumVersion","updateTextLayer","textLayer","documentData","iterateLayers","assets","checkChars","chars","pathData","paths","__converted","checkColors","iterateShapes","checkShapes","cl","completeData","__complete","singleShape","moduleOb","dataManager","FontManager","maxWaitingTime","emptyChar","w","size","combinedCharacters","setUpNode","font","family","parentNode","fontFamily","node","innerHTML","fontSize","fontVariant","fontStyle","fontWeight","letterSpacing","body","offsetWidth","parent","checkLoadedFonts","fonts","loadedCount","loaded","fOrigin","origin","monoCase","sansCase","now","initTime","isLoaded","createHelper","def","fontData","tHelper","setAttribute","fFamily","fStyle","fWeight","textContent","fClass","tCanvasHelper","getContext","addFonts","defs","list","fontArr","_pendingFonts","loadedSelector","shouldLoadFont","fPath","querySelectorAll","href","rel","src","sc","helper","cache","addChars","found","ch","getCharData","char","warn","measureText","fontName","getFontByName","index","doubleSize","getComputedTextLength","singleSize","fName","getCombinedCharacterCodes","concat","Font","typekitLoaded","PropertyFactory","initFrame","math_abs","interpolateValue","frameNum","caching","newValue","offsetTime","propType","pv","keyData","nextKeyData","fnc","iterationIndex","lastIndex","keyframes","endValue","nextKeyTime","keyTime","to","ti","ind","__fnct","segmentPerc","distanceInLine","lastFrame","_lastKeyframeIndex","_lastAddedLength","_lastPoint","outX","outY","inX","inY","keyValue","sh","quatStart","createQuaternion","quatEnd","time","quaternionToEuler","slerp","omega","cosom","sinom","scale0","scale1","az","aw","bx","by","bz","bw","acos","quat","qx","qy","qz","qw","heading","atan2","attitude","asin","bank","values","c3","s1","s2","s3","getValueAtCurrentTime","renderedFrame","endTime","_caching","renderResult","setVValue","multipliedValue","mult","processEffectsSequence","elem","globalData","frameId","effectsSequence","lock","_isFirstFrame","finalValue","kf","addEffect","effectFunction","ValueProperty","vel","MultiDimensionalProperty","KeyframedValueProperty","st","KeyframedMultidimensionalProperty","arrLen","getProp","TransformPropertyFactory","defaultVector","applyToMatrix","mat","sk","sa","rz","ry","rx","or","px","py","pz","processKeys","forceRender","_isDirty","precalculateMatrix","pre","appliedTransformations","autoOriented","v1","v2","frameRate","getValueAtTime","autoOrient","_addDynamicProperty","TransformProperty","getTransformProperty","ShapePath","_maxLength","setPathData","setLength","point_pool","doubleArrayLength","setXYAt","pos","setTripleAt","vX","vY","oX","oY","iX","iY","reverse","newPath","vertices","outPoints","inPoints","init","cnt","ShapePropertyFactory","interpolateShape","previousValue","keyPropS","keyPropE","isHold","vertexValue","interpolateShapeCurrentTime","resetShape","localShapeCollection","shapesEqual","shape1","shape2","shape_pool","releaseShapes","addShape","ShapeProperty","shapeCollection_pool","newShapeCollection","KeyframedShapeProperty","EllShapeProperty","cPoint","convertEllToPath","s0","_cw","_v","StarShapeProperty","ir","is","convertToPath","convertStarToPath","convertPolygonToPath","os","rad","roundness","perimSegment","numPts","longFlag","longRad","shortRad","longRound","shortRound","longPerimSegment","shortPerimSegment","currentAng","ox","oy","RectShapeProperty","convertRectToPath","v0","getShapeProp","dataProp","keys","getConstructorFunction","getKeyframedConstructorFunction","ShapeModifiers","modifiers","registerModifier","getModifier","ShapeModifier","TrimModifier","RoundCornersModifier","RepeaterModifier","ShapeCollection","DashProperty","dataProps","dashStr","dashArray","dashoffset","GradientProperty","cLength","_cmdf","_omdf","_collapsable","checkCollapsable","_hasOpacity","initModifierProperties","addShapeToModifier","shape","setAsAnimated","sValue","eValue","pathsData","calculateShapeEdges","shapeLength","totalModifierLength","segments","segmentOb","shapeSegments","shapeS","shapeE","releasePathsData","release","processShapes","shapePaths","_s","totalShapeLength","edges","newShapesData","addShapes","lastShapeInCollection","lastShape","pop","addPaths","newPaths","addSegment","shapePath","newShape","addSegmentFromArray","shapeSegment","currentLengthData","segmentCount","segment","rd","processPath","cloned_path","currentV","currentI","currentO","closerV","distance","newPosPerc","tr","so","eo","pMatrix","rMatrix","sMatrix","tMatrix","matrix","applyTransforms","inv","scaleX","scaleY","elemsData","_currentCopies","_elements","_groups","unshift","resetElements","_processed","cloneElements","newElements","changeGroupRender","renderFlag","_render","items","itemsTransform","cont","copies","ceil","group","reloadShapes","offsetModulo","roundOffset","pProps","rProps","sProps","iteration","mProps","op","comparePoints","diff","buildShapeString","pathNodes","_o","_i","shapeString","ImagePreloader","proxyImage","canvas","height","ctx","fillStyle","fillRect","imageLoaded","loadedAssets","totalImages","imagesLoadedCb","getAssetsPath","assetData","assetsPath","original_path","imagePath","u","createImageData","img","crossOrigin","_imageLoaded","loadAssets","cb","images","_createImageData","setPath","setAssetsPath","getImage","destroy","featureSupport","maskType","filtersFactory","createFilter","filId","fil","createAlphaToLuminanceFilter","feColorMatrix","assetLoader","formatResponse","xhr","response","responseText","loadAsset","errorCallback","XMLHttpRequest","open","responseType","err","send","readyState","status","load","TextAnimatorProperty","textData","renderType","_hasMaskedPath","_frameId","_textData","_renderType","_elem","_animatorsData","_pathData","_moreOptions","alignment","renderedLetters","lettersChangedFlag","TextAnimatorDataProperty","animatorProps","defaultData","textAnimator_animatables","sw","fc","fh","fs","fb","TextSelectorProp","getTextSelectorProp","LetterProps","TextProperty","keysIndex","canResize","minimumFontSize","currentData","ascent","boxWidth","defaultBoxWidth","justifyOffset","lh","lineWidths","ls","of","ps","fillColorAnim","strokeColorAnim","strokeWidthAnim","yOffset","finalSize","finalText","finalLineHeight","copyData","searchProperty","completeTextData","searchProperties","maskManager","getMaskProperty","getMeasures","xPos","yPos","pathInfo","currentLength","currentPoint","pointInd","segmentInd","prevPoint","tanAngle","animators","matrixHelper","mHelper","renderedLettersCount","letters","tLength","pi","animatorSelector","letterValue","yOff","firstLine","offf","xPathPos","yPathPos","elemOpacity","letterSw","letterSc","letterFc","letterO","initPathPos","initSegmentInd","initPointInd","currentLine","letterM","letterP","defaultPropsArray","animatorJustifyOffset","animatorFirstCharOffset","justifyOffsetMult","isNewLine","getMult","anIndexes","totalChars","line","extra","an","animatorOffset","add","rot","atan","updated","setCurrentData","searchKeyframes","getKeyframeValue","_finalValue","currentValue","currentIndex","textKeys","buildFinalText","text","charCode","charactersArray","charAt","substr","newLineFlag","charData","styleName","anchorGrouping","currentSize","currentPos","lineWidth","maxLineWidth","styles","toLowerCase","trackingOffset","currentHeight","boxHeight","lastSpaceIndex","currentChar","uncollapsedSpaces","animatorData","letterData","based","indexes","rn","newInd","currentInd","newData","dData","recalculate","canResizeFont","_canResize","setMinimumFontSize","_fontValue","_currentTextLength","finalS","finalE","xe","ne","textProperty","easer","tot","newCharsFlag","divisor","pool_factory","initialLength","_create","_release","_clone","pooling","create","cloned","shapeCollection","BaseRenderer","SVGRenderer","animationItem","config","svgElement","ariaLabel","titleElement","titleId","description","descElement","descId","maskElement","layerElement","renderConfig","preserveAspectRatio","imagePreserveAspectRatio","progressiveLoad","hideOnTransparent","viewBoxOnly","viewBoxSize","className","focusable","pendingElements","destroyed","rendererType","CanvasRenderer","clearCanvas","context","dpr","wrapper","devicePixelRatio","currentGlobalAlpha","contextData","CVContextData","transformMat","HybridRenderer","threeDElements","camera","supports3d","MaskElement","viewData","solidPath","rect","expansor","feMorph","properties","currentMasks","layerId","maskRef","filterID","expan","lastPath","lastOperator","filterId","lastRadius","createLayerSolidPath","invRect","drawPath","maskedElement","addRenderableComponent","HierarchyElement","FrameElement","TransformElement","RenderableElement","RenderableDOMElement","ProcessedElement","SVGStyleData","level","lvl","hd","pElem","msElem","SVGShapeData","transformers","caches","lStr","SVGTransformData","SVGStrokeStyleData","styleOb","SVGFillStyleData","SVGGradientFillStyleData","initGradientData","SVGGradientStrokeStyleData","ShapeGroupData","prevViewData","gr","checkLayers","num","ip","buildItem","checkPendingElements","createItem","layer","createImage","createComp","createSolid","createNull","createShape","createText","createCamera","buildAllItems","includeLayers","newLayers","setProjectInterface","pInterface","projectInterface","initItems","buildElementParenting","parentName","hierarchy","setAsParent","setHierarchy","addPendingElement","searchExtraCompositions","xt","initExpressions","registerComposition","setupGlobalData","animData","fontsContainer","getAssetData","imageLoader","imagePreloader","fr","compSize","NullElement","SVGShapeElement","SVGTextElement","IImageElement","SVGCompElement","ISolidElement","configAnimation","maskId","updateContainerSize","appendElementInPos","setMatte","checkParenting","renderFrame","currentFrame","prepareFrame","getBaseElement","nextElement","insertBefore","hide","show","CVShapeElement","CVTextElement","CVImageElement","CVCompElement","CVSolidElement","ctxTransform","cProps","cTr","trProps","canvasContext","ctxOpacity","globalAlpha","cO","restore","save","actionFlag","cArrPos","duplicate","saved","savedOp","blendMode","popped","mozTransformOrigin","transformCanvas","isDashed","elementWidth","elementHeight","elementRel","animationRel","offsetHeight","par","fillType","beginPath","closePath","clip","clearRect","newDOMElement","ddd","addTo3dContainer","nextDOMElement","nextLayer","tmpDOMElement","getThreeDContainerByPos","HShapeElement","HTextElement","HCameraElement","HImageElement","HCompElement","HSolidElement","startPos","endPos","perspectiveElem","createThreeDContainer","webkitTransform","threeDContainerData","build3dContainers","lastThreeDContainerData","currentContainer","resizerElem","svg","setup","cWidth","cHeight","perspective","webkitPerspective","floatingContainer","isFirstFrame","finalMat","finalTransform","mProp","getMaskelement","pathString","pathShapeValue","initHierarchy","_isParent","prepareProperties","isVisible","initTransform","_matMdf","_opMdf","ao","renderTransform","globalToLocal","transforms","ptNew","initRenderable","isInRange","hidden","isTransparent","renderableComponents","removeRenderableComponent","prepareRenderableFrame","checkLayerLimits","checkTransparency","renderRenderable","sourceRectAtTime","getLayerSize","_prototype","initElement","initBaseData","initRendererElement","createContainerElements","createRenderableComponents","createContent","baseElement","renderElement","renderInnerContent","innerElem","destroyBaseElement","stops","setGradientData","setGradientOpacity","pathElement","gradientId","gfill","gf","cst","opacityId","opFill","ms","ost","SVGElementsRenderer","_identityMatrix","_matrixHelper","createRenderFunction","renderFill","renderGradient","renderGradientStroke","renderStroke","renderPath","renderContentTransform","styleData","itemData","pathStringTransformed","redraw","iterations","lLen","styleElem","hasOpacity","attr1","attr2","cValues","oValues","ang","ShapeTransformManager","sequences","sequenceList","transform_key_count","CVShapeData","transformsManager","styledShapes","styledShape","addTransformSequence","trNodes","BaseElement","SVGBaseElement","IShapeElement","ITextElement","ICompElement","sourceRect","tm","_placeholder","textSpans","shapesData","stylesList","shapeModifiers","itemsData","processedElements","animatedContents","SVGTintFilter","filter","filterManager","matrixFilter","effectElements","feMergeNode","feMerge","SVGFillFilter","SVGGaussianBlurEffect","feGaussianBlur","SVGStrokeEffect","initialized","SVGTritoneFilter","feComponentTransfer","feFuncR","feFuncG","feFuncB","SVGProLevelsFilter","createFeFunc","feFuncA","feFuncRComposed","feFuncGComposed","feFuncBComposed","SVGDropShadowEffect","feOffset","feFlood","feComposite","originalNodeAdded","sequence","processSequence","processSequences","getNewKey","checkMasks","layerInterface","LayerExpressionInterface","registerMaskInterface","effectsInterface","EffectsExpressionInterface","createEffectsInterface","registerEffectsInterface","compInterface","CompExpressionInterface","shapeInterface","ShapeExpressionInterface","content","textInterface","TextExpressionInterface","setBlendMode","blendModeValue","bm","sr","effectsManager","EffectsManager","getType","matteElement","transformedElement","_sizeChanged","gg","layerElementParent","masker","maskGroup","maskGrouper","feCTr","feFunc","alphaRect","ln","cp","clipId","cpGroup","renderableEffectsManager","SVGEffects","addShapeToModifiers","isShapeInAnimatedModifiers","isAnimatedWithShape","renderModifiers","lcEnum","ljEnum","searchProcessedElement","addProcessedElement","textAnimator","buildNewText","createPathShape","shapeStr","_fontSize","applyTextPropertiesToMatrix","lineNumber","buildColor","colorData","emptyProp","timeRemapped","setElements","elems","getElements","destroyElements","assetPath","pr","setAttributeNS","textContainer","buildTextContents","textArray","textContents","currentTextContent","tSpan","usesGlyphs","cachedSpansLength","tElement","justify","textBox","getBBox","bbox","renderedLetter","textSpan","initSecondaryElement","identityMatrix","buildExpressionInterface","searchShapes","filterUniqueShapes","tempShapes","areAnimated","setShapesAsAnimated","createStyleElement","elementData","gradientConstructor","lc","lj","ml","addToAnimatedContents","createGroupElement","createTransformElement","transformProperty","createShapeElement","ownTransformers","shapeProperty","setElementStyles","currentTransform","modifier","processedPos","ownStyles","ownModifiers","renderShape","animatedContent","colorBlack","colorWhite","opacity","kBlurrinessToSigma","sigma","dimensions","sigmaX","sigmaY","edgeMode","initialize","groupPath","elemChildren","children","childNodes","removeAttribute","pathMasker","dasharrayValue","getTotalLength","lineLength","units","color1","color2","color3","tableR","tableG","tableB","getTableValue","inputBlack","inputWhite","gamma","outputBlack","outputWhite","colorValue","table","outputDelta","inputDelta","join","col","_svgMatteSymbols","SVGMatte3Effect","filterElem","ef","filters","CVBaseElement","CVMaskElement","hasMasks","stroke","fill","currentRender","sWidth","fValue","CVEffects","HBaseElement","shapesContainer","currentBBox","textPaths","isMasked","pe","_prevMat","HEffects","findSymbol","replaceInParent","symbolId","nextChild","useElem","setElementAsMask","symbol","newLength","currentSavedOp","set","createElements","globalCompositeOperation","hideElement","showElement","forceRealStack","widthCrop","heightCrop","imgW","imgH","imgRel","canvasRel","drawImage","parentMatrix","moveTo","lineTo","bezierCurveTo","transformHelper","dashResetter","preTransforms","co","wi","da","do","addTransformToStyleList","removeTransformFromStyleList","closeStyles","shouldRender","ownTransforms","_shouldRender","renderShapeTransform","parentTransform","groupTransform","drawLayer","nodes","currentStyle","coOp","strokeStyle","grd","lineCap","lineJoin","miterLimit","setLineDash","lineDashOffset","isMain","renderGradientFill","renderStyledShape","shapeNodes","groupTransformMat","createLinearGradient","createRadialGradient","addColorStop","hasFill","hasStroke","commands","pathArr","lastFill","lastStroke","lastStrokeW","checkBlendMode","tg","addEffects","backgroundColor","_createBaseContainerElements","_renderShapeFrame","shapeCont","getTransformedPoint","calculateShapeBoundingBox","boundingBox","vPoint","oPoint","nextIPoint","nextVPoint","checkBounds","getBoundsOfCurve","bounds","shapeBoundingBox","xMax","right","yMax","bottom","tempBoundingBox","p3","b2ac","t2","calculateF","calculateBoundingBox","currentBoxContains","box","changed","compW","compH","innerElemStyle","strokeWidth","lineHeight","tParent","tCont","textPath","margin","Image","imageElem","mTransf","diffVector","mag","lookDir","lookLengthOnXZ","m_rotationX","m_rotationY","hasMatrixChanged","animationManager","registeredAnimations","playingAnimationsNum","_stopped","_isFrozen","removeElement","ev","animItem","animation","isPaused","subtractPlayingCount","registerAnimation","AnimationItem","setupAnimation","setData","getRegisteredAnimations","animations","addPlayingCount","activate","loadAnimation","params","setParams","setSpeed","setDirection","resume","nowTime","elapsedTime","advanceTime","first","pause","isFrame","togglePause","searchAnimations","standalone","animElements","getElementsByClassName","getElementsByTagName","div","resize","freeze","unfreeze","currentRawFrame","frameMult","playSpeed","playDirection","playCount","animationID","timeCompleted","segmentPos","_idle","_completedLoop","animType","rendererSettings","parseInt","autoloadSegments","lastIndexOf","fileName","trigger","wrapperAttributes","attributes","getNamedItem","prerender","loadNextSegment","segmentPath","loadSegments","imagesLoaded","checkLoaded","preloadImages","updaFrameModifier","waitForFontsLoaded","error","triggerConfigError","gotoFrame","setSubframe","triggerRenderFrameError","setCurrentRawFrameValue","frameModifier","goToAndPlay","nextValue","_isComplete","checkSegments","adjustSegment","setSegment","pendingFrame","forceFlag","resetSegments","onEnterFrame","onLoopComplete","onComplete","onSegmentStart","onDestroy","getPath","getDuration","onError","Expressions","stackCount","registers","pushExpression","popExpression","releaseInstances","registerExpressionProperty","expression","ExpressionManager","$bm_isInstanceOfArray","isNumerable","tOfV","$bm_neg","tOfA","lenA","retArr","easeInBez","easeOutBez","easeInOutBez","sum","tOfB","lenB","sub","mul","mod","$bm_sum","$bm_sub","$bm_mul","$bm_div","$bm_mod","clamp","mm","radiansToDegrees","radians_to_degrees","degreesToRadians","degrees_to_radians","helperLengthArray","arr1","arr2","normalize","vec","rgbToHsl","hue2rgb","hslToRgb","linear","tMin","tMax","value1","value2","_tMin","rnd","rndm","createPath","inTangents","outTangents","inVertexPoint","outVertexPoint","arrPlaceholder","initiateExpression","property","needsVelocity","_needsRandom","elemType","$bm_transform","effect","thisProperty","valueAtTime","defineProperty","frameDuration","displayStartTime","inPoint","outPoint","loopIn","loop_in","loopOut","loop_out","smooth","toWorld","fromWorld","fromComp","toComp","fromCompToSurface","rotation","anchorPoint","thisLayer","thisComp","velocityAtTime","__expression_functions","scoped_bm_rt","xf","eval","expression_function","numKeys","wiggle","freq","amp","addedAmps","periods","loopInDuration","duration","loopOutDuration","getVelocityAtTime","velocity","textIndex","textTotal","selectorValue","lookAt","elem1","elem2","fVec","pitch","yaw","easeOut","val1","val2","applyEase","easeIn","ease","nearestKey","framesToTime","frames","fps","timeToFrames","seedRandom","randSeed","substring","posterizeTime","framesPerSecond","hasParent","executeExpression","_value","frameExpressionId","expressionHelpers","searchExpressions","_cachingAtTime","getSpeedAtTime","delta","speed","getStaticValueAtTime","setGroupProperty","propertyGroup","durationFlag","cycleDuration","firstKeyFrame","ret","lastKeyFrame","initV","endV","current","repeats","lastValue","nextLastValue","firstValue","nextFirstValue","samples","sampleValue","endFrame","sampleFrequency","getTransformValueAtTime","getTransformStaticValueAtTime","propertyGetProp","getShapeValueAtTime","shapeValue","propertyIndex","ix","ShapePropertyConstructorFunction","KeyframedShapePropertyConstructorFunction","ShapeExpressions","isClosed","pointOnPath","_segmentsLength","accumulatedLength","initIndex","endIndex","vectorOnPath","vectorType","xLength","yLength","magnitude","unitVector","tangentOnPath","normalOnPath","propertyGetShapeProp","trims","calculateExpression","getExpressionValue","isKeyframed","hasExpressions","iterateElements","view","groupInterfaceFactory","fillInterfaceFactory","strokeInterfaceFactory","trimInterfaceFactory","ellipseInterfaceFactory","starInterfaceFactory","pathInterfaceFactory","rectInterfaceFactory","roundedInterfaceFactory","repeaterInterfaceFactory","contentsInterfaceFactory","interfaces","interfaceFunction","_name","mn","numProperties","cix","transformInterface","transformInterfaceFactory","np","defineProperties","ExpressionPropertyInterface","_propertyGroup","_dashPropertyGroup","dashOb","addPropertyToDashOb","skewAxis","outerRadius","outerRoundness","innerRoundness","innerRadius","radius","_interfaceFunction","_prevValue","_sourceText","_thisLayerFunction","stringValue","toWorldMat","sampleImage","_registerMaskInterface","MaskManagerInterface","_registerEffectsInterface","effects","TransformExpressionInterface","anchorPointDescriptor","anchor_point","startTime","pixelAspect","numLayers","_thisFunction","xRotation","yRotation","xPosition","yPosition","zPosition","_transformFactory","compositions","_thisProjectFunction","effectsData","createGroupInterface","createValueInterface","groupInterface","enabled","en","expressionProperty","MaskInterface","_mask","_data","MaskManager","_masksInterfaces","maskFunction","defaultUnidimensionalValue","defaultMultidimensionalValue","completeProperty","expressionValue","valueProp","assign","speedAtTime","UnidimensionalPropertyInterface","MultidimensionalPropertyInterface","arrValue","defaultGetter","SliderEffect","AngleEffect","ColorEffect","PointEffect","LayerIndexEffect","MaskIndexEffect","CheckboxEffect","NoValueEffect","effectItem","GroupEffect","TextExpressionSelectorProp","getValueProxy","total","propertyGetTextProp","eff","setLocationHref","setSubframeRendering","setQuality","isNaN","inBrowser","installPlugin","plugin","getFactory","checkReady","readyStateCheckInterval","getQueryVariable","variable","vars","queryString","pair","decodeURIComponent","__getFactory","version","scripts","myScript","DESCRIPTORS","isForced","redefine","has","classof","inheritIfRequired","toPrimitive","fails","getOwnPropertyNames","NUMBER","NativeNumber","NumberPrototype","BROKEN_CLASSOF","toNumber","argument","third","radix","maxCode","code","NaN","NumberWrapper","valueOf","normalizeArray","parts","allowAboveRoot","up","last","basename","matchedSlash","xs","res","resolvedPath","resolvedAbsolute","TypeError","isAbsolute","trailingSlash","relative","from","fromParts","toParts","samePartsLength","outputParts","sep","delimiter","dirname","hasRoot","ext","extname","startDot","startPart","preDotState"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,WAAWC,MAAM,CAAEC,OAAQR,EAAIQ,SAAU,CAACJ,EAAG,SAASJ,EAAIS,GAAG,CAACH,YAAY,UAAU,SAAS,CAAEI,cAAeV,EAAIU,cAAeF,OAAQR,EAAIQ,OAAQG,MAAO,KAAMC,MAAO,CAAC,EAAE,IAAKb,OAAQ,SAA4Cc,MAAO,CAAC,KAAM,MAAOC,GAAId,EAAIe,GAAIC,GAAIhB,EAAIiB,KAAI,KAAS,IAC7YC,EAAkB,GCDlB,EAAS,WAAa,IAAIlB,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACe,IAAI,SAASb,YAAY,SAASc,YAAY,CAAC,MAAQ,OAAO,OAAS,QAAQC,MAAM,CAAC,MAAQ,mCACpM,EAAkB,G,yDCMtB,GACEC,KADF,WAEI,MAAO,CACLC,KAAM,OAGVC,MAAO,CACLhB,OAAQiB,QACRf,cAAegB,OACfd,MAAO,CACLe,KAAMC,MACNC,QAAS,MAEXhB,MAAO,CACLc,KAAMC,MACNC,QAAS,MAEXC,WAAY,CACVH,KAAMC,MACNC,QAAS,MAEXlB,MAAO,CACLgB,KAAMI,OACNC,OAAQ,GAEVjC,OAAQ,CACN4B,KAAMM,OACNJ,QAAS,OAEXK,KAAM,CACJP,KAAMF,QAAUM,OAChBF,SAAS,GAEXM,SAAU,CACRR,KAAMF,QACNI,SAAS,GAEXf,GAAImB,OACJjB,GAAIiB,OACJG,GAAIH,QAENI,QAzCF,WA0CIpC,KAAKsB,KAAO,EAAhB,gCACMe,UAAWrC,KAAKsC,MAAMC,QAC5B,eAGEC,QAAS,CACPC,KADJ,WACA,WACMzC,KAAKsB,KAAKoB,YAAY,GACtB,OAAN,gBAAM,EAAN,WACY,EAAZ,MACc,EAAd,0DACA,gCAEU,EAAV,cAEA,aAEIC,KAZJ,WAaU3C,KAAKY,OACPZ,KAAKsB,KAAKsB,aAAa5C,KAAKY,OAAO,KAIzCiC,MAAF,CACI,OAAU,SAAd,GACM,EAAN,yBAEI,GAAM,SAAV,GACM7C,KAAKsB,KAAKwB,SAASC,SAAS,GAAGC,mBAAmB,CAAxD,SAEI,GAAM,SAAV,GACMhD,KAAKsB,KAAKwB,SAASC,SAAS,GAAGC,mBAAmB,CAAxD,SAEI,GAAM,SAAV,GACMhD,KAAKsB,KAAKwB,SAASC,SAAS,GAAGC,mBAAmB,CAAxD,WCnFgV,I,YCO5UC,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIa,EAAAA,E,QCZf,YAGA,GACEC,WAAY,CACVC,OAAJ,GAEE9B,KAJF,WAKI,MAAO,CACL+B,KAAM,eACNtC,GAAI,UACJE,GAAI,cACJT,QAAQ,EACRE,cAAe4C,IAGnBb,QAAS,CACPC,KADJ,WAEMzC,KAAKO,QAAS,GAEhBoC,KAJJ,WAKM3C,KAAKO,QAAS,GAEhB+C,KAPJ,WASM,OADAC,QAAQC,IAAIxD,MACLA,MAETyD,OAXJ,SAWA,GACMzD,KAAKc,GAAKO,EAAKP,GACfd,KAAKgB,GAAKK,EAAKL,GACfhB,KAAK0D,GAAKrC,EAAKqC,KAGnBC,QA9BF,WA+BIC,OAAOnB,KAAX,UACImB,OAAOjB,KAAX,UACIiB,OAAON,KAAX,UACIM,OAAOH,OAASzD,KAAKyD,QAGvBI,QAAS,CACPxC,KAAM,SAAV,0BACUyC,GAAS9D,KAAKoD,KAAxB,qBACUU,GAAS9D,KAAKoD,KAAxB,qBACUU,GAAS9D,KAAKoD,KAAxB,qBACUU,GAAS9D,KAAKoD,KAAxB,6BCnDkV,ICQ9U,G,UAAY,eACd,EACAtD,EACAmB,GACA,EACA,KACA,WACA,OAIa,e,w/4BCnBf8C,EAAQC,SAAW,SAAkBC,GACjC,IAAIC,EAAOvC,MAAMwC,UAAUC,MAAMC,KAAKC,WACtCJ,EAAKK,QACLC,YAAW,WACPP,EAAGQ,MAAM,KAAMP,KAChB,IAGPH,EAAQW,SAAWX,EAAQY,KAC3BZ,EAAQa,SAAWb,EAAQc,MAAQ,UACnCd,EAAQe,IAAM,EACdf,EAAQgB,SAAU,EAClBhB,EAAQiB,IAAM,GACdjB,EAAQkB,KAAO,GAEflB,EAAQmB,QAAU,SAAUC,GAC3B,MAAM,IAAIC,MAAM,8CAGjB,WACI,IACIC,EADAC,EAAM,IAEVvB,EAAQuB,IAAM,WAAc,OAAOA,GACnCvB,EAAQwB,MAAQ,SAAUC,GACjBH,IAAMA,EAAO,EAAQ,SAC1BC,EAAMD,EAAKI,QAAQD,EAAKF,IANhC,GAUAvB,EAAQ2B,KAAO3B,EAAQ4B,KACvB5B,EAAQ6B,MAAQ7B,EAAQ8B,OACxB9B,EAAQ+B,OAAS/B,EAAQgC,YACzBhC,EAAQiC,WAAa,aACrBjC,EAAQkC,SAAW,I,oCCjCnB,yBAAqiB,EAAG,G,sBCAxiB,6CAC6B,qBAATC,MAAwBA,MAChCtC,OACRa,EAAQ0B,SAAShC,UAAUM,MAiB/B,SAAS2B,EAAQC,EAAIC,GACnBtG,KAAKuG,IAAMF,EACXrG,KAAKwG,SAAWF,EAflBvC,EAAQS,WAAa,WACnB,OAAO,IAAI4B,EAAQ3B,EAAMJ,KAAKG,WAAYiC,EAAOnC,WAAYoC,eAE/D3C,EAAQ4C,YAAc,WACpB,OAAO,IAAIP,EAAQ3B,EAAMJ,KAAKsC,YAAaF,EAAOnC,WAAYsC,gBAEhE7C,EAAQ2C,aACR3C,EAAQ6C,cAAgB,SAASC,GAC3BA,GACFA,EAAQC,SAQZV,EAAQjC,UAAU4C,MAAQX,EAAQjC,UAAUjD,IAAM,aAClDkF,EAAQjC,UAAU2C,MAAQ,WACxB9G,KAAKwG,SAASnC,KAAKoC,EAAOzG,KAAKuG,MAIjCxC,EAAQiD,OAAS,SAASC,EAAMC,GAC9BR,aAAaO,EAAKE,gBAClBF,EAAKG,aAAeF,GAGtBnD,EAAQsD,SAAW,SAASJ,GAC1BP,aAAaO,EAAKE,gBAClBF,EAAKG,cAAgB,GAGvBrD,EAAQuD,aAAevD,EAAQxD,OAAS,SAAS0G,GAC/CP,aAAaO,EAAKE,gBAElB,IAAID,EAAQD,EAAKG,aACbF,GAAS,IACXD,EAAKE,eAAiB3C,YAAW,WAC3ByC,EAAKM,YACPN,EAAKM,eACNL,KAKP,EAAQ,QAIRnD,EAAQyD,aAAgC,qBAATtB,MAAwBA,KAAKsB,cAClB,qBAAXC,GAA0BA,EAAOD,cACxCxH,MAAQA,KAAKwH,aACrCzD,EAAQ2D,eAAkC,qBAATxB,MAAwBA,KAAKwB,gBAClB,qBAAXD,GAA0BA,EAAOC,gBACxC1H,MAAQA,KAAK0H,iB,yCC5DvCC,EAAO5D,QAAU,iD,uBCFjB,IAAI6D,EAAyB,EAAQ,QACjCC,EAAc,EAAQ,QAEtBC,EAAa,IAAMD,EAAc,IACjCE,EAAQC,OAAO,IAAMF,EAAaA,EAAa,KAC/CG,EAAQD,OAAOF,EAAaA,EAAa,MAGzCI,EAAe,SAAUC,GAC3B,OAAO,SAAUC,GACf,IAAIC,EAASrG,OAAO4F,EAAuBQ,IAG3C,OAFW,EAAPD,IAAUE,EAASA,EAAOC,QAAQP,EAAO,KAClC,EAAPI,IAAUE,EAASA,EAAOC,QAAQL,EAAO,KACtCI,IAIXV,EAAO5D,QAAU,CAGfwE,MAAOL,EAAa,GAGpBM,IAAKN,EAAa,GAGlBO,KAAMP,EAAa,K,sBC1BrB,6BACI,aAEA,IAAIT,EAAOD,aAAX,CAIA,IAIIkB,EAJAC,EAAa,EACbC,EAAgB,GAChBC,GAAwB,EACxBC,EAAMrB,EAAOsB,SAoJbC,EAAWvH,OAAOwH,gBAAkBxH,OAAOwH,eAAexB,GAC9DuB,EAAWA,GAAYA,EAASxE,WAAawE,EAAWvB,EAGf,qBAArC,GAAGyB,SAAS7E,KAAKoD,EAAO0B,SAExBC,IAEOC,IAEPC,IAEO7B,EAAO8B,eAEdC,IAEOV,GAAO,uBAAwBA,EAAIW,cAAc,UAExDC,IAIAC,IAGJX,EAASxB,aAAeA,EACxBwB,EAAStB,eAAiBA,EA3K1B,SAASF,EAAaoC,GAEI,oBAAbA,IACTA,EAAW,IAAIzD,SAAS,GAAKyD,IAI/B,IADA,IAAI1F,EAAO,IAAIvC,MAAM2C,UAAUuF,OAAS,GAC/BC,EAAI,EAAGA,EAAI5F,EAAK2F,OAAQC,IAC7B5F,EAAK4F,GAAKxF,UAAUwF,EAAI,GAG5B,IAAIC,EAAO,CAAEH,SAAUA,EAAU1F,KAAMA,GAGvC,OAFA0E,EAAcD,GAAcoB,EAC5BrB,EAAkBC,GACXA,IAGT,SAASjB,EAAesC,UACbpB,EAAcoB,GAGzB,SAASC,EAAIF,GACT,IAAIH,EAAWG,EAAKH,SAChB1F,EAAO6F,EAAK7F,KAChB,OAAQA,EAAK2F,QACb,KAAK,EACDD,IACA,MACJ,KAAK,EACDA,EAAS1F,EAAK,IACd,MACJ,KAAK,EACD0F,EAAS1F,EAAK,GAAIA,EAAK,IACvB,MACJ,KAAK,EACD0F,EAAS1F,EAAK,GAAIA,EAAK,GAAIA,EAAK,IAChC,MACJ,QACI0F,EAASnF,MAAMyF,EAAWhG,GAC1B,OAIR,SAASiG,EAAaH,GAGlB,GAAInB,EAGArE,WAAW2F,EAAc,EAAGH,OACzB,CACH,IAAID,EAAOnB,EAAcoB,GACzB,GAAID,EAAM,CACNlB,GAAwB,EACxB,IACIoB,EAAIF,GACN,QACErC,EAAesC,GACfnB,GAAwB,KAMxC,SAASO,IACLV,EAAoB,SAASsB,GACzBb,EAAQnF,UAAS,WAAcmG,EAAaH,OAIpD,SAASX,IAGL,GAAI5B,EAAO2C,cAAgB3C,EAAO4C,cAAe,CAC7C,IAAIC,GAA4B,EAC5BC,EAAe9C,EAAO+C,UAM1B,OALA/C,EAAO+C,UAAY,WACfF,GAA4B,GAEhC7C,EAAO2C,YAAY,GAAI,KACvB3C,EAAO+C,UAAYD,EACZD,GAIf,SAAShB,IAKL,IAAImB,EAAgB,gBAAkBC,KAAKC,SAAW,IAClDC,EAAkB,SAAS9G,GACvBA,EAAM+G,SAAWpD,GACK,kBAAf3D,EAAMzC,MACyB,IAAtCyC,EAAMzC,KAAKyJ,QAAQL,IACnBN,GAAcrG,EAAMzC,KAAK+C,MAAMqG,EAAcZ,UAIjDpC,EAAOsD,iBACPtD,EAAOsD,iBAAiB,UAAWH,GAAiB,GAEpDnD,EAAOuD,YAAY,YAAaJ,GAGpClC,EAAoB,SAASsB,GACzBvC,EAAO2C,YAAYK,EAAgBT,EAAQ,MAInD,SAASR,IACL,IAAIyB,EAAU,IAAI1B,eAClB0B,EAAQC,MAAMV,UAAY,SAAS1G,GAC/B,IAAIkG,EAASlG,EAAMzC,KACnB8I,EAAaH,IAGjBtB,EAAoB,SAASsB,GACzBiB,EAAQE,MAAMf,YAAYJ,IAIlC,SAASN,IACL,IAAI0B,EAAOtC,EAAIuC,gBACf3C,EAAoB,SAASsB,GAGzB,IAAIsB,EAASxC,EAAIW,cAAc,UAC/B6B,EAAOC,mBAAqB,WACxBpB,EAAaH,GACbsB,EAAOC,mBAAqB,KAC5BH,EAAKI,YAAYF,GACjBA,EAAS,MAEbF,EAAKK,YAAYH,IAIzB,SAAS3B,IACLjB,EAAoB,SAASsB,GACzBxF,WAAW2F,EAAc,EAAGH,MAzJxC,CAyLkB,qBAAT9D,KAAyC,qBAAXuB,EAAyBzH,KAAOyH,EAASvB,Q,qDCzLhF,IAAIwF,EAAW,EAAQ,QACnBC,EAAiB,EAAQ,QAG7BhE,EAAO5D,QAAU,SAAUqE,EAAOwD,EAAOC,GACvC,IAAIC,EAAWC,EAUf,OAPEJ,GAE0C,mBAAlCG,EAAYF,EAAMI,cAC1BF,IAAcD,GACdH,EAASK,EAAqBD,EAAU3H,YACxC4H,IAAuBF,EAAQ1H,WAC/BwH,EAAevD,EAAO2D,GACjB3D,I,oDCfT,gFAEQ,yCACI,OAAO6D,EAAQC,IAClB,wIAJT,CAWGtI,QAAU,IAAK,SAASA,QAC1B,aACD,IAAIuI,MAAQ,6BAERC,aAAe,GAEfC,qBAAuB,OAEvBC,iBAAkB,EAClBC,kBACAC,SAAW,iCAAiCC,KAAKC,UAAUC,WAC3DC,aAAe,GACfC,WAAanC,KAAKoC,MAClBC,OACAC,OAAStC,KAAKuC,IACdC,QAAUxC,KAAKyC,KACfC,OAAS1C,KAAK2C,IACdC,SAAW5C,KAAK6C,MAChBC,OAAS9C,KAAK+C,IACdC,OAAShD,KAAKiD,IACdC,QAAU,GAEVC,OAAS,GASb,SAASC,mBAAmB,MAAO,IARlC,WACG,IACIhE,EADAiE,EAAgB,CAAC,MAAO,OAAQ,QAAS,OAAQ,QAAS,OAAQ,QAAS,QAAS,OAAQ,OAAQ,QAAS,QAAS,MAAO,OAAQ,MAAO,QAAS,SAAU,QAAS,OAAQ,MAAO,QAAS,OAAQ,QAAS,MAAO,MAAO,MAAO,SAAU,QAAS,OAAQ,MAAO,OAAQ,OAAQ,MAAO,OAAQ,QAAS,IAAK,OAAQ,MAAO,SAAU,QAAS,KAAM,UAAW,SACrWC,EAAMD,EAAclE,OAC3B,IAAIC,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACb+D,OAAOE,EAAcjE,IAAMY,KAAKqD,EAAcjE,KAJtD,GAUA+D,OAAOlD,OAASD,KAAKC,OACrBkD,OAAOR,IAAM,SAASY,GAClB,IAAIC,SAAgBD,EACpB,GAAc,WAAXC,GAAuBD,EAAIpE,OAAO,CACjC,IACIC,EADAqE,EAASC,iBAAiBH,EAAIpE,QAC3BmE,EAAMC,EAAIpE,OACjB,IAAIC,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACbqE,EAAOrE,GAAKY,KAAK2C,IAAIY,EAAInE,IAE7B,OAAOqE,EAEX,OAAOzD,KAAK2C,IAAIY,IAGpB,IAAII,qBAAuB,IACvBC,UAAY5D,KAAK6D,GAAG,IACpBC,YAAc,MAElB,SAASC,YAAYC,GAEb3B,OADD2B,EACUhE,KAAKoC,MAEL,SAASmB,GACd,OAAOA,GAMnB,SAASU,SAASC,GACdA,EAAQC,MAAMC,SAAW,WACzBF,EAAQC,MAAME,IAAM,EACpBH,EAAQC,MAAMG,KAAO,EACrBJ,EAAQC,MAAMI,QAAU,QACxBL,EAAQC,MAAMK,gBAAkBN,EAAQC,MAAMM,sBAAwB,MACtEP,EAAQC,MAAMO,mBAAsBR,EAAQC,MAAMQ,yBAA2B,UAC7ET,EAAQC,MAAMS,eAAiBV,EAAQC,MAAMU,qBAAuBX,EAAQC,MAAMW,kBAAoB,cAG1G,SAASC,kBAAkB/N,EAAMgO,EAAaC,EAAWC,GACrD5P,KAAK0B,KAAOA,EACZ1B,KAAK0P,YAAcA,EACnB1P,KAAK2P,UAAYA,EACjB3P,KAAK6P,UAAYD,EAAkB,GAAK,EAAI,EAGhD,SAASE,gBAAgBpO,EAAMkO,GAC3B5P,KAAK0B,KAAOA,EACZ1B,KAAK6P,UAAYD,EAAkB,GAAK,EAAI,EAGhD,SAASG,oBAAoBrO,EAAMsO,EAAYC,EAAaL,GACxD5P,KAAK0B,KAAOA,EACZ1B,KAAKiQ,YAAcA,EACnBjQ,KAAKgQ,WAAaA,EAClBhQ,KAAK6P,UAAYD,EAAkB,GAAK,EAAI,EAGhD,SAASM,oBAAoBxO,EAAMyO,EAAYC,GAC3CpQ,KAAK0B,KAAOA,EACZ1B,KAAKmQ,WAAaA,EAClBnQ,KAAKoQ,YAAcA,EAGvB,SAASC,eAAe3O,EAAM4O,GAC1BtQ,KAAK0B,KAAOA,EACZ1B,KAAKsQ,OAASA,EAGlB,SAASC,wBAAwBC,EAAad,GAC1C1P,KAAK0B,KAAO,mBACZ1B,KAAKwQ,YAAcA,EACnBxQ,KAAK0P,YAAcA,EAGvB,SAASe,mBAAmBD,GACxBxQ,KAAK0B,KAAO,cACZ1B,KAAKwQ,YAAcA,EAGvB,SAASE,4BAA4BhP,EAAM8O,GACvCxQ,KAAK0B,KAAOA,EACZ1B,KAAKwQ,YAAcA,EACnBxQ,KAAK0P,YAAcA,YAxDvBjB,aAAY,GA2DZ,IAAIkC,gBAAmB,WACnB,IAAIC,EAAS,EACb,OAAO,WACH,MAAO,uBAAwBA,GAHjB,GAOtB,SAASC,SAASC,EAAGC,EAAGC,GACpB,IAAIC,EAAGC,EAAGC,EAAGrH,EAAGsH,EAAGC,EAAGC,EAAGC,EAMzB,OALAzH,EAAIY,KAAK6C,MAAU,EAAJuD,GACfM,EAAQ,EAAJN,EAAQhH,EACZuH,EAAIL,GAAK,EAAID,GACbO,EAAIN,GAAK,EAAII,EAAIL,GACjBQ,EAAIP,GAAK,GAAK,EAAII,GAAKL,GACfjH,EAAI,GACR,KAAK,EAAGmH,EAAID,EAAGE,EAAIK,EAAGJ,EAAIE,EAAG,MAC7B,KAAK,EAAGJ,EAAIK,EAAGJ,EAAIF,EAAGG,EAAIE,EAAG,MAC7B,KAAK,EAAGJ,EAAII,EAAGH,EAAIF,EAAGG,EAAII,EAAG,MAC7B,KAAK,EAAGN,EAAII,EAAGH,EAAII,EAAGH,EAAIH,EAAG,MAC7B,KAAK,EAAGC,EAAIM,EAAGL,EAAIG,EAAGF,EAAIH,EAAG,MAC7B,KAAK,EAAGC,EAAID,EAAGE,EAAIG,EAAGF,EAAIG,EAAG,MAEjC,MAAO,CAAEL,EACLC,EACCC,GAGT,SAASK,SAASP,EAAGC,EAAGC,GACpB,IAEIL,EAFArD,EAAM/C,KAAK+C,IAAIwD,EAAGC,EAAGC,GAAIxD,EAAMjD,KAAKiD,IAAIsD,EAAGC,EAAGC,GAC9CM,EAAIhE,EAAME,EAEVoD,EAAa,IAARtD,EAAY,EAAIgE,EAAIhE,EACzBuD,EAAIvD,EAAM,IAEd,OAAQA,GACJ,KAAKE,EAAKmD,EAAI,EAAG,MACjB,KAAKG,EAAGH,EAAKI,EAAIC,EAAKM,GAAKP,EAAIC,EAAI,EAAG,GAAIL,GAAK,EAAIW,EAAG,MACtD,KAAKP,EAAGJ,EAAKK,EAAIF,EAAS,EAAJQ,EAAOX,GAAK,EAAIW,EAAG,MACzC,KAAKN,EAAGL,EAAKG,EAAIC,EAAS,EAAJO,EAAOX,GAAK,EAAIW,EAAG,MAG7C,MAAO,CACFX,EACAC,EACAC,GAIT,SAASU,mBAAmBC,EAAMC,GAC9B,IAAIC,EAAML,SAAkB,IAATG,EAAM,GAAgB,IAATA,EAAM,GAAgB,IAATA,EAAM,IAQnD,OAPAE,EAAI,IAAMD,EACNC,EAAI,GAAK,EACTA,EAAI,GAAK,EAEJA,EAAI,IAAM,IACfA,EAAI,GAAK,GAENhB,SAASgB,EAAI,GAAGA,EAAI,GAAGA,EAAI,IAGtC,SAASC,mBAAmBH,EAAMC,GAC9B,IAAIC,EAAML,SAAkB,IAATG,EAAM,GAAgB,IAATA,EAAM,GAAgB,IAATA,EAAM,IAQnD,OAPAE,EAAI,IAAMD,EACNC,EAAI,GAAK,EACTA,EAAI,GAAK,EAEJA,EAAI,GAAK,IACdA,EAAI,GAAK,GAENhB,SAASgB,EAAI,GAAGA,EAAI,GAAGA,EAAI,IAGtC,SAASE,YAAYJ,EAAMC,GACvB,IAAIC,EAAML,SAAkB,IAATG,EAAM,GAAgB,IAATA,EAAM,GAAgB,IAATA,EAAM,IAQnD,OAPAE,EAAI,IAAMD,EAAO,IACbC,EAAI,GAAK,EACTA,EAAI,IAAM,EAELA,EAAI,GAAK,IACdA,EAAI,IAAM,GAEPhB,SAASgB,EAAI,GAAGA,EAAI,GAAGA,EAAI,IAGtC,IAAIG,SAAY,WACZ,IACIlI,EACAmI,EAFAC,EAAW,GAGf,IAAIpI,EAAE,EAAEA,EAAE,IAAIA,GAAG,EACbmI,EAAMnI,EAAEZ,SAAS,IACjBgJ,EAASpI,GAAmB,GAAdmI,EAAIpI,OAAc,IAAMoI,EAAMA,EAGhD,OAAO,SAAShB,EAAGC,EAAGC,GAUlB,OATGF,EAAE,IACDA,EAAI,GAELC,EAAE,IACDA,EAAI,GAELC,EAAE,IACDA,EAAI,GAED,IAAMe,EAASjB,GAAKiB,EAAShB,GAAKgB,EAASf,IAnB3C,GAsBf,SAASgB,aACTA,UAAUhO,UAAY,CACrBiO,aAAc,SAAUC,EAAWnO,GAC/B,GAAIlE,KAAKsS,KAAKD,GAEV,IADA,IAAIrE,EAAMhO,KAAKsS,KAAKD,GAAWxI,OACtBC,EAAI,EAAGA,EAAIkE,EAAKlE,IACrB9J,KAAKsS,KAAKD,GAAWvI,GAAG5F,IAIpC6G,iBAAkB,SAAUsH,EAAWzI,GAMtC,OALQ5J,KAAKsS,KAAKD,KACXrS,KAAKsS,KAAKD,GAAa,IAE3BrS,KAAKsS,KAAKD,GAAWE,KAAK3I,GAEtB,WACN5J,KAAKwS,oBAAoBH,EAAWzI,IACnC6I,KAAKzS,OAERwS,oBAAqB,SAAUH,EAAUzI,GACrC,GAAKA,GAEC,GAAG5J,KAAKsS,KAAKD,GAAW,CAC1B,IAAIvI,EAAI,EAAGkE,EAAMhO,KAAKsS,KAAKD,GAAWxI,OACtC,MAAMC,EAAEkE,EACDhO,KAAKsS,KAAKD,GAAWvI,KAAOF,IAC3B5J,KAAKsS,KAAKD,GAAWK,OAAO5I,EAAE,GAC9BA,GAAI,EACJkE,GAAO,GAEXlE,GAAK,EAEL9J,KAAKsS,KAAKD,GAAWxI,SACrB7J,KAAKsS,KAAKD,GAAa,YAZ3BrS,KAAKsS,KAAKD,GAAa,OAiBhC,IAAIM,iBAAoB,WACvB,SAASC,EAAmBlR,EAAMsM,GACjC,IAAqB6E,EAAjB/I,EAAI,EAAGgJ,EAAM,GACjB,OAAOpR,GACN,IAAK,QACL,IAAK,SACJmR,EAAQ,EACR,MACD,QACCA,EAAQ,IACR,MAEF,IAAI/I,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EACxBgJ,EAAIP,KAAKM,GAEV,OAAOC,EAER,SAASH,EAAiBjR,EAAMsM,GAC/B,MAAY,YAATtM,EACK,IAAIqR,aAAa/E,GACN,UAATtM,EACF,IAAIsR,WAAWhF,GACJ,WAATtM,EACF,IAAIuR,kBAAkBjF,QADvB,EAIR,MAAgC,oBAAtBiF,mBAA4D,oBAAjBF,aAC7CJ,EAEAC,EA7Bc,GAiCvB,SAASxE,iBAAiBJ,GACzB,OAAOrM,MAAM8C,MAAM,KAAK,CAACoF,OAAOmE,IAEjC,SAASkF,SAASxR,GAEjB,OAAOqH,SAASoK,gBAAgBhH,MAAOzK,GAExC,SAAS0R,UAAU1R,GAElB,OAAOqH,SAASU,cAAc/H,GAE/B,SAAS2R,4BACTA,yBAAyBlP,UAAY,CACpCmP,mBAAoB,SAASC,IACiB,IAA1CvT,KAAKwT,kBAAkB1I,QAAQyI,KAC3BvT,KAAKwT,kBAAkBjB,KAAKgB,GAC5BvT,KAAKqC,UAAUiR,mBAAmBtT,MACrCA,KAAKyT,aAAc,IAGxBC,yBAA0B,WACtB1T,KAAK2T,MAAO,EACZ,IAAI7J,EAAGkE,EAAMhO,KAAKwT,kBAAkB3J,OACpC,IAAIC,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACb9J,KAAKwT,kBAAkB1J,GAAG8J,WACvB5T,KAAKwT,kBAAkB1J,GAAG6J,OACzB3T,KAAK2T,MAAO,IAIxBE,6BAA8B,SAASxR,GACnCrC,KAAKqC,UAAYA,EACjBrC,KAAKwT,kBAAoB,GACzBxT,KAAK2T,MAAO,EACZ3T,KAAKyT,aAAc,IAGxB,IAAIK,aAAgB,WAEnB,IAAIC,EAAiB,CACdC,EAAE,cACFC,EAAE,WACFC,EAAE,SACFC,EAAE,UACFC,EAAE,SACFC,EAAE,UACFC,EAAE,cACFC,EAAE,aACFC,EAAE,aACFC,EAAE,aACFC,GAAG,aACHC,GAAG,YACHC,GAAG,MACHC,GAAG,aACHC,GAAG,QACHC,GAAG,cAGV,OAAO,SAASC,GACf,OAAOjB,EAAeiB,IAAS,IAtBd;;;;;;;;IAsDfC,OAAU,WAEV,IAAIC,EAAOxK,KAAKyK,IACZC,EAAO1K,KAAK2K,IACZC,EAAO5K,KAAK6K,IACZC,EAAO9K,KAAKoC,MAEhB,SAAS2I,IAiBL,OAhBAzV,KAAKuB,MAAM,GAAK,EAChBvB,KAAKuB,MAAM,GAAK,EAChBvB,KAAKuB,MAAM,GAAK,EAChBvB,KAAKuB,MAAM,GAAK,EAChBvB,KAAKuB,MAAM,GAAK,EAChBvB,KAAKuB,MAAM,GAAK,EAChBvB,KAAKuB,MAAM,GAAK,EAChBvB,KAAKuB,MAAM,GAAK,EAChBvB,KAAKuB,MAAM,GAAK,EAChBvB,KAAKuB,MAAM,GAAK,EAChBvB,KAAKuB,MAAM,IAAM,EACjBvB,KAAKuB,MAAM,IAAM,EACjBvB,KAAKuB,MAAM,IAAM,EACjBvB,KAAKuB,MAAM,IAAM,EACjBvB,KAAKuB,MAAM,IAAM,EACjBvB,KAAKuB,MAAM,IAAM,EACVvB,KAGX,SAAS0V,EAAOC,GACZ,GAAa,IAAVA,EACC,OAAO3V,KAEX,IAAI4V,EAAOV,EAAKS,GACZE,EAAOT,EAAKO,GAChB,OAAO3V,KAAK8V,GAAGF,GAAOC,EAAO,EAAG,EAAGA,EAAOD,EAAM,EAAG,EAAG,EAAI,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,GAGjF,SAASG,EAAQJ,GACb,GAAa,IAAVA,EACC,OAAO3V,KAEX,IAAI4V,EAAOV,EAAKS,GACZE,EAAOT,EAAKO,GAChB,OAAO3V,KAAK8V,GAAG,EAAG,EAAG,EAAG,EAAG,EAAGF,GAAOC,EAAM,EAAG,EAAGA,EAAOD,EAAM,EAAG,EAAG,EAAG,EAAG,GAG9E,SAASI,EAAQL,GACb,GAAa,IAAVA,EACC,OAAO3V,KAEX,IAAI4V,EAAOV,EAAKS,GACZE,EAAOT,EAAKO,GAChB,OAAO3V,KAAK8V,GAAGF,EAAO,EAAIC,EAAM,EAAG,EAAG,EAAG,EAAG,GAAIA,EAAO,EAAID,EAAM,EAAG,EAAG,EAAG,EAAG,GAGjF,SAASK,EAAQN,GACb,GAAa,IAAVA,EACC,OAAO3V,KAEX,IAAI4V,EAAOV,EAAKS,GACZE,EAAOT,EAAKO,GAChB,OAAO3V,KAAK8V,GAAGF,GAAOC,EAAO,EAAG,EAAGA,EAAOD,EAAM,EAAG,EAAG,EAAI,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,GAGjF,SAASM,EAAMC,EAAGC,GACd,OAAOpW,KAAK8V,GAAG,EAAGM,EAAID,EAAI,EAAG,EAAG,GAGpC,SAASE,EAAKC,EAAIC,GACd,OAAOvW,KAAKkW,MAAMZ,EAAKgB,GAAKhB,EAAKiB,IAGrC,SAASC,EAAaF,EAAIX,GACtB,IAAIC,EAAOV,EAAKS,GACZE,EAAOT,EAAKO,GAChB,OAAO3V,KAAK8V,GAAGF,EAAMC,EAAO,EAAG,GAAIA,EAAOD,EAAM,EAAG,EAAG,EAAI,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,GACxEE,GAAG,EAAG,EAAI,EAAG,EAAGR,EAAKgB,GAAM,EAAG,EAAG,EAAG,EAAI,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,GAC3DR,GAAGF,GAAOC,EAAO,EAAG,EAAGA,EAAOD,EAAM,EAAG,EAAG,EAAI,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,GAI1E,SAASa,EAAMN,EAAIC,EAAIM,GAInB,OAHIA,GAAa,IAAPA,IACNA,EAAK,GAEC,IAAPP,GAAmB,IAAPC,GAAmB,IAAPM,EAChB1W,KAEJA,KAAK8V,GAAGK,EAAI,EAAG,EAAG,EAAG,EAAGC,EAAI,EAAG,EAAG,EAAG,EAAGM,EAAI,EAAG,EAAG,EAAG,EAAG,GAGnE,SAASC,EAAaC,EAAGzF,EAAG0F,EAAGpF,EAAGqF,EAAG1F,EAAGF,EAAGJ,EAAGhH,EAAGiN,EAAGC,EAAGC,EAAGC,EAAGC,EAAGC,EAAG/F,GAiB/D,OAhBArR,KAAKuB,MAAM,GAAKqV,EAChB5W,KAAKuB,MAAM,GAAK4P,EAChBnR,KAAKuB,MAAM,GAAKsV,EAChB7W,KAAKuB,MAAM,GAAKkQ,EAChBzR,KAAKuB,MAAM,GAAKuV,EAChB9W,KAAKuB,MAAM,GAAK6P,EAChBpR,KAAKuB,MAAM,GAAK2P,EAChBlR,KAAKuB,MAAM,GAAKuP,EAChB9Q,KAAKuB,MAAM,GAAKuI,EAChB9J,KAAKuB,MAAM,GAAKwV,EAChB/W,KAAKuB,MAAM,IAAMyV,EACjBhX,KAAKuB,MAAM,IAAM0V,EACjBjX,KAAKuB,MAAM,IAAM2V,EACjBlX,KAAKuB,MAAM,IAAM4V,EACjBnX,KAAKuB,MAAM,IAAM6V,EACjBpX,KAAKuB,MAAM,IAAM8P,EACVrR,KAGX,SAASqX,EAAUC,EAAIC,EAAIC,GAEvB,OADAA,EAAKA,GAAM,EACD,IAAPF,GAAmB,IAAPC,GAAmB,IAAPC,EAChBxX,KAAK8V,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAEwB,EAAGC,EAAGC,EAAG,GAE7CxX,KAGX,SAASyX,EAAUC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIpU,EAAIqU,EAAIC,EAAIC,EAAIC,EAAIC,EAAIhW,EAAIiW,EAAIC,EAAIC,EAAIC,GAE3E,IAAIC,EAAKxY,KAAKuB,MAEd,GAAU,IAAPmW,GAAmB,IAAPC,GAAmB,IAAPC,GAAmB,IAAPC,GAAmB,IAAPC,GAAmB,IAAPpU,GAAmB,IAAPqU,GAAmB,IAAPC,GAAmB,IAAPC,GAAmB,IAAPC,GAAmB,IAAPC,GAAmB,IAAPhW,EASnI,OANIqW,EAAG,IAAMA,EAAG,IAAMd,EAAKc,EAAG,IAAMJ,EAChCI,EAAG,IAAMA,EAAG,IAAM9U,EAAK8U,EAAG,IAAMH,EAChCG,EAAG,IAAMA,EAAG,IAAML,EAAKK,EAAG,IAAMF,EAChCE,EAAG,IAAMA,EAAG,IAAMD,EAEtBvY,KAAKyY,qBAAsB,EACpBzY,KAGX,IAAI0Y,EAAKF,EAAG,GACRG,EAAKH,EAAG,GACRI,EAAKJ,EAAG,GACRK,EAAKL,EAAG,GACRM,EAAKN,EAAG,GACRxX,EAAKwX,EAAG,GACRO,EAAKP,EAAG,GACRQ,EAAKR,EAAG,GACRS,EAAKT,EAAG,GACRU,EAAKV,EAAG,GACRW,EAAKX,EAAG,IACRzX,EAAKyX,EAAG,IACRY,EAAKZ,EAAG,IACRa,EAAKb,EAAG,IACRc,EAAKd,EAAG,IACRe,EAAKf,EAAG,IA4BZ,OArBAA,EAAG,GAAKE,EAAKhB,EAAKiB,EAAKb,EAAKc,EAAKX,EAAKY,EAAKT,EAC3CI,EAAG,GAAKE,EAAKf,EAAKgB,EAAKjV,EAAKkV,EAAKV,EAAKW,EAAKR,EAC3CG,EAAG,GAAKE,EAAKd,EAAKe,EAAKZ,EAAKa,EAAKT,EAAKU,EAAKP,EAC3CE,EAAG,GAAKE,EAAKb,EAAKc,EAAKX,EAAKY,EAAKzW,EAAK0W,EAAKN,EAE3CC,EAAG,GAAKM,EAAKpB,EAAK1W,EAAK8W,EAAKiB,EAAKd,EAAKe,EAAKZ,EAC3CI,EAAG,GAAKM,EAAKnB,EAAK3W,EAAK0C,EAAKqV,EAAKb,EAAKc,EAAKX,EAC3CG,EAAG,GAAKM,EAAKlB,EAAK5W,EAAK+W,EAAKgB,EAAKZ,EAAKa,EAAKV,EAC3CE,EAAG,GAAKM,EAAKjB,EAAK7W,EAAKgX,EAAKe,EAAK5W,EAAK6W,EAAKT,EAE3CC,EAAG,GAAKS,EAAKvB,EAAKwB,EAAKpB,EAAKqB,EAAKlB,EAAKlX,EAAKqX,EAC3CI,EAAG,GAAKS,EAAKtB,EAAKuB,EAAKxV,EAAKyV,EAAKjB,EAAKnX,EAAKsX,EAC3CG,EAAG,IAAMS,EAAKrB,EAAKsB,EAAKnB,EAAKoB,EAAKhB,EAAKpX,EAAKuX,EAC5CE,EAAG,IAAMS,EAAKpB,EAAKqB,EAAKlB,EAAKmB,EAAKhX,EAAKpB,EAAKwX,EAE5CC,EAAG,IAAMY,EAAK1B,EAAK2B,EAAKvB,EAAKwB,EAAKrB,EAAKsB,EAAKnB,EAC5CI,EAAG,IAAMY,EAAKzB,EAAK0B,EAAK3V,EAAK4V,EAAKpB,EAAKqB,EAAKlB,EAC5CG,EAAG,IAAMY,EAAKxB,EAAKyB,EAAKtB,EAAKuB,EAAKnB,EAAKoB,EAAKjB,EAC5CE,EAAG,IAAMY,EAAKvB,EAAKwB,EAAKrB,EAAKsB,EAAKnX,EAAKoX,EAAKhB,EAE5CvY,KAAKyY,qBAAsB,EACpBzY,KAGX,SAASwZ,IAKL,OAJIxZ,KAAKyY,sBACLzY,KAAKyZ,YAAgC,IAAlBzZ,KAAKuB,MAAM,IAA8B,IAAlBvB,KAAKuB,MAAM,IAA8B,IAAlBvB,KAAKuB,MAAM,IAA8B,IAAlBvB,KAAKuB,MAAM,IAA8B,IAAlBvB,KAAKuB,MAAM,IAA8B,IAAlBvB,KAAKuB,MAAM,IAA8B,IAAlBvB,KAAKuB,MAAM,IAA8B,IAAlBvB,KAAKuB,MAAM,IAA8B,IAAlBvB,KAAKuB,MAAM,IAA8B,IAAlBvB,KAAKuB,MAAM,IAA+B,IAAnBvB,KAAKuB,MAAM,KAAgC,IAAnBvB,KAAKuB,MAAM,KAAgC,IAAnBvB,KAAKuB,MAAM,KAAgC,IAAnBvB,KAAKuB,MAAM,KAAgC,IAAnBvB,KAAKuB,MAAM,KAAgC,IAAnBvB,KAAKuB,MAAM,KAC5XvB,KAAKyY,qBAAsB,GAExBzY,KAAKyZ,UAGhB,SAASC,EAAOC,GACZ,IAAI7P,EAAI,EACR,MAAOA,EAAI,GAAI,CACX,GAAG6P,EAAKpY,MAAMuI,KAAO9J,KAAKuB,MAAMuI,GAC5B,OAAO,EAEXA,GAAG,EAEP,OAAO,EAGX,SAAS8P,EAAMD,GACX,IAAI7P,EACJ,IAAIA,EAAE,EAAEA,EAAE,GAAGA,GAAG,EACZ6P,EAAKpY,MAAMuI,GAAK9J,KAAKuB,MAAMuI,GAInC,SAAS+P,EAAetY,GACpB,IAAIuI,EACJ,IAAIA,EAAE,EAAEA,EAAE,GAAGA,GAAG,EACZ9J,KAAKuB,MAAMuI,GAAKvI,EAAMuI,GAI9B,SAASgQ,EAAaC,EAAGC,EAAGC,GAExB,MAAO,CACHF,EAAGA,EAAI/Z,KAAKuB,MAAM,GAAKyY,EAAIha,KAAKuB,MAAM,GAAK0Y,EAAIja,KAAKuB,MAAM,GAAKvB,KAAKuB,MAAM,IAC1EyY,EAAGD,EAAI/Z,KAAKuB,MAAM,GAAKyY,EAAIha,KAAKuB,MAAM,GAAK0Y,EAAIja,KAAKuB,MAAM,GAAKvB,KAAKuB,MAAM,IAC1E0Y,EAAGF,EAAI/Z,KAAKuB,MAAM,GAAKyY,EAAIha,KAAKuB,MAAM,GAAK0Y,EAAIja,KAAKuB,MAAM,IAAMvB,KAAKuB,MAAM,KAOnF,SAAS2Y,EAASH,EAAGC,EAAGC,GACpB,OAAOF,EAAI/Z,KAAKuB,MAAM,GAAKyY,EAAIha,KAAKuB,MAAM,GAAK0Y,EAAIja,KAAKuB,MAAM,GAAKvB,KAAKuB,MAAM,IAElF,SAAS4Y,EAASJ,EAAGC,EAAGC,GACpB,OAAOF,EAAI/Z,KAAKuB,MAAM,GAAKyY,EAAIha,KAAKuB,MAAM,GAAK0Y,EAAIja,KAAKuB,MAAM,GAAKvB,KAAKuB,MAAM,IAElF,SAAS6Y,EAASL,EAAGC,EAAGC,GACpB,OAAOF,EAAI/Z,KAAKuB,MAAM,GAAKyY,EAAIha,KAAKuB,MAAM,GAAK0Y,EAAIja,KAAKuB,MAAM,IAAMvB,KAAKuB,MAAM,IAGnF,SAAS8Y,IACL,IAAIC,EAActa,KAAKuB,MAAM,GAAKvB,KAAKuB,MAAM,GAAKvB,KAAKuB,MAAM,GAAKvB,KAAKuB,MAAM,GACzEqV,EAAI5W,KAAKuB,MAAM,GAAG+Y,EAClBnJ,GAAMnR,KAAKuB,MAAM,GAAG+Y,EACpBzD,GAAM7W,KAAKuB,MAAM,GAAG+Y,EACpB7I,EAAIzR,KAAKuB,MAAM,GAAG+Y,EAClBxD,GAAK9W,KAAKuB,MAAM,GAAKvB,KAAKuB,MAAM,IAAMvB,KAAKuB,MAAM,GAAKvB,KAAKuB,MAAM,KAAK+Y,EACtElJ,IAAOpR,KAAKuB,MAAM,GAAKvB,KAAKuB,MAAM,IAAMvB,KAAKuB,MAAM,GAAKvB,KAAKuB,MAAM,KAAK+Y,EACxEC,EAAgB,IAAItF,OAOxB,OANAsF,EAAchZ,MAAM,GAAKqV,EACzB2D,EAAchZ,MAAM,GAAK4P,EACzBoJ,EAAchZ,MAAM,GAAKsV,EACzB0D,EAAchZ,MAAM,GAAKkQ,EACzB8I,EAAchZ,MAAM,IAAMuV,EAC1ByD,EAAchZ,MAAM,IAAM6P,EACnBmJ,EAGX,SAASC,EAAaC,GAClB,IAAIF,EAAgBva,KAAKqa,mBACzB,OAAOE,EAAcG,kBAAkBD,EAAG,GAAIA,EAAG,GAAIA,EAAG,IAAM,GAGlE,SAASE,EAAcC,GACnB,IAAI9Q,EAAGkE,EAAM4M,EAAI/Q,OAAQgR,EAAS,GAClC,IAAI/Q,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACb+Q,EAAO/Q,GAAK0Q,EAAaI,EAAI9Q,IAEjC,OAAO+Q,EAGX,SAASC,EAAoBC,EAAKC,EAAKC,GACnC,IAAInI,EAAMH,iBAAiB,UAAW,GACtC,GAAG3S,KAAKwZ,aACJ1G,EAAI,GAAKiI,EAAI,GACbjI,EAAI,GAAKiI,EAAI,GACbjI,EAAI,GAAKkI,EAAI,GACblI,EAAI,GAAKkI,EAAI,GACblI,EAAI,GAAKmI,EAAI,GACbnI,EAAI,GAAKmI,EAAI,OACV,CACH,IAAIC,EAAKlb,KAAKuB,MAAM,GAAIgY,EAAKvZ,KAAKuB,MAAM,GAAI4Z,EAAKnb,KAAKuB,MAAM,GAAI6Z,EAAKpb,KAAKuB,MAAM,GAAI8Z,EAAMrb,KAAKuB,MAAM,IAAK+Z,EAAMtb,KAAKuB,MAAM,IAC3HuR,EAAI,GAAKiI,EAAI,GAAKG,EAAKH,EAAI,GAAKI,EAAKE,EACrCvI,EAAI,GAAKiI,EAAI,GAAKxB,EAAKwB,EAAI,GAAKK,EAAKE,EACrCxI,EAAI,GAAKkI,EAAI,GAAKE,EAAKF,EAAI,GAAKG,EAAKE,EACrCvI,EAAI,GAAKkI,EAAI,GAAKzB,EAAKyB,EAAI,GAAKI,EAAKE,EACrCxI,EAAI,GAAKmI,EAAI,GAAKC,EAAKD,EAAI,GAAKE,EAAKE,EACrCvI,EAAI,GAAKmI,EAAI,GAAK1B,EAAK0B,EAAI,GAAKG,EAAKE,EAEzC,OAAOxI,EAGX,SAAS4H,EAAkBX,EAAEC,EAAEC,GAC3B,IAAInH,EAMJ,OAJIA,EADD9S,KAAKwZ,aACE,CAACO,EAAEC,EAAEC,GAEL,CAACF,EAAI/Z,KAAKuB,MAAM,GAAKyY,EAAIha,KAAKuB,MAAM,GAAK0Y,EAAIja,KAAKuB,MAAM,GAAKvB,KAAKuB,MAAM,IAAIwY,EAAI/Z,KAAKuB,MAAM,GAAKyY,EAAIha,KAAKuB,MAAM,GAAK0Y,EAAIja,KAAKuB,MAAM,GAAKvB,KAAKuB,MAAM,IAAIwY,EAAI/Z,KAAKuB,MAAM,GAAKyY,EAAIha,KAAKuB,MAAM,GAAK0Y,EAAIja,KAAKuB,MAAM,IAAMvB,KAAKuB,MAAM,KAElOuR,EAGX,SAASyI,EAAwBxB,EAAGC,GAChC,GAAGha,KAAKwZ,aACJ,OAAOO,EAAI,IAAMC,EAErB,IAAIxB,EAAKxY,KAAKuB,MACd,OAAOmJ,KAAKoC,MAAyC,KAAlCiN,EAAIvB,EAAG,GAAKwB,EAAIxB,EAAG,GAAKA,EAAG,MAAc,IAAI,IAAK9N,KAAKoC,MAAyC,KAAlCiN,EAAIvB,EAAG,GAAKwB,EAAIxB,EAAG,GAAKA,EAAG,MAAc,IAG9H,SAASgD,IAKL,IAAI1R,EAAI,EACJvI,EAAQvB,KAAKuB,MACbka,EAAW,YACXzK,EAAI,IACR,MAAMlH,EAAE,GACJ2R,GAAYjG,EAAKjU,EAAMuI,GAAGkH,GAAGA,EAC7ByK,GAAkB,KAAN3R,EAAW,IAAI,IAC3BA,GAAK,EAET,OAAO2R,EAGX,SAASC,EAAoBzN,GACzB,IAAI+C,EAAI,IACR,OAAI/C,EAAM,MAAYA,EAAM,GAAOA,GAAO,MAAYA,EAAM,EACjDuH,EAAKvH,EAAM+C,GAAKA,EAEpB/C,EAGX,SAAS0N,IAKL,IAAIpa,EAAQvB,KAAKuB,MACbqa,EAAKF,EAAoBna,EAAM,IAC/Bf,EAAKkb,EAAoBna,EAAM,IAC/BpB,EAAKub,EAAoBna,EAAM,IAC/Bsa,EAAKH,EAAoBna,EAAM,IAC/Bua,EAAKJ,EAAoBna,EAAM,KAC/Bwa,EAAKL,EAAoBna,EAAM,KACnC,MAAO,UAAYqa,EAAK,IAAMpb,EAAK,IAAML,EAAK,IAAM0b,EAAK,IAAMC,EAAK,IAAMC,EAAK,IAGnF,OAAO,WACH/b,KAAKyV,MAAQA,EACbzV,KAAK0V,OAASA,EACd1V,KAAK+V,QAAUA,EACf/V,KAAKgW,QAAUA,EACfhW,KAAKiW,QAAUA,EACfjW,KAAKqW,KAAOA,EACZrW,KAAKwW,aAAeA,EACpBxW,KAAKkW,MAAQA,EACblW,KAAKyW,MAAQA,EACbzW,KAAK2W,aAAeA,EACpB3W,KAAKqX,UAAYA,EACjBrX,KAAKyX,UAAYA,EACjBzX,KAAK8Z,aAAeA,EACpB9Z,KAAKka,SAAWA,EAChBla,KAAKma,SAAWA,EAChBna,KAAKoa,SAAWA,EAChBpa,KAAK0a,kBAAoBA,EACzB1a,KAAK8a,oBAAsBA,EAC3B9a,KAAKub,wBAA0BA,EAC/Bvb,KAAKwb,MAAQA,EACbxb,KAAK2b,QAAUA,EACf3b,KAAK4Z,MAAQA,EACb5Z,KAAK6Z,eAAiBA,EACtB7Z,KAAK0Z,OAASA,EACd1Z,KAAK2a,cAAgBA,EACrB3a,KAAKwa,aAAeA,EACpBxa,KAAKqa,iBAAmBA,EACxBra,KAAK8V,GAAK9V,KAAKyX,UACfzX,KAAKwZ,WAAaA,EAClBxZ,KAAKyZ,WAAY,EACjBzZ,KAAKyY,qBAAsB,EAE3BzY,KAAKuB,MAAQoR,iBAAiB,UAAW,IACzC3S,KAAKyV,SA3XA,IAuZb,SAAWuG,EAAMC,GAIb,IASIC,EATAzU,EAASzH,KACTmc,EAAQ,IACRC,EAAS,EACTC,EAAS,GACTC,EAAU,SACVC,EAAaN,EAAKhP,IAAIkP,EAAOC,GAC7BI,EAAeP,EAAKhP,IAAI,EAAGoP,GAC3BI,EAA0B,EAAfD,EACXE,EAAOP,EAAQ,EAOnB,SAASQ,EAAWC,EAAMC,EAASjT,GAC/B,IAAIkT,EAAM,GACVD,GAAuB,IAAZA,EAAoB,CAAEE,SAAS,GAAUF,GAAW,GAG/D,IAAIG,EAAYC,EAAOC,EACnBL,EAAQE,QAAU,CAACH,EAAMO,EAASnB,IACpB,OAATY,EAAiBQ,IAAaR,EAAM,GAAIE,GAG7CO,EAAO,IAAIC,EAAKR,GAIhBS,EAAO,WACP,IAAIpG,EAAIkG,EAAKnM,EAAEkL,GACX3K,EAAI8K,EACJxC,EAAI,EACR,MAAO5C,EAAIqF,EACPrF,GAAKA,EAAI4C,GAAKoC,EACd1K,GAAK0K,EACLpC,EAAIsD,EAAKnM,EAAE,GAEf,MAAOiG,GAAKsF,EACRtF,GAAK,EACL1F,GAAK,EACLsI,KAAO,EAEX,OAAQ5C,EAAI4C,GAAKtI,GAWrB,OARA8L,EAAKC,MAAQ,WAAa,OAAmB,EAAZH,EAAKnM,EAAE,IACxCqM,EAAKE,MAAQ,WAAa,OAAOJ,EAAKnM,EAAE,GAAK,YAC7CqM,EAAKG,OAASH,EAGdN,EAAOE,EAASE,EAAKM,GAAI3B,IAGjBa,EAAQe,MAAQhU,GACxB,SAAS2T,EAAMX,EAAMiB,EAAcC,GAU/B,OATIA,IAEIA,EAAMH,GAAKI,EAAKD,EAAOT,GAE3BE,EAAKO,MAAQ,WAAa,OAAOC,EAAKV,EAAM,MAK5CQ,GAAgB5B,EAAKK,GAAWiB,EAAaX,GAIrCW,IAEZA,EACAP,EACA,WAAYH,EAAUA,EAAQpV,OAAUzH,MAAQic,EAChDY,EAAQiB,OAchB,SAASR,EAAKR,GACV,IAAIvL,EAAGyM,EAASlB,EAAIjT,OAChBoU,EAAKje,KAAM8J,EAAI,EAAGiN,EAAIkH,EAAGnU,EAAImU,EAAGlH,EAAI,EAAGhG,EAAIkN,EAAGN,EAAI,GAGjDK,IAAUlB,EAAM,CAACkB,MAGtB,MAAOlU,EAAIqS,EACPpL,EAAEjH,GAAKA,IAEX,IAAKA,EAAI,EAAGA,EAAIqS,EAAOrS,IACnBiH,EAAEjH,GAAKiH,EAAEgG,EAAI2F,EAAQ3F,EAAI+F,EAAIhT,EAAIkU,IAAWzM,EAAIR,EAAEjH,KAClDiH,EAAEgG,GAAKxF,EAIX0M,EAAG/M,EAAI,SAASgN,GAEZ,IAAI3M,EAAGN,EAAI,EACPnH,EAAImU,EAAGnU,EAAGiN,EAAIkH,EAAGlH,EAAGhG,EAAIkN,EAAGN,EAC/B,MAAOO,IACH3M,EAAIR,EAAEjH,EAAI4S,EAAQ5S,EAAI,GACtBmH,EAAIA,EAAIkL,EAAQpL,EAAE2L,GAAS3L,EAAEjH,GAAKiH,EAAEgG,EAAI2F,EAAQ3F,EAAIxF,KAAQR,EAAEgG,GAAKxF,IAGvE,OADA0M,EAAGnU,EAAIA,EAAGmU,EAAGlH,EAAIA,EACV9F,GAWf,SAAS8M,EAAK3M,EAAGG,GAIb,OAHAA,EAAEzH,EAAIsH,EAAEtH,EACRyH,EAAEwF,EAAI3F,EAAE2F,EACRxF,EAAEoM,EAAIvM,EAAEuM,EAAEvZ,QACHmN,EAOX,SAAS2L,EAAQiB,EAAKC,GAClB,IAAqC7K,EAAjC8K,EAAS,GAAIC,SAAcH,EAC/B,GAAIC,GAAgB,UAAPE,EACT,IAAK/K,KAAQ4K,EACT,IAAME,EAAO9L,KAAK2K,EAAQiB,EAAI5K,GAAO6K,EAAQ,IAAO,MAAOtH,IAGnE,OAAQuH,EAAOxU,OAASwU,EAAgB,UAAPC,EAAkBH,EAAMA,EAAM,KAQnE,SAASlB,EAAOL,EAAME,GAClB,IAA4ByB,EAAxBC,EAAa5B,EAAO,GAAW7F,EAAI,EACvC,MAAOA,EAAIyH,EAAW3U,OAClBiT,EAAIJ,EAAO3F,GACP2F,GAAS6B,GAAyB,GAAhBzB,EAAIJ,EAAO3F,IAAWyH,EAAWC,WAAW1H,KAEtE,OAAOoG,EAASL,GAQpB,SAASM,IACL,IACI,GAAIlB,EAAc,OAAOiB,EAASjB,EAAWwC,YAAYvC,IACzD,IAAIwC,EAAM,IAAIC,WAAWzC,GAEzB,OADC1U,EAAOoX,QAAUpX,EAAOqX,UAAUC,gBAAgBJ,GAC5CxB,EAASwB,GAClB,MAAO7H,GACL,IAAI/R,EAAU0C,EAAOiF,UACjBsS,EAAUja,GAAWA,EAAQia,QACjC,MAAO,EAAE,IAAIC,KAAQxX,EAAQuX,EAASvX,EAAOyX,OAAQ/B,EAASnB,KAQtE,SAASmB,EAASvG,GACd,OAAO5U,OAAOmd,aAAa1a,MAAM,EAAGmS,GA3GxCqF,EAAK,OAASK,GAAWK,EAqHzBM,EAAOhB,EAAKtR,SAAUqR,IArM1B,CA8MI,GACAnO,QAEJ,IAAIuR,cAAiB,WAYb,IAAIC,EAAK,GACbA,EAAGC,gBAAkBA,EACrB,IAAIC,EAAU,GAEd,SAASD,EAAgB1I,EAAEzF,EAAE0F,EAAEpF,EAAE+N,GAC7B,IAAIC,EAAMD,IAAO,OAAS5I,EAAE,IAAIzF,EAAE,IAAI0F,EAAE,IAAIpF,GAAGnJ,QAAQ,MAAO,KAC9D,GAAGiX,EAAQE,GACP,OAAOF,EAAQE,GAEnB,IAAIC,EAAY,IAAIC,EAAa,CAAC/I,EAAEzF,EAAE0F,EAAEpF,IAExC,OADA8N,EAAQE,GAAOC,EACRA,EAIX,IAAIE,EAAoB,EACpBC,EAAmB,KACnBC,EAAwB,KACxBC,EAA6B,GAE7BC,EAAmB,GACnBC,EAAkB,GAAOD,EAAmB,GAE5CE,EAAgD,oBAAjBnN,aAEnC,SAASoN,EAAGC,EAAKC,GAAO,OAAO,EAAM,EAAMA,EAAM,EAAMD,EACvD,SAASE,EAAGF,EAAKC,GAAO,OAAO,EAAMA,EAAM,EAAMD,EACjD,SAASG,EAAGH,GAAY,OAAO,EAAMA,EAGrC,SAASI,EAAYC,EAAIL,EAAKC,GAC1B,QAASF,EAAEC,EAAKC,GAAKI,EAAKH,EAAEF,EAAKC,IAAMI,EAAKF,EAAEH,IAAMK,EAIxD,SAASC,EAAUD,EAAIL,EAAKC,GACxB,OAAO,EAAMF,EAAEC,EAAKC,GAAKI,EAAGA,EAAK,EAAMH,EAAEF,EAAKC,GAAOI,EAAKF,EAAEH,GAGhE,SAASO,EAAiBC,EAAIC,EAAIC,EAAIC,EAAKC,GACvC,IAAIC,EAAUC,EAAUpX,EAAI,EAC5B,GACIoX,EAAWL,GAAMC,EAAKD,GAAM,EAC5BI,EAAWT,EAAWU,EAAUH,EAAKC,GAAOJ,EACxCK,EAAW,EACXH,EAAKI,EAELL,EAAKK,QAEJxW,KAAK2C,IAAI4T,GAAYnB,KAA2BhW,EAAIiW,GAC7D,OAAOmB,EAGX,SAASC,EAAsBP,EAAIQ,EAASL,EAAKC,GAC7C,IAAK,IAAIlX,EAAI,EAAGA,EAAI8V,IAAqB9V,EAAG,CACxC,IAAIuX,EAAeX,EAASU,EAASL,EAAKC,GAC1C,GAAqB,IAAjBK,EAAsB,OAAOD,EACjC,IAAIH,EAAWT,EAAWY,EAASL,EAAKC,GAAOJ,EAC/CQ,GAAWH,EAAWI,EAE1B,OAAOD,EAMX,SAASzB,EAAc2B,GACnBthB,KAAKwY,GAAK8I,EACVthB,KAAKuhB,eAAiBrB,EAAwB,IAAInN,aAAaiN,GAAoB,IAAIre,MAAMqe,GAC7FhgB,KAAKwhB,cAAe,EAEpBxhB,KAAKyhB,IAAMzhB,KAAKyhB,IAAIhP,KAAKzS,MAsE7B,OAnEA2f,EAAaxb,UAAY,CAErBsd,IAAK,SAAU1H,GACX,IAAIgH,EAAM/gB,KAAKwY,GAAG,GACdkJ,EAAM1hB,KAAKwY,GAAG,GACdwI,EAAMhhB,KAAKwY,GAAG,GACdmJ,EAAM3hB,KAAKwY,GAAG,GAElB,OADKxY,KAAKwhB,cAAcxhB,KAAK4hB,cACzBb,IAAQW,GAAOV,IAAQW,EAAY5H,EAE7B,IAANA,EAAgB,EACV,IAANA,EAAgB,EACbyG,EAAWxgB,KAAK6hB,UAAU9H,GAAI2H,EAAKC,IAK9CC,YAAa,WACT,IAAIb,EAAM/gB,KAAKwY,GAAG,GACdkJ,EAAM1hB,KAAKwY,GAAG,GACdwI,EAAMhhB,KAAKwY,GAAG,GACdmJ,EAAM3hB,KAAKwY,GAAG,GAClBxY,KAAKwhB,cAAe,EAChBT,IAAQW,GAAOV,IAAQW,GACvB3hB,KAAK8hB,qBAGbA,kBAAmB,WAGf,IAFA,IAAIf,EAAM/gB,KAAKwY,GAAG,GACdwI,EAAMhhB,KAAKwY,GAAG,GACT1O,EAAI,EAAGA,EAAIkW,IAAoBlW,EACpC9J,KAAKuhB,eAAezX,GAAK0W,EAAW1W,EAAImW,EAAiBc,EAAKC,IAOtEa,UAAW,SAAUjB,GASjB,IARA,IAAIG,EAAM/gB,KAAKwY,GAAG,GACdwI,EAAMhhB,KAAKwY,GAAG,GACduJ,EAAgB/hB,KAAKuhB,eAErBS,EAAgB,EAChBC,EAAgB,EAChBC,EAAalC,EAAmB,EAE7BiC,IAAkBC,GAAcH,EAAcE,IAAkBrB,IAAMqB,EACzED,GAAiB/B,IAEnBgC,EAGF,IAAIE,GAAQvB,EAAKmB,EAAcE,KAAmBF,EAAcE,EAAc,GAAKF,EAAcE,IAC7FG,EAAYJ,EAAgBG,EAAOlC,EAEnCoC,EAAe3B,EAAS0B,EAAWrB,EAAKC,GAC5C,OAAIqB,GAAgBxC,EACTsB,EAAqBP,EAAIwB,EAAWrB,EAAKC,GACxB,IAAjBqB,EACAD,EAEAzB,EAAgBC,EAAIoB,EAAeA,EAAgB/B,EAAiBc,EAAKC,KAKrF3B,EAzJS,GAoLpB,SAASiD,gBAAgBC,EAAQC,GAC7B,IAAI1Y,EAAyB2Y,EAAtBzU,EAAMuU,EAAQ1Y,OACrB,IAAKC,EAAI,EAAEA,EAAIkE,EAAIlE,GAAK,EAEpB,IAAK,IAAI4Y,KADTD,EAAkBF,EAAQzY,GAAG3F,UACZse,EACTA,EAAgBE,eAAeD,KAAOF,EAAYre,UAAUue,GAAQD,EAAgBC,IAKpG,SAASE,cAAcC,EAAQtP,GAC3B,OAAO9R,OAAOqhB,yBAAyBD,EAAQtP,GAGnD,SAASwP,oBAAoB5e,GAC5B,SAAS6e,KAET,OADAA,EAAc7e,UAAYA,EACnB6e,EAER,SAASC,cAGMvY,KAEX,SAASwY,EAAcC,EAAGC,EAAIC,EAAGC,EAAIC,EAAGC,GACpC,IAAIC,EAAQN,EAAGG,EAAOF,EAAGG,EAAOF,EAAGG,EAAOD,EAAGD,EAAOE,EAAGL,EAAOE,EAAGD,EACjE,OAAOK,GAAQ,MAASA,EAAO,KAGnC,SAASC,EAAcP,EAAGC,EAAGO,EAAIN,EAAGC,EAAGM,EAAIL,EAAGC,EAAGK,GAC7C,GAAU,IAAPF,GAAmB,IAAPC,GAAmB,IAAPC,EACvB,OAAOX,EAAcC,EAAGC,EAAIC,EAAGC,EAAIC,EAAGC,GAE1C,IAGIM,EAHAC,EAAQrZ,KAAKyC,KAAKzC,KAAKuC,IAAIoW,EAAKF,EAAI,GAAKzY,KAAKuC,IAAIqW,EAAKF,EAAI,GAAK1Y,KAAKuC,IAAI2W,EAAKD,EAAI,IAClFK,EAAQtZ,KAAKyC,KAAKzC,KAAKuC,IAAIsW,EAAKJ,EAAI,GAAKzY,KAAKuC,IAAIuW,EAAKJ,EAAI,GAAK1Y,KAAKuC,IAAI4W,EAAKF,EAAI,IAClFM,EAAQvZ,KAAKyC,KAAKzC,KAAKuC,IAAIsW,EAAKF,EAAI,GAAK3Y,KAAKuC,IAAIuW,EAAKF,EAAI,GAAK5Y,KAAKuC,IAAI4W,EAAKD,EAAI,IAatF,OATQE,EAFLC,EAAQC,EACJD,EAAQE,EACIF,EAAQC,EAAQC,EAEhBA,EAAQD,EAAQD,EAEzBE,EAAQD,EACHC,EAAQD,EAAQD,EAEhBC,EAAQD,EAAQE,EAExBH,GAAY,MAAUA,EAAW,KAG5C,IAAII,EAAmB,WAEnB,OAAO,SAASnJ,EAAIC,EAAIC,EAAIkJ,GACxB,IACInN,EACAlN,EAAGkE,EACHoW,EAAQC,EACRC,EAJAC,EAAgBlW,qBAGHmW,EAAc,EAE3BC,EAAQ,GAAGC,EAAY,GACvBC,EAAaC,mBAAmBC,aAEpC,IADA7W,EAAMiN,EAAIpR,OACNmN,EAAE,EAAEA,EAAEuN,EAAcvN,GAAG,EAAE,CAGzB,IAFAqN,EAAOrN,GAAGuN,EAAc,GACxBD,EAAa,EACTxa,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACbsa,EAAUpX,OAAO,EAAEqX,EAAK,GAAGtJ,EAAIjR,GAAG,EAAEkD,OAAO,EAAEqX,EAAK,GAAGA,EAAKpJ,EAAInR,GAAG,GAAG,EAAEua,GAAMrX,OAAOqX,EAAK,GAAGF,EAAIra,GAAGkD,OAAOqX,EAAK,GAAGrJ,EAAIlR,GACrH2a,EAAM3a,GAAKsa,EACS,OAAjBM,EAAU5a,KACTwa,GAActX,OAAOyX,EAAM3a,GAAK4a,EAAU5a,GAAG,IAEjD4a,EAAU5a,GAAK2a,EAAM3a,GAEtBwa,IACCA,EAAapX,QAAQoX,GACrBE,GAAeF,GAEnBK,EAAWG,SAAS9N,GAAKqN,EACzBM,EAAWI,QAAQ/N,GAAKwN,EAG5B,OADAG,EAAWH,YAAcA,EAClBG,GA9BO,GAkCtB,SAASK,EAAkBC,GACvB,IAKInb,EALAob,EAAiBC,qBAAqBN,aACtCO,EAASH,EAAUpO,EACnBwO,EAAQJ,EAAUjU,EAClBsU,EAAQL,EAAU7N,EAClBmO,EAAQN,EAAUnb,EACfkE,EAAMiX,EAAUO,QACnBT,EAAUG,EAAeH,QACzBU,EAAc,EAClB,IAAI3b,EAAE,EAAEA,EAAEkE,EAAI,EAAElE,GAAG,EACfib,EAAQjb,GAAKoa,EAAgBmB,EAAMvb,GAAGub,EAAMvb,EAAE,GAAGwb,EAAMxb,GAAGyb,EAAMzb,EAAE,IAClE2b,GAAeV,EAAQjb,GAAG0a,YAO9B,OALGY,GAAUpX,IACT+W,EAAQjb,GAAKoa,EAAgBmB,EAAMvb,GAAGub,EAAM,GAAGC,EAAMxb,GAAGyb,EAAM,IAC9DE,GAAeV,EAAQjb,GAAG0a,aAE9BU,EAAeO,YAAcA,EACtBP,EAGX,SAASQ,EAAW7b,GAChB7J,KAAK2lB,cAAgB,EACrB3lB,KAAKshB,OAAS,IAAI3f,MAAMkI,GAG5B,SAAS+b,EAAUC,EAAQpB,GACvBzkB,KAAK8lB,cAAgBD,EACrB7lB,KAAKykB,MAAQA,EAGjB,IAAIsB,EAAmB,WAEnB,IAAIC,EAAa,GAEjB,OAAO,SAAUjL,EAAKC,EAAKC,EAAKkJ,GAC5B,IAAI8B,GAAclL,EAAI,GAAG,IAAIA,EAAI,GAAG,IAAIC,EAAI,GAAG,IAAIA,EAAI,GAAG,IAAIC,EAAI,GAAG,IAAIA,EAAI,GAAG,IAAIkJ,EAAI,GAAG,IAAIA,EAAI,IAAI7b,QAAQ,MAAO,KACtH,IAAI0d,EAAWC,GAAY,CACvB,IACIjP,EAAGlN,EAAGkE,EACNoW,EAAQC,EACRC,EACAG,EAJAF,EAAgBlW,qBAEHmW,EAAc,EAErBE,EAAY,KACH,IAAf3J,EAAIlR,SAAiBkR,EAAI,IAAMC,EAAI,IAAMD,EAAI,IAAMC,EAAI,KAAOkI,EAAcnI,EAAI,GAAGA,EAAI,GAAGC,EAAI,GAAGA,EAAI,GAAGD,EAAI,GAAGE,EAAI,GAAGF,EAAI,GAAGE,EAAI,KAAOiI,EAAcnI,EAAI,GAAGA,EAAI,GAAGC,EAAI,GAAGA,EAAI,GAAGA,EAAI,GAAGmJ,EAAI,GAAGnJ,EAAI,GAAGmJ,EAAI,MAC3MI,EAAgB,GAEpB,IAAI2B,EAAa,IAAIR,EAAWnB,GAEhC,IADAvW,EAAMiN,EAAIpR,OACLmN,EAAI,EAAGA,EAAIuN,EAAevN,GAAK,EAAG,CAInC,IAHAyN,EAAQrW,iBAAiBJ,GACzBqW,EAAOrN,GAAKuN,EAAgB,GAC5BD,EAAa,EACRxa,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EACtBsa,EAAUpX,OAAO,EAAEqX,EAAK,GAAGtJ,EAAIjR,GAAG,EAAEkD,OAAO,EAAEqX,EAAK,GAAGA,GAAMtJ,EAAIjR,GAAKmR,EAAInR,IAAI,GAAG,EAAEua,GAAMrX,OAAOqX,EAAK,IAAIrJ,EAAIlR,GAAKqa,EAAIra,IAAIkD,OAAOqX,EAAK,GAAGrJ,EAAIlR,GAC3I2a,EAAM3a,GAAKsa,EACM,OAAdM,IACCJ,GAActX,OAAOyX,EAAM3a,GAAK4a,EAAU5a,GAAG,IAGrDwa,EAAapX,QAAQoX,GACrBE,GAAeF,EACf4B,EAAW5E,OAAOtK,GAAK,IAAI4O,EAAUtB,EAAYG,GACjDC,EAAYD,EAEhByB,EAAWP,cAAgBnB,EAC3BwB,EAAWC,GAAcC,EAE7B,OAAOF,EAAWC,IApCJ,GAwCtB,SAASE,EAAgB9B,EAAK6B,GAC1B,IAAIpB,EAAWoB,EAAWpB,SACtBC,EAAUmB,EAAWnB,QACrB/W,EAAM8W,EAASjb,OACfuc,EAAU9Y,UAAUU,EAAI,GAAGqW,GAC3BgC,EAAYhC,EAAK6B,EAAW1B,YAC5B8B,EAAQ,EACZ,GAAGF,IAAYpY,EAAM,GAAiB,IAAZoY,GAAiBC,IAActB,EAAQqB,GAC7D,OAAOtB,EAASsB,GAEhB,IAAI5gB,EAAMuf,EAAQqB,GAAWC,GAAa,EAAI,EAC1C3X,GAAO,EACX,MAAMA,EAOF,GANGqW,EAAQqB,IAAYC,GAAatB,EAAQqB,EAAQ,GAAKC,GACrDC,GAASD,EAAYtB,EAAQqB,KAAarB,EAAQqB,EAAQ,GAAKrB,EAAQqB,IACvE1X,GAAO,GAEP0X,GAAW5gB,EAEZ4gB,EAAU,GAAKA,GAAWpY,EAAM,EAAE,CAEjC,GAAGoY,IAAYpY,EAAM,EACjB,OAAO8W,EAASsB,GAEpB1X,GAAO,EAGf,OAAOoW,EAASsB,IAAYtB,EAASsB,EAAQ,GAAKtB,EAASsB,IAAUE,EAI7E,SAASC,EAAkBxL,EAAKC,EAAKC,EAAKkJ,EAAKqC,EAASN,GACpD,IAAIO,EAAKN,EAAgBK,EAAQN,GAE7BQ,EAAK,EAAID,EACTE,EAAMjc,KAAKoC,MAAkI,KAA3H4Z,EAAGA,EAAGA,EAAI3L,EAAI,IAAM0L,EAAGC,EAAGA,EAAKA,EAAGD,EAAGC,EAAKA,EAAGA,EAAGD,GAAKxL,EAAI,IAAMwL,EAAGA,EAAGC,EAAKA,EAAGD,EAAGA,EAAKA,EAAGC,EAAGD,GAAItC,EAAI,GAAKsC,EAAGA,EAAGA,EAAIzL,EAAI,KAAa,IACrJ4L,EAAMlc,KAAKoC,MAAkI,KAA3H4Z,EAAGA,EAAGA,EAAI3L,EAAI,IAAM0L,EAAGC,EAAGA,EAAKA,EAAGD,EAAGC,EAAKA,EAAGA,EAAGD,GAAKxL,EAAI,IAAMwL,EAAGA,EAAGC,EAAKA,EAAGD,EAAGA,EAAKA,EAAGC,EAAGD,GAAItC,EAAI,GAAKsC,EAAGA,EAAGA,EAAIzL,EAAI,KAAa,IACzJ,MAAO,CAAC2L,EAAKC,GAOjB,IAAIC,EAAwBlU,iBAAiB,UAAW,GAExD,SAASmU,EAAc/L,EAAIC,EAAIC,EAAIkJ,EAAI4C,EAAUC,EAASd,GAEtDa,EAAYA,EAAY,EAAI,EAAIA,EAAY,EAAI,EAAIA,EACpD,IAAIE,EAAKd,EAAgBY,EAAUb,GACnCc,EAAUA,EAAU,EAAI,EAAIA,EAC5B,IACIld,EADA2c,EAAKN,EAAgBa,EAAQd,GAC1BlY,EAAM+M,EAAIlR,OACbqd,EAAK,EAAID,EACTP,EAAK,EAAID,EACTU,EAASD,EAAGA,EAAGA,EACfE,EAAWH,EAAGC,EAAGA,EAAG,EACpBG,EAAWJ,EAAGA,EAAGC,EAAG,EACpBI,EAASL,EAAGA,EAAGA,EAEfM,EAASL,EAAGA,EAAGR,EACfc,EAAWP,EAAGC,EAAGR,EAAKQ,EAAGD,EAAGP,EAAKQ,EAAGA,EAAGT,EACvCgB,EAAWR,EAAGA,EAAGP,EAAKQ,EAAGD,EAAGR,EAAKQ,EAAGC,EAAGT,EACvCiB,EAAST,EAAGA,EAAGR,EAEfkB,EAAST,EAAGR,EAAGA,EACfkB,EAAWX,EAAGP,EAAGA,EAAKQ,EAAGT,EAAGC,EAAKQ,EAAGR,EAAGD,EACvCoB,EAAWZ,EAAGR,EAAGC,EAAKQ,EAAGT,EAAGA,EAAKQ,EAAGP,EAAGD,EACvCqB,EAASb,EAAGR,EAAGA,EAEfsB,EAASrB,EAAGA,EAAGA,EACfsB,EAAWvB,EAAGC,EAAGA,EAAKA,EAAGD,EAAGC,EAAKA,EAAGA,EAAGD,EACvCwB,EAAWxB,EAAGA,EAAGC,EAAKA,EAAGD,EAAGA,EAAKA,EAAGC,EAAGD,EACvCyB,EAASzB,EAAGA,EAAGA,EACnB,IAAI3c,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACb+c,EAA0B,EAAJ/c,GAASY,KAAKoC,MAAoF,KAA7Eqa,EAASpM,EAAIjR,GAAKsd,EAAWnM,EAAInR,GAAKud,EAAWlD,EAAIra,GAAKwd,EAAStM,EAAIlR,KAAc,IAChI+c,EAA0B,EAAJ/c,EAAQ,GAAKY,KAAKoC,MAAoF,KAA7Eya,EAASxM,EAAIjR,GAAK0d,EAAWvM,EAAInR,GAAK2d,EAAWtD,EAAIra,GAAK4d,EAAS1M,EAAIlR,KAAc,IACpI+c,EAA0B,EAAJ/c,EAAQ,GAAKY,KAAKoC,MAAoF,KAA7E6a,EAAS5M,EAAIjR,GAAK8d,EAAW3M,EAAInR,GAAK+d,EAAW1D,EAAIra,GAAKge,EAAS9M,EAAIlR,KAAc,IACpI+c,EAA0B,EAAJ/c,EAAQ,GAAKY,KAAKoC,MAAoF,KAA7Eib,EAAShN,EAAIjR,GAAKke,EAAW/M,EAAInR,GAAKme,EAAW9D,EAAIra,GAAKoe,EAASlN,EAAIlR,KAAc,IAGxI,OAAO+c,EAGX,MAAO,CACH7B,kBAAoBA,EACpB8B,cAAgBA,EAChBP,kBAAoBA,EACpBR,gBAAkBA,EAClB7C,cAAgBA,EAChBQ,cAAgBA,IA9QvB,WAGG,IAFA,IAAIyE,EAAW,EACXC,EAAU,CAAC,KAAM,MAAO,SAAU,KAC9BrO,EAAI,EAAGA,EAAIqO,EAAQve,SAAWjG,OAAOykB,wBAAyBtO,EAClEnW,OAAOykB,sBAAwBzkB,OAAOwkB,EAAQrO,GAAK,yBACnDnW,OAAO0kB,qBAAuB1kB,OAAOwkB,EAAQrO,GAAK,yBAA2BnW,OAAOwkB,EAAQrO,GAAK,+BAEjGnW,OAAOykB,wBACPzkB,OAAOykB,sBAAwB,SAAUze,EAAUgF,GAC/C,IAAI2Z,GAAW,IAAItJ,MAAOuJ,UACtBC,EAAa/d,KAAK+C,IAAI,EAAG,IAAM8a,EAAWJ,IAC1C9hB,EAAK7B,YAAW,WACZoF,EAAS2e,EAAWE,KAExBA,GAEJ,OADAN,EAAWI,EAAWE,EACfpiB,IAEXzC,OAAO0kB,uBACP1kB,OAAO0kB,qBAAuB,SAAUjiB,GACpCK,aAAaL,MApBzB,GAkRA,IAAIqiB,IAAMzF,cACV,SAAS0F,sBAIL,SAASC,EAAeC,EAAQC,EAAOC,GACnC,IAAIC,EAEAlf,EACAiN,EAAGkS,EAAMjS,EAAGkS,EADTlb,EAAM6a,EAAOhf,OAEpB,IAAIC,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EAEb,GADAkf,EAAYH,EAAO/e,GACd,OAAQkf,IAAcA,EAAUG,UAArC,CASA,GANAH,EAAUG,WAAY,EACnBH,EAAUI,KACTP,EAAO/e,EAAE,GAAGuf,GAAKL,EAAUI,IAEnB,IACC,EACVJ,EAAUM,QAAQ,CACjB,IAAIC,EAAYP,EAAUQ,gBAE1B,IADAP,EAAOM,EAAU1f,OACbkN,EAAE,EAAEA,EAAEkS,EAAKlS,GAAG,EACd,GAAGwS,EAAUxS,GAAG0D,GAAGzD,EAAElN,EACjB2f,EAA6BF,EAAUxS,GAAG0D,GAAGzD,QAG7C,IADAkS,EAAOK,EAAUxS,GAAG0D,GAAGzD,EAAEnN,OACrBmN,EAAE,EAAEA,EAAEkS,EAAKlS,GAAG,EACXuS,EAAUxS,GAAG0D,GAAGzD,EAAEA,GAAGjG,GACpB0Y,EAA6BF,EAAUxS,GAAG0D,GAAGzD,EAAEA,GAAGjG,EAAE,IAErDwY,EAAUxS,GAAG0D,GAAGzD,EAAEA,GAAGF,GACpB2S,EAA6BF,EAAUxS,GAAG0D,GAAGzD,EAAEA,GAAGF,EAAE,IAMtD,IAAfkS,EAAUzR,IACTyR,EAAUH,OAASa,EAAeV,EAAUW,MAAOb,GACnDF,EAAeI,EAAUH,OAAOC,EAAOC,IACjB,IAAjBC,EAAUzR,GACfqS,EAAeZ,EAAUa,QACJ,GAAhBb,EAAUzR,IACfuS,EAAad,EAAWD,IAKpC,SAASW,EAAerjB,EAAGyiB,GACvB,IAAIhf,EAAI,EAAGkE,EAAM8a,EAAMjf,OACvB,MAAMC,EAAEkE,EAAI,CACR,GAAG8a,EAAMhf,GAAGzD,KAAOA,EACf,OAAIyiB,EAAMhf,GAAG+e,OAAOkB,OAIbC,KAAKC,MAAMD,KAAKE,UAAUpB,EAAMhf,GAAG+e,UAHtCC,EAAMhf,GAAG+e,OAAOkB,QAAS,EAClBjB,EAAMhf,GAAG+e,QAIxB/e,GAAK,GAIb,SAAS8f,EAAe9W,GACpB,IAAIhJ,EACAiN,EAAGkS,EADAjb,EAAM8E,EAAIjJ,OAGjB,IAAIC,EAAEkE,EAAI,EAAElE,GAAG,EAAEA,GAAG,EAChB,GAAgB,MAAbgJ,EAAIhJ,GAAGyN,GAAW,CACjB,GAAGzE,EAAIhJ,GAAGqgB,GAAGnT,EAAElN,EACX2f,EAA6B3W,EAAIhJ,GAAGqgB,GAAGnT,QAGvC,IADAiS,EAAOnW,EAAIhJ,GAAGqgB,GAAGnT,EAAEnN,OACfkN,EAAE,EAAEA,EAAEkS,EAAKlS,GAAG,EACXjE,EAAIhJ,GAAGqgB,GAAGnT,EAAED,GAAGhG,GACd0Y,EAA6B3W,EAAIhJ,GAAGqgB,GAAGnT,EAAED,GAAGhG,EAAE,IAE/C+B,EAAIhJ,GAAGqgB,GAAGnT,EAAED,GAAGD,GACd2S,EAA6B3W,EAAIhJ,GAAGqgB,GAAGnT,EAAED,GAAGD,EAAE,KAI/C,MACO,MAAbhE,EAAIhJ,GAAGyN,IACZqS,EAAe9W,EAAIhJ,GAAGsgB,IAiBlC,SAASX,EAA6BpkB,GAClC,IAAIyE,EAAGkE,EAAM3I,EAAKyE,EAAED,OACpB,IAAIC,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACbzE,EAAKyE,EAAEA,GAAG,IAAMzE,EAAK2L,EAAElH,GAAG,GAC1BzE,EAAKyE,EAAEA,GAAG,IAAMzE,EAAK2L,EAAElH,GAAG,GAC1BzE,EAAK+R,EAAEtN,GAAG,IAAMzE,EAAK2L,EAAElH,GAAG,GAC1BzE,EAAK+R,EAAEtN,GAAG,IAAMzE,EAAK2L,EAAElH,GAAG,GAIlC,SAASugB,EAAaC,EAAQC,GAC1B,IAAIC,EAAcD,EAAoBA,EAAkBE,MAAM,KAAO,CAAC,IAAI,IAAI,KAC9E,OAAGH,EAAQ,GAAGE,EAAY,MAEhBA,EAAY,GAAKF,EAAQ,MAGhCA,EAAQ,GAAGE,EAAY,MAEhBA,EAAY,GAAKF,EAAQ,MAGhCA,EAAQ,GAAGE,EAAY,MAEhBA,EAAY,GAAKF,EAAQ,UAA5B,IAKX,IAAII,EAAa,WACb,IAAIC,EAAiB,CAAC,EAAE,EAAE,IAE1B,SAASC,EAAgBC,GACrB,IAAIC,EAAeD,EAAUtZ,EAAEE,EAC/BoZ,EAAUtZ,EAAEE,EAAI,CACZuF,EAAG,CACC,CACIjG,EAAE+Z,EACFvZ,EAAE,KAMlB,SAASwZ,EAAclC,GACnB,IAAI/e,EAAGkE,EAAM6a,EAAOhf,OACpB,IAAIC,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACO,IAAjB+e,EAAO/e,GAAGyN,IACTqT,EAAgB/B,EAAO/e,IAKnC,OAAO,SAAUrJ,GACb,GAAG4pB,EAAaM,EAAelqB,EAAcuQ,KACzC+Z,EAActqB,EAAcooB,QACzBpoB,EAAcuqB,QAAO,CACpB,IAAIlhB,EAAGkE,EAAMvN,EAAcuqB,OAAOnhB,OAClC,IAAIC,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACVrJ,EAAcuqB,OAAOlhB,GAAG+e,QACvBkC,EAActqB,EAAcuqB,OAAOlhB,GAAG+e,UA/B9C,GAwCZoC,EAAc,WACd,IAAIN,EAAiB,CAAC,EAAE,EAAE,IAC1B,OAAO,SAAUlqB,GACb,GAAGA,EAAcyqB,QAAUb,EAAaM,EAAelqB,EAAcuQ,GAAG,CACpE,IAAIlH,EAAqCiN,EAAGkS,EACxCkC,EAAUC,EADPpd,EAAMvN,EAAcyqB,MAAMrhB,OAEjC,IAAIC,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EACrB,GAAGrJ,EAAcyqB,MAAMphB,GAAGzI,MAAQZ,EAAcyqB,MAAMphB,GAAGzI,KAAKwoB,OAI1D,IAHAuB,EAAQ3qB,EAAcyqB,MAAMphB,GAAGzI,KAAKwoB,OAAO,GAAGO,GAC9CnB,EAAOmC,EAAMvhB,OAETkN,EAAI,EAAGA,EAAIkS,EAAMlS,GAAK,EACtBoU,EAAWC,EAAMrU,GAAGoT,GAAGnT,EACnBmU,EAASE,cACT5B,EAA6B2B,EAAMrU,GAAGoT,GAAGnT,GACzCmU,EAASE,aAAc,KAflC,GAwBbC,EAAe,WACf,IAAIX,EAAiB,CAAC,EAAE,EAAE,GAE1B,SAASY,EAAc1B,GACnB,IAAI/f,EACAiN,EAAGkS,EADAjb,EAAM6b,EAAOhgB,OAEpB,IAAIC,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACb,GAAoB,OAAjB+f,EAAO/f,GAAGyN,GACTgU,EAAc1B,EAAO/f,GAAGsgB,SACtB,GAAoB,OAAjBP,EAAO/f,GAAGyN,IAAgC,OAAjBsS,EAAO/f,GAAGyN,GACxC,GAAGsS,EAAO/f,GAAG+M,EAAEG,GAAK6S,EAAO/f,GAAG+M,EAAEG,EAAE,GAAGlN,EAEjC,IADAmf,EAAOY,EAAO/f,GAAG+M,EAAEG,EAAEnN,OACjBkN,EAAE,EAAEA,EAAEkS,EAAKlS,GAAG,EACX8S,EAAO/f,GAAG+M,EAAEG,EAAED,GAAGhG,IAChB8Y,EAAO/f,GAAG+M,EAAEG,EAAED,GAAGhG,EAAE,IAAM,IACzB8Y,EAAO/f,GAAG+M,EAAEG,EAAED,GAAGhG,EAAE,IAAM,IACzB8Y,EAAO/f,GAAG+M,EAAEG,EAAED,GAAGhG,EAAE,IAAM,IACzB8Y,EAAO/f,GAAG+M,EAAEG,EAAED,GAAGhG,EAAE,IAAM,KAE1B8Y,EAAO/f,GAAG+M,EAAEG,EAAED,GAAGD,IAChB+S,EAAO/f,GAAG+M,EAAEG,EAAED,GAAGD,EAAE,IAAM,IACzB+S,EAAO/f,GAAG+M,EAAEG,EAAED,GAAGD,EAAE,IAAM,IACzB+S,EAAO/f,GAAG+M,EAAEG,EAAED,GAAGD,EAAE,IAAM,IACzB+S,EAAO/f,GAAG+M,EAAEG,EAAED,GAAGD,EAAE,IAAM,UAIjC+S,EAAO/f,GAAG+M,EAAEG,EAAE,IAAM,IACpB6S,EAAO/f,GAAG+M,EAAEG,EAAE,IAAM,IACpB6S,EAAO/f,GAAG+M,EAAEG,EAAE,IAAM,IACpB6S,EAAO/f,GAAG+M,EAAEG,EAAE,IAAM,IAMpC,SAAS+T,EAAclC,GACnB,IAAI/e,EAAGkE,EAAM6a,EAAOhf,OACpB,IAAIC,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACO,IAAjB+e,EAAO/e,GAAGyN,IACTgU,EAAc1C,EAAO/e,GAAG+f,QAKpC,OAAO,SAAUppB,GACb,GAAG4pB,EAAaM,EAAelqB,EAAcuQ,KACzC+Z,EAActqB,EAAcooB,QACzBpoB,EAAcuqB,QAAO,CACpB,IAAIlhB,EAAGkE,EAAMvN,EAAcuqB,OAAOnhB,OAClC,IAAIC,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACVrJ,EAAcuqB,OAAOlhB,GAAG+e,QACvBkC,EAActqB,EAAcuqB,OAAOlhB,GAAG+e,UApD5C,GA6Dd2C,EAAe,WACf,IAAIb,EAAiB,CAAC,EAAE,EAAE,IAI1B,SAASf,EAAe9W,GACpB,IAAIhJ,EACAiN,EAAGkS,EADAjb,EAAM8E,EAAIjJ,OAGjB,IAAIC,EAAEkE,EAAI,EAAElE,GAAG,EAAEA,GAAG,EAChB,GAAgB,MAAbgJ,EAAIhJ,GAAGyN,GAAW,CACjB,GAAGzE,EAAIhJ,GAAGqgB,GAAGnT,EAAElN,EACXgJ,EAAIhJ,GAAGqgB,GAAGnT,EAAEH,EAAI/D,EAAIhJ,GAAGsb,YAGvB,IADA6D,EAAOnW,EAAIhJ,GAAGqgB,GAAGnT,EAAEnN,OACfkN,EAAE,EAAEA,EAAEkS,EAAKlS,GAAG,EACXjE,EAAIhJ,GAAGqgB,GAAGnT,EAAED,GAAGhG,IACd+B,EAAIhJ,GAAGqgB,GAAGnT,EAAED,GAAGhG,EAAE,GAAG8F,EAAI/D,EAAIhJ,GAAGsb,QAEhCtS,EAAIhJ,GAAGqgB,GAAGnT,EAAED,GAAGD,IACdhE,EAAIhJ,GAAGqgB,GAAGnT,EAAED,GAAGD,EAAE,GAAGD,EAAI/D,EAAIhJ,GAAGsb,SAIhC,MACO,MAAbtS,EAAIhJ,GAAGyN,IACZqS,EAAe9W,EAAIhJ,GAAGsgB,IAKlC,SAASW,EAAclC,GACnB,IAAIG,EACAlf,EACAiN,EAAGkS,EAAMjS,EAAGkS,EADTlb,EAAM6a,EAAOhf,OAEpB,IAAIC,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EAAE,CAEf,GADAkf,EAAYH,EAAO/e,GAChBkf,EAAUM,QAAQ,CACjB,IAAIC,EAAYP,EAAUQ,gBAE1B,IADAP,EAAOM,EAAU1f,OACbkN,EAAE,EAAEA,EAAEkS,EAAKlS,GAAG,EACd,GAAGwS,EAAUxS,GAAG0D,GAAGzD,EAAElN,EACjByf,EAAUxS,GAAG0D,GAAGzD,EAAEH,EAAI0S,EAAUxS,GAAG0U,QAGnC,IADAvC,EAAOK,EAAUxS,GAAG0D,GAAGzD,EAAEnN,OACrBmN,EAAE,EAAEA,EAAEkS,EAAKlS,GAAG,EACXuS,EAAUxS,GAAG0D,GAAGzD,EAAEA,GAAGjG,IACpBwY,EAAUxS,GAAG0D,GAAGzD,EAAEA,GAAGjG,EAAE,GAAG8F,EAAI0S,EAAUxS,GAAG0U,IAE5ClC,EAAUxS,GAAG0D,GAAGzD,EAAEA,GAAGF,IACpByS,EAAUxS,GAAG0D,GAAGzD,EAAEA,GAAGF,EAAE,GAAGD,EAAI0S,EAAUxS,GAAG0U,IAM3C,IAAjBzC,EAAUzR,IACTqS,EAAeZ,EAAUa,SAKrC,OAAO,SAAUppB,GACb,GAAG4pB,EAAaM,EAAelqB,EAAcuQ,KACzC+Z,EAActqB,EAAcooB,QACzBpoB,EAAcuqB,QAAO,CACpB,IAAIlhB,EAAGkE,EAAMvN,EAAcuqB,OAAOnhB,OAClC,IAAIC,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACVrJ,EAAcuqB,OAAOlhB,GAAG+e,QACvBkC,EAActqB,EAAcuqB,OAAOlhB,GAAG+e,UArE5C,GA8ElB,SAAS6C,EAAajrB,EAAesoB,GAC9BtoB,EAAckrB,aAGjBL,EAAY7qB,GACZiqB,EAAUjqB,GACVwqB,EAAWxqB,GACX+qB,EAAY/qB,GACZmoB,EAAenoB,EAAcooB,OAAQpoB,EAAcuqB,OAAQjC,GAC3DtoB,EAAckrB,YAAa,GAI/B,SAAS7B,EAAazoB,EAAM0nB,GACD,IAApB1nB,EAAKkQ,EAAEqF,EAAE/M,QAAkB,MAAOxI,EAAKkQ,EAAEF,IACxChQ,EAAKuqB,aAAc,GAI3B,IAAIC,EAAW,GAOf,OANAA,EAASH,aAAeA,EACxBG,EAASP,YAAcA,EACvBO,EAASZ,WAAaA,EACtBY,EAASL,YAAcA,EACvBK,EAASjD,eAAiBA,EAEnBiD,EAGX,IAAIC,YAAcnD,sBAEdoD,YAAe,WAEf,IAAIC,EAAiB,IACjBC,EAAY,CACZC,EAAG,EACHC,KAAK,EACLtC,OAAO,IAEPuC,EAAqB,GAMzB,SAASC,EAAUC,EAAMC,GACrB,IAAIC,EAAapZ,UAAU,QAC3BoZ,EAAW3d,MAAM4d,WAAgBF,EACjC,IAAIG,EAAOtZ,UAAU,QAErBsZ,EAAKC,UAAY,iBAEjBH,EAAW3d,MAAMC,SAAgB,WACjC0d,EAAW3d,MAAMG,KAAgB,WACjCwd,EAAW3d,MAAME,IAAgB,WAEjCyd,EAAW3d,MAAM+d,SAAgB,QAEjCJ,EAAW3d,MAAMge,YAAgB,SACjCL,EAAW3d,MAAMie,UAAgB,SACjCN,EAAW3d,MAAMke,WAAgB,SACjCP,EAAW3d,MAAMme,cAAgB,IACjCR,EAAW/gB,YAAYihB,GACvB3jB,SAASkkB,KAAKxhB,YAAY+gB,GAG1B,IAAIrQ,EAAQuQ,EAAKQ,YAEjB,OADAR,EAAK7d,MAAM4d,WAAaH,EAAO,KAAKC,EAC7B,CAACG,KAAKA,EAAMR,EAAE/P,EAAOgR,OAAOX,GAGvC,SAASY,IACL,IAAItjB,EACA4iB,EAAMR,EADHle,EAAMhO,KAAKqtB,MAAMxjB,OAEpByjB,EAActf,EAClB,IAAIlE,EAAE,EAAEA,EAAEkE,EAAKlE,GAAI,EACZ9J,KAAKqtB,MAAMvjB,GAAGyjB,OACbD,GAAe,EAGU,MAA1BttB,KAAKqtB,MAAMvjB,GAAG0jB,SAA4C,IAAzBxtB,KAAKqtB,MAAMvjB,GAAG2jB,OAC9CztB,KAAKqtB,MAAMvjB,GAAGyjB,QAAS,GAEvBb,EAAO1sB,KAAKqtB,MAAMvjB,GAAG4jB,SAAShB,KAC9BR,EAAIlsB,KAAKqtB,MAAMvjB,GAAG4jB,SAASxB,EACxBQ,EAAKQ,cAAgBhB,GACpBoB,GAAe,EACfttB,KAAKqtB,MAAMvjB,GAAGyjB,QAAS,IAEvBb,EAAO1sB,KAAKqtB,MAAMvjB,GAAG6jB,SAASjB,KAC9BR,EAAIlsB,KAAKqtB,MAAMvjB,GAAG6jB,SAASzB,EACxBQ,EAAKQ,cAAgBhB,IACpBoB,GAAe,EACfttB,KAAKqtB,MAAMvjB,GAAGyjB,QAAS,IAG5BvtB,KAAKqtB,MAAMvjB,GAAGyjB,SACbvtB,KAAKqtB,MAAMvjB,GAAG6jB,SAASR,OAAOX,WAAWhhB,YAAYxL,KAAKqtB,MAAMvjB,GAAG6jB,SAASR,QAC5EntB,KAAKqtB,MAAMvjB,GAAG4jB,SAASP,OAAOX,WAAWhhB,YAAYxL,KAAKqtB,MAAMvjB,GAAG4jB,SAASP,UAKrE,IAAhBG,GAAqBrO,KAAK2O,MAAQ5tB,KAAK6tB,SAAW7B,EACjDxnB,WAAWxE,KAAKotB,iBAAiB3a,KAAKzS,MAAM,IAE5CwE,WAAW,WAAWxE,KAAK8tB,UAAW,GAAOrb,KAAKzS,MAAM,GAKhE,SAAS+tB,EAAaC,EAAKC,GACvB,IAAIC,EAAUhb,SAAS,QACvBgb,EAAQrf,MAAM+d,SAAW,QAEzBsB,EAAQC,aAAa,cAAeF,EAASG,SAC7CF,EAAQC,aAAa,aAAcF,EAASI,QAC5CH,EAAQC,aAAa,cAAeF,EAASK,SAC7CJ,EAAQK,YAAc,IACnBN,EAASO,QACRN,EAAQrf,MAAM4d,WAAa,UAC3ByB,EAAQC,aAAa,QAASF,EAASO,SAEvCN,EAAQrf,MAAM4d,WAAawB,EAASG,QAExCJ,EAAIviB,YAAYyiB,GAChB,IAAIO,EAAgBrb,UAAU,UAAUsb,WAAW,MAGnD,OAFAD,EAAcnC,KAAO2B,EAASK,QAAU,IAAML,EAASI,OAAS,UAAWJ,EAASG,QAE7EF,EAGX,SAASS,EAASV,EAAUW,GACxB,GAAIX,EAAJ,CAIA,GAAGjuB,KAAKkrB,MAGJ,OAFAlrB,KAAK8tB,UAAW,OAChB9tB,KAAKqtB,MAAQY,EAASY,MAK1B,IACI/kB,EADAglB,EAAUb,EAASY,KAChB7gB,EAAM8gB,EAAQjlB,OACjBklB,EAAgB/gB,EACpB,IAAIlE,EAAE,EAAGA,EAAEkE,EAAKlE,GAAI,EAAE,CAClB,IACIklB,EACAjY,EAFAkY,GAAiB,EAMrB,GAHAH,EAAQhlB,GAAGyjB,QAAS,EACpBuB,EAAQhlB,GAAG4jB,SAAWrB,EAAUyC,EAAQhlB,GAAGskB,QAAQ,aACnDU,EAAQhlB,GAAG6jB,SAAWtB,EAAUyC,EAAQhlB,GAAGskB,QAAQ,cAC/CU,EAAQhlB,GAAGolB,OAGT,GAA0B,MAAvBJ,EAAQhlB,GAAG0jB,SAAyC,IAAtBsB,EAAQhlB,GAAG2jB,QAO9C,GANAuB,EAAiBjmB,SAASomB,iBAAiB,kCAAmCL,EAAQhlB,GAAGskB,QAAS,qCAAsCU,EAAQhlB,GAAGskB,QAAS,MAExJY,EAAenlB,OAAS,IACxBolB,GAAiB,GAGjBA,EAAgB,CAChB,IAAIle,EAAIqC,UAAU,SAClBrC,EAAEod,aAAa,YAAaW,EAAQhlB,GAAG0jB,SACvCzc,EAAEod,aAAa,WAAYW,EAAQhlB,GAAG2jB,QACtC1c,EAAEod,aAAa,WAAYW,EAAQhlB,GAAGskB,SACtCrd,EAAErP,KAAO,WACTqP,EAAE4b,UAAY,4BAAiCmC,EAAQhlB,GAAGskB,QAAQ,mCAAmCU,EAAQhlB,GAAGolB,MAAM,OACtHN,EAAKnjB,YAAYsF,SAElB,GAA0B,MAAvB+d,EAAQhlB,GAAG0jB,SAAyC,IAAtBsB,EAAQhlB,GAAG2jB,OAAa,CAG5D,IAFAuB,EAAiBjmB,SAASomB,iBAAiB,2CAEtCpY,EAAI,EAAGA,EAAIiY,EAAenlB,OAAQkN,KACuB,IAAtDiY,EAAejY,GAAGqY,KAAKtkB,QAAQgkB,EAAQhlB,GAAGolB,SAE1CD,GAAiB,GAIzB,GAAIA,EAAgB,CAChB,IAAIhY,EAAI7D,UAAU,QAClB6D,EAAEkX,aAAa,YAAaW,EAAQhlB,GAAG0jB,SACvCvW,EAAEkX,aAAa,WAAYW,EAAQhlB,GAAG2jB,QACtCxW,EAAEvV,KAAO,WACTuV,EAAEoY,IAAM,aACRpY,EAAEmY,KAAON,EAAQhlB,GAAGolB,MACpBnmB,SAASkkB,KAAKxhB,YAAYwL,SAE3B,GAA0B,MAAvB6X,EAAQhlB,GAAG0jB,SAAyC,IAAtBsB,EAAQhlB,GAAG2jB,OAAa,CAG5D,IAFAuB,EAAiBjmB,SAASomB,iBAAiB,+CAEtCpY,EAAI,EAAGA,EAAIiY,EAAenlB,OAAQkN,IAC/B+X,EAAQhlB,GAAGolB,QAAUF,EAAejY,GAAGuY,MAEvCL,GAAiB,GAIzB,GAAIA,EAAgB,CAChB,IAAIM,EAAKnc,UAAU,QACnBmc,EAAGpB,aAAa,YAAaW,EAAQhlB,GAAG0jB,SACxC+B,EAAGpB,aAAa,WAAYW,EAAQhlB,GAAG2jB,QACvC8B,EAAGpB,aAAa,MAAM,cACtBoB,EAAGpB,aAAa,OAAOW,EAAQhlB,GAAGolB,OAClCN,EAAKnjB,YAAY8jB,UArDrBT,EAAQhlB,GAAGyjB,QAAS,EACpBwB,GAAiB,EAuDrBD,EAAQhlB,GAAG0lB,OAASzB,EAAaa,EAAKE,EAAQhlB,IAC9CglB,EAAQhlB,GAAG2lB,MAAQ,GACnBzvB,KAAKqtB,MAAM9a,KAAKuc,EAAQhlB,IAEN,IAAlBilB,EACA/uB,KAAK8tB,UAAW,EAIjBtpB,WAAWxE,KAAKotB,iBAAiB3a,KAAKzS,MAAO,UAtF5CA,KAAK8tB,UAAW,EA0FxB,SAAS4B,EAASxE,GACd,GAAIA,EAAJ,CAGIlrB,KAAKkrB,QACLlrB,KAAKkrB,MAAQ,IAEjB,IAAIphB,EACAiN,EAA6B4Y,EAD1B3hB,EAAMkd,EAAMrhB,OACZof,EAAOjpB,KAAKkrB,MAAMrhB,OACzB,IAAIC,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EAAE,CACfiN,EAAI,EACJ4Y,GAAQ,EACR,MAAM5Y,EAAEkS,EACDjpB,KAAKkrB,MAAMnU,GAAGlI,QAAUqc,EAAMphB,GAAG+E,OAAS7O,KAAKkrB,MAAMnU,GAAGqX,UAAYlD,EAAMphB,GAAGskB,SAAWpuB,KAAKkrB,MAAMnU,GAAG6Y,KAAO1E,EAAMphB,GAAG8lB,KACrHD,GAAQ,GAEZ5Y,GAAK,EAEL4Y,IACA3vB,KAAKkrB,MAAM3Y,KAAK2Y,EAAMphB,IACtBmf,GAAQ,KAKpB,SAAS4G,EAAYC,EAAMjhB,EAAOyd,GAC9B,IAAIxiB,EAAI,EAAGkE,EAAMhO,KAAKkrB,MAAMrhB,OAC5B,MAAOC,EAAIkE,EAAK,CACZ,GAAGhO,KAAKkrB,MAAMphB,GAAG8lB,KAAOE,GAAQ9vB,KAAKkrB,MAAMphB,GAAG+E,QAAUA,GAAS7O,KAAKkrB,MAAMphB,GAAGskB,UAAY9B,EAEvF,OAAOtsB,KAAKkrB,MAAMphB,GAEtBA,GAAI,EAKR,OAHoB,kBAATgmB,GAA4C,KAAvBA,EAAKrR,WAAW,KAAcqR,IAASvsB,SAAWA,QAAQwsB,MACtFxsB,QAAQwsB,KAAK,oDAAqDD,EAAMjhB,EAAOyd,GAE5EL,EAGX,SAAS+D,EAAYF,EAAMG,EAAU9D,GACjC,IAAI8B,EAAWjuB,KAAKkwB,cAAcD,GAC9BE,EAAQL,EAAKrR,WAAW,GAC5B,IAAIwP,EAASwB,MAAMU,EAAQ,GAAI,CAC3B,IAAIjC,EAAUD,EAASuB,OAKvB,GAAa,MAATM,EAAc,CACd5B,EAAQK,YAAc,IAAMuB,EAAO,IACnC,IAAIM,EAAalC,EAAQmC,wBACzBnC,EAAQK,YAAc,KACtB,IAAI+B,EAAapC,EAAQmC,wBACzBpC,EAASwB,MAAMU,EAAQ,IAAMC,EAAaE,GAAY,SAEtDpC,EAAQK,YAAcuB,EACtB7B,EAASwB,MAAMU,EAAQ,GAAMjC,EAAQmC,wBAAyB,IAGtE,OAAOpC,EAASwB,MAAMU,EAAQ,GAAKhE,EAGvC,SAAS+D,EAAc/qB,GACnB,IAAI2E,EAAI,EAAGkE,EAAMhO,KAAKqtB,MAAMxjB,OAC5B,MAAMC,EAAEkE,EAAI,CACR,GAAGhO,KAAKqtB,MAAMvjB,GAAGymB,QAAUprB,EACvB,OAAOnF,KAAKqtB,MAAMvjB,GAEtBA,GAAK,EAET,OAAO9J,KAAKqtB,MAAM,GAGtB,SAASmD,IACL,OAAOpE,EAGX,SAASmB,IACL,OAAOvtB,KAAK8tB,SAtQhB1B,EAAqBA,EAAmBqE,OAAO,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAC9F,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KACxE,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,OAuQ9D,IAAIC,EAAO,WACP1wB,KAAKqtB,MAAQ,GACbrtB,KAAKkrB,MAAQ,KACblrB,KAAK2wB,cAAgB,EACrB3wB,KAAK8tB,UAAW,EAChB9tB,KAAK6tB,SAAW5O,KAAK2O,OAazB,OAVA8C,EAAKF,0BAA4BA,EAEjCE,EAAKvsB,UAAUurB,SAAWA,EAC1BgB,EAAKvsB,UAAUwqB,SAAWA,EAC1B+B,EAAKvsB,UAAU0rB,YAAcA,EAC7Ba,EAAKvsB,UAAU+rB,cAAgBA,EAC/BQ,EAAKvsB,UAAU6rB,YAAcA,EAC7BU,EAAKvsB,UAAUipB,iBAAmBA,EAClCsD,EAAKvsB,UAAUopB,OAASA,EAEjBmD,EArSO,GAwSdE,gBAAmB,WAEnB,IAAIC,EAAYxkB,oBACZykB,EAAWpmB,KAAK2C,IAEpB,SAAS0jB,EAAiBC,EAAUC,GAChC,IACIC,EADAC,EAAanxB,KAAKmxB,WAEA,qBAAlBnxB,KAAKoxB,WACLF,EAAWve,iBAAiB,UAAW3S,KAAKqxB,GAAGxnB,SAEnD,IAGIynB,EAASC,EAwBTva,EAAGkS,EAAM7E,EAAM4E,EAAMlS,EAAGya,EA3BxBC,EAAiBR,EAAQS,UACzB5nB,EAAI2nB,EACJzjB,EAAMhO,KAAK2xB,UAAU9nB,OAAS,EAAG6E,GAAO,EAG5C,MAAOA,EAAM,CAGT,GAFA4iB,EAAUtxB,KAAK2xB,UAAU7nB,GACzBynB,EAAcvxB,KAAK2xB,UAAU7nB,EAAI,GAC7BA,IAAMkE,EAAM,GAAKgjB,GAAYO,EAAYhgB,EAAI4f,EAAW,CACrDG,EAAQxgB,IACPwgB,EAAUC,GAEdE,EAAiB,EACjB,MAEJ,GAAKF,EAAYhgB,EAAI4f,EAAcH,EAAS,CACxCS,EAAiB3nB,EACjB,MAEAA,EAAIkE,EAAM,EACVlE,GAAK,GAEL2nB,EAAiB,EACjB/iB,GAAO,GAKf,IAEIkjB,EAFAC,EAAcN,EAAYhgB,EAAI4f,EAC9BW,EAAUR,EAAQ/f,EAAI4f,EAE1B,GAAIG,EAAQS,GAAI,CACPT,EAAQpL,aACToL,EAAQpL,WAAawC,IAAI3C,gBAAgBuL,EAAQvgB,EAAGwgB,EAAYxgB,GAAKugB,EAAQxa,EAAGwa,EAAQS,GAAIT,EAAQU,KAExG,IAAI9L,EAAaoL,EAAQpL,WACzB,GAAI8K,GAAYa,GAAeb,EAAWc,EAAS,CAC/C,IAAIG,EAAMjB,GAAYa,EAAc3L,EAAW5E,OAAOzX,OAAS,EAAI,EAEnE,IADAqf,EAAOhD,EAAW5E,OAAO2Q,GAAKxN,MAAM5a,OAC/BmN,EAAI,EAAGA,EAAIkS,EAAMlS,GAAK,EACvBka,EAASla,GAAKkP,EAAW5E,OAAO2Q,GAAKxN,MAAMzN,OAG5C,CACCsa,EAAQY,OACRV,EAAMF,EAAQY,QAEdV,EAAMpS,cAAcE,gBAAgBgS,EAAQla,EAAE2C,EAAGuX,EAAQla,EAAE4C,EAAGsX,EAAQxnB,EAAEiQ,EAAGuX,EAAQxnB,EAAEkQ,EAAGsX,EAAQna,GAAGsK,IACnG6P,EAAQY,OAASV,GAErBnN,EAAOmN,GAAKR,EAAWc,IAAYD,EAAcC,IACjD,IAEIK,EAFAC,EAAiBlM,EAAWP,cAActB,EAG1CG,EAAgByM,EAAQoB,UAAYrB,GAAYC,EAAQqB,qBAAuBxoB,EAAKmnB,EAAQsB,iBAAmB,EACnHxb,EAAMka,EAAQoB,UAAYrB,GAAYC,EAAQqB,qBAAuBxoB,EAAKmnB,EAAQuB,WAAa,EAC/F9jB,GAAO,EACPua,EAAO/C,EAAW5E,OAAOzX,OACzB,MAAO6E,EAAM,CAET,GADA8V,GAAe0B,EAAW5E,OAAOvK,GAAG+O,cACb,IAAnBsM,GAAiC,IAAT/N,GAActN,IAAMmP,EAAW5E,OAAOzX,OAAS,EAAG,CAE1E,IADAqf,EAAOhD,EAAW5E,OAAOvK,GAAG0N,MAAM5a,OAC7BmN,EAAI,EAAGA,EAAIkS,EAAMlS,GAAK,EACvBka,EAASla,GAAKkP,EAAW5E,OAAOvK,GAAG0N,MAAMzN,GAE7C,MACG,GAAIob,GAAkB5N,GAAe4N,EAAiB5N,EAAc0B,EAAW5E,OAAOvK,EAAI,GAAG+O,cAAe,CAG/G,IAFAqM,GAAeC,EAAiB5N,GAAe0B,EAAW5E,OAAOvK,EAAI,GAAG+O,cACxEoD,EAAOhD,EAAW5E,OAAOvK,GAAG0N,MAAM5a,OAC7BmN,EAAI,EAAGA,EAAIkS,EAAMlS,GAAK,EACvBka,EAASla,GAAKkP,EAAW5E,OAAOvK,GAAG0N,MAAMzN,IAAMkP,EAAW5E,OAAOvK,EAAI,GAAG0N,MAAMzN,GAAKkP,EAAW5E,OAAOvK,GAAG0N,MAAMzN,IAAMmb,EAExH,MAEApb,EAAIkS,EAAO,EACXlS,GAAK,EAELrI,GAAO,EAGfuiB,EAAQuB,WAAazb,EACrBka,EAAQsB,iBAAmB/N,EAAc0B,EAAW5E,OAAOvK,GAAG+O,cAC9DmL,EAAQqB,mBAAqBxoB,OAE9B,CACH,IAAI2oB,EAAMC,EAAMC,EAAKC,EAAKC,EAG1B,GAFA7kB,EAAMsjB,EAAQvgB,EAAElH,OAChB+nB,EAAWL,EAAYxgB,GAAKugB,EAAQxa,EAChC9W,KAAK8yB,IAAoB,IAAdxB,EAAQxgB,EACnB,GAAIkgB,GAAYa,EACZX,EAAS,GAAKU,EAAS,GACvBV,EAAS,GAAKU,EAAS,GACvBV,EAAS,GAAKU,EAAS,QACpB,GAAIZ,GAAYc,EACnBZ,EAAS,GAAKI,EAAQvgB,EAAE,GACxBmgB,EAAS,GAAKI,EAAQvgB,EAAE,GACxBmgB,EAAS,GAAKI,EAAQvgB,EAAE,OACrB,CACH,IAAIgiB,EAAYC,EAAiB1B,EAAQvgB,GACrCkiB,EAAUD,EAAiBpB,GAC3BsB,GAAQlC,EAAWc,IAAYD,EAAcC,GACjDqB,EAAkBjC,EAAUkC,EAAML,EAAWE,EAASC,SAI1D,IAAIppB,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EACH,IAAdwnB,EAAQxgB,IACJkgB,GAAYa,EACZxN,EAAO,EACD2M,EAAWc,EACjBzN,EAAO,GAEJiN,EAAQla,EAAE2C,EAAE/N,cAAgBrK,OACtB2vB,EAAQY,SACTZ,EAAQY,OAAS,IAEhBZ,EAAQY,OAAOpoB,GAQhB0nB,EAAMF,EAAQY,OAAOpoB,IAPrB2oB,EAAkC,qBAAnBnB,EAAQla,EAAE2C,EAAEjQ,GAAsBwnB,EAAQla,EAAE2C,EAAE,GAAKuX,EAAQla,EAAE2C,EAAEjQ,GAC9E4oB,EAAkC,qBAAnBpB,EAAQla,EAAE4C,EAAElQ,GAAsBwnB,EAAQla,EAAE4C,EAAE,GAAKsX,EAAQla,EAAE4C,EAAElQ,GAC9E6oB,EAAiC,qBAAnBrB,EAAQxnB,EAAEiQ,EAAEjQ,GAAsBwnB,EAAQxnB,EAAEiQ,EAAE,GAAKuX,EAAQxnB,EAAEiQ,EAAEjQ,GAC7E8oB,EAAiC,qBAAnBtB,EAAQxnB,EAAEkQ,EAAElQ,GAAsBwnB,EAAQxnB,EAAEkQ,EAAE,GAAKsX,EAAQxnB,EAAEkQ,EAAElQ,GAC7E0nB,EAAMpS,cAAcE,gBAAgBmT,EAAMC,EAAMC,EAAKC,GAAKnR,IAC1D6P,EAAQY,OAAOpoB,GAAK0nB,IAKnBF,EAAQY,OAQTV,EAAMF,EAAQY,QAPdO,EAAOnB,EAAQla,EAAE2C,EACjB2Y,EAAOpB,EAAQla,EAAE4C,EACjB2Y,EAAMrB,EAAQxnB,EAAEiQ,EAChB6Y,EAAMtB,EAAQxnB,EAAEkQ,EAChBwX,EAAMpS,cAAcE,gBAAgBmT,EAAMC,EAAMC,EAAKC,GAAKnR,IAC1D6P,EAAQY,OAASV,GAKzBnN,EAAOmN,GAAKR,EAAWc,IAAYD,EAAcC,MAIzDF,EAAWL,EAAYxgB,GAAKugB,EAAQxa,EACpC+b,EAAyB,IAAdvB,EAAQxgB,EAAUwgB,EAAQvgB,EAAEjH,GAAKwnB,EAAQvgB,EAAEjH,IAAM8nB,EAAS9nB,GAAKwnB,EAAQvgB,EAAEjH,IAAMua,EAEpE,qBAAlBrkB,KAAKoxB,SACLF,EAASpnB,GAAK+oB,EAEd3B,EAAW2B,EAM3B,OADA5B,EAAQS,UAAYD,EACbP,EAIX,SAASkC,EAAMxc,EAAGzF,EAAGI,GACjB,IAII8hB,EAAOC,EAAOC,EAAOC,EAAQC,EAJ7B9U,EAAM,GACNrI,EAAKM,EAAE,GAAIL,EAAKK,EAAE,GAAI8c,EAAK9c,EAAE,GAAI+c,EAAK/c,EAAE,GAC5Cgd,EAAKziB,EAAE,GAAI0iB,EAAK1iB,EAAE,GAAI2iB,EAAK3iB,EAAE,GAAI4iB,EAAK5iB,EAAE,GA0BxC,OAtBAmiB,EAAQhd,EAAKsd,EAAKrd,EAAKsd,EAAKH,EAAKI,EAAKH,EAAKI,EACvCT,EAAQ,IACRA,GAASA,EACTM,GAAMA,EACNC,GAAMA,EACNC,GAAMA,EACNC,GAAMA,GAEL,EAAMT,EAAS,MAChBD,EAAQ3oB,KAAKspB,KAAKV,GAClBC,EAAQ7oB,KAAK2K,IAAIge,GACjBG,EAAS9oB,KAAK2K,KAAK,EAAM9D,GAAK8hB,GAASE,EACvCE,EAAS/oB,KAAK2K,IAAI9D,EAAI8hB,GAASE,IAE/BC,EAAS,EAAMjiB,EACfkiB,EAASliB,GAEboN,EAAI,GAAK6U,EAASld,EAAKmd,EAASG,EAChCjV,EAAI,GAAK6U,EAASjd,EAAKkd,EAASI,EAChClV,EAAI,GAAK6U,EAASE,EAAKD,EAASK,EAChCnV,EAAI,GAAK6U,EAASG,EAAKF,EAASM,EAEzBpV,EAGX,SAASwU,EAAkBxU,EAAKsV,GAC5B,IAAIC,EAAKD,EAAK,GACVE,EAAKF,EAAK,GACVG,EAAKH,EAAK,GACVI,EAAKJ,EAAK,GACVK,EAAU5pB,KAAK6pB,MAAM,EAAEJ,EAAGE,EAAG,EAAEH,EAAGE,EAAK,EAAI,EAAED,EAAGA,EAAK,EAAEC,EAAGA,GAC1DI,EAAW9pB,KAAK+pB,KAAK,EAAEP,EAAGC,EAAK,EAAEC,EAAGC,GACpCK,EAAOhqB,KAAK6pB,MAAM,EAAEL,EAAGG,EAAG,EAAEF,EAAGC,EAAK,EAAI,EAAEF,EAAGA,EAAK,EAAEE,EAAGA,GAC3DzV,EAAI,GAAK2V,EAAQhmB,UACjBqQ,EAAI,GAAK6V,EAASlmB,UAClBqQ,EAAI,GAAK+V,EAAKpmB,UAGlB,SAAS0kB,EAAiB2B,GACtB,IAAIL,EAAUK,EAAO,GAAKrmB,UACtBkmB,EAAWG,EAAO,GAAKrmB,UACvBomB,EAAOC,EAAO,GAAKrmB,UACnBsK,EAAKlO,KAAKyK,IAAImf,EAAU,GACxB1c,EAAKlN,KAAKyK,IAAIqf,EAAW,GACzBI,EAAKlqB,KAAKyK,IAAIuf,EAAO,GACrBG,EAAKnqB,KAAK2K,IAAIif,EAAU,GACxBQ,EAAKpqB,KAAK2K,IAAImf,EAAW,GACzBO,EAAKrqB,KAAK2K,IAAIqf,EAAO,GACrBxI,EAAItT,EAAKhB,EAAKgd,EAAKC,EAAKC,EAAKC,EAC7Bhb,EAAI8a,EAAKC,EAAKF,EAAKhc,EAAKhB,EAAKmd,EAC7B/a,EAAI6a,EAAKjd,EAAKgd,EAAKhc,EAAKkc,EAAKC,EAC7B9a,EAAIrB,EAAKkc,EAAKF,EAAKC,EAAKjd,EAAKmd,EAEjC,MAAO,CAAChb,EAAEC,EAAEC,EAAEiS,GAGlB,SAAS8I,IACL,IAAIhE,EAAWhxB,KAAKoD,KAAK6xB,cAAgBj1B,KAAKmxB,WAC1CtD,EAAW7tB,KAAK2xB,UAAU,GAAGpgB,EAAIvR,KAAKmxB,WACtC+D,EAAUl1B,KAAK2xB,UAAU3xB,KAAK2xB,UAAU9nB,OAAQ,GAAG0H,EAAEvR,KAAKmxB,WAC9D,KAAKH,IAAahxB,KAAKm1B,SAAS9C,WAAcryB,KAAKm1B,SAAS9C,YAAcxB,IAAe7wB,KAAKm1B,SAAS9C,WAAa6C,GAAWlE,GAAYkE,GAAal1B,KAAKm1B,SAAS9C,UAAYxE,GAAYmD,EAAWnD,IAAa,CAC/M7tB,KAAKm1B,SAAS9C,WAAarB,IAC1BhxB,KAAKm1B,SAAS7C,oBAAsB,EACpCtyB,KAAKm1B,SAASzD,UAAY,GAG9B,IAAI0D,EAAep1B,KAAK+wB,iBAAiBC,EAAUhxB,KAAKm1B,UACxDn1B,KAAKqxB,GAAK+D,EAGd,OADAp1B,KAAKm1B,SAAS9C,UAAYrB,EACnBhxB,KAAKqxB,GAGhB,SAASgE,EAAUpnB,GACf,IAAIqnB,EACJ,GAAqB,mBAAlBt1B,KAAKoxB,SACJkE,EAAkBrnB,EAAMjO,KAAKu1B,KAC1BzE,EAAS9wB,KAAKgR,EAAIskB,GAAmB,OACpCt1B,KAAKgR,EAAIskB,EACTt1B,KAAK2T,MAAO,OAEb,CACH,IAAI7J,EAAI,EAAGkE,EAAMhO,KAAKgR,EAAEnH,OACxB,MAAOC,EAAIkE,EACPsnB,EAAkBrnB,EAAInE,GAAK9J,KAAKu1B,KAC5BzE,EAAS9wB,KAAKgR,EAAElH,GAAKwrB,GAAmB,OACxCt1B,KAAKgR,EAAElH,GAAKwrB,EACZt1B,KAAK2T,MAAO,GAEhB7J,GAAK,GAKjB,SAAS0rB,IACL,GAAIx1B,KAAKy1B,KAAKC,WAAWC,UAAY31B,KAAK21B,SAAY31B,KAAK41B,gBAAgB/rB,OAG3E,GAAG7J,KAAK61B,KACJ71B,KAAKq1B,UAAUr1B,KAAKqxB,QADxB,CAIArxB,KAAK61B,MAAO,EACZ71B,KAAK2T,KAAO3T,KAAK81B,cAEjB,IAAIhsB,EAAGkE,EAAMhO,KAAK41B,gBAAgB/rB,OAC9BksB,EAAa/1B,KAAKg2B,GAAKh2B,KAAKqxB,GAAKrxB,KAAKqB,KAAK2V,EAC/C,IAAIlN,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EACrBisB,EAAa/1B,KAAK41B,gBAAgB9rB,GAAGisB,GAEzC/1B,KAAKq1B,UAAUU,GACf/1B,KAAK81B,eAAgB,EACrB91B,KAAK61B,MAAO,EACZ71B,KAAK21B,QAAU31B,KAAKy1B,KAAKC,WAAWC,SAGxC,SAASM,EAAUC,GACfl2B,KAAK41B,gBAAgBrjB,KAAK2jB,GAC1Bl2B,KAAKqC,UAAUiR,mBAAmBtT,MAGtC,SAASm2B,EAAcV,EAAMp0B,EAAMk0B,EAAMlzB,GACrCrC,KAAKoxB,SAAW,iBAChBpxB,KAAKu1B,KAAOA,GAAQ,EACpBv1B,KAAKqB,KAAOA,EACZrB,KAAKgR,EAAIukB,EAAOl0B,EAAK2V,EAAIue,EAAOl0B,EAAK2V,EACrChX,KAAKqxB,GAAKhwB,EAAK2V,EACfhX,KAAK2T,MAAO,EACZ3T,KAAKy1B,KAAOA,EACZz1B,KAAKqC,UAAYA,EACjBrC,KAAKoD,KAAOqyB,EAAKryB,KACjBpD,KAAKgX,GAAI,EACThX,KAAKg2B,IAAK,EACVh2B,KAAKo2B,IAAM,EACXp2B,KAAK41B,gBAAkB,GACvB51B,KAAK81B,eAAgB,EACrB91B,KAAK4T,SAAW4hB,EAChBx1B,KAAKq1B,UAAYA,EACjBr1B,KAAKi2B,UAAYA,EAGrB,SAASI,EAAyBZ,EAAMp0B,EAAMk0B,EAAMlzB,GAChDrC,KAAKoxB,SAAW,mBAChBpxB,KAAKu1B,KAAOA,GAAQ,EACpBv1B,KAAKqB,KAAOA,EACZrB,KAAK2T,MAAO,EACZ3T,KAAKy1B,KAAOA,EACZz1B,KAAKqC,UAAYA,EACjBrC,KAAKoD,KAAOqyB,EAAKryB,KACjBpD,KAAKgX,GAAI,EACThX,KAAKg2B,IAAK,EACVh2B,KAAK21B,SAAW,EAChB,IAAI7rB,EAAGkE,EAAM3M,EAAK2V,EAAEnN,OACpB7J,KAAKgR,EAAI2B,iBAAiB,UAAW3E,GACrChO,KAAKqxB,GAAK1e,iBAAiB,UAAW3E,GAC5B2E,iBAAiB,UAAW3E,GAEtC,IADAhO,KAAKo2B,IAAMzjB,iBAAiB,UAAW3E,GAClClE,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EACtB9J,KAAKgR,EAAElH,GAAKzI,EAAK2V,EAAElN,GAAK9J,KAAKu1B,KAC7Bv1B,KAAKqxB,GAAGvnB,GAAKzI,EAAK2V,EAAElN,GAExB9J,KAAK81B,eAAgB,EACrB91B,KAAK41B,gBAAkB,GACvB51B,KAAK4T,SAAW4hB,EAChBx1B,KAAKq1B,UAAYA,EACjBr1B,KAAKi2B,UAAYA,EAGrB,SAASK,EAAuBb,EAAMp0B,EAAMk0B,EAAMlzB,GAC9CrC,KAAKoxB,SAAW,iBAChBpxB,KAAK2xB,UAAYtwB,EAAK2V,EACtBhX,KAAKmxB,WAAasE,EAAKp0B,KAAKk1B,GAC5Bv2B,KAAK21B,SAAW,EAChB31B,KAAKm1B,SAAW,CAAC9C,UAAWxB,EAAWa,UAAW,EAAG7e,MAAO,EAAGyf,oBAAqB,GACpFtyB,KAAKgX,GAAI,EACThX,KAAKg2B,IAAK,EACVh2B,KAAKqB,KAAOA,EACZrB,KAAKu1B,KAAOA,GAAQ,EACpBv1B,KAAKy1B,KAAOA,EACZz1B,KAAKqC,UAAYA,EACjBrC,KAAKoD,KAAOqyB,EAAKryB,KACjBpD,KAAKgR,EAAI6f,EACT7wB,KAAKqxB,GAAKR,EACV7wB,KAAK81B,eAAgB,EACrB91B,KAAK4T,SAAW4hB,EAChBx1B,KAAKq1B,UAAYA,EACjBr1B,KAAK+wB,iBAAmBA,EACxB/wB,KAAK41B,gBAAkB,CAACZ,EAAsBviB,KAAKzS,OACnDA,KAAKi2B,UAAYA,EAGrB,SAASO,EAAkCf,EAAMp0B,EAAMk0B,EAAMlzB,GACzDrC,KAAKoxB,SAAW,mBAChB,IAAItnB,EACAiH,EAAG+F,EAAEib,EAAGC,EADLhkB,EAAM3M,EAAK2V,EAAEnN,OAEpB,IAAKC,EAAI,EAAGA,EAAIkE,EAAM,EAAGlE,GAAK,EACtBzI,EAAK2V,EAAElN,GAAGioB,IAAM1wB,EAAK2V,EAAElN,GAAGiH,GAAK1P,EAAK2V,EAAElN,EAAI,IAAMzI,EAAK2V,EAAElN,EAAI,GAAGiH,IAC9DA,EAAI1P,EAAK2V,EAAElN,GAAGiH,EACd+F,EAAIzV,EAAK2V,EAAElN,EAAI,GAAGiH,EAClBghB,EAAK1wB,EAAK2V,EAAElN,GAAGioB,GACfC,EAAK3wB,EAAK2V,EAAElN,GAAGkoB,IACE,IAAbjhB,EAAElH,SAAkBkH,EAAE,KAAO+F,EAAE,IAAM/F,EAAE,KAAO+F,EAAE,KAAO4R,IAAIxF,cAAcnS,EAAE,GAAGA,EAAE,GAAG+F,EAAE,GAAGA,EAAE,GAAG/F,EAAE,GAAKghB,EAAG,GAAGhhB,EAAE,GAAKghB,EAAG,KAAOrJ,IAAIxF,cAAcnS,EAAE,GAAGA,EAAE,GAAG+F,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAKkb,EAAG,GAAGlb,EAAE,GAAKkb,EAAG,KAAsB,IAAbjhB,EAAElH,SAAkBkH,EAAE,KAAO+F,EAAE,IAAM/F,EAAE,KAAO+F,EAAE,IAAM/F,EAAE,KAAO+F,EAAE,KAAO4R,IAAIhF,cAAc3S,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAG+F,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAG/F,EAAE,GAAKghB,EAAG,GAAGhhB,EAAE,GAAKghB,EAAG,GAAGhhB,EAAE,GAAKghB,EAAG,KAAOrJ,IAAIhF,cAAc3S,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAG+F,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAKkb,EAAG,GAAGlb,EAAE,GAAKkb,EAAG,GAAGlb,EAAE,GAAKkb,EAAG,OACxb3wB,EAAK2V,EAAElN,GAAGioB,GAAK,KACf1wB,EAAK2V,EAAElN,GAAGkoB,GAAK,MAEhBjhB,EAAE,KAAO+F,EAAE,IAAM/F,EAAE,KAAO+F,EAAE,IAAgB,IAAVib,EAAG,IAAsB,IAAVA,EAAG,IAAsB,IAAVC,EAAG,IAAsB,IAAVA,EAAG,KACjE,IAAbjhB,EAAElH,QAAiBkH,EAAE,KAAO+F,EAAE,IAAgB,IAAVib,EAAG,IAAsB,IAAVC,EAAG,MACrD3wB,EAAK2V,EAAElN,GAAGioB,GAAK,KACf1wB,EAAK2V,EAAElN,GAAGkoB,GAAK,OAK/BhyB,KAAK41B,gBAAkB,CAACZ,EAAsBviB,KAAKzS,OACnDA,KAAK2xB,UAAYtwB,EAAK2V,EACtBhX,KAAKmxB,WAAasE,EAAKp0B,KAAKk1B,GAC5Bv2B,KAAKgX,GAAI,EACThX,KAAKg2B,IAAK,EACVh2B,KAAK81B,eAAgB,EACrB91B,KAAKu1B,KAAOA,GAAQ,EACpBv1B,KAAKy1B,KAAOA,EACZz1B,KAAKqC,UAAYA,EACjBrC,KAAKoD,KAAOqyB,EAAKryB,KACjBpD,KAAK4T,SAAW4hB,EAChBx1B,KAAKq1B,UAAYA,EACjBr1B,KAAK+wB,iBAAmBA,EACxB/wB,KAAK21B,SAAW,EAChB,IAAIc,EAASp1B,EAAK2V,EAAE,GAAGjG,EAAElH,OAGzB,IAFA7J,KAAKgR,EAAI2B,iBAAiB,UAAW8jB,GACrCz2B,KAAKqxB,GAAK1e,iBAAiB,UAAW8jB,GACjC3sB,EAAI,EAAGA,EAAI2sB,EAAQ3sB,GAAK,EACzB9J,KAAKgR,EAAElH,GAAK+mB,EACZ7wB,KAAKqxB,GAAGvnB,GAAK+mB,EAEjB7wB,KAAKm1B,SAAS,CAAC9C,UAAUxB,EAAUa,UAAU,EAAE7e,MAAMF,iBAAiB,UAAW8jB,IACjFz2B,KAAKi2B,UAAYA,EAGrB,SAASS,EAAQjB,EAAKp0B,EAAKK,EAAM6zB,EAAMlzB,GACnC,IAAIgP,EACJ,GAAIhQ,EAAK2V,EAAEnN,OAEL,GAAyB,kBAAfxI,EAAK2V,EAAE,GACnB3F,EAAI,IAAIglB,EAAyBZ,EAAKp0B,EAAMk0B,EAAMlzB,QAElD,OAAOX,GACH,KAAK,EACD2P,EAAI,IAAIilB,EAAuBb,EAAKp0B,EAAKk0B,EAAMlzB,GAC/C,MACJ,KAAK,EACDgP,EAAI,IAAImlB,EAAkCf,EAAKp0B,EAAKk0B,EAAMlzB,GAC1D,WAVRgP,EAAI,IAAI8kB,EAAcV,EAAKp0B,EAAMk0B,EAAMlzB,GAgB3C,OAHGgP,EAAEukB,gBAAgB/rB,QACjBxH,EAAUiR,mBAAmBjC,GAE1BA,EAGX,IAAIgO,EAAK,CACLqX,QAASA,GAEb,OAAOrX,EAvbW,GAyblBsX,yBAA4B,WAE5B,IAAIC,EAAgB,CAAC,EAAE,GAEvB,SAASC,EAAcC,GACnB,IAAInjB,EAAO3T,KAAK2T,KAChB3T,KAAK0T,2BACL1T,KAAK2T,KAAO3T,KAAK2T,MAAQA,EACrB3T,KAAK4W,GACLkgB,EAAIzf,WAAWrX,KAAK4W,EAAE5F,EAAE,IAAKhR,KAAK4W,EAAE5F,EAAE,GAAIhR,KAAK4W,EAAE5F,EAAE,IAEnDhR,KAAK+Q,GACL+lB,EAAIrgB,MAAMzW,KAAK+Q,EAAEC,EAAE,GAAIhR,KAAK+Q,EAAEC,EAAE,GAAIhR,KAAK+Q,EAAEC,EAAE,IAE7ChR,KAAK+2B,IACLD,EAAItgB,cAAcxW,KAAK+2B,GAAG/lB,EAAGhR,KAAKg3B,GAAGhmB,GAErChR,KAAKiR,EACL6lB,EAAIphB,QAAQ1V,KAAKiR,EAAED,GAEnB8lB,EAAI7gB,SAASjW,KAAKi3B,GAAGjmB,GAAGgF,QAAQhW,KAAKk3B,GAAGlmB,GAAG+E,QAAQ/V,KAAKm3B,GAAGnmB,GAAGiF,SAASjW,KAAKo3B,GAAGpmB,EAAE,IAAIgF,QAAQhW,KAAKo3B,GAAGpmB,EAAE,IAAI+E,QAAQ/V,KAAKo3B,GAAGpmB,EAAE,IAE7HhR,KAAKqB,KAAKgQ,EAAEN,EACR/Q,KAAKqB,KAAKgQ,EAAE4I,EACZ6c,EAAIzf,UAAUrX,KAAKq3B,GAAGrmB,EAAGhR,KAAKs3B,GAAGtmB,GAAIhR,KAAKu3B,GAAGvmB,GAE7C8lB,EAAIzf,UAAUrX,KAAKq3B,GAAGrmB,EAAGhR,KAAKs3B,GAAGtmB,EAAG,GAGxC8lB,EAAIzf,UAAUrX,KAAKqR,EAAEL,EAAE,GAAIhR,KAAKqR,EAAEL,EAAE,IAAKhR,KAAKqR,EAAEL,EAAE,IAG1D,SAASwmB,EAAYC,GACjB,GAAIz3B,KAAKy1B,KAAKC,WAAWC,UAAY31B,KAAK21B,QAA1C,CAUA,GAPG31B,KAAK03B,WACJ13B,KAAK23B,qBACL33B,KAAK03B,UAAW,GAGpB13B,KAAK0T,2BAED1T,KAAK2T,MAAQ8jB,EAAa,CAgB1B,GAfAz3B,KAAKgR,EAAE6I,eAAe7Z,KAAK43B,IAAIr2B,OAC3BvB,KAAK63B,uBAAyB,GAC9B73B,KAAKgR,EAAEqG,WAAWrX,KAAK4W,EAAE5F,EAAE,IAAKhR,KAAK4W,EAAE5F,EAAE,GAAIhR,KAAK4W,EAAE5F,EAAE,IAEvDhR,KAAK63B,uBAAyB,GAC7B73B,KAAKgR,EAAEyF,MAAMzW,KAAK+Q,EAAEC,EAAE,GAAIhR,KAAK+Q,EAAEC,EAAE,GAAIhR,KAAK+Q,EAAEC,EAAE,IAEhDhR,KAAK+2B,IAAM/2B,KAAK63B,uBAAyB,GACzC73B,KAAKgR,EAAEwF,cAAcxW,KAAK+2B,GAAG/lB,EAAGhR,KAAKg3B,GAAGhmB,GAExChR,KAAKiR,GAAKjR,KAAK63B,uBAAyB,EACxC73B,KAAKgR,EAAE0E,QAAQ1V,KAAKiR,EAAED,IACdhR,KAAKiR,GAAKjR,KAAK63B,uBAAyB,GAChD73B,KAAKgR,EAAEiF,SAASjW,KAAKi3B,GAAGjmB,GAAGgF,QAAQhW,KAAKk3B,GAAGlmB,GAAG+E,QAAQ/V,KAAKm3B,GAAGnmB,GAAGiF,SAASjW,KAAKo3B,GAAGpmB,EAAE,IAAIgF,QAAQhW,KAAKo3B,GAAGpmB,EAAE,IAAI+E,QAAQ/V,KAAKo3B,GAAGpmB,EAAE,IAEhIhR,KAAK83B,aAAc,CACnB,IAAIC,EAAGC,EAAIC,EAAYj4B,KAAKy1B,KAAKC,WAAWuC,UAC5C,GAAGj4B,KAAKqR,GAAKrR,KAAKqR,EAAEsgB,WAAa3xB,KAAKqR,EAAE6mB,eAChCl4B,KAAKqR,EAAE8jB,SAAS9C,UAAUryB,KAAKqR,EAAE8f,YAAcnxB,KAAKqR,EAAEsgB,UAAU,GAAGpgB,GACnEwmB,EAAK/3B,KAAKqR,EAAE6mB,gBAAgBl4B,KAAKqR,EAAEsgB,UAAU,GAAGpgB,EAAI,KAAQ0mB,EAAU,GACtED,EAAKh4B,KAAKqR,EAAE6mB,eAAel4B,KAAKqR,EAAEsgB,UAAU,GAAGpgB,EAAI0mB,EAAW,IACxDj4B,KAAKqR,EAAE8jB,SAAS9C,UAAUryB,KAAKqR,EAAE8f,YAAcnxB,KAAKqR,EAAEsgB,UAAU3xB,KAAKqR,EAAEsgB,UAAU9nB,OAAS,GAAG0H,GACnGwmB,EAAK/3B,KAAKqR,EAAE6mB,eAAgBl4B,KAAKqR,EAAEsgB,UAAU3xB,KAAKqR,EAAEsgB,UAAU9nB,OAAS,GAAG0H,EAAI0mB,EAAY,GAC1FD,EAAKh4B,KAAKqR,EAAE6mB,gBAAgBl4B,KAAKqR,EAAEsgB,UAAU3xB,KAAKqR,EAAEsgB,UAAU9nB,OAAS,GAAG0H,EAAI,KAAQ0mB,EAAW,KAEjGF,EAAK/3B,KAAKqR,EAAEggB,GACZ2G,EAAKh4B,KAAKqR,EAAE6mB,gBAAgBl4B,KAAKqR,EAAE8jB,SAAS9C,UAAUryB,KAAKqR,EAAE8f,WAAa,KAAQ8G,EAAWj4B,KAAKqR,EAAE8f,kBAErG,GAAGnxB,KAAKq3B,IAAMr3B,KAAKq3B,GAAG1F,WAAa3xB,KAAKs3B,GAAG3F,WAAa3xB,KAAKq3B,GAAGa,gBAAkBl4B,KAAKs3B,GAAGY,eAAgB,CAC7GH,EAAK,GACLC,EAAK,GACL,IAAIX,EAAKr3B,KAAKq3B,GAAIC,EAAKt3B,KAAKs3B,GACxBD,EAAGlC,SAAS9C,UAAUgF,EAAGlG,YAAckG,EAAG1F,UAAU,GAAGpgB,GACvDwmB,EAAG,GAAKV,EAAGa,gBAAgBb,EAAG1F,UAAU,GAAGpgB,EAAI,KAAQ0mB,EAAU,GACjEF,EAAG,GAAKT,EAAGY,gBAAgBZ,EAAG3F,UAAU,GAAGpgB,EAAI,KAAQ0mB,EAAU,GACjED,EAAG,GAAKX,EAAGa,eAAgBb,EAAG1F,UAAU,GAAI,EAAIsG,EAAU,GAC1DD,EAAG,GAAKV,EAAGY,eAAgBZ,EAAG3F,UAAU,GAAI,EAAIsG,EAAU,IACpDZ,EAAGlC,SAAS9C,UAAUgF,EAAGlG,YAAckG,EAAG1F,UAAU0F,EAAG1F,UAAU9nB,OAAS,GAAG0H,GACnFwmB,EAAG,GAAKV,EAAGa,eAAgBb,EAAG1F,UAAU0F,EAAG1F,UAAU9nB,OAAS,GAAG0H,EAAI0mB,EAAW,GAChFF,EAAG,GAAKT,EAAGY,eAAgBZ,EAAG3F,UAAU2F,EAAG3F,UAAU9nB,OAAS,GAAG0H,EAAI0mB,EAAW,GAChFD,EAAG,GAAKX,EAAGa,gBAAgBb,EAAG1F,UAAU0F,EAAG1F,UAAU9nB,OAAS,GAAG0H,EAAI,KAAQ0mB,EAAU,GACvFD,EAAG,GAAKV,EAAGY,gBAAgBZ,EAAG3F,UAAU2F,EAAG3F,UAAU9nB,OAAS,GAAG0H,EAAI,KAAQ0mB,EAAU,KAEvFF,EAAK,CAACV,EAAGhG,GAAIiG,EAAGjG,IAChB2G,EAAG,GAAKX,EAAGa,gBAAgBb,EAAGlC,SAAS9C,UAAUgF,EAAGlG,WAAa,KAAQ8G,EAAUZ,EAAGlG,YACtF6G,EAAG,GAAKV,EAAGY,gBAAgBZ,EAAGnC,SAAS9C,UAAUiF,EAAGnG,WAAa,KAAQ8G,EAAUX,EAAGnG,kBAG1F4G,EAAKC,EAAKpB,EAEd52B,KAAKgR,EAAE0E,QAAQhL,KAAK6pB,MAAMwD,EAAG,GAAKC,EAAG,GAAID,EAAG,GAAKC,EAAG,KAErDh4B,KAAKqB,KAAKgQ,GAAKrR,KAAKqB,KAAKgQ,EAAEN,EACvB/Q,KAAKqB,KAAKgQ,EAAE4I,EACXja,KAAKgR,EAAEqG,UAAUrX,KAAKq3B,GAAGrmB,EAAGhR,KAAKs3B,GAAGtmB,GAAIhR,KAAKu3B,GAAGvmB,GAEhDhR,KAAKgR,EAAEqG,UAAUrX,KAAKq3B,GAAGrmB,EAAGhR,KAAKs3B,GAAGtmB,EAAG,GAG3ChR,KAAKgR,EAAEqG,UAAUrX,KAAKqR,EAAEL,EAAE,GAAGhR,KAAKqR,EAAEL,EAAE,IAAIhR,KAAKqR,EAAEL,EAAE,IAG3DhR,KAAK21B,QAAU31B,KAAKy1B,KAAKC,WAAWC,SAGxC,SAASgC,IACL,IAAI33B,KAAK4W,EAAEI,IACPhX,KAAK43B,IAAIvgB,WAAWrX,KAAK4W,EAAE5F,EAAE,IAAKhR,KAAK4W,EAAE5F,EAAE,GAAIhR,KAAK4W,EAAE5F,EAAE,IACxDhR,KAAK63B,uBAAyB,GAI9B73B,KAAK+Q,EAAE6kB,gBAAgB/rB,QAA3B,CAMA,GALI7J,KAAK43B,IAAInhB,MAAMzW,KAAK+Q,EAAEC,EAAE,GAAIhR,KAAK+Q,EAAEC,EAAE,GAAIhR,KAAK+Q,EAAEC,EAAE,IAClDhR,KAAK63B,uBAAyB,EAI/B73B,KAAK+2B,GAAI,CACR,GAAI/2B,KAAK+2B,GAAGnB,gBAAgB/rB,QAAW7J,KAAKg3B,GAAGpB,gBAAgB/rB,OAI3D,OAHA7J,KAAK43B,IAAIphB,cAAcxW,KAAK+2B,GAAG/lB,EAAGhR,KAAKg3B,GAAGhmB,GAC9ChR,KAAK63B,uBAAyB,EAKlC,GAAI73B,KAAKiR,EAAG,CACR,GAAIjR,KAAKiR,EAAE2kB,gBAAgB/rB,OAIvB,OAHA7J,KAAK43B,IAAIliB,QAAQ1V,KAAKiR,EAAED,GACxBhR,KAAK63B,uBAAyB,OAI3B73B,KAAKi3B,GAAGrB,gBAAgB/rB,QAAW7J,KAAKk3B,GAAGtB,gBAAgB/rB,QAAW7J,KAAKm3B,GAAGvB,gBAAgB/rB,QAAW7J,KAAKo3B,GAAGxB,gBAAgB/rB,SACxI7J,KAAK43B,IAAI3hB,SAASjW,KAAKi3B,GAAGjmB,GAAGgF,QAAQhW,KAAKk3B,GAAGlmB,GAAG+E,QAAQ/V,KAAKm3B,GAAGnmB,GAAGiF,SAASjW,KAAKo3B,GAAGpmB,EAAE,IAAIgF,QAAQhW,KAAKo3B,GAAGpmB,EAAE,IAAI+E,QAAQ/V,KAAKo3B,GAAGpmB,EAAE,IAClIhR,KAAK63B,uBAAyB,IAItC,SAASM,KAKT,SAAS7kB,EAAmBC,GACxBvT,KAAKo4B,oBAAoB7kB,GACzBvT,KAAKy1B,KAAKniB,mBAAmBC,GAC7BvT,KAAK03B,UAAW,EAGpB,SAASW,EAAkB5C,EAAKp0B,EAAKgB,GAmBjC,GAlBArC,KAAKy1B,KAAOA,EACZz1B,KAAK21B,SAAW,EAChB31B,KAAKoxB,SAAW,YAChBpxB,KAAKqB,KAAOA,EACZrB,KAAKgR,EAAI,IAAIiE,OAEbjV,KAAK43B,IAAM,IAAI3iB,OACfjV,KAAK63B,uBAAyB,EAC9B73B,KAAK6T,6BAA6BxR,GAAaozB,GAC5Cp0B,EAAKgQ,GAAKhQ,EAAKgQ,EAAEN,GAChB/Q,KAAKq3B,GAAKzG,gBAAgB8F,QAAQjB,EAAKp0B,EAAKgQ,EAAE0I,EAAE,EAAE,EAAE/Z,MACpDA,KAAKs3B,GAAK1G,gBAAgB8F,QAAQjB,EAAKp0B,EAAKgQ,EAAE2I,EAAE,EAAE,EAAEha,MACjDqB,EAAKgQ,EAAE4I,IACNja,KAAKu3B,GAAK3G,gBAAgB8F,QAAQjB,EAAKp0B,EAAKgQ,EAAE4I,EAAE,EAAE,EAAEja,QAGxDA,KAAKqR,EAAIuf,gBAAgB8F,QAAQjB,EAAKp0B,EAAKgQ,GAAK,CAAC2F,EAAE,CAAC,EAAE,EAAE,IAAI,EAAE,EAAEhX,MAEjEqB,EAAK81B,GAAI,CAIR,GAHAn3B,KAAKm3B,GAAKvG,gBAAgB8F,QAAQjB,EAAMp0B,EAAK81B,GAAI,EAAG7oB,UAAWtO,MAC/DA,KAAKk3B,GAAKtG,gBAAgB8F,QAAQjB,EAAMp0B,EAAK61B,GAAI,EAAG5oB,UAAWtO,MAC/DA,KAAKi3B,GAAKrG,gBAAgB8F,QAAQjB,EAAMp0B,EAAK41B,GAAI,EAAG3oB,UAAWtO,MAC5DqB,EAAK+1B,GAAGpgB,EAAE,GAAGgb,GAAI,CAChB,IAAIloB,EAAGkE,EAAM3M,EAAK+1B,GAAGpgB,EAAEnN,OACvB,IAAIC,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACbzI,EAAK+1B,GAAGpgB,EAAElN,GAAGioB,GAAK1wB,EAAK+1B,GAAGpgB,EAAElN,GAAGkoB,GAAK,KAG5ChyB,KAAKo3B,GAAKxG,gBAAgB8F,QAAQjB,EAAMp0B,EAAK+1B,GAAI,EAAG9oB,UAAWtO,MAE/DA,KAAKo3B,GAAGtE,IAAK,OAEb9yB,KAAKiR,EAAI2f,gBAAgB8F,QAAQjB,EAAMp0B,EAAK4P,GAAK,CAAC+F,EAAG,GAAI,EAAG1I,UAAWtO,MAExEqB,EAAK01B,KACJ/2B,KAAK+2B,GAAKnG,gBAAgB8F,QAAQjB,EAAMp0B,EAAK01B,GAAI,EAAGzoB,UAAWtO,MAC/DA,KAAKg3B,GAAKpG,gBAAgB8F,QAAQjB,EAAMp0B,EAAK21B,GAAI,EAAG1oB,UAAWtO,OAEnEA,KAAK4W,EAAIga,gBAAgB8F,QAAQjB,EAAKp0B,EAAKuV,GAAK,CAACI,EAAE,CAAC,EAAE,EAAE,IAAI,EAAE,EAAEhX,MAChEA,KAAK+Q,EAAI6f,gBAAgB8F,QAAQjB,EAAKp0B,EAAK0P,GAAK,CAACiG,EAAE,CAAC,IAAI,IAAI,MAAM,EAAE,IAAKhX,MAEtEqB,EAAK+V,EACJpX,KAAKoX,EAAIwZ,gBAAgB8F,QAAQjB,EAAKp0B,EAAK+V,EAAE,EAAE,IAAKqe,GAEpDz1B,KAAKoX,EAAI,CAACzD,MAAK,EAAM3C,EAAE,GAE3BhR,KAAK03B,UAAW,EACZ13B,KAAKwT,kBAAkB3J,QACvB7J,KAAK4T,UAAS,GAetB,SAAS0kB,EAAqB7C,EAAKp0B,EAAKgB,GACpC,OAAO,IAAIg2B,EAAkB5C,EAAKp0B,EAAKgB,GAG3C,OAfAg2B,EAAkBl0B,UAAY,CAC1B0yB,cAAeA,EACfjjB,SAAU4jB,EACVG,mBAAoBA,EACpBQ,WAAYA,GAGhB7V,gBAAgB,CAACjP,0BAA2BglB,GAC5CA,EAAkBl0B,UAAUmP,mBAAqBA,EACjD+kB,EAAkBl0B,UAAUi0B,oBAAsB/kB,yBAAyBlP,UAAUmP,mBAM9E,CACHglB,qBAAsBA,GA/NC,GAmO/B,SAASC,YACRv4B,KAAK6W,GAAI,EACT7W,KAAKwlB,QAAU,EACfxlB,KAAKw4B,WAAa,EAClBx4B,KAAKgR,EAAI5C,iBAAiBpO,KAAKw4B,YAC/Bx4B,KAAKoX,EAAIhJ,iBAAiBpO,KAAKw4B,YAC/Bx4B,KAAK8J,EAAIsE,iBAAiBpO,KAAKw4B,YAGhCD,UAAUp0B,UAAUs0B,YAAc,SAASrT,EAAQpX,GAClDhO,KAAK6W,EAAIuO,EACTplB,KAAK04B,UAAU1qB,GACf,IAAIlE,EAAI,EACR,MAAMA,EAAIkE,EACThO,KAAKgR,EAAElH,GAAK6uB,WAAW9T,aACvB7kB,KAAKoX,EAAEtN,GAAK6uB,WAAW9T,aACvB7kB,KAAK8J,EAAEA,GAAK6uB,WAAW9T,aACvB/a,GAAK,GAIPyuB,UAAUp0B,UAAUu0B,UAAY,SAAS1qB,GACxC,MAAMhO,KAAKw4B,WAAaxqB,EACvBhO,KAAK44B,oBAEN54B,KAAKwlB,QAAUxX,GAGhBuqB,UAAUp0B,UAAUy0B,kBAAoB,WACvC54B,KAAKgR,EAAIhR,KAAKgR,EAAEyf,OAAOriB,iBAAiBpO,KAAKw4B,aAC7Cx4B,KAAK8J,EAAI9J,KAAK8J,EAAE2mB,OAAOriB,iBAAiBpO,KAAKw4B,aAC7Cx4B,KAAKoX,EAAIpX,KAAKoX,EAAEqZ,OAAOriB,iBAAiBpO,KAAKw4B,aAC7Cx4B,KAAKw4B,YAAc,GAGpBD,UAAUp0B,UAAU00B,QAAU,SAAS9e,EAAGC,EAAGtY,EAAMo3B,EAAKxwB,GACvD,IAAIwK,EAKJ,OAJA9S,KAAKwlB,QAAU9a,KAAK+C,IAAIzN,KAAKwlB,QAASsT,EAAM,GACzC94B,KAAKwlB,SAAWxlB,KAAKw4B,YACvBx4B,KAAK44B,oBAECl3B,GACN,IAAK,IACJoR,EAAM9S,KAAKgR,EACX,MACD,IAAK,IACJ8B,EAAM9S,KAAK8J,EACX,MACD,IAAK,IACJgJ,EAAM9S,KAAKoX,EACX,QAEEtE,EAAIgmB,IAAShmB,EAAIgmB,KAASxwB,KAC7BwK,EAAIgmB,GAAOH,WAAW9T,cAEvB/R,EAAIgmB,GAAK,GAAK/e,EACdjH,EAAIgmB,GAAK,GAAK9e,GAGfue,UAAUp0B,UAAU40B,YAAc,SAASC,EAAGC,EAAGC,EAAGC,EAAGC,EAAGC,EAAGP,EAAKxwB,GACjEtI,KAAK64B,QAAQG,EAAGC,EAAG,IAAIH,EAAKxwB,GAC5BtI,KAAK64B,QAAQK,EAAGC,EAAG,IAAIL,EAAKxwB,GAC5BtI,KAAK64B,QAAQO,EAAGC,EAAG,IAAIP,EAAKxwB,IAG7BiwB,UAAUp0B,UAAUm1B,QAAU,WAC7B,IAAIC,EAAU,IAAIhB,UAClBgB,EAAQd,YAAYz4B,KAAK6W,EAAG7W,KAAKwlB,SACjC,IAAIgU,EAAWx5B,KAAKgR,EAAGyoB,EAAYz5B,KAAKoX,EAAGsiB,EAAW15B,KAAK8J,EACvD6vB,EAAO,EACP35B,KAAK6W,IACR0iB,EAAQR,YAAYS,EAAS,GAAG,GAAIA,EAAS,GAAG,GAAIE,EAAS,GAAG,GAAIA,EAAS,GAAG,GAAID,EAAU,GAAG,GAAIA,EAAU,GAAG,GAAI,GAAG,GACnHE,EAAO,GAEX,IAGI7vB,EAHA8vB,EAAM55B,KAAKwlB,QAAU,EACrBxX,EAAMhO,KAAKwlB,QAGf,IAAK1b,EAAI6vB,EAAM7vB,EAAIkE,EAAKlE,GAAK,EAC5ByvB,EAAQR,YAAYS,EAASI,GAAK,GAAIJ,EAASI,GAAK,GAAIF,EAASE,GAAK,GAAIF,EAASE,GAAK,GAAIH,EAAUG,GAAK,GAAIH,EAAUG,GAAK,GAAI9vB,GAAG,GAClI8vB,GAAO,EAEX,OAAOL,GAEX,IAAIM,qBAAwB,WAExB,IAAIhJ,GAAa,OAEjB,SAASiJ,EAAiB9I,EAAU+I,EAAe9I,GAC/C,IACI+I,EAASC,EAASC,EAAQnjB,EAAGC,EAAGiS,EAAMC,EAAM7E,EAAM8V,EADlD1I,EAAiBR,EAAQS,UAEzBsE,EAAKh2B,KAAK2xB,UACd,GAAGX,EAAWgF,EAAG,GAAGzkB,EAAEvR,KAAKmxB,WACvB6I,EAAWhE,EAAG,GAAGjlB,EAAE,GACnBmpB,GAAS,EACTzI,EAAiB,OACf,GAAGT,GAAYgF,EAAGA,EAAGnsB,OAAS,GAAG0H,EAAEvR,KAAKmxB,WAC1C6I,EAAWhE,EAAGA,EAAGnsB,OAAS,GAAGkH,EAAIilB,EAAGA,EAAGnsB,OAAS,GAAGkH,EAAE,GAAKilB,EAAGA,EAAGnsB,OAAS,GAAGiN,EAAE,GAM9EojB,GAAS,MACR,CACD,IACmC5I,EAAQC,EADvCznB,EAAI2nB,EACJzjB,EAAMgoB,EAAGnsB,OAAQ,EAAE6E,GAAO,EAC9B,MAAMA,EAAK,CAGP,GAFA4iB,EAAU0E,EAAGlsB,GACbynB,EAAcyE,EAAGlsB,EAAE,GACfynB,EAAYhgB,EAAIvR,KAAKmxB,WAAcH,EACnC,MAEDlnB,EAAIkE,EAAM,EACTlE,GAAK,EAEL4E,GAAO,EAKf,GAFAwrB,EAAuB,IAAd5I,EAAQxgB,EACjB2gB,EAAiB3nB,GACbowB,EAAO,CACP,GAAGlJ,GAAYO,EAAYhgB,EAAEvR,KAAKmxB,WAC9B9M,EAAO,OACL,GAAG2M,EAAWM,EAAQ/f,EAAEvR,KAAKmxB,WAC/B9M,EAAO,MACN,CACD,IAAImN,EACDF,EAAQY,OACPV,EAAMF,EAAQY,QAEdV,EAAMpS,cAAcE,gBAAgBgS,EAAQla,EAAE2C,EAAEuX,EAAQla,EAAE4C,EAAEsX,EAAQxnB,EAAEiQ,EAAEuX,EAAQxnB,EAAEkQ,GAAGyH,IACrF6P,EAAQY,OAASV,GAErBnN,EAAOmN,GAAKR,GAAUM,EAAQ/f,EAAEvR,KAAKmxB,cAAeI,EAAYhgB,EAAEvR,KAAKmxB,YAAaG,EAAQ/f,EAAEvR,KAAKmxB,cAEvG8I,EAAW1I,EAAYxgB,EAAIwgB,EAAYxgB,EAAE,GAAKugB,EAAQxa,EAAE,GAE5DkjB,EAAW1I,EAAQvgB,EAAE,GAMzB,IAJAkY,EAAO8Q,EAAcvU,QACrB0D,EAAO8Q,EAASlwB,EAAE,GAAGD,OACrBonB,EAAQS,UAAYD,EAEhB1a,EAAE,EAAEA,EAAEkS,EAAKlS,GAAG,EACd,IAAIC,EAAE,EAAEA,EAAEkS,EAAKlS,GAAG,EACdmjB,EAAcD,EAASF,EAASlwB,EAAEiN,GAAGC,GAAMgjB,EAASlwB,EAAEiN,GAAGC,IAAIijB,EAASnwB,EAAEiN,GAAGC,GAAGgjB,EAASlwB,EAAEiN,GAAGC,IAAIqN,EAChG0V,EAAcjwB,EAAEiN,GAAGC,GAAKmjB,EACxBA,EAAcD,EAASF,EAAS5iB,EAAEL,GAAGC,GAAMgjB,EAAS5iB,EAAEL,GAAGC,IAAIijB,EAAS7iB,EAAEL,GAAGC,GAAGgjB,EAAS5iB,EAAEL,GAAGC,IAAIqN,EAChG0V,EAAc3iB,EAAEL,GAAGC,GAAKmjB,EACxBA,EAAcD,EAASF,EAAShpB,EAAE+F,GAAGC,GAAMgjB,EAAShpB,EAAE+F,GAAGC,IAAIijB,EAASjpB,EAAE+F,GAAGC,GAAGgjB,EAAShpB,EAAE+F,GAAGC,IAAIqN,EAChG0V,EAAc/oB,EAAE+F,GAAGC,GAAKmjB,EAKpC,SAASC,IACL,IAAIpJ,EAAWhxB,KAAKoD,KAAK6xB,cAAgBj1B,KAAKmxB,WAC1CtD,EAAW7tB,KAAK2xB,UAAU,GAAGpgB,EAAIvR,KAAKmxB,WACtC+D,EAAUl1B,KAAK2xB,UAAU3xB,KAAK2xB,UAAU9nB,OAAS,GAAG0H,EAAIvR,KAAKmxB,WAC7DkB,EAAYryB,KAAKm1B,SAAS9C,UAQ9B,OAPKA,IAAcxB,IAAewB,EAAYxE,GAAYmD,EAAWnD,GAAcwE,EAAY6C,GAAWlE,EAAWkE,KAEjHl1B,KAAKm1B,SAASzD,UAAYW,EAAYrB,EAAWhxB,KAAKm1B,SAASzD,UAAY,EAC3E1xB,KAAK85B,iBAAiB9I,EAAUhxB,KAAKqxB,GAAIrxB,KAAKm1B,WAGlDn1B,KAAKm1B,SAAS9C,UAAYrB,EACnBhxB,KAAKqxB,GAGhB,SAASgJ,IACLr6B,KAAKorB,MAAQprB,KAAKs6B,qBAGtB,SAASC,EAAYC,EAAQC,GACzB,GAAGD,EAAOhV,UAAYiV,EAAOjV,SAAWgV,EAAO3jB,IAAM4jB,EAAO5jB,EACxD,OAAO,EAEX,IAAI/M,EAAGkE,EAAMwsB,EAAOhV,QACpB,IAAI1b,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EACrB,GAAG0wB,EAAOxpB,EAAElH,GAAG,KAAO2wB,EAAOzpB,EAAElH,GAAG,IAC/B0wB,EAAOxpB,EAAElH,GAAG,KAAO2wB,EAAOzpB,EAAElH,GAAG,IAC/B0wB,EAAOpjB,EAAEtN,GAAG,KAAO2wB,EAAOrjB,EAAEtN,GAAG,IAC/B0wB,EAAOpjB,EAAEtN,GAAG,KAAO2wB,EAAOrjB,EAAEtN,GAAG,IAC/B0wB,EAAO1wB,EAAEA,GAAG,KAAO2wB,EAAO3wB,EAAEA,GAAG,IAC/B0wB,EAAO1wB,EAAEA,GAAG,KAAO2wB,EAAO3wB,EAAEA,GAAG,GAC9B,OAAO,EAGf,OAAO,EAGX,SAASurB,EAAUkE,GACXgB,EAAYv6B,KAAKgR,EAAGuoB,KACpBv5B,KAAKgR,EAAI0pB,WAAW9gB,MAAM2f,GAC1Bv5B,KAAKs6B,qBAAqBK,gBAC1B36B,KAAKs6B,qBAAqBM,SAAS56B,KAAKgR,GACxChR,KAAK2T,MAAO,EACZ3T,KAAKorB,MAAQprB,KAAKs6B,sBAI1B,SAAS9E,IACL,GAAIx1B,KAAKy1B,KAAKC,WAAWC,UAAY31B,KAAK21B,QAEnC,GAAK31B,KAAK41B,gBAAgB/rB,OAIjC,GAAI7J,KAAK61B,KACL71B,KAAKq1B,UAAUr1B,KAAKqxB,QADxB,CAIArxB,KAAK61B,MAAO,EACZ71B,KAAK2T,MAAO,EACZ,IACI7J,EADAisB,EAAa/1B,KAAKg2B,GAAKh2B,KAAKqxB,GAAKrxB,KAAKqB,KAAK8oB,GAAKnqB,KAAKqB,KAAK8oB,GAAGnT,EAAIhX,KAAKqB,KAAKoZ,GAAGzD,EAC3EhJ,EAAMhO,KAAK41B,gBAAgB/rB,OAClC,IAAIC,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EACrBisB,EAAa/1B,KAAK41B,gBAAgB9rB,GAAGisB,GAEzC/1B,KAAKq1B,UAAUU,GACf/1B,KAAK61B,MAAO,EACZ71B,KAAK21B,QAAU31B,KAAKy1B,KAAKC,WAAWC,aAhBhC31B,KAAK2T,MAAO,EAmBpB,SAASknB,EAAcpF,EAAMp0B,EAAMK,GAC/B1B,KAAKoxB,SAAW,QAChBpxB,KAAKoD,KAAOqyB,EAAKryB,KACjBpD,KAAKqC,UAAYozB,EACjBz1B,KAAKy1B,KAAOA,EACZz1B,KAAKqB,KAAOA,EACZrB,KAAKgX,GAAI,EACThX,KAAKg2B,IAAK,EACVh2B,KAAK2T,MAAO,EACZ,IAAIwX,EAAoB,IAATzpB,EAAaL,EAAKoZ,GAAGzD,EAAI3V,EAAK8oB,GAAGnT,EAChDhX,KAAKgR,EAAI0pB,WAAW9gB,MAAMuR,GAC1BnrB,KAAKqxB,GAAKqJ,WAAW9gB,MAAM5Z,KAAKgR,GAChChR,KAAKs6B,qBAAuBQ,qBAAqBC,qBACjD/6B,KAAKorB,MAAQprB,KAAKs6B,qBAClBt6B,KAAKorB,MAAMwP,SAAS56B,KAAKgR,GACzBhR,KAAKyV,MAAQ4kB,EACbr6B,KAAK41B,gBAAkB,GAG3B,SAASK,EAAUC,GACfl2B,KAAK41B,gBAAgBrjB,KAAK2jB,GAC1Bl2B,KAAKqC,UAAUiR,mBAAmBtT,MAQtC,SAASg7B,EAAuBvF,EAAKp0B,EAAKK,GACtC1B,KAAKoxB,SAAW,QAChBpxB,KAAKoD,KAAOqyB,EAAKryB,KACjBpD,KAAKy1B,KAAOA,EACZz1B,KAAKqC,UAAYozB,EACjBz1B,KAAKmxB,WAAasE,EAAKp0B,KAAKk1B,GAC5Bv2B,KAAK2xB,UAAqB,IAATjwB,EAAaL,EAAKoZ,GAAGzD,EAAI3V,EAAK8oB,GAAGnT,EAClDhX,KAAKgX,GAAI,EACThX,KAAKg2B,IAAK,EACV,IAAOhoB,EAAMhO,KAAK2xB,UAAU,GAAG5gB,EAAE,GAAGjH,EAAED,OAC3B7J,KAAK2xB,UAAU,GAAG5gB,EAAE,GAAGjH,EAAE,GAAGD,OACvC7J,KAAKgR,EAAI0pB,WAAW7V,aACpB7kB,KAAKgR,EAAEynB,YAAYz4B,KAAK2xB,UAAU,GAAG5gB,EAAE,GAAG8F,EAAG7I,GAC7ChO,KAAKqxB,GAAKqJ,WAAW9gB,MAAM5Z,KAAKgR,GAChChR,KAAKs6B,qBAAuBQ,qBAAqBC,qBACjD/6B,KAAKorB,MAAQprB,KAAKs6B,qBAClBt6B,KAAKorB,MAAMwP,SAAS56B,KAAKgR,GACzBhR,KAAKqyB,UAAYxB,EACjB7wB,KAAKyV,MAAQ4kB,EACbr6B,KAAKm1B,SAAW,CAAC9C,UAAWxB,EAAWa,UAAW,GAClD1xB,KAAK41B,gBAAkB,CAACwE,EAA4B3nB,KAAKzS,OAzB7D66B,EAAc12B,UAAU21B,iBAAmBA,EAC3Ce,EAAc12B,UAAUyP,SAAW4hB,EACnCqF,EAAc12B,UAAUkxB,UAAYA,EACpCwF,EAAc12B,UAAU8xB,UAAYA,EAwBpC+E,EAAuB72B,UAAUyP,SAAW4hB,EAC5CwF,EAAuB72B,UAAU21B,iBAAmBA,EACpDkB,EAAuB72B,UAAUkxB,UAAYA,EAC7C2F,EAAuB72B,UAAU8xB,UAAYA,EAE7C,IAAIgF,EAAoB,WAEpB,IAAIC,EAAS1sB,YAEb,SAASysB,EAAiBxF,EAAKp0B,GAO3BrB,KAAKgR,EAAI0pB,WAAW7V,aACpB7kB,KAAKgR,EAAEynB,aAAY,EAAM,GACzBz4B,KAAKs6B,qBAAuBQ,qBAAqBC,qBACjD/6B,KAAKorB,MAAQprB,KAAKs6B,qBAClBt6B,KAAKs6B,qBAAqBM,SAAS56B,KAAKgR,GACxChR,KAAKyR,EAAIpQ,EAAKoQ,EACdzR,KAAKy1B,KAAOA,EACZz1B,KAAKoD,KAAOqyB,EAAKryB,KACjBpD,KAAK21B,SAAW,EAChB31B,KAAK6T,6BAA6B4hB,GAClCz1B,KAAKqR,EAAIuf,gBAAgB8F,QAAQjB,EAAKp0B,EAAKgQ,EAAE,EAAE,EAAErR,MACjDA,KAAK+Q,EAAI6f,gBAAgB8F,QAAQjB,EAAKp0B,EAAK0P,EAAE,EAAE,EAAE/Q,MAC9CA,KAAKwT,kBAAkB3J,OACtB7J,KAAKgX,GAAI,GAEThX,KAAKgX,GAAI,EACThX,KAAKm7B,oBAkDb,OA9CAF,EAAiB92B,UAAY,CACzBsR,MAAO4kB,EACPzmB,SAAU,WACH5T,KAAKy1B,KAAKC,WAAWC,UAAY31B,KAAK21B,UAGzC31B,KAAK21B,QAAU31B,KAAKy1B,KAAKC,WAAWC,QACpC31B,KAAK0T,2BAEF1T,KAAK2T,MACJ3T,KAAKm7B,qBAGbA,iBAAkB,WACd,IAAIjgB,EAAKlb,KAAKqR,EAAEL,EAAE,GAAIuI,EAAKvZ,KAAKqR,EAAEL,EAAE,GAAIoqB,EAAKp7B,KAAK+Q,EAAEC,EAAE,GAAG,EAAG6jB,EAAK70B,KAAK+Q,EAAEC,EAAE,GAAG,EACzEqqB,EAAiB,IAAXr7B,KAAKyR,EACX6pB,EAAKt7B,KAAKgR,EACdsqB,EAAGtqB,EAAE,GAAG,GAAKkK,EACbogB,EAAGtqB,EAAE,GAAG,GAAKuI,EAAKsb,EAClByG,EAAGtqB,EAAE,GAAG,GAAKqqB,EAAMngB,EAAKkgB,EAAKlgB,EAAKkgB,EAClCE,EAAGtqB,EAAE,GAAG,GAAKuI,EACb+hB,EAAGtqB,EAAE,GAAG,GAAKkK,EACbogB,EAAGtqB,EAAE,GAAG,GAAKuI,EAAKsb,EAClByG,EAAGtqB,EAAE,GAAG,GAAKqqB,EAAMngB,EAAKkgB,EAAKlgB,EAAKkgB,EAClCE,EAAGtqB,EAAE,GAAG,GAAKuI,EACb+hB,EAAGxxB,EAAE,GAAG,GAAKuxB,EAAMngB,EAAKkgB,EAAKF,EAAShgB,EAAKkgB,EAAKF,EAChDI,EAAGxxB,EAAE,GAAG,GAAKyP,EAAKsb,EAClByG,EAAGxxB,EAAE,GAAG,GAAKuxB,EAAMngB,EAAKkgB,EAAKlgB,EAAKkgB,EAClCE,EAAGxxB,EAAE,GAAG,GAAKyP,EAAKsb,EAAKqG,EACvBI,EAAGxxB,EAAE,GAAG,GAAKuxB,EAAMngB,EAAKkgB,EAAKF,EAAShgB,EAAKkgB,EAAKF,EAChDI,EAAGxxB,EAAE,GAAG,GAAKyP,EAAKsb,EAClByG,EAAGxxB,EAAE,GAAG,GAAKuxB,EAAMngB,EAAKkgB,EAAKlgB,EAAKkgB,EAClCE,EAAGxxB,EAAE,GAAG,GAAKyP,EAAKsb,EAAKqG,EACvBI,EAAGlkB,EAAE,GAAG,GAAKikB,EAAMngB,EAAKkgB,EAAKF,EAAShgB,EAAKkgB,EAAKF,EAChDI,EAAGlkB,EAAE,GAAG,GAAKmC,EAAKsb,EAClByG,EAAGlkB,EAAE,GAAG,GAAKikB,EAAMngB,EAAKkgB,EAAKlgB,EAAKkgB,EAClCE,EAAGlkB,EAAE,GAAG,GAAKmC,EAAKsb,EAAKqG,EACvBI,EAAGlkB,EAAE,GAAG,GAAKikB,EAAMngB,EAAKkgB,EAAKF,EAAShgB,EAAKkgB,EAAKF,EAChDI,EAAGlkB,EAAE,GAAG,GAAKmC,EAAKsb,EAClByG,EAAGlkB,EAAE,GAAG,GAAKikB,EAAMngB,EAAKkgB,EAAKlgB,EAAKkgB,EAClCE,EAAGlkB,EAAE,GAAG,GAAKmC,EAAKsb,EAAKqG,IAI/B5Y,gBAAgB,CAACjP,0BAA2B4nB,GAErCA,EA7EY,GAgFnBM,EAAqB,WAErB,SAASA,EAAkB9F,EAAKp0B,GAC5BrB,KAAKgR,EAAI0pB,WAAW7V,aACpB7kB,KAAKgR,EAAEynB,aAAY,EAAM,GACzBz4B,KAAKy1B,KAAOA,EACZz1B,KAAKoD,KAAOqyB,EAAKryB,KACjBpD,KAAKqB,KAAOA,EACZrB,KAAK21B,SAAW,EAChB31B,KAAKyR,EAAIpQ,EAAKoQ,EACdzR,KAAK6T,6BAA6B4hB,GACnB,IAAZp0B,EAAK+U,IACJpW,KAAKw7B,GAAK5K,gBAAgB8F,QAAQjB,EAAKp0B,EAAKm6B,GAAG,EAAE,EAAEx7B,MACnDA,KAAKy7B,GAAK7K,gBAAgB8F,QAAQjB,EAAKp0B,EAAKo6B,GAAG,EAAE,IAAKz7B,MACtDA,KAAK07B,cAAgB17B,KAAK27B,mBAE1B37B,KAAK07B,cAAgB17B,KAAK47B,qBAE9B57B,KAAKya,GAAKmW,gBAAgB8F,QAAQjB,EAAKp0B,EAAKoZ,GAAG,EAAE,EAAEza,MACnDA,KAAKqR,EAAIuf,gBAAgB8F,QAAQjB,EAAKp0B,EAAKgQ,EAAE,EAAE,EAAErR,MACjDA,KAAKiR,EAAI2f,gBAAgB8F,QAAQjB,EAAKp0B,EAAK4P,EAAE,EAAE3C,UAAUtO,MACzDA,KAAKo3B,GAAKxG,gBAAgB8F,QAAQjB,EAAKp0B,EAAK+1B,GAAG,EAAE,EAAEp3B,MACnDA,KAAK67B,GAAKjL,gBAAgB8F,QAAQjB,EAAKp0B,EAAKw6B,GAAG,EAAE,IAAK77B,MACtDA,KAAKs6B,qBAAuBQ,qBAAqBC,qBACjD/6B,KAAKs6B,qBAAqBM,SAAS56B,KAAKgR,GACxChR,KAAKorB,MAAQprB,KAAKs6B,qBACft6B,KAAKwT,kBAAkB3J,OACtB7J,KAAKgX,GAAI,GAEThX,KAAKgX,GAAI,EACThX,KAAK07B,iBAgFb,OA5EAH,EAAkBp3B,UAAY,CAC1BsR,MAAO4kB,EACPzmB,SAAU,WACH5T,KAAKy1B,KAAKC,WAAWC,UAAY31B,KAAK21B,UAGzC31B,KAAK21B,QAAU31B,KAAKy1B,KAAKC,WAAWC,QACpC31B,KAAK0T,2BACF1T,KAAK2T,MACJ3T,KAAK07B,kBAGbC,kBAAmB,WACf,IAYI7xB,EAAGgyB,EAAIC,EAAUC,EAZjBC,EAA+B,EAAtBvxB,KAAK6C,MAAMvN,KAAKya,GAAGzJ,GAC5B2E,EAAgB,EAARjL,KAAK6D,GAAK0tB,EAIlBC,GAAW,EACXC,EAAUn8B,KAAKo3B,GAAGpmB,EAClBorB,EAAWp8B,KAAKw7B,GAAGxqB,EACnBqrB,EAAYr8B,KAAK67B,GAAG7qB,EACpBsrB,EAAat8B,KAAKy7B,GAAGzqB,EACrBurB,EAAmB,EAAE7xB,KAAK6D,GAAG4tB,GAAgB,EAAPF,GACtCO,EAAoB,EAAE9xB,KAAK6D,GAAG6tB,GAAiB,EAAPH,GACTQ,GAAc/xB,KAAK6D,GAAI,EAC1DkuB,GAAcz8B,KAAKiR,EAAED,EACrB,IAAIxL,EAAsB,IAAhBxF,KAAKqB,KAAKoQ,GAAW,EAAI,EAEnC,IADAzR,KAAKgR,EAAEwU,QAAU,EACb1b,EAAE,EAAEA,EAAEmyB,EAAOnyB,GAAG,EAAE,CAClBgyB,EAAMI,EAAWC,EAAUC,EAC3BL,EAAYG,EAAWG,EAAYC,EACnCN,EAAeE,EAAWK,EAAmBC,EAC7C,IAAIziB,EAAI+hB,EAAMpxB,KAAKyK,IAAIsnB,GACnBziB,EAAI8hB,EAAMpxB,KAAK2K,IAAIonB,GACnBC,EAAW,IAAN3iB,GAAiB,IAANC,EAAU,EAAIA,EAAEtP,KAAKyC,KAAK4M,EAAEA,EAAIC,EAAEA,GAClD2iB,EAAW,IAAN5iB,GAAiB,IAANC,EAAU,GAAKD,EAAErP,KAAKyC,KAAK4M,EAAEA,EAAIC,EAAEA,GACvDD,IAAQ/Z,KAAKqR,EAAEL,EAAE,GACjBgJ,IAAQha,KAAKqR,EAAEL,EAAE,GACjBhR,KAAKgR,EAAE+nB,YAAYhf,EAAEC,EAAED,EAAE2iB,EAAGV,EAAaD,EAAUv2B,EAAIwU,EAAE2iB,EAAGX,EAAaD,EAAUv2B,EAAIuU,EAAE2iB,EAAGV,EAAaD,EAAUv2B,EAAIwU,EAAE2iB,EAAGX,EAAaD,EAAUv2B,EAAKsE,GAAG,GAM3JoyB,GAAYA,EACZO,GAAc9mB,EAAMnQ,IAG5Bo2B,qBAAsB,WAClB,IAKI9xB,EALAmyB,EAASvxB,KAAK6C,MAAMvN,KAAKya,GAAGzJ,GAC5B2E,EAAgB,EAARjL,KAAK6D,GAAK0tB,EAClBH,EAAM97B,KAAKo3B,GAAGpmB,EACd+qB,EAAY/7B,KAAK67B,GAAG7qB,EACpBgrB,EAAe,EAAEtxB,KAAK6D,GAAGutB,GAAY,EAAPG,GAC3BQ,GAAc/xB,KAAK6D,GAAI,EAC1B/I,EAAsB,IAAhBxF,KAAKqB,KAAKoQ,GAAW,EAAI,EAGnC,IAFAgrB,GAAcz8B,KAAKiR,EAAED,EACrBhR,KAAKgR,EAAEwU,QAAU,EACb1b,EAAE,EAAEA,EAAEmyB,EAAOnyB,GAAG,EAAE,CAClB,IAAIiQ,EAAI+hB,EAAMpxB,KAAKyK,IAAIsnB,GACnBziB,EAAI8hB,EAAMpxB,KAAK2K,IAAIonB,GACnBC,EAAW,IAAN3iB,GAAiB,IAANC,EAAU,EAAIA,EAAEtP,KAAKyC,KAAK4M,EAAEA,EAAIC,EAAEA,GAClD2iB,EAAW,IAAN5iB,GAAiB,IAANC,EAAU,GAAKD,EAAErP,KAAKyC,KAAK4M,EAAEA,EAAIC,EAAEA,GACvDD,IAAQ/Z,KAAKqR,EAAEL,EAAE,GACjBgJ,IAAQha,KAAKqR,EAAEL,EAAE,GACjBhR,KAAKgR,EAAE+nB,YAAYhf,EAAEC,EAAED,EAAE2iB,EAAGV,EAAaD,EAAUv2B,EAAIwU,EAAE2iB,EAAGX,EAAaD,EAAUv2B,EAAIuU,EAAE2iB,EAAGV,EAAaD,EAAUv2B,EAAIwU,EAAE2iB,EAAGX,EAAaD,EAAUv2B,EAAKsE,GAAG,GAC3J2yB,GAAc9mB,EAAMnQ,EAExBxF,KAAKorB,MAAMvhB,OAAS,EACpB7J,KAAKorB,MAAM,GAAKprB,KAAKgR,IAI7BsR,gBAAgB,CAACjP,0BAA2BkoB,GAErCA,EA9Ga,GAiHpBqB,EAAqB,WAEpB,SAASA,EAAkBnH,EAAKp0B,GAC7BrB,KAAKgR,EAAI0pB,WAAW7V,aACpB7kB,KAAKgR,EAAE6F,GAAI,EACX7W,KAAKs6B,qBAAuBQ,qBAAqBC,qBACjD/6B,KAAKs6B,qBAAqBM,SAAS56B,KAAKgR,GACxChR,KAAKorB,MAAQprB,KAAKs6B,qBAClBt6B,KAAKy1B,KAAOA,EACZz1B,KAAKoD,KAAOqyB,EAAKryB,KACjBpD,KAAK21B,SAAW,EAChB31B,KAAKyR,EAAIpQ,EAAKoQ,EACdzR,KAAK6T,6BAA6B4hB,GAClCz1B,KAAKqR,EAAIuf,gBAAgB8F,QAAQjB,EAAKp0B,EAAKgQ,EAAE,EAAE,EAAErR,MACjDA,KAAK+Q,EAAI6f,gBAAgB8F,QAAQjB,EAAKp0B,EAAK0P,EAAE,EAAE,EAAE/Q,MACjDA,KAAKiR,EAAI2f,gBAAgB8F,QAAQjB,EAAKp0B,EAAK4P,EAAE,EAAE,EAAEjR,MAC9CA,KAAKwT,kBAAkB3J,OACtB7J,KAAKgX,GAAI,GAEThX,KAAKgX,GAAI,EACThX,KAAK68B,qBA0Db,OAtDAD,EAAkBz4B,UAAY,CAC1B04B,kBAAmB,WACf,IAAI3hB,EAAKlb,KAAKqR,EAAEL,EAAE,GAAIuI,EAAKvZ,KAAKqR,EAAEL,EAAE,GAAI8rB,EAAK98B,KAAK+Q,EAAEC,EAAE,GAAG,EAAG+mB,EAAK/3B,KAAK+Q,EAAEC,EAAE,GAAG,EACzElE,EAAQY,OAAOovB,EAAG/E,EAAG/3B,KAAKiR,EAAED,GAC5BkqB,EAASpuB,GAAO,EAAE0B,aACtBxO,KAAKgR,EAAEwU,QAAU,EAEH,IAAXxlB,KAAKyR,GAAsB,IAAXzR,KAAKyR,GACpBzR,KAAKgR,EAAE+nB,YAAY7d,EAAG4hB,EAAIvjB,EAAGwe,EAAGjrB,EAAMoO,EAAG4hB,EAAIvjB,EAAGwe,EAAGjrB,EAAMoO,EAAG4hB,EAAGvjB,EAAGwe,EAAGmD,EAAO,GAAG,GAC/El7B,KAAKgR,EAAE+nB,YAAY7d,EAAG4hB,EAAIvjB,EAAGwe,EAAGjrB,EAAMoO,EAAG4hB,EAAIvjB,EAAGwe,EAAGmD,EAAOhgB,EAAG4hB,EAAIvjB,EAAGwe,EAAGjrB,EAAM,GAAG,GACpE,IAATA,GACC9M,KAAKgR,EAAE+nB,YAAY7d,EAAG4hB,EAAGhwB,EAAOyM,EAAGwe,EAAG7c,EAAG4hB,EAAGhwB,EAAMyM,EAAGwe,EAAG7c,EAAG4hB,EAAG5B,EAAO3hB,EAAGwe,EAAG,GAAG,GAC9E/3B,KAAKgR,EAAE+nB,YAAY7d,EAAG4hB,EAAGhwB,EAAMyM,EAAGwe,EAAG7c,EAAG4hB,EAAG5B,EAAO3hB,EAAGwe,EAAG7c,EAAG4hB,EAAGhwB,EAAMyM,EAAGwe,EAAG,GAAG,GAC7E/3B,KAAKgR,EAAE+nB,YAAY7d,EAAG4hB,EAAGvjB,EAAGwe,EAAGjrB,EAAMoO,EAAG4hB,EAAGvjB,EAAGwe,EAAGjrB,EAAMoO,EAAG4hB,EAAGvjB,EAAGwe,EAAGmD,EAAO,GAAG,GAC7El7B,KAAKgR,EAAE+nB,YAAY7d,EAAG4hB,EAAGvjB,EAAGwe,EAAGjrB,EAAMoO,EAAG4hB,EAAGvjB,EAAGwe,EAAGmD,EAAOhgB,EAAG4hB,EAAGvjB,EAAGwe,EAAGjrB,EAAM,GAAG,GAC7E9M,KAAKgR,EAAE+nB,YAAY7d,EAAG4hB,EAAGhwB,EAAMyM,EAAGwe,EAAG7c,EAAG4hB,EAAGhwB,EAAMyM,EAAGwe,EAAG7c,EAAG4hB,EAAG5B,EAAO3hB,EAAGwe,EAAG,GAAG,GAC7E/3B,KAAKgR,EAAE+nB,YAAY7d,EAAG4hB,EAAGhwB,EAAMyM,EAAGwe,EAAG7c,EAAG4hB,EAAG5B,EAAO3hB,EAAGwe,EAAG7c,EAAG4hB,EAAGhwB,EAAMyM,EAAGwe,EAAG,GAAG,KAE7E/3B,KAAKgR,EAAE+nB,YAAY7d,EAAG4hB,EAAGvjB,EAAGwe,EAAG7c,EAAG4hB,EAAG5B,EAAO3hB,EAAGwe,EAAG7c,EAAG4hB,EAAGvjB,EAAGwe,EAAG,GAC9D/3B,KAAKgR,EAAE+nB,YAAY7d,EAAG4hB,EAAGvjB,EAAGwe,EAAG7c,EAAG4hB,EAAGvjB,EAAGwe,EAAGmD,EAAOhgB,EAAG4hB,EAAGvjB,EAAGwe,EAAG,MAGlE/3B,KAAKgR,EAAE+nB,YAAY7d,EAAG4hB,EAAGvjB,EAAGwe,EAAGjrB,EAAMoO,EAAG4hB,EAAGvjB,EAAGwe,EAAGmD,EAAOhgB,EAAG4hB,EAAGvjB,EAAGwe,EAAGjrB,EAAM,GAAG,GACjE,IAATA,GACC9M,KAAKgR,EAAE+nB,YAAY7d,EAAG4hB,EAAGhwB,EAAMyM,EAAGwe,EAAG7c,EAAG4hB,EAAGhwB,EAAMyM,EAAGwe,EAAG7c,EAAG4hB,EAAG5B,EAAO3hB,EAAGwe,EAAG,GAAG,GAC7E/3B,KAAKgR,EAAE+nB,YAAY7d,EAAG4hB,EAAGhwB,EAAMyM,EAAGwe,EAAG7c,EAAG4hB,EAAG5B,EAAO3hB,EAAGwe,EAAG7c,EAAG4hB,EAAGhwB,EAAMyM,EAAGwe,EAAG,GAAG,GAC7E/3B,KAAKgR,EAAE+nB,YAAY7d,EAAG4hB,EAAGvjB,EAAGwe,EAAGjrB,EAAMoO,EAAG4hB,EAAGvjB,EAAGwe,EAAGjrB,EAAMoO,EAAG4hB,EAAGvjB,EAAGwe,EAAGmD,EAAO,GAAG,GAC7El7B,KAAKgR,EAAE+nB,YAAY7d,EAAG4hB,EAAGvjB,EAAGwe,EAAGjrB,EAAMoO,EAAG4hB,EAAGvjB,EAAGwe,EAAGmD,EAAOhgB,EAAG4hB,EAAGvjB,EAAGwe,EAAGjrB,EAAM,GAAG,GAC7E9M,KAAKgR,EAAE+nB,YAAY7d,EAAG4hB,EAAGhwB,EAAMyM,EAAGwe,EAAG7c,EAAG4hB,EAAGhwB,EAAMyM,EAAGwe,EAAG7c,EAAG4hB,EAAG5B,EAAO3hB,EAAGwe,EAAG,GAAG,GAC7E/3B,KAAKgR,EAAE+nB,YAAY7d,EAAG4hB,EAAGhwB,EAAMyM,EAAGwe,EAAG7c,EAAG4hB,EAAG5B,EAAO3hB,EAAGwe,EAAG7c,EAAG4hB,EAAGhwB,EAAMyM,EAAGwe,EAAG,GAAG,GAC7E/3B,KAAKgR,EAAE+nB,YAAY7d,EAAG4hB,EAAGvjB,EAAGwe,EAAGjrB,EAAMoO,EAAG4hB,EAAGvjB,EAAGwe,EAAGjrB,EAAMoO,EAAG4hB,EAAGvjB,EAAGwe,EAAGmD,EAAO,GAAG,KAE7El7B,KAAKgR,EAAE+nB,YAAY7d,EAAG4hB,EAAGvjB,EAAGwe,EAAG7c,EAAG4hB,EAAG5B,EAAO3hB,EAAGwe,EAAG7c,EAAG4hB,EAAGvjB,EAAGwe,EAAG,GAAG,GACjE/3B,KAAKgR,EAAE+nB,YAAY7d,EAAG4hB,EAAGvjB,EAAGwe,EAAG7c,EAAG4hB,EAAGvjB,EAAGwe,EAAGmD,EAAOhgB,EAAG4hB,EAAGvjB,EAAGwe,EAAG,GAAG,GACjE/3B,KAAKgR,EAAE+nB,YAAY7d,EAAG4hB,EAAGvjB,EAAGwe,EAAG7c,EAAG4hB,EAAG5B,EAAO3hB,EAAGwe,EAAG7c,EAAG4hB,EAAGvjB,EAAGwe,EAAG,GAAG,MAK7EnkB,SAAU,SAASod,GACZhxB,KAAKy1B,KAAKC,WAAWC,UAAY31B,KAAK21B,UAGzC31B,KAAK21B,QAAU31B,KAAKy1B,KAAKC,WAAWC,QACpC31B,KAAK0T,2BACF1T,KAAK2T,MACJ3T,KAAK68B,sBAIbpnB,MAAO4kB,GAEX/X,gBAAgB,CAACjP,0BAA2BupB,GAErCA,EA9Ea,GAiFxB,SAASG,EAAatH,EAAKp0B,EAAKK,GAC5B,IAAI6R,EACJ,GAAY,IAAT7R,GAAuB,IAATA,EAAW,CACxB,IAAIs7B,EAAoB,IAATt7B,EAAaL,EAAKoZ,GAAKpZ,EAAK8oB,GACvC8S,EAAOD,EAAShmB,EAEhBzD,EADD0pB,EAAKpzB,OACG,IAAImxB,EAAuBvF,EAAMp0B,EAAMK,GAEvC,IAAIm5B,EAAcpF,EAAMp0B,EAAMK,QAE3B,IAATA,EACL6R,EAAO,IAAIqpB,EAAkBnH,EAAMp0B,GACrB,IAATK,EACL6R,EAAO,IAAI0nB,EAAiBxF,EAAMp0B,GACpB,IAATK,IACL6R,EAAO,IAAIgoB,EAAkB9F,EAAMp0B,IAKvC,OAHGkS,EAAKyD,GACJye,EAAKniB,mBAAmBC,GAErBA,EAGX,SAAS2pB,IACL,OAAOrC,EAGX,SAASsC,IACL,OAAOnC,EAGX,IAAI3b,EAAK,GAIT,OAHAA,EAAG0d,aAAeA,EAClB1d,EAAG6d,uBAAyBA,EAC5B7d,EAAG8d,gCAAkCA,EAC9B9d,EA3fgB,GA6fvB+d,eAAkB,WAClB,IAAI/d,EAAK,GACLge,EAAY,GAIhB,SAASC,EAAiB9d,EAAGvT,GACrBoxB,EAAU7d,KACV6d,EAAU7d,GAAMvT,GAIxB,SAASsxB,EAAY/d,EAAGiW,EAAMp0B,GAC1B,OAAO,IAAIg8B,EAAU7d,GAAIiW,EAAMp0B,GAGnC,OAbAge,EAAGie,iBAAmBA,EACtBje,EAAGke,YAAcA,EAYVle,EAhBU,GAmBrB,SAASme,iBAsCT,SAASC,gBA8TT,SAASC,wBA6FT,SAASC,oBA0MT,SAASC,kBACR59B,KAAKwlB,QAAU,EACfxlB,KAAKw4B,WAAa,EAClBx4B,KAAK6pB,OAASzb,iBAAiBpO,KAAKw4B,YAmBrC,SAASqF,aAAapI,EAAMp0B,EAAMyB,EAAUT,GACxCrC,KAAKy1B,KAAOA,EACZz1B,KAAK21B,SAAW,EAChB31B,KAAK89B,UAAY1vB,iBAAiB/M,EAAKwI,QACvC7J,KAAK8C,SAAWA,EAChB9C,KAAKgX,GAAI,EACThX,KAAK+9B,QAAU,GACf/9B,KAAKg+B,UAAYrrB,iBAAiB,UAAYtR,EAAKwI,OAASxI,EAAKwI,OAAS,EAAI,GAC9E7J,KAAKi+B,WAAatrB,iBAAiB,UAAY,GAC/C3S,KAAK6T,6BAA6BxR,GAClC,IAAIyH,EAA2ByJ,EAAxBvF,EAAM3M,EAAKwI,QAAU,EAC5B,IAAIC,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EACrByJ,EAAOqd,gBAAgB8F,QAAQjB,EAAKp0B,EAAKyI,GAAGkH,EAAE,EAAG,EAAGhR,MACpDA,KAAKgX,EAAIzD,EAAKyD,GAAKhX,KAAKgX,EACxBhX,KAAK89B,UAAUh0B,GAAK,CAACqN,EAAE9V,EAAKyI,GAAGqN,EAAE9F,EAAEkC,GAEnCvT,KAAKgX,GACLhX,KAAK4T,UAAS,GAElB5T,KAAKyT,YAAczT,KAAKgX,EA6B5B,SAASknB,iBAAiBzI,EAAKp0B,EAAKgB,GAChCrC,KAAKqB,KAAOA,EACZrB,KAAK6W,EAAIlE,iBAAiB,SAAiB,EAAPtR,EAAKgQ,GACzC,IAAI8sB,EAAU98B,EAAK2V,EAAEA,EAAE,GAAGjG,EAAK1P,EAAK2V,EAAEA,EAAE,GAAGjG,EAAElH,OAAgB,EAAPxI,EAAKgQ,EAAOhQ,EAAK2V,EAAEA,EAAEnN,OAAgB,EAAPxI,EAAKgQ,EACzFrR,KAAKoX,EAAIzE,iBAAiB,UAAWwrB,GACrCn+B,KAAKo+B,OAAQ,EACbp+B,KAAKq+B,OAAQ,EACbr+B,KAAKs+B,aAAet+B,KAAKu+B,mBACzBv+B,KAAKw+B,YAAcL,EACnBn+B,KAAK6T,6BAA6BxR,GAClCrC,KAAKuT,KAAOqd,gBAAgB8F,QAAQjB,EAAKp0B,EAAK2V,EAAE,EAAE,KAAKhX,MACvDA,KAAKgX,EAAIhX,KAAKuT,KAAKyD,EACnBhX,KAAK4T,UAAS,GA5tBlB4pB,cAAcr5B,UAAUs6B,uBAAyB,aACjDjB,cAAcr5B,UAAUu6B,mBAAqB,aAC7ClB,cAAcr5B,UAAUy2B,SAAW,SAASv5B,GACxC,IAAKrB,KAAKolB,OAAQ,CAEd/jB,EAAKyxB,GAAGzwB,UAAUiR,mBAAmBjS,EAAKyxB,IAC1C,IAAI7N,EAAY,CAAC0Z,MAAMt9B,EAAKyxB,GAAIzxB,KAAMA,EAAMi5B,qBAAqBQ,qBAAqBC,sBACtF/6B,KAAK6pB,OAAOtX,KAAK0S,GACjBjlB,KAAK0+B,mBAAmBzZ,GACpBjlB,KAAKyT,aACLpS,EAAKu9B,kBAIjBpB,cAAcr5B,UAAUw1B,KAAO,SAASlE,EAAKp0B,GACzCrB,KAAK6pB,OAAS,GACd7pB,KAAKy1B,KAAOA,EACZz1B,KAAK6T,6BAA6B4hB,GAClCz1B,KAAKy+B,uBAAuBhJ,EAAKp0B,GACjCrB,KAAK21B,QAAUtpB,oBACfrM,KAAKolB,QAAS,EACdplB,KAAKgX,GAAI,EACNhX,KAAKwT,kBAAkB3J,OACtB7J,KAAKgX,GAAI,EAEThX,KAAK4T,UAAS,IAGtB4pB,cAAcr5B,UAAUqzB,YAAc,WAC/Bx3B,KAAKy1B,KAAKC,WAAWC,UAAY31B,KAAK21B,UAGzC31B,KAAK21B,QAAU31B,KAAKy1B,KAAKC,WAAWC,QACpC31B,KAAK0T,6BAGT4O,gBAAgB,CAACjP,0BAA2BmqB,eAG5Clb,gBAAgB,CAACkb,eAAgBC,cACjCA,aAAat5B,UAAUs6B,uBAAyB,SAAShJ,EAAMp0B,GAC3DrB,KAAK+Q,EAAI6f,gBAAgB8F,QAAQjB,EAAMp0B,EAAK0P,EAAG,EAAG,IAAM/Q,MACxDA,KAAK8W,EAAI8Z,gBAAgB8F,QAAQjB,EAAMp0B,EAAKyV,EAAG,EAAG,IAAM9W,MACxDA,KAAKoX,EAAIwZ,gBAAgB8F,QAAQjB,EAAMp0B,EAAK+V,EAAG,EAAG,EAAGpX,MACrDA,KAAK6+B,OAAS,EACd7+B,KAAK8+B,OAAS,EACd9+B,KAAK4T,SAAW5T,KAAKw3B,YACrBx3B,KAAKkX,EAAI7V,EAAK6V,EACdlX,KAAKyT,cAAgBzT,KAAK+Q,EAAE6kB,gBAAgB/rB,UAAY7J,KAAK8W,EAAE8e,gBAAgB/rB,UAAY7J,KAAKoX,EAAEwe,gBAAgB/rB,QAGtH4zB,aAAat5B,UAAUu6B,mBAAqB,SAASzZ,GACjDA,EAAU8Z,UAAY,IAG1BtB,aAAat5B,UAAU66B,oBAAsB,SAASjuB,EAAG+F,EAAGmoB,EAAaza,EAAa0a,GAClF,IAAIC,EAAW,GACXroB,GAAK,EACLqoB,EAAS5sB,KAAK,CACVxB,EAAGA,EACH+F,EAAGA,IAEA/F,GAAK,EACZouB,EAAS5sB,KAAK,CACVxB,EAAGA,EAAI,EACP+F,EAAGA,EAAI,KAGXqoB,EAAS5sB,KAAK,CACVxB,EAAGA,EACH+F,EAAG,IAEPqoB,EAAS5sB,KAAK,CACVxB,EAAG,EACH+F,EAAGA,EAAI,KAGf,IACIhN,EAA0Bs1B,EAD1BC,EAAgB,GACbrxB,EAAMmxB,EAASt1B,OACtB,IAAKC,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EAAG,CAKrB,IAAIw1B,EAAQC,EAHhB,GADAH,EAAYD,EAASr1B,GACjBs1B,EAAUtoB,EAAIooB,EAAsB1a,GAAe4a,EAAUruB,EAAImuB,EAAsB1a,EAAcya,QAKjGK,EADAF,EAAUruB,EAAImuB,GAAuB1a,EAC5B,GAEC4a,EAAUruB,EAAImuB,EAAsB1a,GAAeya,EAG7DM,EADDH,EAAUtoB,EAAIooB,GAAuB1a,EAAcya,EACzC,GAEEG,EAAUtoB,EAAIooB,EAAsB1a,GAAeya,EAElEI,EAAc9sB,KAAK,CAAC+sB,EAAQC,IAMpC,OAHKF,EAAcx1B,QACfw1B,EAAc9sB,KAAK,CAAC,EAAG,IAEpB8sB,GAGX5B,aAAat5B,UAAUq7B,iBAAmB,SAAST,GAC/C,IAAIj1B,EAAGkE,EAAM+wB,EAAUl1B,OACvB,IAAKC,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EACtBqb,qBAAqBsa,QAAQV,EAAUj1B,IAG3C,OADAi1B,EAAUl1B,OAAS,EACZk1B,GAGXtB,aAAat5B,UAAUu7B,cAAgB,SAAS5J,GAC5C,IAAI/kB,EAAG+F,EAwBH6oB,EAvBJ,GAAI3/B,KAAK2T,MAAQmiB,EAAe,CAC5B,IAAI1e,EAAKpX,KAAKoX,EAAEpG,EAAI,IAAO,IAS3B,GARIoG,EAAI,IACJA,GAAK,GAETrG,GAAK/Q,KAAK+Q,EAAEC,EAAI,EAAI,EAAIhR,KAAK+Q,EAAEC,EAAI,EAAI,EAAIhR,KAAK+Q,EAAEC,GAAKoG,EACvDN,GAAK9W,KAAK8W,EAAE9F,EAAI,EAAI,EAAIhR,KAAK8W,EAAE9F,EAAI,EAAI,EAAIhR,KAAK8W,EAAE9F,GAAKoG,EAInDrG,EAAI+F,EAAG,CACP,IAAI8oB,EAAK7uB,EACTA,EAAI+F,EACJA,EAAI8oB,EAER7uB,EAA4B,KAAxBrG,KAAKoC,MAAU,IAAJiE,GACf+F,EAA4B,KAAxBpM,KAAKoC,MAAU,IAAJgK,GACf9W,KAAK6+B,OAAS9tB,EACd/Q,KAAK8+B,OAAShoB,OAEd/F,EAAI/Q,KAAK6+B,OACT/nB,EAAI9W,KAAK8+B,OAGb,IAAIh1B,EAA6BiN,EAAGkS,EAChC8V,EAAW5T,EAAU0U,EADlB7xB,EAAMhO,KAAK6pB,OAAOhgB,OACkBq1B,EAAsB,EAEjE,GAAIpoB,IAAM/F,EACN,IAAKjH,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EACtB9J,KAAK6pB,OAAO/f,GAAGwwB,qBAAqBK,gBACpC36B,KAAK6pB,OAAO/f,GAAG60B,MAAMhrB,MAAO,EAC5B3T,KAAK6pB,OAAO/f,GAAG60B,MAAMvT,MAAQprB,KAAK6pB,OAAO/f,GAAGwwB,0BAE7C,GAAa,IAANxjB,GAAiB,IAAN/F,GAAiB,IAAJ+F,GAAe,IAAN/F,GAsFxC,GAAI/Q,KAAK2T,KACZ,IAAK7J,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EAGtB9J,KAAK6pB,OAAO/f,GAAGi1B,UAAUl1B,OAAS,EAClC7J,KAAK6pB,OAAO/f,GAAG60B,MAAMhrB,MAAO,MA3FqB,CACrD,IAAmBsR,EAAWqV,EAA1B6E,EAAW,GACf,IAAKr1B,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EAGtB,GAFAmb,EAAYjlB,KAAK6pB,OAAO/f,GAEnBmb,EAAU0Z,MAAMhrB,MAAS3T,KAAK2T,MAASmiB,GAA4B,IAAX91B,KAAKkX,EAE3D,CAIH,GAHAyoB,EAAa1a,EAAU0Z,MAAMvT,MAC7BnC,EAAO0W,EAAWna,QAClBqa,EAAmB,GACd5a,EAAU0Z,MAAMhrB,MAAQsR,EAAU8Z,UAAUl1B,OAC7Cg2B,EAAmB5a,EAAU4a,qBAC1B,CAEH,IADAd,EAAY/+B,KAAKw/B,iBAAiBva,EAAU8Z,WACvChoB,EAAI,EAAGA,EAAIkS,EAAMlS,GAAK,EACvBoU,EAAWzC,IAAI1D,kBAAkB2a,EAAW9V,OAAO9S,IACnDgoB,EAAUxsB,KAAK4Y,GACf0U,GAAoB1U,EAAS1F,YAEjCR,EAAU4a,iBAAmBA,EAC7B5a,EAAU8Z,UAAYA,EAG1BG,GAAuBW,EACvB5a,EAAU0Z,MAAMhrB,MAAO,OAnBvBsR,EAAU0Z,MAAMvT,MAAQnG,EAAUqV,qBAsB1C,IAA6CwF,EAAzCR,EAASvuB,EAAGwuB,EAASzoB,EAAG0N,EAAc,EAC1C,IAAK1a,EAAIkE,EAAM,EAAGlE,GAAK,EAAGA,GAAK,EAE3B,GADAmb,EAAYjlB,KAAK6pB,OAAO/f,GACpBmb,EAAU0Z,MAAMhrB,KAAM,CAWtB,IAVA2mB,EAAuBrV,EAAUqV,qBACjCA,EAAqBK,gBAEN,IAAX36B,KAAKkX,GAAWlJ,EAAM,GACtB8xB,EAAQ9/B,KAAKg/B,oBAAoBjuB,EAAG+F,EAAGmO,EAAU4a,iBAAkBrb,EAAa0a,GAChF1a,GAAeS,EAAU4a,kBAEzBC,EAAQ,CAAC,CAACR,EAAQC,IAEtBtW,EAAO6W,EAAMj2B,OACRkN,EAAI,EAAGA,EAAIkS,EAAMlS,GAAK,EAAG,CAC1BuoB,EAASQ,EAAM/oB,GAAG,GAClBwoB,EAASO,EAAM/oB,GAAG,GAClBooB,EAASt1B,OAAS,EACd01B,GAAU,EACVJ,EAAS5sB,KAAK,CACVxB,EAAEkU,EAAU4a,iBAAmBP,EAC/BxoB,EAAEmO,EAAU4a,iBAAmBN,IAE5BD,GAAU,EACjBH,EAAS5sB,KAAK,CACVxB,EAAEkU,EAAU4a,kBAAoBP,EAAS,GACzCxoB,EAAEmO,EAAU4a,kBAAoBN,EAAS,MAG7CJ,EAAS5sB,KAAK,CACVxB,EAAEkU,EAAU4a,iBAAmBP,EAC/BxoB,EAAEmO,EAAU4a,mBAEhBV,EAAS5sB,KAAK,CACVxB,EAAE,EACF+F,EAAEmO,EAAU4a,kBAAoBN,EAAS,MAGjD,IAAIQ,EAAgB//B,KAAKggC,UAAU/a,EAAUka,EAAS,IACtD,GAAIA,EAAS,GAAGpuB,IAAMouB,EAAS,GAAGroB,EAAG,CACjC,GAAIqoB,EAASt1B,OAAS,EAAG,CACrB,IAAIo2B,EAAwBhb,EAAU0Z,MAAMvT,MAAMvB,OAAO5E,EAAU0Z,MAAMvT,MAAM5F,QAAU,GACzF,GAAIya,EAAsBppB,EAAG,CACzB,IAAIqpB,EAAYH,EAAcI,MAC9BngC,KAAKogC,SAASL,EAAezF,GAC7ByF,EAAgB//B,KAAKggC,UAAU/a,EAAWka,EAAS,GAAIe,QAEvDlgC,KAAKogC,SAASL,EAAezF,GAC7ByF,EAAgB//B,KAAKggC,UAAU/a,EAAWka,EAAS,IAG3Dn/B,KAAKogC,SAASL,EAAezF,IAIrCrV,EAAU0Z,MAAMvT,MAAQkP,KAaxCmD,aAAat5B,UAAUi8B,SAAW,SAASC,EAAU/F,GACjD,IAAIxwB,EAAGkE,EAAMqyB,EAASx2B,OACtB,IAAKC,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EACtBwwB,EAAqBM,SAASyF,EAASv2B,KAI/C2zB,aAAat5B,UAAUm8B,WAAa,SAASvlB,EAAKC,EAAKC,EAAKkJ,EAAKoc,EAAWzH,EAAK0H,GAC7ED,EAAU1H,QAAQ7d,EAAI,GAAIA,EAAI,GAAI,IAAK8d,GACvCyH,EAAU1H,QAAQ5d,EAAI,GAAIA,EAAI,GAAI,IAAK6d,EAAM,GAC1C0H,GACCD,EAAU1H,QAAQ9d,EAAI,GAAIA,EAAI,GAAI,IAAK+d,GAE3CyH,EAAU1H,QAAQ1U,EAAI,GAAIA,EAAI,GAAI,IAAK2U,EAAM,IAGjD2E,aAAat5B,UAAUs8B,oBAAsB,SAASnf,EAAQif,EAAWzH,EAAK0H,GAC1ED,EAAU1H,QAAQvX,EAAO,GAAIA,EAAO,GAAI,IAAKwX,GAC7CyH,EAAU1H,QAAQvX,EAAO,GAAIA,EAAO,GAAI,IAAKwX,EAAM,GAChD0H,GACCD,EAAU1H,QAAQvX,EAAO,GAAIA,EAAO,GAAI,IAAKwX,GAEjDyH,EAAU1H,QAAQvX,EAAO,GAAIA,EAAO,GAAI,IAAKwX,EAAM,IAGvD2E,aAAat5B,UAAU67B,UAAY,SAAS/a,EAAWyb,EAAcH,GACjE,IAEIz2B,EAAwCiN,EAAGkS,EAE3C0X,EAAkBC,EAClB7b,EACA8b,EAEAza,EARA2Y,EAAY9Z,EAAU8Z,UACtBY,EAAa1a,EAAU0Z,MAAMvT,MAAMvB,OAChC7b,EAAMiX,EAAU0Z,MAAMvT,MAAM5F,QAC/BhB,EAAc,EAIdqF,EAAS,GAET2W,GAAW,EAUf,IATKD,GAKDK,EAAeL,EAAU/a,QACzBY,EAAUma,EAAU/a,UALpB+a,EAAY7F,WAAW7V,aACvB+b,EAAe,EACfxa,EAAU,GAKdyD,EAAOtX,KAAKguB,GACPz2B,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EAAG,CAIzB,IAHAib,EAAUga,EAAUj1B,GAAGib,QACvBwb,EAAU1pB,EAAI8oB,EAAW71B,GAAG+M,EAC5BoS,EAAO0W,EAAW71B,GAAG+M,EAAIkO,EAAQlb,OAASkb,EAAQlb,OAAS,EACtDkN,EAAI,EAAGA,EAAIkS,EAAMlS,GAAI,EAEtB,GADA4pB,EAAoB5b,EAAQhO,EAAE,GAC1ByN,EAAcmc,EAAkBnc,YAAckc,EAAa3vB,EAC3DyT,GAAemc,EAAkBnc,YACjC+b,EAAU1pB,GAAI,MACX,IAAG2N,EAAckc,EAAa5pB,EAAG,CACpCypB,EAAU1pB,GAAI,EACd,MAEI6pB,EAAa3vB,GAAKyT,GAAekc,EAAa5pB,GAAK0N,EAAcmc,EAAkBnc,aACnFxkB,KAAKsgC,WAAWX,EAAW71B,GAAGkH,EAAE+F,EAAI,GAAI4oB,EAAW71B,GAAGsN,EAAEL,EAAI,GAAI4oB,EAAW71B,GAAGA,EAAEiN,GAAI4oB,EAAW71B,GAAGkH,EAAE+F,GAAIwpB,EAAWK,EAAcJ,GACjIA,GAAW,IAEXK,EAAUnY,IAAI5B,cAAc6Y,EAAW71B,GAAGkH,EAAE+F,EAAI,GAAI4oB,EAAW71B,GAAGkH,EAAE+F,GAAI4oB,EAAW71B,GAAGsN,EAAEL,EAAI,GAAI4oB,EAAW71B,GAAGA,EAAEiN,IAAK2pB,EAAa3vB,EAAIyT,GAAamc,EAAkBnc,aAAakc,EAAa5pB,EAAI0N,GAAamc,EAAkBnc,YAAaO,EAAQhO,EAAE,IACzP/W,KAAKygC,oBAAoBI,EAASN,EAAWK,EAAcJ,GAE3DA,GAAW,EACXD,EAAU1pB,GAAI,GAElB2N,GAAemc,EAAkBnc,YACjCoc,GAAgB,EAGxB,GAAIjB,EAAW71B,GAAG+M,GAAKkO,EAAQlb,OAAQ,CAEnC,GADA82B,EAAoB5b,EAAQhO,EAAI,GAC5ByN,GAAekc,EAAa5pB,EAAG,CAC/B,IAAI6O,EAAgBZ,EAAQhO,EAAI,GAAGyN,YAC/Bkc,EAAa3vB,GAAKyT,GAAekc,EAAa5pB,GAAK0N,EAAcmB,GACjE3lB,KAAKsgC,WAAWX,EAAW71B,GAAGkH,EAAE+F,EAAI,GAAI4oB,EAAW71B,GAAGsN,EAAEL,EAAI,GAAI4oB,EAAW71B,GAAGA,EAAE,GAAI61B,EAAW71B,GAAGkH,EAAE,GAAIuvB,EAAWK,EAAcJ,GACjIA,GAAW,IAEXK,EAAUnY,IAAI5B,cAAc6Y,EAAW71B,GAAGkH,EAAE+F,EAAI,GAAI4oB,EAAW71B,GAAGkH,EAAE,GAAI2uB,EAAW71B,GAAGsN,EAAEL,EAAI,GAAI4oB,EAAW71B,GAAGA,EAAE,IAAK42B,EAAa3vB,EAAIyT,GAAemB,GAAgB+a,EAAa5pB,EAAI0N,GAAemB,EAAeZ,EAAQhO,EAAI,IAChO/W,KAAKygC,oBAAoBI,EAASN,EAAWK,EAAcJ,GAE3DA,GAAW,EACXD,EAAU1pB,GAAI,QAGlB0pB,EAAU1pB,GAAI,EAElB2N,GAAemc,EAAkBnc,YACjCoc,GAAgB,EAMpB,GAJIL,EAAU/a,UACV+a,EAAU1H,QAAQ0H,EAAUvvB,EAAEoV,GAAS,GAAIma,EAAUvvB,EAAEoV,GAAS,GAAI,IAAKA,GACzEma,EAAU1H,QAAQ0H,EAAUvvB,EAAEuvB,EAAU/a,QAAU,GAAG,GAAI+a,EAAUvvB,EAAEuvB,EAAU/a,QAAU,GAAG,GAAG,IAAK+a,EAAU/a,QAAU,IAExHhB,EAAckc,EAAa5pB,EAC3B,MAEAhN,EAAIkE,EAAM,IACVuyB,EAAY7F,WAAW7V,aACvB2b,GAAW,EACX3W,EAAOtX,KAAKguB,GACZK,EAAe,GAGvB,OAAO/W,GAIXuT,eAAeE,iBAAiB,KAAMG,cAEtCnb,gBAAgB,CAACkb,eAAeE,sBAChCA,qBAAqBv5B,UAAUs6B,uBAAyB,SAAShJ,EAAKp0B,GAClErB,KAAK4T,SAAW5T,KAAKw3B,YACrBx3B,KAAK8gC,GAAKlQ,gBAAgB8F,QAAQjB,EAAKp0B,EAAK4P,EAAE,EAAE,KAAKjR,MACrDA,KAAKyT,cAAgBzT,KAAK8gC,GAAGlL,gBAAgB/rB,QAGjD6zB,qBAAqBv5B,UAAU48B,YAAc,SAAS17B,EAAMyH,GACxD,IAAIk0B,EAActG,WAAW7V,aAC7Bmc,EAAYnqB,EAAIxR,EAAKwR,EACrB,IAAI/M,EACAm3B,EAASC,EAASC,EAASC,EAAwBC,EAASC,EAC5DtI,EAAGC,EAAGC,EAAGC,EAAGC,EAAGC,EAFZrrB,EAAM3I,EAAKmgB,QACyD2K,EAAQ,EAEnF,IAAIrmB,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACbm3B,EAAW57B,EAAK2L,EAAElH,GAClBq3B,EAAW97B,EAAK+R,EAAEtN,GAClBo3B,EAAW77B,EAAKyE,EAAEA,GACfm3B,EAAS,KAAKE,EAAS,IAAMF,EAAS,KAAKE,EAAS,IAAMF,EAAS,KAAKC,EAAS,IAAMD,EAAS,KAAKC,EAAS,GACrG,IAAJp3B,GAASA,IAAMkE,EAAM,GAAO3I,EAAKwR,GAQ7BuqB,EADG,IAAJt3B,EACWzE,EAAK2L,EAAEhD,EAAI,GAEX3I,EAAK2L,EAAElH,EAAE,GAEvBu3B,EAAW32B,KAAKyC,KAAKzC,KAAKuC,IAAIg0B,EAAS,GAAGG,EAAQ,GAAG,GAAG12B,KAAKuC,IAAIg0B,EAAS,GAAGG,EAAQ,GAAG,IACxFE,EAAaD,EAAW32B,KAAKiD,IAAI0zB,EAAS,EAAEv0B,GAAOu0B,EAAW,EAC9DrI,EAAKI,EAAK6H,EAAS,IAAIG,EAAQ,GAAGH,EAAS,IAAIK,EAC/CrI,EAAKI,EAAK4H,EAAS,IAAIA,EAAS,GAAGG,EAAQ,IAAIE,EAC/CpI,EAAKF,GAAIA,EAAGiI,EAAS,IAAIzyB,YACzB2qB,EAAKF,GAAIA,EAAGgI,EAAS,IAAIzyB,YACzBwyB,EAAYjI,YAAYC,EAAGC,EAAGC,EAAGC,EAAGC,EAAGC,EAAGlJ,GAC1CA,GAAS,EAGLiR,EADDt3B,IAAMkE,EAAM,EACD3I,EAAK2L,EAAE,GAEP3L,EAAK2L,EAAElH,EAAE,GAEvBu3B,EAAW32B,KAAKyC,KAAKzC,KAAKuC,IAAIg0B,EAAS,GAAGG,EAAQ,GAAG,GAAG12B,KAAKuC,IAAIg0B,EAAS,GAAGG,EAAQ,GAAG,IACxFE,EAAaD,EAAW32B,KAAKiD,IAAI0zB,EAAS,EAAEv0B,GAAOu0B,EAAW,EAC9DrI,EAAKE,EAAK+H,EAAS,IAAIG,EAAQ,GAAGH,EAAS,IAAIK,EAC/CrI,EAAKE,EAAK8H,EAAS,IAAIG,EAAQ,GAAGH,EAAS,IAAIK,EAC/ClI,EAAKJ,GAAIA,EAAGiI,EAAS,IAAIzyB,YACzB6qB,EAAKJ,GAAIA,EAAGgI,EAAS,IAAIzyB,YACzBwyB,EAAYjI,YAAYC,EAAGC,EAAGC,EAAGC,EAAGC,EAAGC,EAAGlJ,GAC1CA,GAAS,IAhCT6Q,EAAYjI,YAAYkI,EAAS,GAAGA,EAAS,GAAGE,EAAS,GAAGA,EAAS,GAAGD,EAAS,GAAGA,EAAS,GAAG/Q,GAIhGA,GAAS,IA+Bb6Q,EAAYjI,YAAY1zB,EAAK2L,EAAElH,GAAG,GAAGzE,EAAK2L,EAAElH,GAAG,GAAGzE,EAAK+R,EAAEtN,GAAG,GAAGzE,EAAK+R,EAAEtN,GAAG,GAAGzE,EAAKyE,EAAEA,GAAG,GAAGzE,EAAKyE,EAAEA,GAAG,GAAGqmB,GACtGA,GAAS,GAGjB,OAAO6Q,GAGXtD,qBAAqBv5B,UAAUu7B,cAAgB,SAAS5J,GACpD,IAAI6J,EACA71B,EACAiN,EAAGkS,EAIChE,EAAqBqV,EALtBtsB,EAAMhO,KAAK6pB,OAAOhgB,OAErBi3B,EAAK9gC,KAAK8gC,GAAG9vB,EAEjB,GAAU,IAAP8vB,EAEC,IAAIh3B,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EAAE,CAIf,GAHAmb,EAAYjlB,KAAK6pB,OAAO/f,GACbmb,EAAU0Z,MAAMvT,MAC3BkP,EAAuBrV,EAAUqV,qBAC3BrV,EAAU0Z,MAAMhrB,MAAS3T,KAAK2T,MAASmiB,EAKzC,IAJAwE,EAAqBK,gBACrB1V,EAAU0Z,MAAMhrB,MAAO,EACvBgsB,EAAa1a,EAAU0Z,MAAMvT,MAAMvB,OACnCZ,EAAOhE,EAAU0Z,MAAMvT,MAAM5F,QACzBzO,EAAE,EAAEA,EAAEkS,EAAKlS,GAAG,EACdujB,EAAqBM,SAAS56B,KAAK+gC,YAAYpB,EAAW5oB,GAAG+pB,IAGrE7b,EAAU0Z,MAAMvT,MAAQnG,EAAUqV,qBAItCt6B,KAAKwT,kBAAkB3J,SACvB7J,KAAK2T,MAAO,IAIpBypB,eAAeE,iBAAiB,KAAKI,sBAErCpb,gBAAgB,CAACkb,eAAgBG,kBAEjCA,iBAAiBx5B,UAAUs6B,uBAAyB,SAAShJ,EAAKp0B,GAC9DrB,KAAK4T,SAAW5T,KAAKw3B,YACrBx3B,KAAK6W,EAAI+Z,gBAAgB8F,QAAQjB,EAAKp0B,EAAKwV,EAAE,EAAE,KAAK7W,MACpDA,KAAKoX,EAAIwZ,gBAAgB8F,QAAQjB,EAAKp0B,EAAK+V,EAAE,EAAE,KAAKpX,MACpDA,KAAKuhC,GAAK5K,yBAAyB2B,qBAAqB7C,EAAKp0B,EAAKkgC,GAAGvhC,MACrEA,KAAKwhC,GAAK5Q,gBAAgB8F,QAAQjB,EAAKp0B,EAAKkgC,GAAGC,GAAG,EAAE,IAAKxhC,MACzDA,KAAKyhC,GAAK7Q,gBAAgB8F,QAAQjB,EAAKp0B,EAAKkgC,GAAGE,GAAG,EAAE,IAAKzhC,MACzDA,KAAKqB,KAAOA,EACRrB,KAAKwT,kBAAkB3J,QACvB7J,KAAK4T,UAAS,GAElB5T,KAAKyT,cAAgBzT,KAAKwT,kBAAkB3J,OAC5C7J,KAAK0hC,QAAU,IAAIzsB,OACnBjV,KAAK2hC,QAAU,IAAI1sB,OACnBjV,KAAK4hC,QAAU,IAAI3sB,OACnBjV,KAAK6hC,QAAU,IAAI5sB,OACnBjV,KAAK8hC,OAAS,IAAI7sB,QAGtB0oB,iBAAiBx5B,UAAU49B,gBAAkB,SAASL,EAASC,EAASC,EAASnqB,EAAW4M,EAAM2d,GAC9F,IAAIx8B,EAAMw8B,GAAO,EAAI,EACjBC,EAASxqB,EAAU1G,EAAEC,EAAE,IAAM,EAAIyG,EAAU1G,EAAEC,EAAE,KAAO,EAAIqT,GAC1D6d,EAASzqB,EAAU1G,EAAEC,EAAE,IAAM,EAAIyG,EAAU1G,EAAEC,EAAE,KAAO,EAAIqT,GAC9Dqd,EAAQrqB,UAAUI,EAAUpG,EAAEL,EAAE,GAAKxL,EAAM6e,EAAM5M,EAAUpG,EAAEL,EAAE,GAAKxL,EAAM6e,EAAM5M,EAAUpG,EAAEL,EAAE,IAC9F2wB,EAAQtqB,WAAWI,EAAUb,EAAE5F,EAAE,IAAKyG,EAAUb,EAAE5F,EAAE,GAAIyG,EAAUb,EAAE5F,EAAE,IACtE2wB,EAAQjsB,QAAQ+B,EAAUxG,EAAED,EAAIxL,EAAM6e,GACtCsd,EAAQtqB,UAAUI,EAAUb,EAAE5F,EAAE,GAAIyG,EAAUb,EAAE5F,EAAE,GAAIyG,EAAUb,EAAE5F,EAAE,IACpE4wB,EAAQvqB,WAAWI,EAAUb,EAAE5F,EAAE,IAAKyG,EAAUb,EAAE5F,EAAE,GAAIyG,EAAUb,EAAE5F,EAAE,IACtE4wB,EAAQnrB,MAAMurB,EAAM,EAAEC,EAASA,EAAQD,EAAM,EAAEE,EAASA,GACxDN,EAAQvqB,UAAUI,EAAUb,EAAE5F,EAAE,GAAIyG,EAAUb,EAAE5F,EAAE,GAAIyG,EAAUb,EAAE5F,EAAE,KAGxE2sB,iBAAiBx5B,UAAUw1B,KAAO,SAASlE,EAAM3iB,EAAKgmB,EAAKqJ,GACvDniC,KAAKy1B,KAAOA,EACZz1B,KAAK8S,IAAMA,EACX9S,KAAK84B,IAAMA,EACX94B,KAAKmiC,UAAYA,EACjBniC,KAAKoiC,eAAiB,EACtBpiC,KAAKqiC,UAAY,GACjBriC,KAAKsiC,QAAU,GACftiC,KAAK21B,SAAW,EAChB31B,KAAK6T,6BAA6B4hB,GAClCz1B,KAAKy+B,uBAAuBhJ,EAAK3iB,EAAIgmB,IAErC,MAAMA,EAAI,EACNA,GAAO,EAEP94B,KAAKqiC,UAAUE,QAAQzvB,EAAIgmB,IACnB,EAET94B,KAAKwT,kBAAkB3J,OACtB7J,KAAKgX,GAAI,EAEThX,KAAK4T,UAAS,IAItB+pB,iBAAiBx5B,UAAUq+B,cAAgB,SAASz/B,GAChD,IAAI+G,EAAGkE,EAAMjL,EAAS8G,OACtB,IAAIC,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EACrB/G,EAAS+G,GAAG24B,YAAa,EACH,OAAnB1/B,EAAS+G,GAAGyN,IACXvX,KAAKwiC,cAAcz/B,EAAS+G,GAAGsgB,KAK3CuT,iBAAiBx5B,UAAUu+B,cAAgB,SAAS3/B,GACnCA,EAAS8G,OAAtB,IACI84B,EAAc3Y,KAAKC,MAAMD,KAAKE,UAAUnnB,IAE5C,OADA/C,KAAKwiC,cAAcG,GACZA,GAGXhF,iBAAiBx5B,UAAUy+B,kBAAoB,SAAS7/B,EAAU8/B,GAC9D,IAAI/4B,EAAGkE,EAAMjL,EAAS8G,OACtB,IAAIC,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EACrB/G,EAAS+G,GAAGg5B,QAAUD,EACA,OAAnB9/B,EAAS+G,GAAGyN,IACXvX,KAAK4iC,kBAAkB7/B,EAAS+G,GAAGsgB,GAAIyY,IAKnDlF,iBAAiBx5B,UAAUu7B,cAAgB,SAAS5J,GAChD,IAAIiN,EAAOC,EAAgBl5B,EAAGtE,EAAKy9B,EACnC,GAAGjjC,KAAK2T,MAAQmiB,EAAc,CAC1B,IAgBI+M,EAhBAK,EAASx4B,KAAKy4B,KAAKnjC,KAAK6W,EAAE7F,GAC9B,GAAGhR,KAAKsiC,QAAQz4B,OAASq5B,EAAO,CAC5B,MAAMljC,KAAKsiC,QAAQz4B,OAASq5B,EAAO,CAC/B,IAAIE,EAAQ,CACRhZ,GAAGpqB,KAAK0iC,cAAc1iC,KAAKqiC,WAC3B9qB,GAAG,MAEP6rB,EAAMhZ,GAAG7X,KAAK,CAAC,EAAI,CAAC,EAAI,EAAE,GAAK,EAAE,EAAI,CAAC,EAAE,IAAI,GAAK,YAAY,EAAI,CAAC,EAAI,EAAE,GAAK,EAAE,EAAI,KAAK,EAAI,CAAC,EAAI,EAAE,GAAK,EAAE,EAAI,CAAC,EAAE,IAAI,EAAI,CAAC,EAAI,EAAE,GAAK,EAAE,EAAI,CAAC,CAACxB,EAAE,EAAE+F,EAAE,EAAEvF,EAAE,GAAG,CAACR,EAAE,EAAE+F,EAAE,EAAEvF,EAAE,KAAK,EAAI,CAAC,EAAI,EAAE,GAAK,EAAE,EAAI,CAAC,IAAI,MAAM,GAAK,CAAC,EAAI,EAAE,GAAK,EAAE,EAAI,GAAG,GAAK,CAAC,EAAI,EAAE,GAAK,EAAE,EAAI,GAAG,GAAK,OAEpQvR,KAAK8S,IAAIJ,OAAO,EAAE,EAAE0wB,GACpBpjC,KAAKsiC,QAAQ5vB,OAAO,EAAE,EAAE0wB,GACxBpjC,KAAKoiC,gBAAkB,EAE3BpiC,KAAKy1B,KAAK4N,eAId,IAFAJ,EAAO,EAEHn5B,EAAI,EAAGA,GAAM9J,KAAKsiC,QAAQz4B,OAAS,EAAGC,GAAK,EAC3C+4B,EAAaI,EAAOC,EACpBljC,KAAKsiC,QAAQx4B,GAAGg5B,QAAUD,EAC1B7iC,KAAK4iC,kBAAkB5iC,KAAKsiC,QAAQx4B,GAAGsgB,GAAIyY,GAC3CI,GAAQ,EAGZjjC,KAAKoiC,eAAiBc,EAGtB,IAAItxB,EAAS5R,KAAKoX,EAAEpG,EAChBsyB,EAAe1xB,EAAO,EACtB2xB,EAAc3xB,EAAS,EAAIlH,KAAK6C,MAAMqE,GAAUlH,KAAKy4B,KAAKvxB,GAG1D4xB,GADOxjC,KAAKuhC,GAAGvwB,EAAEzP,MACRvB,KAAK0hC,QAAQngC,OACtBkiC,EAASzjC,KAAK2hC,QAAQpgC,MACtBmiC,EAAS1jC,KAAK4hC,QAAQrgC,MAC1BvB,KAAK0hC,QAAQjsB,QACbzV,KAAK2hC,QAAQlsB,QACbzV,KAAK4hC,QAAQnsB,QACbzV,KAAK6hC,QAAQpsB,QACbzV,KAAK8hC,OAAOrsB,QACZ,IAwBIsB,EAAGkS,EAxBH0a,EAAY,EAEhB,GAAG/xB,EAAS,EAAG,CACX,MAAM+xB,EAAUJ,EACZvjC,KAAK+hC,gBAAgB/hC,KAAK0hC,QAAS1hC,KAAK2hC,QAAS3hC,KAAK4hC,QAAS5hC,KAAKuhC,GAAI,GAAG,GAC3EoC,GAAa,EAEdL,IACCtjC,KAAK+hC,gBAAgB/hC,KAAK0hC,QAAS1hC,KAAK2hC,QAAS3hC,KAAK4hC,QAAS5hC,KAAKuhC,GAAI+B,GAAc,GACtFK,GAAaL,QAEd,GAAG1xB,EAAS,EAAG,CAClB,MAAM+xB,EAAUJ,EACZvjC,KAAK+hC,gBAAgB/hC,KAAK0hC,QAAS1hC,KAAK2hC,QAAS3hC,KAAK4hC,QAAS5hC,KAAKuhC,GAAI,GAAG,GAC3EoC,GAAa,EAEdL,IACCtjC,KAAK+hC,gBAAgB/hC,KAAK0hC,QAAS1hC,KAAK2hC,QAAS3hC,KAAK4hC,QAAS5hC,KAAKuhC,IAAM+B,GAAc,GACxFK,GAAaL,GAGrBx5B,EAAoB,IAAhB9J,KAAKqB,KAAK6V,EAAU,EAAIlX,KAAKoiC,eAAiB,EAClD58B,EAAsB,IAAhBxF,KAAKqB,KAAK6V,EAAU,GAAK,EAC/B+rB,EAAOjjC,KAAKoiC,eAEZ,MAAMa,EAAK,CAOP,GANAF,EAAQ/iC,KAAKmiC,UAAUr4B,GAAGsgB,GAC1B4Y,EAAiBD,EAAMA,EAAMl5B,OAAS,GAAG4N,UAAUmsB,OAAO5yB,EAAEzP,MAC5D0nB,EAAO+Z,EAAen5B,OACtBk5B,EAAMA,EAAMl5B,OAAS,GAAG4N,UAAUmsB,OAAOjwB,MAAO,EAChDovB,EAAMA,EAAMl5B,OAAS,GAAG4N,UAAUosB,GAAGlwB,MAAO,EAC5CovB,EAAMA,EAAMl5B,OAAS,GAAG4N,UAAUosB,GAAG7yB,EAAIhR,KAAKwhC,GAAGxwB,GAAKhR,KAAKyhC,GAAGzwB,EAAIhR,KAAKwhC,GAAGxwB,IAAMlH,GAAK9J,KAAKoiC,eAAiB,IAC1F,IAAduB,EAAgB,CAQf,KAPU,IAAN75B,GAAmB,IAARtE,GAAesE,IAAM9J,KAAKoiC,eAAiB,IAAc,IAAT58B,IAC3DxF,KAAK+hC,gBAAgB/hC,KAAK0hC,QAAS1hC,KAAK2hC,QAAS3hC,KAAK4hC,QAAS5hC,KAAKuhC,GAAI,GAAG,GAE/EvhC,KAAK8hC,OAAOrqB,UAAUgsB,EAAO,GAAGA,EAAO,GAAGA,EAAO,GAAGA,EAAO,GAAGA,EAAO,GAAGA,EAAO,GAAGA,EAAO,GAAGA,EAAO,GAAGA,EAAO,GAAGA,EAAO,GAAGA,EAAO,IAAIA,EAAO,IAAIA,EAAO,IAAIA,EAAO,IAAIA,EAAO,IAAIA,EAAO,KACxLzjC,KAAK8hC,OAAOrqB,UAAUisB,EAAO,GAAGA,EAAO,GAAGA,EAAO,GAAGA,EAAO,GAAGA,EAAO,GAAGA,EAAO,GAAGA,EAAO,GAAGA,EAAO,GAAGA,EAAO,GAAGA,EAAO,GAAGA,EAAO,IAAIA,EAAO,IAAIA,EAAO,IAAIA,EAAO,IAAIA,EAAO,IAAIA,EAAO,KACxL1jC,KAAK8hC,OAAOrqB,UAAU+rB,EAAO,GAAGA,EAAO,GAAGA,EAAO,GAAGA,EAAO,GAAGA,EAAO,GAAGA,EAAO,GAAGA,EAAO,GAAGA,EAAO,GAAGA,EAAO,GAAGA,EAAO,GAAGA,EAAO,IAAIA,EAAO,IAAIA,EAAO,IAAIA,EAAO,IAAIA,EAAO,IAAIA,EAAO,KAEpLzsB,EAAE,EAAEA,EAAEkS,EAAKlS,GAAG,EACdisB,EAAejsB,GAAK/W,KAAK8hC,OAAOvgC,MAAMwV,GAE1C/W,KAAK8hC,OAAOrsB,aAGZ,IADAzV,KAAK8hC,OAAOrsB,QACRsB,EAAE,EAAEA,EAAEkS,EAAKlS,GAAG,EACdisB,EAAejsB,GAAK/W,KAAK8hC,OAAOvgC,MAAMwV,GAG9C4sB,GAAa,EACbV,GAAQ,EACRn5B,GAAKtE,OAEN,CACHy9B,EAAOjjC,KAAKoiC,eACZt4B,EAAI,EACJtE,EAAM,EACN,MAAMy9B,EACFF,EAAQ/iC,KAAKmiC,UAAUr4B,GAAGsgB,GAC1B4Y,EAAiBD,EAAMA,EAAMl5B,OAAS,GAAG4N,UAAUmsB,OAAO5yB,EAAEzP,MAC5DwhC,EAAMA,EAAMl5B,OAAS,GAAG4N,UAAUmsB,OAAOjwB,MAAO,EAChDovB,EAAMA,EAAMl5B,OAAS,GAAG4N,UAAUosB,GAAGlwB,MAAO,EAC5CsvB,GAAQ,EACRn5B,GAAKtE,IAKjBm4B,iBAAiBx5B,UAAUy2B,SAAW,aAEtCwC,eAAeE,iBAAiB,KAAKK,kBAOrCC,gBAAgBz5B,UAAUy2B,SAAW,SAAS3V,GAC1CjlB,KAAKwlB,UAAYxlB,KAAKw4B,aACxBx4B,KAAK6pB,OAAS7pB,KAAK6pB,OAAO4G,OAAOriB,iBAAiBpO,KAAKw4B,aACvDx4B,KAAKw4B,YAAc,GAEpBx4B,KAAK6pB,OAAO7pB,KAAKwlB,SAAWP,EAC5BjlB,KAAKwlB,SAAW,GAGjBoY,gBAAgBz5B,UAAUw2B,cAAgB,WACzC,IAAI7wB,EACJ,IAAIA,EAAI,EAAGA,EAAI9J,KAAKwlB,QAAS1b,GAAK,EACjC4wB,WAAW+E,QAAQz/B,KAAK6pB,OAAO/f,IAEhC9J,KAAKwlB,QAAU,GAwBhBqY,aAAa15B,UAAUyP,SAAW,SAAS6jB,GACvC,IAAGz3B,KAAKy1B,KAAKC,WAAWC,UAAY31B,KAAK21B,SAAY8B,KAGrDz3B,KAAK21B,QAAU31B,KAAKy1B,KAAKC,WAAWC,QACpC31B,KAAK0T,2BACL1T,KAAK2T,KAAO3T,KAAK2T,MAAQ8jB,EACrBz3B,KAAK2T,MAAM,CACX,IAAI7J,EAAI,EAAGkE,EAAMhO,KAAK89B,UAAUj0B,OAIhC,IAHqB,QAAlB7J,KAAK8C,WACJ9C,KAAK+9B,QAAU,IAEfj0B,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACa,KAAvB9J,KAAK89B,UAAUh0B,GAAGqN,EACI,QAAlBnX,KAAK8C,SACJ9C,KAAK+9B,SAAW,IAAM/9B,KAAK89B,UAAUh0B,GAAGuH,EAAEL,EAE1ChR,KAAKg+B,UAAUl0B,GAAK9J,KAAK89B,UAAUh0B,GAAGuH,EAAEL,EAG5ChR,KAAKi+B,WAAW,GAAKj+B,KAAK89B,UAAUh0B,GAAGuH,EAAEL,IAKzDsR,gBAAgB,CAACjP,0BAA2BwqB,cAgB5CK,iBAAiB/5B,UAAU2/B,cAAgB,SAASnP,EAAQrT,GACxD,IAAkCyiB,EAA9Bj6B,EAAI,EAAGkE,EAAMhO,KAAKoX,EAAEvN,OAAO,EAC/B,MAAMC,EAAIkE,EAAK,CAEX,GADA+1B,EAAOr5B,KAAK2C,IAAIsnB,EAAS,EAAF7qB,GAAO6qB,EAAc,EAAPrT,EAAa,EAAFxX,IAC7Ci6B,EAAO,IACN,OAAO,EAEXj6B,GAAK,EAET,OAAO,GAGXo0B,iBAAiB/5B,UAAUo6B,iBAAmB,WAC1C,GAAIv+B,KAAKoX,EAAEvN,OAAO,IAAM7J,KAAK6W,EAAEhN,OAAO,EAClC,OAAO,EAEX,GAAI7J,KAAKqB,KAAK2V,EAAEA,EAAE,GAAGjG,EAAG,CACpB,IAAIjH,EAAI,EAAGkE,EAAMhO,KAAKqB,KAAK2V,EAAEA,EAAEnN,OAC/B,MAAOC,EAAIkE,EAAK,CACZ,IAAKhO,KAAK8jC,cAAc9jC,KAAKqB,KAAK2V,EAAEA,EAAElN,GAAGiH,EAAG/Q,KAAKqB,KAAKgQ,GAClD,OAAO,EAEXvH,GAAK,QAEN,IAAI9J,KAAK8jC,cAAc9jC,KAAKqB,KAAK2V,EAAEA,EAAGhX,KAAKqB,KAAKgQ,GACnD,OAAO,EAEX,OAAO,GAGX6sB,iBAAiB/5B,UAAUyP,SAAW,SAAS6jB,GAK3C,GAJAz3B,KAAKuT,KAAKK,WACV5T,KAAK2T,MAAO,EACZ3T,KAAKo+B,OAAQ,EACbp+B,KAAKq+B,OAAQ,EACVr+B,KAAKuT,KAAKI,MAAQ8jB,EAAY,CAC7B,IAAI3tB,EACAyrB,EAAMtnB,EADHD,EAAkB,EAAZhO,KAAKqB,KAAKgQ,EAEvB,IAAIvH,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACbyrB,EAAOzrB,EAAE,IAAM,EAAI,IAAM,IACzBmE,EAAMvD,KAAKoC,MAAM9M,KAAKuT,KAAKvC,EAAElH,GAAGyrB,GAC7Bv1B,KAAK6W,EAAE/M,KAAOmE,IACbjO,KAAK6W,EAAE/M,GAAKmE,EACZjO,KAAKo+B,OAAS3G,GAGtB,GAAGz3B,KAAKoX,EAAEvN,OAEN,IADAmE,EAAMhO,KAAKuT,KAAKvC,EAAEnH,OACdC,EAAc,EAAZ9J,KAAKqB,KAAKgQ,EAAIvH,EAAEkE,EAAIlE,GAAG,EACzByrB,EAAOzrB,EAAE,IAAM,EAAI,IAAM,EACzBmE,EAAMnE,EAAE,IAAM,EAAKY,KAAKoC,MAAqB,IAAf9M,KAAKuT,KAAKvC,EAAElH,IAAQ9J,KAAKuT,KAAKvC,EAAElH,GAC3D9J,KAAKoX,EAAEtN,EAAc,EAAZ9J,KAAKqB,KAAKgQ,KAASpD,IAC3BjO,KAAKoX,EAAEtN,EAAc,EAAZ9J,KAAKqB,KAAKgQ,GAAOpD,EAC1BjO,KAAKq+B,OAAS5G,GAI1Bz3B,KAAK2T,MAAQ8jB,IAIrBnV,gBAAgB,CAACjP,0BAA2B6qB,kBAC5C,IAAI8F,iBAAmB,SAASC,EAAWp6B,EAAQub,EAAQ0R,GAC1D,GAAc,IAAXjtB,EACQ,MAAO,GAEX,IAGIC,EAHAo6B,EAAKD,EAAU7sB,EACf+sB,EAAKF,EAAUn6B,EACfwxB,EAAK2I,EAAUjzB,EACZozB,EAAc,KAAOtN,EAAIvb,wBAAwB+f,EAAG,GAAG,GAAIA,EAAG,GAAG,IACxE,IAAIxxB,EAAI,EAAGA,EAAID,EAAQC,GAAK,EACxBs6B,GAAe,KAAOtN,EAAIvb,wBAAwB2oB,EAAGp6B,EAAI,GAAG,GAAIo6B,EAAGp6B,EAAI,GAAG,IAAM,IAAMgtB,EAAIvb,wBAAwB4oB,EAAGr6B,GAAG,GAAIq6B,EAAGr6B,GAAG,IAAM,IAAMgtB,EAAIvb,wBAAwB+f,EAAGxxB,GAAG,GAAIwxB,EAAGxxB,GAAG,IAM9L,OAJIsb,GAAUvb,IACVu6B,GAAe,KAAOtN,EAAIvb,wBAAwB2oB,EAAGp6B,EAAI,GAAG,GAAIo6B,EAAGp6B,EAAI,GAAG,IAAM,IAAMgtB,EAAIvb,wBAAwB4oB,EAAG,GAAG,GAAIA,EAAG,GAAG,IAAM,IAAMrN,EAAIvb,wBAAwB+f,EAAG,GAAG,GAAIA,EAAG,GAAG,IAC1L8I,GAAe,KAEZA,GAEXC,eAAkB,WAElB,IAAIC,EAAc,WACd,IAAIC,EAASnxB,UAAU,UACvBmxB,EAAOpoB,MAAQ,EACfooB,EAAOC,OAAS,EAChB,IAAIC,EAAMF,EAAO7V,WAAW,MAG5B,OAFA+V,EAAIC,UAAY,gBAChBD,EAAIE,SAAS,EAAG,EAAG,EAAG,GACfJ,EAPM,GAUjB,SAASK,IACL5kC,KAAK6kC,cAAgB,EAClB7kC,KAAK6kC,eAAiB7kC,KAAK8kC,aACvB9kC,KAAK+kC,gBACJ/kC,KAAK+kC,eAAe,MAKhC,SAASC,EAAcC,EAAWC,EAAYC,GAC1C,IAAI9/B,EAAO,GACX,GAAI4/B,EAAUnuB,EACVzR,EAAO4/B,EAAU5zB,OACd,GAAG6zB,EAAY,CAClB,IAAIE,EAAYH,EAAU5zB,GACY,IAAlC+zB,EAAUt6B,QAAQ,aAClBs6B,EAAYA,EAAU3a,MAAM,KAAK,IAErCplB,EAAO6/B,EAAaE,OAEpB//B,EAAO8/B,EACP9/B,GAAQ4/B,EAAUI,EAAIJ,EAAUI,EAAI,GACpChgC,GAAQ4/B,EAAU5zB,EAEtB,OAAOhM,EAGX,SAASigC,EAAgBL,GACrB,IAAI5/B,EAAO2/B,EAAcC,EAAWjlC,KAAKklC,WAAYllC,KAAKqF,MACtDkgC,EAAMnyB,UAAU,OACpBmyB,EAAIC,YAAc,YAClBD,EAAIx6B,iBAAiB,OAAQ/K,KAAKylC,aAAahzB,KAAKzS,OAAO,GAC3DulC,EAAIx6B,iBAAiB,QAAS,WAC1BsU,EAAGkmB,IAAMjB,EACTtkC,KAAKylC,gBACPhzB,KAAKzS,OAAO,GACdulC,EAAIjW,IAAMjqB,EACV,IAAIga,EAAK,CACLkmB,IAAKA,EACLN,UAAWA,GAEf,OAAO5lB,EAGX,SAASqmB,EAAW1a,EAAQ2a,GACxB3lC,KAAK+kC,eAAiBY,EACtB,IAAI77B,EAAGkE,EAAMgd,EAAOnhB,OACpB,IAAKC,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EAClBkhB,EAAOlhB,GAAG+e,SACV7oB,KAAK8kC,aAAe,EACpB9kC,KAAK4lC,OAAOrzB,KAAKvS,KAAK6lC,iBAAiB7a,EAAOlhB,MAK1D,SAASg8B,EAAQzgC,GACbrF,KAAKqF,KAAOA,GAAQ,GAGxB,SAAS0gC,EAAc1gC,GACnBrF,KAAKklC,WAAa7/B,GAAQ,GAG9B,SAAS2gC,EAASf,GACd,IAAIn7B,EAAI,EAAGkE,EAAMhO,KAAK4lC,OAAO/7B,OAC7B,MAAOC,EAAIkE,EAAK,CACZ,GAAIhO,KAAK4lC,OAAO97B,GAAGm7B,YAAcA,EAC7B,OAAOjlC,KAAK4lC,OAAO97B,GAAGy7B,IAE1Bz7B,GAAK,GAIb,SAASm8B,IACLjmC,KAAK+kC,eAAiB,KACtB/kC,KAAK4lC,OAAO/7B,OAAS,EAGzB,SAAS0jB,IACL,OAAOvtB,KAAK8kC,cAAgB9kC,KAAK6kC,aAGrC,OAAO,WACH7kC,KAAK0lC,WAAaA,EAClB1lC,KAAK+lC,cAAgBA,EACrB/lC,KAAK8lC,QAAUA,EACf9lC,KAAKutB,OAASA,EACdvtB,KAAKimC,QAAUA,EACfjmC,KAAKgmC,SAAWA,EAChBhmC,KAAK6lC,iBAAmBP,EACxBtlC,KAAKylC,aAAeb,EACpB5kC,KAAKklC,WAAa,GAClBllC,KAAKqF,KAAO,GACZrF,KAAK8kC,YAAc,EACnB9kC,KAAK6kC,aAAe,EACpB7kC,KAAK+kC,eAAiB,KACtB/kC,KAAK4lC,OAAS,IA5GD,GA+GjBM,eAAkB,WACrB,IAAI7mB,EAAK,CACR8mB,UAAU,GAKX,OAHI,WAAW15B,KAAKC,UAAUC,YAAc,UAAUF,KAAKC,UAAUC,YAAc,WAAWF,KAAKC,UAAUC,YAAc,aAAaF,KAAKC,UAAUC,cACpJ0S,EAAG8mB,UAAW,GAEV9mB,EAPa,GASjB+mB,eAAkB,WACrB,IAAI/mB,EAAK,GAIT,SAASgnB,EAAaC,GACd,IAAIC,EAAMrzB,SAAS,UAOZ,OANPqzB,EAAIpY,aAAa,KAAKmY,GACfC,EAAIpY,aAAa,cAAc,qBAC/BoY,EAAIpY,aAAa,IAAI,MACrBoY,EAAIpY,aAAa,IAAI,MACrBoY,EAAIpY,aAAa,QAAQ,QACzBoY,EAAIpY,aAAa,SAAS,QACnBoY,EAGtB,SAASC,IACM,IAAIC,EAAgBvzB,SAAS,iBAI7B,OAHAuzB,EAActY,aAAa,OAAO,UAClCsY,EAActY,aAAa,8BAA8B,QACzDsY,EAActY,aAAa,SAAS,8CAC7BsY,EAGtB,OAtBApnB,EAAGgnB,aAAeA,EAClBhnB,EAAGmnB,6BAA+BA,EAqB3BnnB,EAxBa,GA0BjBqnB,YAAe,WAElB,SAASC,EAAeC,GACvB,OAAGA,EAAIC,UAAoC,kBAAjBD,EAAIC,SACtBD,EAAIC,SACFD,EAAIC,UAAoC,kBAAjBD,EAAIC,SAC7B7c,KAAKC,MAAM2c,EAAIC,UACbD,EAAIE,aACN9c,KAAKC,MAAM2c,EAAIE,mBADhB,EAKR,SAASC,EAAU1hC,EAAMuE,EAAUo9B,GAClC,IAAIH,EACAD,EAAM,IAAIK,eACdL,EAAIM,KAAK,MAAO7hC,GAAM,GAEtB,IAEIuhC,EAAIO,aAAe,OACrB,MAAOC,IACNR,EAAIS,OACJT,EAAIr7B,mBAAqB,WACrB,GAAsB,GAAlBq7B,EAAIU,WACJ,GAAiB,KAAdV,EAAIW,OACNV,EAAWF,EAAeC,GAC1Bh9B,EAASi9B,QAEN,IACFA,EAAWF,EAAeC,GAC1Bh9B,EAASi9B,GACN,MAAMO,GACHJ,GACFA,EAAcI,KAOhC,MAAO,CACNI,KAAMT,GAzCU,GA6ClB,SAASU,qBAAqBC,EAAUC,EAAYlS,GAChDz1B,KAAK81B,eAAgB,EACxB91B,KAAK4nC,gBAAiB,EACtB5nC,KAAK6nC,UAAY,EACjB7nC,KAAK8nC,UAAYJ,EACjB1nC,KAAK+nC,YAAcJ,EAChB3nC,KAAKgoC,MAAQvS,EAChBz1B,KAAKioC,eAAiB75B,iBAAiBpO,KAAK8nC,UAAUlxB,EAAE/M,QACxD7J,KAAKkoC,UAAY,GACjBloC,KAAKmoC,aAAe,CACnBC,UAAW,IAEZpoC,KAAKqoC,gBAAkB,GACpBroC,KAAKsoC,oBAAqB,EAC1BtoC,KAAK6T,6BAA6B4hB,GAiiBtC,SAAS8S,yBAAyB9S,EAAM+S,EAAenmC,GACtD,IAAIomC,EAAc,CAACrX,UAAS,GACxBsF,EAAU9F,gBAAgB8F,QAC1BgS,EAA2BF,EAAc5xB,EAC7C5W,KAAK4W,EAAI,CACR3F,EAAGy3B,EAAyBz3B,EAAIylB,EAAQjB,EAAMiT,EAAyBz3B,EAAG,EAAG3C,UAAWjM,GAAaomC,EACrGtR,GAAIuR,EAAyBvR,GAAKT,EAAQjB,EAAMiT,EAAyBvR,GAAI,EAAG7oB,UAAWjM,GAAaomC,EACxGvR,GAAIwR,EAAyBxR,GAAKR,EAAQjB,EAAMiT,EAAyBxR,GAAI,EAAG5oB,UAAWjM,GAAaomC,EACxG1R,GAAI2R,EAAyB3R,GAAKL,EAAQjB,EAAMiT,EAAyB3R,GAAI,EAAGzoB,UAAWjM,GAAaomC,EACxGzR,GAAI0R,EAAyB1R,GAAKN,EAAQjB,EAAMiT,EAAyB1R,GAAI,EAAG1oB,UAAWjM,GAAaomC,EACxG13B,EAAG23B,EAAyB33B,EAAI2lB,EAAQjB,EAAMiT,EAAyB33B,EAAG,EAAG,IAAM1O,GAAaomC,EAChG7xB,EAAG8xB,EAAyB9xB,EAAI8f,EAAQjB,EAAMiT,EAAyB9xB,EAAG,EAAG,EAAGvU,GAAaomC,EAC7FrxB,EAAGsxB,EAAyBtxB,EAAIsf,EAAQjB,EAAMiT,EAAyBtxB,EAAG,EAAG,IAAM/U,GAAaomC,EAChGp3B,EAAGq3B,EAAyBr3B,EAAIqlB,EAAQjB,EAAKiT,EAAyBr3B,EAAG,EAAG,EAAGhP,GAAaomC,EAC5FE,GAAID,EAAyBC,GAAKjS,EAAQjB,EAAMiT,EAAyBC,GAAI,EAAG,EAAGtmC,GAAaomC,EAChGlZ,GAAImZ,EAAyBnZ,GAAKmH,EAAQjB,EAAMiT,EAAyBnZ,GAAI,EAAG,EAAGltB,GAAaomC,EAChGG,GAAIF,EAAyBE,GAAKlS,EAAQjB,EAAMiT,EAAyBE,GAAI,EAAG,EAAGvmC,GAAaomC,EAChGI,GAAIH,EAAyBG,GAAKnS,EAAQjB,EAAMiT,EAAyBG,GAAI,EAAG,EAAGxmC,GAAaomC,EAChGK,GAAIJ,EAAyBI,GAAKpS,EAAQjB,EAAMiT,EAAyBI,GAAI,EAAG,IAAMzmC,GAAaomC,EACnGM,GAAIL,EAAyBK,GAAKrS,EAAQjB,EAAMiT,EAAyBK,GAAI,EAAG,IAAM1mC,GAAaomC,EACnGl3B,EAAGm3B,EAAyBn3B,EAAImlB,EAAQjB,EAAMiT,EAAyBn3B,EAAG,EAAG,EAAGlP,GAAaomC,GAG9FzoC,KAAK+Q,EAAIi4B,iBAAiBC,oBAAoBxT,EAAK+S,EAAcz3B,EAAG1O,GACjErC,KAAK+Q,EAAEQ,EAAIi3B,EAAcz3B,EAAEQ,EAE/B,SAAS23B,YAAY9xB,EAAGuxB,EAAIpZ,EAAIqZ,EAAI1xB,EAAG7F,GACnCrR,KAAKoX,EAAIA,EACTpX,KAAK2oC,GAAKA,EACV3oC,KAAKuvB,GAAKA,EACVvvB,KAAK4oC,GAAKA,EACV5oC,KAAKkX,EAAIA,EACTlX,KAAKqR,EAAIA,EACTrR,KAAK2T,KAAO,CACXyD,GAAG,EACHuxB,KAAMA,EACNpZ,KAAMA,EACNqZ,KAAMA,EACN1xB,GAAG,EACH7F,GAAG,GA6CR,SAAS83B,aAAa1T,EAAMp0B,GAC3BrB,KAAK6nC,SAAWx7B,oBAChBrM,KAAKqxB,GAAK,GACVrxB,KAAKgR,EAAI,GACThR,KAAKg2B,IAAK,EACVh2B,KAAK81B,eAAgB,EACrB91B,KAAK2T,MAAO,EACT3T,KAAKqB,KAAOA,EACfrB,KAAKy1B,KAAOA,EACTz1B,KAAKoD,KAAOpD,KAAKy1B,KAAKryB,KACzBpD,KAAKopC,UAAY,EACdppC,KAAKqpC,WAAY,EACjBrpC,KAAKspC,gBAAkB,EACvBtpC,KAAK41B,gBAAkB,GAC1B51B,KAAKupC,YAAc,CAClBC,OAAQ,EACFC,SAAUzpC,KAAK0pC,gBACft4B,EAAG,GACHid,OAAQ,GACRC,QAAS,GACTsa,GAAI,GACJ7xB,EAAG,GACH4yB,cAAe,GACf1yB,EAAG,GACH2yB,GAAI,EACJC,WAAY,GACZC,GAAI,GACJC,GAAI,GACJh5B,EAAG,GACHwe,GAAI,GACJoZ,GAAI,EACJp3B,EAAG,EACHgwB,GAAI,EACJ7qB,GAAG,EACHszB,GAAG,KACHC,eAAe,EACfC,iBAAiB,EACjBC,iBAAiB,EACjBC,QAAS,EACTC,UAAU,EACVC,UAAU,GACVC,gBAAiB,EACjB5e,YAAY,GAGhB3rB,KAAKwqC,SAASxqC,KAAKupC,YAAavpC,KAAKqB,KAAKoQ,EAAEuF,EAAE,GAAGjG,GAE7C/Q,KAAKyqC,kBACLzqC,KAAK0qC,iBAAiB1qC,KAAKupC,aAjqBnC9B,qBAAqBtjC,UAAUwmC,iBAAmB,WAC9C,IAAI7gC,EAAkC0+B,EAA/Bx6B,EAAMhO,KAAK8nC,UAAUlxB,EAAE/M,OAC1B6sB,EAAU9F,gBAAgB8F,QAC9B,IAAI5sB,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACb0+B,EAAgBxoC,KAAK8nC,UAAUlxB,EAAE9M,GACjC9J,KAAKioC,eAAen+B,GAAK,IAAIy+B,yBAAyBvoC,KAAKgoC,MAAOQ,EAAexoC,MAElFA,KAAK8nC,UAAUz2B,GAAK,MAAOrR,KAAK8nC,UAAUz2B,GACzCrR,KAAKkoC,UAAY,CACb92B,EAAGslB,EAAQ12B,KAAKgoC,MAAMhoC,KAAK8nC,UAAUz2B,EAAED,EAAE,EAAE,EAAEpR,MAC7CiX,EAAGyf,EAAQ12B,KAAKgoC,MAAMhoC,KAAK8nC,UAAUz2B,EAAE4F,EAAE,EAAE,EAAEjX,MAC7CiR,EAAGjR,KAAK8nC,UAAUz2B,EAAEJ,EACpBiG,EAAGlX,KAAKgoC,MAAM4C,YAAYC,gBAAgB7qC,KAAK8nC,UAAUz2B,EAAE6F,IAE/DlX,KAAK4nC,gBAAiB,GAEtB5nC,KAAK4nC,gBAAiB,EAE1B5nC,KAAKmoC,aAAaC,UAAY1R,EAAQ12B,KAAKgoC,MAAMhoC,KAAK8nC,UAAU5wB,EAAEN,EAAE,EAAE,EAAE5W,OAG5EynC,qBAAqBtjC,UAAU2mC,YAAc,SAAShgB,EAAcwd,GAEhE,GADAtoC,KAAKsoC,mBAAqBA,EACtBtoC,KAAK2T,MAAS3T,KAAK81B,eAAkBwS,GAAwBtoC,KAAK4nC,gBAAmB5nC,KAAKkoC,UAAUhxB,EAAEvD,KAA1G,CAGA3T,KAAK81B,eAAgB,EACrB,IAOIiV,EAAKC,EACLlhC,EAAGkE,EACuBi9B,EAAUC,EAAeC,EAAcxlB,EAAejX,EAAM08B,EAAUC,EAAYC,EAAWhqB,EAAQ6d,EAAUrZ,EAAeL,EAAapB,EAAMknB,EAAU7uB,EATrL0rB,EAAYpoC,KAAKmoC,aAAaC,UAAUp3B,EACxCw6B,EAAYxrC,KAAKioC,eACjBP,EAAW1nC,KAAK8nC,UAChB2D,EAAezrC,KAAK0rC,QACpB/D,EAAa3nC,KAAK+nC,YAClB4D,EAAuB3rC,KAAKqoC,gBAAgBx+B,OAI5C+hC,GAHO5rC,KAAKqB,KAGFypB,EAAa7T,GAC3B,GAAGjX,KAAK4nC,eAAgB,CAEpB,GADAlrB,EAAO1c,KAAKkoC,UAAUhxB,GAClBlX,KAAKkoC,UAAU/wB,GAAKnX,KAAKkoC,UAAUv0B,KAAK,CACxC,IAUIuS,EAVAkF,EAAQ1O,EAAK1L,EAYjB,IAXGhR,KAAKkoC,UAAUj3B,IACdma,EAAQA,EAAMkO,WAGlB2R,EAAW,CACPY,QAAS,EACT1M,SAAU,IAEdnxB,EAAMod,EAAM5F,QAAU,EAEtBC,EAAc,EACT3b,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EACtBoc,EAAawC,IAAI3C,gBAAgBqF,EAAMpa,EAAElH,GACnCshB,EAAMpa,EAAElH,EAAI,GACZ,CAACshB,EAAMhU,EAAEtN,GAAG,GAAKshB,EAAMpa,EAAElH,GAAG,GAAIshB,EAAMhU,EAAEtN,GAAG,GAAKshB,EAAMpa,EAAElH,GAAG,IAC3D,CAACshB,EAAMthB,EAAEA,EAAI,GAAG,GAAKshB,EAAMpa,EAAElH,EAAI,GAAG,GAAIshB,EAAMthB,EAAEA,EAAI,GAAG,GAAKshB,EAAMpa,EAAElH,EAAI,GAAG,KACjFmhC,EAASY,SAAW3lB,EAAWP,cAC/BslB,EAAS9L,SAAS5sB,KAAK2T,GACvBT,GAAeS,EAAWP,cAE9B7b,EAAIkE,EACA0O,EAAK1L,EAAE6F,IACPqP,EAAawC,IAAI3C,gBAAgBqF,EAAMpa,EAAElH,GACnCshB,EAAMpa,EAAE,GACR,CAACoa,EAAMhU,EAAEtN,GAAG,GAAKshB,EAAMpa,EAAElH,GAAG,GAAIshB,EAAMhU,EAAEtN,GAAG,GAAKshB,EAAMpa,EAAElH,GAAG,IAC3D,CAACshB,EAAMthB,EAAE,GAAG,GAAKshB,EAAMpa,EAAE,GAAG,GAAIoa,EAAMthB,EAAE,GAAG,GAAKshB,EAAMpa,EAAE,GAAG,KACjEi6B,EAASY,SAAW3lB,EAAWP,cAC/BslB,EAAS9L,SAAS5sB,KAAK2T,GACvBT,GAAeS,EAAWP,eAE9B3lB,KAAKkoC,UAAU4D,GAAKb,EAUxB,GARAA,EAAWjrC,KAAKkoC,UAAU4D,GAE1BZ,EAAgBlrC,KAAKkoC,UAAU92B,EAAEJ,EACjCq6B,EAAa,EACbD,EAAW,EACXzlB,EAAgB,EAChBjX,GAAO,EACPywB,EAAW8L,EAAS9L,SAChB+L,EAAgB,GAAKxuB,EAAK1L,EAAE6F,EAAG,CAC3Bo0B,EAASY,QAAUnhC,KAAK2C,IAAI69B,KAC5BA,GAAiBxgC,KAAK2C,IAAI69B,GAAiBD,EAASY,SAExDR,EAAalM,EAASt1B,OAAS,EAC/ByX,EAAS6d,EAASkM,GAAY/pB,OAC9B8pB,EAAW9pB,EAAOzX,OAAS,EAC3B,MAAOqhC,EAAgB,EACnBA,GAAiB5pB,EAAO8pB,GAAUtlB,cAClCslB,GAAY,EACRA,EAAW,IACXC,GAAc,EACd/pB,EAAS6d,EAASkM,GAAY/pB,OAC9B8pB,EAAW9pB,EAAOzX,OAAS,GAKvCyX,EAAS6d,EAASkM,GAAY/pB,OAC9BgqB,EAAYhqB,EAAO8pB,EAAW,GAC9BD,EAAe7pB,EAAO8pB,GACtBtlB,EAAgBqlB,EAAarlB,cAIjC9X,EAAM49B,EAAQ/hC,OACdkhC,EAAO,EACPC,EAAO,EACP,IAEIxC,EAAeuD,EACfh1B,EAAGkS,EACH+iB,EAJAC,EAAgC,IAAzBnhB,EAAauf,UAAkB,KACtC6B,GAAY,EAKhBjjB,EAAOuiB,EAAU3hC,OAGjB,IAAI0rB,EAAgB4W,EAAMC,EAAUC,EAEhCC,EACA/c,EAAGoZ,EAAGC,EAAG5xB,EAETu1B,EAAUC,EAAUC,EAA0DC,EALxEza,GAAO,EACb0a,EAAczB,EAAc0B,EAAiBvB,EAAYwB,EAAezB,EAAU0B,IAAe,EAInEC,GAAU,GAAIC,GAAUhtC,KAAKitC,kBAG/D,GAAsB,IAAnBniB,EAAa/T,GAA8B,IAAnB+T,EAAa/T,EAAS,CAC7C,IAAIm2B,GAAwB,EACxBC,GAA0B,EAC1BC,GAAuC,IAAnBtiB,EAAa/T,GAAW,IAAO,EACnD2a,GAAY,EACZ2b,IAAY,EAEhB,IAAKvjC,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EACtB,GAAI8hC,EAAQ9hC,GAAGqN,EAAG,CACX+1B,KACCA,IAAyBC,IAE7B,MAAOzb,GAAY5nB,EACf8hC,EAAQla,IAAWwb,sBAAwBA,GAC3Cxb,IAAa,EAEjBwb,GAAwB,EACxBG,IAAY,MACT,CACH,IAAKt2B,EAAI,EAAGA,EAAIkS,EAAMlS,GAAK,EACvByxB,EAAgBgD,EAAUz0B,GAAGH,EACzB4xB,EAAcj3B,EAAE6f,WACZic,IAAgC,IAAnBviB,EAAa/T,IAC1Bo2B,IAA2B3E,EAAcj3B,EAAEP,EAAIo8B,IAEnDrB,EAAmBP,EAAUz0B,GAAGhG,EAChCwkB,EAAOwW,EAAiBuB,QAAQ1B,EAAQ9hC,GAAGyjC,UAAUx2B,GAAI2wB,EAAS9wB,EAAEG,GAAGhG,EAAEy8B,YACrEjY,EAAK1rB,OACLqjC,IAAyB1E,EAAcj3B,EAAEP,EAAEukB,EAAK,GAAK6X,GAErDF,IAAyB1E,EAAcj3B,EAAEP,EAAEukB,EAAO6X,IAI9DC,IAAY,EAGjBH,KACCA,IAAyBC,IAE7B,MAAMzb,GAAY5nB,EACd8hC,EAAQla,IAAWwb,sBAAwBA,GAC3Cxb,IAAa,EAKrB,IAAK5nB,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EAAG,CAIzB,GAFA2hC,EAAah2B,QACb62B,EAAc,EACXV,EAAQ9hC,GAAGqN,EACV4zB,EAAO,EACPC,GAAQlgB,EAAasf,QACrBY,GAAQkB,EAAY,EAAI,EACxBhB,EAAgByB,EAChBT,GAAY,EACC,EACVlsC,KAAK4nC,iBACJyD,EAAauB,EACbxB,EAAWyB,EACXvrB,EAAS6d,EAASkM,GAAY/pB,OAC9BgqB,EAAYhqB,EAAO8pB,EAAW,GAC9BD,EAAe7pB,EAAO8pB,GACtBtlB,EAAgBqlB,EAAarlB,cAC7BH,EAAgB,GAEpB+mB,EAAUH,EAAWE,EAAWM,GAAU,GAC1CC,GAAUhtC,KAAKitC,sBACd,CACD,GAAGjtC,KAAK4nC,eAAgB,CACpB,GAAGkF,KAAgBlB,EAAQ9hC,GAAG2jC,KAAK,CAC/B,OAAO3iB,EAAa/T,GAChB,KAAK,EACDm0B,GAAiBzlB,EAAcqF,EAAa+e,WAAW+B,EAAQ9hC,GAAG2jC,MAClE,MACJ,KAAK,EACDvC,IAAkBzlB,EAAcqF,EAAa+e,WAAW+B,EAAQ9hC,GAAG2jC,OAAO,EAC1E,MAERX,GAAclB,EAAQ9hC,GAAG2jC,KAEzBxb,IAAQ2Z,EAAQ9hC,GAAGmoB,MACf2Z,EAAQ3Z,KACRiZ,GAAiBU,EAAQ3Z,GAAKyb,OAElCxC,GAAiBU,EAAQ9hC,GAAG6jC,GAAK,EACjC1b,EAAM2Z,EAAQ9hC,GAAGmoB,KAErBiZ,GAAiB9C,EAAU,GAAKwD,EAAQ9hC,GAAG6jC,GAAK,IAChD,IAAIC,GAAiB,EACrB,IAAK72B,EAAI,EAAGA,EAAIkS,EAAMlS,GAAK,EACvByxB,EAAgBgD,EAAUz0B,GAAGH,EACzB4xB,EAAcn3B,EAAE+f,WAChB2a,EAAmBP,EAAUz0B,GAAGhG,EAChCwkB,EAAOwW,EAAiBuB,QAAQ1B,EAAQ9hC,GAAGyjC,UAAUx2B,GAAG2wB,EAAS9wB,EAAEG,GAAGhG,EAAEy8B,YACrEjY,EAAK1rB,OACJ+jC,IAAkBpF,EAAcn3B,EAAEL,EAAE,GAAKukB,EAAK,GAE9CqY,IAAkBpF,EAAcn3B,EAAEL,EAAE,GAAKukB,GAI7CiT,EAAc5xB,EAAEwa,WAChB2a,EAAmBP,EAAUz0B,GAAGhG,EAChCwkB,EAAOwW,EAAiBuB,QAAQ1B,EAAQ9hC,GAAGyjC,UAAUx2B,GAAG2wB,EAAS9wB,EAAEG,GAAGhG,EAAEy8B,YACrEjY,EAAK1rB,OACJ+jC,IAAkBpF,EAAc5xB,EAAE5F,EAAE,GAAKukB,EAAK,GAE9CqY,IAAkBpF,EAAc5xB,EAAE5F,EAAE,GAAKukB,GAKrD7mB,GAAO,EACP,MAAOA,EACCiX,EAAgBG,GAAiBolB,EAAgB0C,KAAmBtsB,GACpE+C,GAAQ6mB,EAAgB0C,GAAiBjoB,GAAiBwlB,EAAarlB,cACvEsmB,EAAWd,EAAU7mB,MAAM,IAAM0mB,EAAa1mB,MAAM,GAAK6mB,EAAU7mB,MAAM,IAAMJ,EAC/EgoB,EAAWf,EAAU7mB,MAAM,IAAM0mB,EAAa1mB,MAAM,GAAK6mB,EAAU7mB,MAAM,IAAMJ,EAC/EonB,EAAap0B,WAAW+wB,EAAU,GAAGwD,EAAQ9hC,GAAG6jC,GAAG,KAAOvF,EAAU,GAAK6D,EAAO,KAChFv9B,GAAO,GACA4S,IACPqE,GAAiBwlB,EAAarlB,cAC9BslB,GAAY,EACRA,GAAY9pB,EAAOzX,SACnBuhC,EAAW,EACXC,GAAc,EACTlM,EAASkM,GAUV/pB,EAAS6d,EAASkM,GAAY/pB,OAT1B5E,EAAK1L,EAAE6F,GACPu0B,EAAW,EACXC,EAAa,EACb/pB,EAAS6d,EAASkM,GAAY/pB,SAE9BqE,GAAiBwlB,EAAarlB,cAC9BxE,EAAS,OAMjBA,IACAgqB,EAAYH,EACZA,EAAe7pB,EAAO8pB,GACtBtlB,EAAgBqlB,EAAarlB,gBAIzCqmB,EAAOP,EAAQ9hC,GAAG6jC,GAAK,EAAI/B,EAAQ9hC,GAAG+jC,IACtCpC,EAAap0B,WAAW80B,EAAM,EAAG,QAEjCA,EAAOP,EAAQ9hC,GAAG6jC,GAAG,EAAI/B,EAAQ9hC,GAAG+jC,IACpCpC,EAAap0B,WAAW80B,EAAK,EAAE,GAG/BV,EAAap0B,WAAW+wB,EAAU,GAAGwD,EAAQ9hC,GAAG6jC,GAAG,KAAMvF,EAAU,GAAG6D,EAAK,IAAK,GAIpF,IADcL,EAAQ9hC,GAAGmN,EAAE,EACvBF,EAAE,EAAEA,EAAEkS,EAAKlS,GAAG,EACdyxB,EAAgBgD,EAAUz0B,GAAGH,EACzB4xB,EAAcj3B,EAAE6f,WAChB2a,EAAmBP,EAAUz0B,GAAGhG,EAChCwkB,EAAOwW,EAAiBuB,QAAQ1B,EAAQ9hC,GAAGyjC,UAAUx2B,GAAG2wB,EAAS9wB,EAAEG,GAAGhG,EAAEy8B,YAE5D,IAATzC,GAAiC,IAAnBjgB,EAAa/T,IACvB/W,KAAK4nC,eACDrS,EAAK1rB,OACJqhC,GAAiB1C,EAAcj3B,EAAEP,EAAEukB,EAAK,GAExC2V,GAAiB1C,EAAcj3B,EAAEP,EAAEukB,EAGpCA,EAAK1rB,OACJkhC,GAAQvC,EAAcj3B,EAAEP,EAAEukB,EAAK,GAE/BwV,GAAQvC,EAAcj3B,EAAEP,EAAEukB,IAoB9C,IAdcqW,EAAQ9hC,GAAGmN,EAAE,EACxB6T,EAAaqf,kBACZxB,EAAK7d,EAAa6d,IAAM,GAEzB7d,EAAaof,kBAER3a,EADDzE,EAAayE,GACP,CAACzE,EAAayE,GAAG,GAAIzE,EAAayE,GAAG,GAAIzE,EAAayE,GAAG,IAEzD,CAAC,EAAE,EAAE,IAGfzE,EAAamf,eAAiBnf,EAAa8d,KAC1CA,EAAK,CAAC9d,EAAa8d,GAAG,GAAI9d,EAAa8d,GAAG,GAAI9d,EAAa8d,GAAG,KAE9D7xB,EAAE,EAAEA,EAAEkS,EAAKlS,GAAG,EACdyxB,EAAgBgD,EAAUz0B,GAAGH,EACzB4xB,EAAc5xB,EAAEwa,WAChB2a,EAAmBP,EAAUz0B,GAAGhG,EAChCwkB,EAAOwW,EAAiBuB,QAAQ1B,EAAQ9hC,GAAGyjC,UAAUx2B,GAAG2wB,EAAS9wB,EAAEG,GAAGhG,EAAEy8B,YAErEjY,EAAK1rB,OACJ4hC,EAAap0B,WAAWmxB,EAAc5xB,EAAE5F,EAAE,GAAGukB,EAAK,IAAKiT,EAAc5xB,EAAE5F,EAAE,GAAGukB,EAAK,GAAIiT,EAAc5xB,EAAE5F,EAAE,GAAGukB,EAAK,IAE/GkW,EAAap0B,WAAWmxB,EAAc5xB,EAAE5F,EAAE,GAAGukB,GAAOiT,EAAc5xB,EAAE5F,EAAE,GAAGukB,EAAMiT,EAAc5xB,EAAE5F,EAAE,GAAGukB,IAIhH,IAAIxe,EAAE,EAAEA,EAAEkS,EAAKlS,GAAG,EACdyxB,EAAgBgD,EAAUz0B,GAAGH,EACzB4xB,EAAcz3B,EAAEqgB,WAChB2a,EAAmBP,EAAUz0B,GAAGhG,EAChCwkB,EAAOwW,EAAiBuB,QAAQ1B,EAAQ9hC,GAAGyjC,UAAUx2B,GAAG2wB,EAAS9wB,EAAEG,GAAGhG,EAAEy8B,YACrEjY,EAAK1rB,OACJ4hC,EAAah1B,MAAM,GAAI+xB,EAAcz3B,EAAEC,EAAE,GAAG,GAAGukB,EAAK,GAAI,GAAIiT,EAAcz3B,EAAEC,EAAE,GAAG,GAAGukB,EAAK,GAAI,GAE7FkW,EAAah1B,MAAM,GAAI+xB,EAAcz3B,EAAEC,EAAE,GAAG,GAAGukB,EAAM,GAAIiT,EAAcz3B,EAAEC,EAAE,GAAG,GAAGukB,EAAM,IAInG,IAAIxe,EAAE,EAAEA,EAAEkS,EAAKlS,GAAG,EAAG,CA+CjB,GA9CAyxB,EAAgBgD,EAAUz0B,GAAGH,EAC7Bm1B,EAAmBP,EAAUz0B,GAAGhG,EAChCwkB,EAAOwW,EAAiBuB,QAAQ1B,EAAQ9hC,GAAGyjC,UAAUx2B,GAAG2wB,EAAS9wB,EAAEG,GAAGhG,EAAEy8B,YACpEhF,EAAczR,GAAG3F,WACdmE,EAAK1rB,OACJ4hC,EAAaj1B,cAAcgyB,EAAczR,GAAG/lB,EAAIukB,EAAK,GAAIiT,EAAcxR,GAAGhmB,EAAIukB,EAAK,IAEnFkW,EAAaj1B,cAAcgyB,EAAczR,GAAG/lB,EAAIukB,EAAMiT,EAAcxR,GAAGhmB,EAAIukB,IAG/EiT,EAAcv3B,EAAEmgB,WACbmE,EAAK1rB,OACJ4hC,EAAax1B,SAASuyB,EAAcv3B,EAAED,EAAIukB,EAAK,IAE/CkW,EAAax1B,SAASuyB,EAAcv3B,EAAED,EAAIukB,IAG9CiT,EAActR,GAAG9F,WAEdmE,EAAK1rB,OACJ4hC,EAAaz1B,QAAQwyB,EAActR,GAAGlmB,EAAEukB,EAAK,IAE7CkW,EAAaz1B,QAAQwyB,EAActR,GAAGlmB,EAAEukB,IAG5CiT,EAAcrR,GAAG/F,WACdmE,EAAK1rB,OACJ4hC,EAAa11B,QAAQyyB,EAAcrR,GAAGnmB,EAAEukB,EAAK,IAE7CkW,EAAa11B,QAAQyyB,EAAcrR,GAAGnmB,EAAEukB,IAG5CiT,EAAcpxB,EAAEga,WACbmE,EAAK1rB,OACJyiC,IAAiB9D,EAAcpxB,EAAG,EAAEme,EAAK,GAAK+W,GAAa/W,EAAK,GAEhE+W,IAAiB9D,EAAcpxB,EAAG,EAAEme,EAAO+W,GAAa/W,GAG5DzK,EAAaqf,iBAAmB3B,EAAcG,GAAGvX,WAC9CmE,EAAK1rB,OACJ8+B,GAAMH,EAAcG,GAAG33B,EAAEukB,EAAK,GAE9BoT,GAAMH,EAAcG,GAAG33B,EAAEukB,GAG7BzK,EAAaof,iBAAmB1B,EAAcjZ,GAAG6B,SACjD,IAAIpa,EAAE,EAAEA,EAAE,EAAEA,GAAG,EACRue,EAAK1rB,OACJ0lB,EAAGvY,GAAKuY,EAAGvY,IAAMwxB,EAAcjZ,GAAGve,EAAEgG,GAAKuY,EAAGvY,IAAIue,EAAK,GAErDhG,EAAGvY,GAAKuY,EAAGvY,IAAMwxB,EAAcjZ,GAAGve,EAAEgG,GAAKuY,EAAGvY,IAAIue,EAI5D,GAAIzK,EAAamf,eAAiBnf,EAAa8d,GAAI,CAC/C,GAAGJ,EAAcI,GAAGxX,SAChB,IAAIpa,EAAE,EAAEA,EAAE,EAAEA,GAAG,EACRue,EAAK1rB,OACJ++B,EAAG5xB,GAAK4xB,EAAG5xB,IAAMwxB,EAAcI,GAAG53B,EAAEgG,GAAK4xB,EAAG5xB,IAAIue,EAAK,GAErDqT,EAAG5xB,GAAK4xB,EAAG5xB,IAAMwxB,EAAcI,GAAG53B,EAAEgG,GAAK4xB,EAAG5xB,IAAIue,EAIzDiT,EAAcK,GAAGzX,WAEZwX,EADDrT,EAAK1rB,OACCkI,YAAY62B,EAAGJ,EAAcK,GAAG73B,EAAEukB,EAAK,IAEvCxjB,YAAY62B,EAAGJ,EAAcK,GAAG73B,EAAEukB,IAG5CiT,EAAcM,GAAG1X,WAEZwX,EADDrT,EAAK1rB,OACC6H,mBAAmBk3B,EAAGJ,EAAcM,GAAG93B,EAAEukB,EAAK,IAE9C7jB,mBAAmBk3B,EAAGJ,EAAcM,GAAG93B,EAAEukB,IAGnDiT,EAAcO,GAAG3X,WAEZwX,EADDrT,EAAK1rB,OACCiI,mBAAmB82B,EAAGJ,EAAcO,GAAG/3B,EAAEukB,EAAK,IAE9CzjB,mBAAmB82B,EAAGJ,EAAcO,GAAG/3B,EAAEukB,KAM9D,IAAIxe,EAAE,EAAEA,EAAEkS,EAAKlS,GAAG,EACdyxB,EAAgBgD,EAAUz0B,GAAGH,EAEzB4xB,EAAcn3B,EAAE+f,WAChB2a,EAAmBP,EAAUz0B,GAAGhG,EAChCwkB,EAAOwW,EAAiBuB,QAAQ1B,EAAQ9hC,GAAGyjC,UAAUx2B,GAAG2wB,EAAS9wB,EAAEG,GAAGhG,EAAEy8B,YACrExtC,KAAK4nC,eACDrS,EAAK1rB,OACJ4hC,EAAap0B,UAAU,EAAGmxB,EAAcn3B,EAAEL,EAAE,GAAKukB,EAAK,IAAKiT,EAAcn3B,EAAEL,EAAE,GAAKukB,EAAK,IAEvFkW,EAAap0B,UAAU,EAAGmxB,EAAcn3B,EAAEL,EAAE,GAAKukB,GAAOiT,EAAcn3B,EAAEL,EAAE,GAAKukB,GAGhFA,EAAK1rB,OACJ4hC,EAAap0B,UAAUmxB,EAAcn3B,EAAEL,EAAE,GAAKukB,EAAK,GAAIiT,EAAcn3B,EAAEL,EAAE,GAAKukB,EAAK,IAAKiT,EAAcn3B,EAAEL,EAAE,GAAKukB,EAAK,IAEpHkW,EAAap0B,UAAUmxB,EAAcn3B,EAAEL,EAAE,GAAKukB,EAAMiT,EAAcn3B,EAAEL,EAAE,GAAKukB,GAAOiT,EAAcn3B,EAAEL,EAAE,GAAKukB,IAgBzH,GAVGzK,EAAaqf,kBACZoC,EAAW5D,EAAK,EAAI,EAAIA,GAEzB7d,EAAaof,kBACZsC,EAAW,OAAO9hC,KAAKoC,MAAY,IAANyiB,EAAG,IAAQ,IAAI7kB,KAAKoC,MAAY,IAANyiB,EAAG,IAAQ,IAAI7kB,KAAKoC,MAAY,IAANyiB,EAAG,IAAQ,KAE7FzE,EAAamf,eAAiBnf,EAAa8d,KAC1C6D,EAAW,OAAO/hC,KAAKoC,MAAY,IAAN87B,EAAG,IAAQ,IAAIl+B,KAAKoC,MAAY,IAAN87B,EAAG,IAAQ,IAAIl+B,KAAKoC,MAAY,IAAN87B,EAAG,IAAQ,KAG7F5oC,KAAK4nC,eAAgB,CAIpB,GAHA6D,EAAap0B,UAAU,GAAGyT,EAAagf,IAEvC2B,EAAap0B,UAAU,EAAG+wB,EAAU,GAAG6D,EAAK,IAAMjB,EAAK,GACnDtD,EAASr2B,EAAEA,EAAG,CACdk6B,GAAYJ,EAAa1mB,MAAM,GAAK6mB,EAAU7mB,MAAM,KAAO0mB,EAAa1mB,MAAM,GAAK6mB,EAAU7mB,MAAM,IACnG,IAAIqpB,GAA4B,IAAtBpjC,KAAKqjC,KAAKxC,GAAkB7gC,KAAK6D,GACvC48B,EAAa1mB,MAAM,GAAK6mB,EAAU7mB,MAAM,KACxCqpB,IAAO,KAEXrC,EAAa/1B,QAAQo4B,GAAMpjC,KAAK6D,GAAK,KAEzCk9B,EAAap0B,UAAU+0B,EAAUC,EAAU,GAC3CnB,GAAiB9C,EAAU,GAAGwD,EAAQ9hC,GAAG6jC,GAAG,IACzC/B,EAAQ9hC,EAAE,IAAMmoB,IAAQ2Z,EAAQ9hC,EAAE,GAAGmoB,MACpCiZ,GAAiBU,EAAQ9hC,GAAG6jC,GAAK,EACjCzC,GAAiBpgB,EAAayW,GAAG,IAAKzW,EAAauf,eAEtD,CAQD,OANAoB,EAAap0B,UAAU0zB,EAAKC,EAAK,GAE9BlgB,EAAakf,IAEZyB,EAAap0B,UAAUyT,EAAakf,GAAG,GAAGlf,EAAakf,GAAG,GAAKlf,EAAa0e,OAAO,GAEhF1e,EAAa/T,GAChB,KAAK,EACD00B,EAAap0B,UAAUu0B,EAAQ9hC,GAAGojC,sBAAwBpiB,EAAa6e,eAAiB7e,EAAa2e,SAAW3e,EAAa+e,WAAW+B,EAAQ9hC,GAAG2jC,OAAO,EAAE,GAC5J,MACJ,KAAK,EACDhC,EAAap0B,UAAUu0B,EAAQ9hC,GAAGojC,sBAAwBpiB,EAAa6e,eAAiB7e,EAAa2e,SAAW3e,EAAa+e,WAAW+B,EAAQ9hC,GAAG2jC,OAAO,EAAE,EAAE,GAC9J,MAERhC,EAAap0B,UAAU,GAAGyT,EAAagf,IACvC2B,EAAap0B,UAAU80B,EAAK,EAAE,GAC9BV,EAAap0B,UAAU+wB,EAAU,GAAGwD,EAAQ9hC,GAAG6jC,GAAG,IAAIvF,EAAU,GAAG6D,EAAK,IAAI,GAC5ElB,GAAQa,EAAQ9hC,GAAGmN,EAAI6T,EAAayW,GAAG,IAAKzW,EAAauf,UAE3C,SAAf1C,EACCoF,GAAUtB,EAAajwB,QACH,QAAfmsB,EACLoF,GAAUtB,EAAa9vB,UAEvBqxB,GAAU,CAACvB,EAAalqC,MAAM,GAAGkqC,EAAalqC,MAAM,GAAGkqC,EAAalqC,MAAM,GAAGkqC,EAAalqC,MAAM,GAAGkqC,EAAalqC,MAAM,GAAGkqC,EAAalqC,MAAM,GAAGkqC,EAAalqC,MAAM,GAAGkqC,EAAalqC,MAAM,GAAGkqC,EAAalqC,MAAM,GAAGkqC,EAAalqC,MAAM,GAAGkqC,EAAalqC,MAAM,IAAIkqC,EAAalqC,MAAM,IAAIkqC,EAAalqC,MAAM,IAAIkqC,EAAalqC,MAAM,IAAIkqC,EAAalqC,MAAM,IAAIkqC,EAAalqC,MAAM,KAEjXmrC,EAAUJ,EAGXX,GAAwB7hC,GACvBkiC,EAAc,IAAI9C,YAAYwD,EAAQH,EAASC,EAASC,EAASM,GAAQC,IACzEhtC,KAAKqoC,gBAAgB91B,KAAKy5B,GAC1BL,GAAwB,EACxB3rC,KAAKsoC,oBAAqB,IAE1B0D,EAAchsC,KAAKqoC,gBAAgBv+B,GACnC9J,KAAKsoC,mBAAqB0D,EAAYvoC,OAAOipC,EAASH,EAAUC,EAAUC,EAAUM,GAASC,KAAYhtC,KAAKsoC,uBAK1Hb,qBAAqBtjC,UAAUyP,SAAW,WACtC5T,KAAKgoC,MAAMtS,WAAWC,UAAY31B,KAAK6nC,WAGvC7nC,KAAK6nC,SAAW7nC,KAAKgoC,MAAMtS,WAAWC,QACtC31B,KAAK0T,6BAGT+zB,qBAAqBtjC,UAAUunC,QAAU,IAAIz2B,OAC7CwyB,qBAAqBtjC,UAAU8oC,kBAAoB,GACnD3qB,gBAAgB,CAACjP,0BAA2Bo0B,sBA4C5CyB,YAAY/kC,UAAUV,OAAS,SAAS2T,EAAGuxB,EAAIpZ,EAAIqZ,EAAI1xB,EAAG7F,GACzDrR,KAAK2T,KAAKyD,GAAI,EACdpX,KAAK2T,KAAKg1B,IAAK,EACf3oC,KAAK2T,KAAK4b,IAAK,EACfvvB,KAAK2T,KAAKi1B,IAAK,EACf5oC,KAAK2T,KAAKuD,GAAI,EACdlX,KAAK2T,KAAKtC,GAAI,EACd,IAAI28B,GAAU,EAgCd,OA9BGhuC,KAAKoX,IAAMA,IACbpX,KAAKoX,EAAIA,EACTpX,KAAK2T,KAAKyD,GAAI,EACd42B,GAAU,GAERhuC,KAAK2oC,KAAOA,IACd3oC,KAAK2oC,GAAKA,EACV3oC,KAAK2T,KAAKg1B,IAAK,EACfqF,GAAU,GAERhuC,KAAKuvB,KAAOA,IACdvvB,KAAKuvB,GAAKA,EACVvvB,KAAK2T,KAAK4b,IAAK,EACfye,GAAU,GAERhuC,KAAK4oC,KAAOA,IACd5oC,KAAK4oC,GAAKA,EACV5oC,KAAK2T,KAAKi1B,IAAK,EACfoF,GAAU,GAERhuC,KAAKkX,IAAMA,IACblX,KAAKkX,EAAIA,EACTlX,KAAK2T,KAAKuD,GAAI,EACd82B,GAAU,IAER38B,EAAExH,QAAW7J,KAAKqR,EAAE,KAAOA,EAAE,IAAMrR,KAAKqR,EAAE,KAAOA,EAAE,IAAMrR,KAAKqR,EAAE,KAAOA,EAAE,IAAMrR,KAAKqR,EAAE,KAAOA,EAAE,IAAMrR,KAAKqR,EAAE,MAAQA,EAAE,KAAOrR,KAAKqR,EAAE,MAAQA,EAAE,MAChJrR,KAAKqR,EAAIA,EACTrR,KAAK2T,KAAKtC,GAAI,EACd28B,GAAU,GAEJA,GAsDR7E,aAAahlC,UAAUulC,gBAAkB,CAAC,EAAE,GAE5CP,aAAahlC,UAAUqmC,SAAW,SAASrsB,EAAK9c,GAC5C,IAAI,IAAI0P,KAAK1P,EACNA,EAAKshB,eAAe5R,KACnBoN,EAAIpN,GAAK1P,EAAK0P,IAGtB,OAAOoN,GAGXgrB,aAAahlC,UAAU8pC,eAAiB,SAAS5sC,GACzCA,EAAKsqB,YACL3rB,KAAK0qC,iBAAiBrpC,GAE1BrB,KAAKupC,YAAcloC,EACnBrB,KAAKupC,YAAYE,SAAWzpC,KAAKupC,YAAYE,UAAYzpC,KAAK0pC,gBAC9D1pC,KAAK2T,MAAO,GAGhBw1B,aAAahlC,UAAUsmC,eAAiB,WACpC,OAAOzqC,KAAKkuC,mBAGhB/E,aAAahlC,UAAU+pC,gBAAkB,WAKrC,OAJAluC,KAAKg2B,GAAKh2B,KAAKqB,KAAKoQ,EAAEuF,EAAEnN,OAAS,EAC9B7J,KAAKg2B,IACJh2B,KAAKi2B,UAAUj2B,KAAKmuC,iBAAiB17B,KAAKzS,OAEvCA,KAAKg2B,IAGhBmT,aAAahlC,UAAU8xB,UAAY,SAASC,GAC3Cl2B,KAAK41B,gBAAgBrjB,KAAK2jB,GACvBl2B,KAAKy1B,KAAKniB,mBAAmBtT,OAGjCmpC,aAAahlC,UAAUyP,SAAW,SAASw6B,GACvC,GAAIpuC,KAAKy1B,KAAKC,WAAWC,UAAY31B,KAAK21B,SAAY31B,KAAK41B,gBAAgB/rB,QAAYukC,EAAvF,CAGApuC,KAAKupC,YAAYh4B,EAAIvR,KAAKqB,KAAKoQ,EAAEuF,EAAEhX,KAAKopC,WAAWr4B,EAAEQ,EACrD,IAAI88B,EAAeruC,KAAKupC,YACpB+E,EAAetuC,KAAKopC,UACxB,GAAGppC,KAAK61B,KACJ71B,KAAKiuC,eAAejuC,KAAKupC,iBAD7B,CAIAvpC,KAAK61B,MAAO,EACZ71B,KAAK2T,MAAO,EAEZ,IAAI7J,EAAGkE,EAAMhO,KAAK41B,gBAAgB/rB,OAC9BksB,EAAaqY,GAAepuC,KAAKqB,KAAKoQ,EAAEuF,EAAEhX,KAAKopC,WAAWr4B,EAC9D,IAAIjH,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EAGjBisB,EADDuY,IAAiBtuC,KAAKopC,UACRppC,KAAK41B,gBAAgB9rB,GAAGisB,EAAYA,EAAWxkB,GAE/CvR,KAAK41B,gBAAgB9rB,GAAG9J,KAAKupC,YAAaxT,EAAWxkB,GAGvE88B,IAAiBtY,GAChB/1B,KAAKiuC,eAAelY,GAExB/1B,KAAKqxB,GAAKrxB,KAAKgR,EAAIhR,KAAKupC,YACxBvpC,KAAK61B,MAAO,EACZ71B,KAAK21B,QAAU31B,KAAKy1B,KAAKC,WAAWC,WAGxCwT,aAAahlC,UAAUgqC,iBAAmB,WACtC,IAAII,EAAWvuC,KAAKqB,KAAKoQ,EAAEuF,EACvBga,EAAWhxB,KAAKy1B,KAAKryB,KAAK6xB,cAC1BnrB,EAAI,EAAGkE,EAAMugC,EAAS1kC,OAC1B,MAAMC,GAAKkE,EAAM,EAAG,CAEhB,GADmBugC,EAASzkC,GAAGiH,EAC5BjH,IAAMkE,EAAM,GAAKugC,EAASzkC,EAAE,GAAGyH,EAAIyf,EAClC,MAEJlnB,GAAK,EAKT,OAHG9J,KAAKopC,YAAct/B,IAClB9J,KAAKopC,UAAYt/B,GAEd9J,KAAKqB,KAAKoQ,EAAEuF,EAAEhX,KAAKopC,WAAWr4B,GAGzCo4B,aAAahlC,UAAUqqC,eAAiB,SAASC,GAC7C,IAGIC,EAHAtiB,EAAqBL,YAAYyE,4BACjCme,EAAkB,GAClB7kC,EAAI,EAAGkE,EAAMygC,EAAK5kC,OAEtB,MAAOC,EAAIkE,EACP0gC,EAAWD,EAAKhwB,WAAW3U,IACmB,IAA1CsiB,EAAmBthB,QAAQ4jC,GAC3BC,EAAgBA,EAAgB9kC,OAAS,IAAM4kC,EAAKG,OAAO9kC,GAEvD4kC,GAAY,OAAUA,GAAY,OAClCA,EAAWD,EAAKhwB,WAAW3U,EAAI,GAC3B4kC,GAAY,OAAUA,GAAY,OAClCC,EAAgBp8B,KAAKk8B,EAAKI,OAAO/kC,EAAG,MAClCA,GAEF6kC,EAAgBp8B,KAAKk8B,EAAKG,OAAO9kC,KAGrC6kC,EAAgBp8B,KAAKk8B,EAAKG,OAAO9kC,IAGzCA,GAAK,EAET,OAAO6kC,GAGXxF,aAAahlC,UAAUumC,iBAAmB,SAAS5f,GAC/CA,EAAaa,YAAa,EAC1B,IAGI7hB,EAAGkE,EACH8gC,EAAwB7gC,EAKxB8I,EAAGkS,EAEH8lB,EAKAC,EAhBAjmB,EAAc/oB,KAAKy1B,KAAKC,WAAW3M,YACnC1nB,EAAOrB,KAAKqB,KACZuqC,EAAU,GAEGzb,EAAQ,EACrB8e,EAAiB5tC,EAAK6V,EAAEhG,EACxBg+B,EAAc,EAAGC,EAAa,EAAGrC,EAAc,EAAGjD,EAAa,GAC/DuF,EAAY,EACZC,EAAe,EAEfphB,EAAWlF,EAAYmH,cAAcpF,EAAa1Z,GACxC+sB,EAAU,EACpBmR,EAASrhB,EAASI,OAASJ,EAASI,OAAO5D,MAAM,KAAO,GAExD6D,EAAU,SAAUD,EAAS,SAGjC,IAFArgB,EAAMshC,EAAOzlC,OAETC,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EAEb,OADAklC,EAAYM,EAAOxlC,GAAGylC,cACfP,GACH,IAAK,SACL3gB,EAAS,SACT,MACA,IAAK,OACLC,EAAU,MACV,MACA,IAAK,QACLA,EAAU,MACV,MACA,IAAK,SACLA,EAAU,MACV,MACA,IAAK,UACL,IAAK,SACLA,EAAU,MACV,MACA,IAAK,QACL,IAAK,OACLA,EAAU,MACV,MAGRxD,EAAawD,QAAUL,EAASK,SAAWA,EAC3CxD,EAAauD,OAASA,EACtBvD,EAAauf,UAAYvf,EAAa/Z,EACtC+Z,EAAawf,UAAYtqC,KAAKwuC,eAAe1jB,EAAavZ,GAC1DvD,EAAM8c,EAAawf,UAAUzgC,OAC7BihB,EAAayf,gBAAkBzf,EAAa8e,GAC5C,IACI8E,EADAc,EAAiB1kB,EAAayW,GAAG,IAAKzW,EAAauf,UAEvD,GAAGvf,EAAapU,GAAG,CACf,IAGI+4B,EAAenF,EAHf57B,GAAO,EACP+6B,EAAW3e,EAAapU,GAAG,GAC3Bg5B,EAAY5kB,EAAapU,GAAG,GAEhC,MAAMhI,EAAM,CACR47B,EAAYtqC,KAAKwuC,eAAe1jB,EAAavZ,GAC7Ck+B,EAAgB,EAChBL,EAAY,EACZphC,EAAMs8B,EAAUzgC,OAChB2lC,EAAiB1kB,EAAayW,GAAG,IAAKzW,EAAauf,UACnD,IAAIsF,GAAkB,EACtB,IAAI7lC,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACb4kC,EAAWpE,EAAUxgC,GAAG2U,WAAW,GACnCqwB,GAAc,EACM,MAAjBxE,EAAUxgC,GACT6lC,EAAiB7lC,EACC,KAAb4kC,GAAgC,IAAbA,IACxBU,EAAY,EACZN,GAAc,EACdW,GAAiB3kB,EAAayf,iBAA0C,IAAvBzf,EAAauf,WAE/DthB,EAAYmC,OACX6jB,EAAWhmB,EAAY8G,YAAYya,EAAUxgC,GAAImkB,EAASI,OAAQJ,EAASG,SAC3E+P,EAAU2Q,EAAc,EAAIC,EAAS7iB,EAAEpB,EAAauf,UAAU,KAG9DlM,EAAUpV,EAAYiH,YAAYsa,EAAUxgC,GAAIghB,EAAa1Z,EAAG0Z,EAAauf,WAE9E+E,EAAYjR,EAAUsL,GAA6B,MAAjBa,EAAUxgC,KACpB,IAApB6lC,EACC3hC,GAAO,EAEPlE,EAAI6lC,EAERF,GAAiB3kB,EAAayf,iBAA0C,IAAvBzf,EAAauf,UAC9DC,EAAU53B,OAAO5I,EAAG6lC,IAAmB7lC,EAAI,EAAI,EAAE,MAEjD6lC,GAAkB,EAClBP,EAAY,IAEZA,GAAajR,EACbiR,GAAaI,GAGrBC,GAAiBxhB,EAASub,OAAO1e,EAAauf,UAAU,IACrDrqC,KAAKqpC,WAAave,EAAauf,UAAYrqC,KAAKspC,iBAAmBoG,EAAYD,GAC9E3kB,EAAauf,WAAa,EAC1Bvf,EAAayf,gBAAkBzf,EAAauf,UAAYvf,EAAa8e,GAAK9e,EAAa/Z,IAEvF+Z,EAAawf,UAAYA,EACzBt8B,EAAM8c,EAAawf,UAAUzgC,OAC7B6E,GAAO,IAKnB0gC,GAAcI,EACdrR,EAAU,EACV,IACIyR,EADAC,EAAoB,EAExB,IAAK/lC,EAAI,EAAEA,EAAIkE,EAAKlE,GAAK,EAkCrB,GAjCAglC,GAAc,EACdc,EAAc9kB,EAAawf,UAAUxgC,GACrC4kC,EAAWkB,EAAYnxB,WAAW,GACd,MAAhBmxB,EACA3hC,EAAM,IACc,KAAbygC,GAAgC,IAAbA,GAC1BmB,EAAoB,EACpBhG,EAAWt3B,KAAK68B,GAChBC,EAAeD,EAAYC,EAAeD,EAAYC,EACtDD,GAAc,EAAII,EAClBvhC,EAAM,GACN6gC,GAAc,EACdhC,GAAe,GAEf7+B,EAAM6c,EAAawf,UAAUxgC,GAE9Bif,EAAYmC,OACX6jB,EAAWhmB,EAAY8G,YAAY+f,EAAa3hB,EAASI,OAAQtF,EAAYmH,cAAcpF,EAAa1Z,GAAGgd,SAC3G+P,EAAU2Q,EAAc,EAAIC,EAAS7iB,EAAEpB,EAAauf,UAAU,KAI9DlM,EAAUpV,EAAYiH,YAAY/hB,EAAK6c,EAAa1Z,EAAG0Z,EAAauf,WAIrD,MAAhBuF,EACCC,GAAqB1R,EAAUqR,GAE/BJ,GAAajR,EAAUqR,EAAiBK,EACxCA,EAAoB,GAExBjE,EAAQr5B,KAAK,CAAC0E,EAAEknB,EAAQwP,GAAGxP,EAAQ0P,IAAIqB,EAAY/3B,EAAE23B,EAAavB,UAAU,GAAIt/B,IAAKA,EAAKw/B,KAAMX,EAAaI,sBAAuB,IAC/G,GAAlB+B,GAEC,GADAC,GAAe/Q,EACJ,KAARlwB,GAAsB,MAARA,GAAoBnE,IAAMkE,EAAM,EAAE,CACpC,KAARC,GAAsB,MAARA,IACbihC,GAAe/Q,GAEnB,MAAMgR,GAAYrlC,EACd8hC,EAAQuD,GAAYxB,GAAKuB,EACzBtD,EAAQuD,GAAYld,IAAM9B,EAC1Byb,EAAQuD,GAAYzB,MAAQvP,EAC5BgR,GAAc,EAElBhf,GAAS,EACT+e,EAAc,QAEhB,GAAqB,GAAlBD,GAEL,GADAC,GAAe/Q,EACJ,KAARlwB,GAAcnE,IAAMkE,EAAM,EAAE,CAChB,KAARC,IACCihC,GAAe/Q,GAEnB,MAAMgR,GAAYrlC,EACd8hC,EAAQuD,GAAYxB,GAAKuB,EACzBtD,EAAQuD,GAAYld,IAAM9B,EAC1Byb,EAAQuD,GAAYzB,MAAQvP,EAC5BgR,GAAc,EAElBD,EAAc,EACd/e,GAAS,QAGbyb,EAAQzb,GAAO8B,IAAM9B,EACrByb,EAAQzb,GAAOud,MAAQ,EACvBvd,GAAS,EAMjB,GAHArF,EAAa7T,EAAI20B,EACjByD,EAAeD,EAAYC,EAAeD,EAAYC,EACtDxF,EAAWt3B,KAAK68B,GACbtkB,EAAapU,GACZoU,EAAa2e,SAAW3e,EAAapU,GAAG,GACxCoU,EAAa6e,cAAgB,OAG7B,OADA7e,EAAa2e,SAAW4F,EACjBvkB,EAAa/T,GAChB,KAAK,EACD+T,EAAa6e,eAAkB7e,EAAa2e,SAC5C,MACJ,KAAK,EACD3e,EAAa6e,eAAkB7e,EAAa2e,SAAS,EACrD,MACJ,QACI3e,EAAa6e,cAAgB,EAGzC7e,EAAa+e,WAAaA,EAE1B,IAAwBiG,EAAcC,EAAlCvE,EAAYnqC,EAAKuV,EACrBqS,EAAOuiB,EAAU3hC,OACjB,IAAImmC,EAAO/d,EAAKge,EAAU,GAC1B,IAAIl5B,EAAE,EAAEA,EAAEkS,EAAKlS,GAAG,EAAE,CAahB,IAZA+4B,EAAetE,EAAUz0B,GACtB+4B,EAAal5B,EAAE2Y,KACdzE,EAAaof,iBAAkB,GAEhC4F,EAAal5B,EAAE+xB,KACd7d,EAAaqf,iBAAkB,IAEhC2F,EAAal5B,EAAEgyB,IAAMkH,EAAal5B,EAAEiyB,IAAMiH,EAAal5B,EAAEkyB,IAAMgH,EAAal5B,EAAEmyB,MAC7Eje,EAAamf,eAAgB,GAEjChY,EAAM,EACN+d,EAAQF,EAAa/+B,EAAEI,EACnBrH,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACbimC,EAAanE,EAAQ9hC,GACrBimC,EAAWxC,UAAUx2B,GAAKkb,GACb,GAAT+d,GAAiC,KAAnBD,EAAW9hC,KAAyB,GAAT+hC,GAAiC,KAAnBD,EAAW9hC,KAAiC,MAAnB8hC,EAAW9hC,KAA+B,GAAT+hC,IAAeD,EAAW54B,GAAuB,KAAlB44B,EAAW9hC,KAAmBnE,GAAKkE,EAAM,IAAiB,GAATgiC,IAAeD,EAAW54B,GAAKrN,GAAKkE,EAAM,MAClN,IAAtB8hC,EAAa/+B,EAAEm/B,IACdD,EAAQ19B,KAAK0f,GAEjBA,GAAO,GAGf5wB,EAAKuV,EAAEG,GAAGhG,EAAEy8B,WAAavb,EACzB,IAAqBke,EAAjBC,GAAc,EAClB,GAAyB,IAAtBN,EAAa/+B,EAAEm/B,GACd,IAAIpmC,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EACrBimC,EAAanE,EAAQ9hC,GAClBsmC,GAAcL,EAAWxC,UAAUx2B,KAClCq5B,EAAaL,EAAWxC,UAAUx2B,GAClCo5B,EAASF,EAAQv9B,OAAOhI,KAAK6C,MAAM7C,KAAKC,SAASslC,EAAQpmC,QAAQ,GAAG,IAExEkmC,EAAWxC,UAAUx2B,GAAKo5B,EAItCrlB,EAAasf,QAAUtf,EAAayf,iBAA0C,IAAvBzf,EAAauf,UACpEvf,EAAagf,GAAKhf,EAAagf,IAAM,EACrChf,EAAa0e,OAASvb,EAASub,OAAO1e,EAAauf,UAAU,KAGjElB,aAAahlC,UAAUnB,mBAAqB,SAASqtC,EAASlgB,GAC7DA,OAAkBjmB,IAAVimB,EAAsBnwB,KAAKopC,UAAYjZ,EAC5C,IAAImgB,EAAQtwC,KAAKwqC,SAAS,GAAIxqC,KAAKqB,KAAKoQ,EAAEuF,EAAEmZ,GAAOpf,GACnDu/B,EAAQtwC,KAAKwqC,SAAS8F,EAAOD,GAC7BrwC,KAAKqB,KAAKoQ,EAAEuF,EAAEmZ,GAAOpf,EAAIu/B,EACzBtwC,KAAKuwC,YAAYpgB,GACjBnwB,KAAKy1B,KAAKniB,mBAAmBtT,OAGjCmpC,aAAahlC,UAAUosC,YAAc,SAASpgB,GAC1C,IAAImgB,EAAQtwC,KAAKqB,KAAKoQ,EAAEuF,EAAEmZ,GAAOpf,EACjCu/B,EAAM3kB,YAAa,EACnB3rB,KAAKopC,UAAY,EACjBppC,KAAK81B,eAAgB,EACrB91B,KAAK4T,SAAS08B,IAGlBnH,aAAahlC,UAAUqsC,cAAgB,SAASC,GAC5CzwC,KAAKqpC,UAAYoH,EACjBzwC,KAAKuwC,YAAYvwC,KAAKopC,WACtBppC,KAAKy1B,KAAKniB,mBAAmBtT,OAGjCmpC,aAAahlC,UAAUusC,mBAAqB,SAASC,GACjD3wC,KAAKspC,gBAAkB5+B,KAAK6C,MAAMojC,IAAe,EACjD3wC,KAAKuwC,YAAYvwC,KAAKopC,WACtBppC,KAAKy1B,KAAKniB,mBAAmBtT,OAGjC,IAAIgpC,iBAAoB,WACpB,IAAIv7B,EAAM/C,KAAK+C,IACXE,EAAMjD,KAAKiD,IACXJ,EAAQ7C,KAAK6C,MAEjB,SAASy7B,EAAiBvT,EAAKp0B,GAC3BrB,KAAK4wC,oBAAsB,EAC3B5wC,KAAKgX,GAAI,EACThX,KAAKqB,KAAOA,EACZrB,KAAKy1B,KAAOA,EACZz1B,KAAKoD,KAAOqyB,EAAKryB,KACjBpD,KAAK6wC,OAAS,EACd7wC,KAAK8wC,OAAS,EACd9wC,KAAK6T,6BAA6B4hB,GAClCz1B,KAAK+Q,EAAI6f,gBAAgB8F,QAAQjB,EAAKp0B,EAAK0P,GAAK,CAACiG,EAAE,GAAG,EAAE,EAAEhX,MAEtDA,KAAK8W,EADN,MAAOzV,EACGuvB,gBAAgB8F,QAAQjB,EAAKp0B,EAAKyV,EAAE,EAAE,EAAE9W,MAExC,CAACgR,EAAE,KAEhBhR,KAAKoX,EAAIwZ,gBAAgB8F,QAAQjB,EAAKp0B,EAAK+V,GAAK,CAACJ,EAAE,GAAG,EAAE,EAAEhX,MAC1DA,KAAK+wC,GAAKngB,gBAAgB8F,QAAQjB,EAAKp0B,EAAK0vC,IAAM,CAAC/5B,EAAE,GAAG,EAAE,EAAEhX,MAC5DA,KAAKgxC,GAAKpgB,gBAAgB8F,QAAQjB,EAAKp0B,EAAK2vC,IAAM,CAACh6B,EAAE,GAAG,EAAE,EAAEhX,MAC5DA,KAAK4W,EAAIga,gBAAgB8F,QAAQjB,EAAKp0B,EAAKuV,EAAE,EAAE,IAAK5W,MAChDA,KAAKwT,kBAAkB3J,QACvB7J,KAAK4T,WAkHb,SAASq1B,EAAoBxT,EAAMp0B,EAAKyR,GACpC,OAAO,IAAIk2B,EAAiBvT,EAAMp0B,EAAMyR,GAG5C,OAlHAk2B,EAAiB7kC,UAAY,CACzBmpC,QAAS,SAASrb,GACXjyB,KAAK4wC,qBAAuB5wC,KAAKy1B,KAAKwb,aAAa1H,YAAYtyB,EAAEpN,QAChE7J,KAAK4T,WAGT,IAAIuP,EAAK,EACLC,EAAK,EACLC,EAAK,EACLC,EAAK,EACNtjB,KAAKgxC,GAAGhgC,EAAI,EACXmS,EAAKnjB,KAAKgxC,GAAGhgC,EAAI,IAGjBoS,GAAMpjB,KAAKgxC,GAAGhgC,EAAI,IAEnBhR,KAAK+wC,GAAG//B,EAAI,EACXqS,EAAK,EAAMrjB,KAAK+wC,GAAG//B,EAAI,IAGvBsS,EAAK,EAAMtjB,KAAK+wC,GAAG//B,EAAI,IAE3B,IAAIkgC,EAAQ9xB,cAAcE,gBAAgB6D,EAAIC,EAAIC,EAAIC,GAAI7B,IAEtD8T,EAAO,EACPxkB,EAAI/Q,KAAK6wC,OACT/5B,EAAI9W,KAAK8wC,OACTpvC,EAAO1B,KAAKqB,KAAKyxB,GACrB,GAAa,IAATpxB,EAEI6zB,EADAze,IAAM/F,EACCkhB,GAAOnb,EAAI,EAAI,EAEfrJ,EAAI,EAAGE,EAAI,IAAOmJ,EAAI/F,IAAMkhB,EAAMlhB,IAAM+F,EAAI/F,GAAI,IAE3DwkB,EAAO2b,EAAM3b,QACV,GAAY,IAAT7zB,EAEF6zB,EADAze,IAAM/F,EACCkhB,GAAOnb,EAAI,EAAI,EAEf,EAAIrJ,EAAI,EAAGE,EAAI,IAAOmJ,EAAI/F,IAAMkhB,EAAMlhB,IAAM+F,EAAI/F,GAAG,IAG9DwkB,EAAO2b,EAAM3b,QACV,GAAa,IAAT7zB,EACHoV,IAAM/F,EACNwkB,EAAO,GAEPA,EAAO9nB,EAAI,EAAGE,EAAI,IAAOmJ,EAAI/F,IAAMkhB,EAAMlhB,IAAM+F,EAAI/F,GAAI,IACnDwkB,EAAO,GACPA,GAAQ,EAERA,EAAO,EAAI,GAAKA,EAAO,KAG/BA,EAAO2b,EAAM3b,QACV,GAAa,IAAT7zB,EAAY,CACnB,GAAIoV,IAAM/F,EACNwkB,EAAO,MACJ,CACH,IAAI4b,EAAMr6B,EAAI/F,EAGdkhB,EAAMtkB,EAAIF,EAAI,EAAGwkB,EAAM,GAAMlhB,GAAI+F,EAAI/F,GACrC,IAAIgJ,GAAKo3B,EAAI,EAAElf,EACXrb,EAAIu6B,EAAI,EACZ5b,EAAO7qB,KAAKyC,KAAK,EAAK4M,EAAIA,GAAMnD,EAAIA,IAExC2e,EAAO2b,EAAM3b,QACG,IAAT7zB,GACHoV,IAAM/F,EACNwkB,EAAO,GAEPtD,EAAMtkB,EAAIF,EAAI,EAAGwkB,EAAM,GAAMlhB,GAAI+F,EAAI/F,GACrCwkB,GAAQ,EAAK7qB,KAAKyK,IAAKzK,KAAK6D,GAAe,EAAV7D,KAAK6D,GAAS,GAASuI,EAAI/F,KAAS,GAEzEwkB,EAAO2b,EAAM3b,KAETtD,GAAO1kB,EAAMwD,KAETwkB,EAAO9nB,EAAI,EAAGE,EADdskB,EAAMlhB,EAAI,EACQpD,EAAImJ,EAAG,IAAM/F,EAAIkhB,GAEjBnb,EAAImb,EAFmB,KAKjDsD,EAAO2b,EAAM3b,IAEjB,OAAOA,EAAKv1B,KAAK4W,EAAE5F,GAEvB4C,SAAU,SAASw9B,GACfpxC,KAAK0T,2BACL1T,KAAK2T,KAAOy9B,GAAgBpxC,KAAK2T,KACjC3T,KAAK4wC,mBAAqB5wC,KAAKy1B,KAAKwb,aAAa1H,YAAYtyB,EAAEpN,QAAU,EACtEunC,GAAgC,IAAhBpxC,KAAKqB,KAAK4P,IACzBjR,KAAK8W,EAAE9F,EAAIhR,KAAK4wC,oBAEpB,IAAIS,EAA0B,IAAhBrxC,KAAKqB,KAAK4P,EAAU,EAAI,IAAMjR,KAAKqB,KAAKmsC,WAClDp2B,EAAIpX,KAAKoX,EAAEpG,EAAEqgC,EACbtgC,EAAI/Q,KAAK+Q,EAAEC,EAAEqgC,EAAUj6B,EACvBN,EAAK9W,KAAK8W,EAAE9F,EAAEqgC,EAAWj6B,EAC7B,GAAGrG,EAAE+F,EAAE,CACH,IAAI8oB,EAAK7uB,EACTA,EAAI+F,EACJA,EAAI8oB,EAER5/B,KAAK6wC,OAAS9/B,EACd/Q,KAAK8wC,OAASh6B,IAGtBwL,gBAAgB,CAACjP,0BAA2B21B,GAMrC,CACHC,oBAAqBA,GAhJN,GAqJnBqI,aAAgB,WACnB,OAAO,SAASC,EAAeC,EAASC,EAAUC,GAEjD,IAAIlsB,EAAU,EACVgT,EAAa+Y,EACbv1B,EAAO5N,iBAAiBoqB,GAExBnZ,EAAK,CACRwF,WAAYA,EACZ4a,QAASA,GAGV,SAAS5a,IACR,IAAIjW,EAOJ,OANG4W,GACFA,GAAW,EACX5W,EAAUoN,EAAKwJ,IAEf5W,EAAU4iC,IAEJ5iC,EAGR,SAAS6wB,EAAQ7wB,GACb4W,IAAYgT,IACdxc,EAAO21B,QAAQj0B,OAAO1B,GACtBwc,GAAwB,GAErBiZ,GACHA,EAAS7iC,GAEVoN,EAAKwJ,GAAW5W,EAChB4W,GAAW,EAQZ,OAAOnG,GAxCU,GA4CfsyB,QAAW,WAEd,SAASj0B,EAAO5K,GACf,OAAOA,EAAI2d,OAAOriB,iBAAiB0E,EAAIjJ,SAGxC,MAAO,CACN6T,OAAQA,GAPI,GAUVib,WAAc,WAEjB,SAASiZ,IACR,OAAOj/B,iBAAiB,UAAW,GAEpC,OAAO2+B,aAAa,EAAGM,GALP,GAOblX,WAAc,WAEjB,SAASkX,IACR,OAAO,IAAIrZ,UAGZ,SAASkH,EAAQc,GAChB,IAA6Bz2B,EAAzBkE,EAAMuyB,EAAU/a,QACpB,IAAI1b,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EACxB6uB,WAAW8G,QAAQc,EAAUvvB,EAAElH,IAC/B6uB,WAAW8G,QAAQc,EAAUz2B,EAAEA,IAC/B6uB,WAAW8G,QAAQc,EAAUnpB,EAAEtN,IAC/By2B,EAAUvvB,EAAElH,GAAK,KACjBy2B,EAAUz2B,EAAEA,GAAK,KACjBy2B,EAAUnpB,EAAEtN,GAAK,KAElBy2B,EAAU/a,QAAU,EACpB+a,EAAU1pB,GAAI,EAGf,SAAS+C,EAAM+kB,GACd,IACI70B,EADA+nC,EAAS5lC,EAAQ4Y,aACd7W,OAAwB9D,IAAlBy0B,EAAMnZ,QAAwBmZ,EAAM3tB,EAAEnH,OAAS80B,EAAMnZ,QAKlE,IAJAqsB,EAAOnZ,UAAU1qB,GACjB6jC,EAAOh7B,EAAI8nB,EAAM9nB,EAGb/M,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EACxB+nC,EAAO9Y,YAAY4F,EAAM3tB,EAAElH,GAAG,GAAG60B,EAAM3tB,EAAElH,GAAG,GAAG60B,EAAMvnB,EAAEtN,GAAG,GAAG60B,EAAMvnB,EAAEtN,GAAG,GAAG60B,EAAM70B,EAAEA,GAAG,GAAG60B,EAAM70B,EAAEA,GAAG,GAAIA,GAEzG,OAAO+nC,EAGR,IAAI5lC,EAAUqlC,aAAa,EAAGM,EAAQnS,GAGtC,OAFAxzB,EAAQ2N,MAAQA,EAET3N,EApCS,GAsCb6uB,qBAAwB,WAC3B,IAAIzb,EAAK,CACR0b,mBAAoBA,EACpB0E,QAASA,GAGNja,EAAU,EACVgT,EAAa,EACbxc,EAAO5N,iBAAiBoqB,GAE5B,SAASuC,IACR,IAAI+W,EAOJ,OANGtsB,GACFA,GAAW,EACXssB,EAAkB91B,EAAKwJ,IAEvBssB,EAAkB,IAAIlU,gBAEhBkU,EAGR,SAASrS,EAAQqS,GAChB,IAAIhoC,EAAGkE,EAAM8jC,EAAgBtsB,QAC7B,IAAI1b,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EACxB4wB,WAAW+E,QAAQqS,EAAgBjoB,OAAO/f,IAE3CgoC,EAAgBtsB,QAAU,EAEvBA,IAAYgT,IACdxc,EAAO21B,QAAQj0B,OAAO1B,GACtBwc,GAAwB,GAEzBxc,EAAKwJ,GAAWssB,EAChBtsB,GAAW,EAGZ,OAAOnG,EApCmB,GAsCvB8F,qBAAwB,WAE3B,SAASysB,IACR,MAAO,CACN7sB,QAAS,GACTU,YAAa,GAIf,SAASga,EAAQ7wB,GAChB,IAAI9E,EAAGkE,EAAMY,EAAQmW,QAAQlb,OAC7B,IAAIC,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EAChB8a,mBAAmB6a,QAAQ7wB,EAAQmW,QAAQjb,IAE5C8E,EAAQmW,QAAQlb,OAAS,EAG1B,OAAOynC,aAAa,EAAGM,EAAQnS,GAjBL,GAmBvB7a,mBAAsB,WAEzB,SAASgtB,IACR,MAAO,CACGptB,YAAa,EACbM,SAAUnS,iBAAiB,UAAWtE,sBACtC0W,QAASpS,iBAAiB,UAAWtE,uBAGhD,OAAOijC,aAAa,EAAGM,GATC,GAWzB,SAASG,gBA+HT,SAASC,YAAYC,EAAeC,GAChClyC,KAAKiyC,cAAgBA,EACrBjyC,KAAK6oB,OAAS,KACd7oB,KAAKi1B,eAAiB,EACtBj1B,KAAKmyC,WAAaj/B,SAAS,OAC3B,IAAIk/B,EAAY,GAChB,GAAIF,GAAUA,EAAOrtC,MAAO,CACxB,IAAIwtC,EAAen/B,SAAS,SACxBo/B,EAAU3hC,kBACd0hC,EAAalkB,aAAa,KAAMmkB,GAChCD,EAAa9jB,YAAc2jB,EAAOrtC,MAClC7E,KAAKmyC,WAAW1mC,YAAY4mC,GAC5BD,GAAaE,EAEjB,GAAIJ,GAAUA,EAAOK,YAAa,CAC9B,IAAIC,EAAct/B,SAAS,QACvBu/B,EAAS9hC,kBACb6hC,EAAYrkB,aAAa,KAAMskB,GAC/BD,EAAYjkB,YAAc2jB,EAAOK,YACjCvyC,KAAKmyC,WAAW1mC,YAAY+mC,GAC5BJ,GAAa,IAAMK,EAEnBL,GACApyC,KAAKmyC,WAAWhkB,aAAa,kBAAmBikB,GAEpD,IAAIxjB,EAAO1b,SAAU,QACrBlT,KAAKmyC,WAAW1mC,YAAYmjB,GAC5B,IAAI8jB,EAAcx/B,SAAS,KAC3BlT,KAAKmyC,WAAW1mC,YAAYinC,GAC5B1yC,KAAK2yC,aAAeD,EACpB1yC,KAAK4yC,aAAe,CAChBC,oBAAsBX,GAAUA,EAAOW,qBAAwB,gBAC/DC,yBAA2BZ,GAAUA,EAAOY,0BAA6B,iBACzEC,gBAAkBb,GAAUA,EAAOa,kBAAoB,EACvDC,mBAAoBd,IAAuC,IAA7BA,EAAOc,kBACrCC,YAAcf,GAAUA,EAAOe,cAAgB,EAC/CC,YAAchB,GAAUA,EAAOgB,cAAgB,EAC/CC,UAAYjB,GAAUA,EAAOiB,WAAc,GAC3C9sC,GAAK6rC,GAAUA,EAAO7rC,IAAO,GAC7B+sC,UAAWlB,GAAUA,EAAOkB,WAGhCpzC,KAAK01B,WAAa,CACd/hB,MAAM,EACNqd,UAAW,EACXpC,KAAMA,EACNgkB,aAAc5yC,KAAK4yC,cAEvB5yC,KAAK+C,SAAW,GAChB/C,KAAKqzC,gBAAkB,GACvBrzC,KAAKszC,WAAY,EACjBtzC,KAAKuzC,aAAe,MA8MxB,SAASC,eAAevB,EAAeC,GACnClyC,KAAKiyC,cAAgBA,EACrBjyC,KAAK4yC,aAAe,CAChBa,aAAcvB,QAAiChoC,IAAvBgoC,EAAOuB,aAA6BvB,EAAOuB,YACnEC,QAAUxB,GAAUA,EAAOwB,SAAY,KACvCX,gBAAkBb,GAAUA,EAAOa,kBAAoB,EACvDF,oBAAsBX,GAAUA,EAAOW,qBAAwB,gBAC/DC,yBAA2BZ,GAAUA,EAAOY,0BAA6B,iBACzEK,UAAYjB,GAAUA,EAAOiB,WAAc,GAC3C9sC,GAAK6rC,GAAUA,EAAO7rC,IAAO,IAEjCrG,KAAK4yC,aAAae,IAAOzB,GAAUA,EAAOyB,KAAQ,EAC9C3zC,KAAKiyC,cAAc2B,UACnB5zC,KAAK4yC,aAAae,IAAOzB,GAAUA,EAAOyB,KAAQ/vC,OAAOiwC,kBAAoB,GAEjF7zC,KAAKi1B,eAAiB,EACtBj1B,KAAK01B,WAAa,CACd1E,UAAW,EACXrd,MAAM,EACNi/B,aAAc5yC,KAAK4yC,aACnBkB,oBAAqB,GAEzB9zC,KAAK+zC,YAAc,IAAIC,cACvBh0C,KAAK+C,SAAW,GAChB/C,KAAKqzC,gBAAkB,GACvBrzC,KAAKi0C,aAAe,IAAIh/B,OACxBjV,KAAK4oB,gBAAiB,EACtB5oB,KAAKuzC,aAAe,SAiTxB,SAASW,eAAejC,EAAeC,GACnClyC,KAAKiyC,cAAgBA,EACrBjyC,KAAK6oB,OAAS,KACd7oB,KAAKi1B,eAAiB,EACtBj1B,KAAK4yC,aAAe,CAChBO,UAAYjB,GAAUA,EAAOiB,WAAc,GAC3CL,yBAA2BZ,GAAUA,EAAOY,0BAA6B,iBACzEE,mBAAoBd,IAAuC,IAA7BA,EAAOc,mBAEzChzC,KAAK01B,WAAa,CACd/hB,MAAM,EACNqd,UAAW,EACX4hB,aAAc5yC,KAAK4yC,cAEvB5yC,KAAKqzC,gBAAkB,GACvBrzC,KAAK+C,SAAW,GAChB/C,KAAKm0C,eAAiB,GACtBn0C,KAAKszC,WAAY,EACjBtzC,KAAKo0C,OAAS,KACdp0C,KAAKq0C,YAAa,EAClBr0C,KAAKuzC,aAAe,OAqRxB,SAASe,YAAYjzC,EAAKuN,EAAQ8mB,GAC9B11B,KAAKqB,KAAOA,EACZrB,KAAK4O,QAAUA,EACf5O,KAAK01B,WAAaA,EAClB11B,KAAKgmB,WAAa,GAClBhmB,KAAKwpB,gBAAkBxpB,KAAKqB,KAAKmoB,iBAAmB,GACpDxpB,KAAK0yC,YAAc,KACnB,IACI5oC,EADA8kB,EAAO5uB,KAAK01B,WAAW9G,KACpB5gB,EAAMhO,KAAKwpB,gBAAkBxpB,KAAKwpB,gBAAgB3f,OAAS,EAClE7J,KAAKu0C,SAAWnmC,iBAAiBJ,GACjChO,KAAKw0C,UAAY,GAGjB,IAAInvC,EAGA0R,EAAGkS,EAEHwrB,EAAMC,EAAUC,EAAQ56B,EALlB66B,EAAa50C,KAAKwpB,gBACxBtL,EAAQ,EACR22B,EAAe,GAEfC,EAAUnkC,kBAEVw1B,EAAW,WAAY4O,EAAU,YACrC,IAAKjrC,EAAI,EAAGA,EAAIkE,EAAKlE,IAiBjB,IAhB2B,MAAvB8qC,EAAW9qC,GAAGkL,MAAuC,MAAvB4/B,EAAW9qC,GAAGkL,MAAgB4/B,EAAW9qC,GAAGk4B,KAA6B,MAAtB4S,EAAW9qC,GAAGsN,EAAEJ,GAAa49B,EAAW9qC,GAAGsN,EAAE2C,KAC9HosB,EAAW,OACX4O,EAAU,QAGY,KAAtBH,EAAW9qC,GAAGkL,MAAqC,KAAtB4/B,EAAW9qC,GAAGkL,MAA0B,IAAVkJ,EAO3Du2B,EAAO,MANPA,EAAOvhC,SAAU,QACjBuhC,EAAKtmB,aAAa,OAAQ,WAC1BsmB,EAAKtmB,aAAa,QAASnuB,KAAK4O,QAAQxL,KAAK/B,KAAK6qB,GAAK,GACvDuoB,EAAKtmB,aAAa,SAAUnuB,KAAK4O,QAAQxL,KAAK/B,KAAKyP,GAAK,GACxD+jC,EAAatiC,KAAKkiC,IAKtBpvC,EAAO6N,SAAU,QACQ,KAAtB0hC,EAAW9qC,GAAGkL,KAAjB,CAeA,IAAIggC,EA+BJ,GAnCA92B,GAAS,EAET7Y,EAAK8oB,aAAa,OAA+B,MAAvBymB,EAAW9qC,GAAGkL,KAAe,UAAU,WACjE3P,EAAK8oB,aAAa,YAAY,WAGJ,IAAtBymB,EAAW9qC,GAAGiQ,EAAE/C,GAChBmvB,EAAW,OACX4O,EAAU,OACVh7B,EAAI6W,gBAAgB8F,QAAQ12B,KAAK4O,QAAQgmC,EAAW9qC,GAAGiQ,EAAE,EAAE,KAAK/Z,KAAK4O,SACrEomC,EAAWrkC,kBACX+jC,EAAWxhC,SAAS,UACpBwhC,EAASvmB,aAAa,KAAK6mB,GAC3BL,EAAUzhC,SAAS,gBACnByhC,EAAQxmB,aAAa,WAAW,SAChCwmB,EAAQxmB,aAAa,KAAK,iBAC1BwmB,EAAQxmB,aAAa,SAAS,KAC9BumB,EAASjpC,YAAYkpC,GACrB/lB,EAAKnjB,YAAYipC,GACjBrvC,EAAK8oB,aAAa,SAAiC,MAAvBymB,EAAW9qC,GAAGkL,KAAe,UAAU,aAEnE2/B,EAAU,KACV56B,EAAI,MAIR/Z,KAAKgmB,WAAWlc,GAAK,CAChB2rB,KAAMpwB,EACN0U,EAAGA,EACHk7B,MAAON,EACRO,SAAU,GACVC,aAAa,GACbC,SAASJ,EACTK,WAAW,GAEU,KAAtBT,EAAW9qC,GAAGkL,KAAY,CACzBiU,EAAO4rB,EAAahrC,OACpB,IAAIqH,EAAIgC,SAAS,KACjB,IAAI6D,EAAE,EAAEA,EAAEkS,EAAKlS,GAAG,EACd7F,EAAEzF,YAAYopC,EAAa99B,IAE/B,IAAI2F,EAAOxJ,SAAS,QACpBwJ,EAAKyR,aAAa,YAAY,SAC9BzR,EAAKyR,aAAa,KAAK2mB,EAAQ,IAAI52B,GACnCxB,EAAKjR,YAAYpG,GACjBupB,EAAKnjB,YAAYiR,GACjBxL,EAAEid,aAAa,OAAO,OAAS/hB,aAAe,IAAI0oC,EAAQ,IAAI52B,EAAM,KAEpE22B,EAAahrC,OAAS,EACtBgrC,EAAatiC,KAAKrB,QAElB2jC,EAAatiC,KAAKlN,GAEnBuvC,EAAW9qC,GAAGk4B,MAAQhiC,KAAKw0C,YAC1Bx0C,KAAKw0C,UAAYx0C,KAAKs1C,wBAG1Bt1C,KAAKu0C,SAASzqC,GAAK,CACf2rB,KAAMpwB,EACN6vC,SAAU,GACVrR,GAAIjT,gBAAgB8F,QAAQ12B,KAAK4O,QAAQgmC,EAAW9qC,GAAGsN,EAAE,EAAE,IAAKpX,KAAK4O,SACrE2E,KAAKsmB,qBAAqBkD,aAAa/8B,KAAK4O,QAAQgmC,EAAW9qC,GAAG,GAClEyrC,QAASd,GAETz0C,KAAKu0C,SAASzqC,GAAGyJ,KAAKyD,GACtBhX,KAAKw1C,SAASZ,EAAW9qC,GAAG9J,KAAKu0C,SAASzqC,GAAGyJ,KAAKvC,EAAEhR,KAAKu0C,SAASzqC,SA1ElE9J,KAAKu0C,SAASzqC,GAAK,CACf+5B,GAAIjT,gBAAgB8F,QAAQ12B,KAAK4O,QAAQgmC,EAAW9qC,GAAGsN,EAAE,EAAE,IAAKpX,KAAK4O,SACrE2E,KAAMsmB,qBAAqBkD,aAAa/8B,KAAK4O,QAAQgmC,EAAW9qC,GAAG,GACnE2rB,KAAMpwB,EACN6vC,SAAU,IAEdtmB,EAAKnjB,YAAYpG,GA2EzB,IAHArF,KAAK0yC,YAAcx/B,SAAUizB,GAE7Bn4B,EAAM6mC,EAAahrC,OACfC,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACb9J,KAAK0yC,YAAYjnC,YAAYopC,EAAa/qC,IAG3CoU,EAAQ,IACPle,KAAK0yC,YAAYvkB,aAAa,KAAM2mB,GACpC90C,KAAK4O,QAAQ6mC,cAActnB,aAAa4mB,EAAS,OAAS3oC,aAAe,IAAM0oC,EAAU,KACzFlmB,EAAKnjB,YAAYzL,KAAK0yC,cAEtB1yC,KAAKu0C,SAAS1qC,QACd7J,KAAK4O,QAAQ8mC,uBAAuB11C,MAiG5C,SAAS21C,oBAmDT,SAASC,gBA4CT,SAASC,oBA0ET,SAASC,qBAwFT,SAASC,wBA6DT,SAASC,iBAAiBpnC,EAASE,GAClC9O,KAAKy1B,KAAO7mB,EACZ5O,KAAK84B,IAAMhqB,EAEZ,SAASmnC,aAAa50C,EAAM60C,GAC3Bl2C,KAAKqB,KAAOA,EACZrB,KAAK0B,KAAOL,EAAKkW,GACjBvX,KAAKyR,EAAI,GACTzR,KAAKm2C,IAAMD,EACXl2C,KAAK2T,MAAO,EACZ3T,KAAKolB,QAAqB,IAAZ/jB,EAAK+0C,GACnBp2C,KAAKq2C,MAAQnjC,SAAS,QACtBlT,KAAKs2C,OAAS,KAOf,SAASC,aAAaC,EAAcN,EAAOvX,GACvC3+B,KAAKy2C,OAAS,GACdz2C,KAAKsvC,OAAS,GACdtvC,KAAKw2C,aAAeA,EACpBx2C,KAAK02C,KAAO,GACZ12C,KAAK8yB,GAAK6L,EACV3+B,KAAKm2C,IAAMD,EAIXl2C,KAAKyT,cAAgBkrB,EAAM3nB,EAE3B,IAAIlN,EAAI,EAAGkE,EAAMwoC,EAAa3sC,OAC9B,MAAMC,EAAIkE,EAAK,CACd,GAAGwoC,EAAa1sC,GAAG85B,OAAOpwB,kBAAkB3J,OAAQ,CACnD7J,KAAKyT,aAAc,EACnB,MAED3J,GAAK,GAOV,SAAS6sC,iBAAiB/S,EAAQC,EAAIxhC,GACrCrC,KAAKyX,UAAY,CAChBmsB,OAAQA,EACRC,GAAIA,EACJxhC,UAAWA,GAEZrC,KAAK+C,SAAW,GACb/C,KAAKyT,YAAczT,KAAKyX,UAAUmsB,OAAOpwB,kBAAkB3J,QAAU7J,KAAKyX,UAAUosB,GAAGjO,gBAAgB/rB,OAE3G,SAAS+sC,mBAAmBnhB,EAAMp0B,EAAMw1C,GACvC72C,KAAK6T,6BAA6B4hB,GAClCz1B,KAAK4T,SAAW5T,KAAK0T,yBACrB1T,KAAKoX,EAAIwZ,gBAAgB8F,QAAQjB,EAAKp0B,EAAK+V,EAAE,EAAE,IAAKpX,MACpDA,KAAKksB,EAAI0E,gBAAgB8F,QAAQjB,EAAKp0B,EAAK6qB,EAAE,EAAE,KAAKlsB,MACpDA,KAAKyR,EAAI,IAAIosB,aAAapI,EAAKp0B,EAAKoQ,GAAG,GAAG,MAAMzR,MAChDA,KAAK6W,EAAI+Z,gBAAgB8F,QAAQjB,EAAKp0B,EAAKwV,EAAE,EAAE,IAAI7W,MACnDA,KAAK6O,MAAQgoC,EACV72C,KAAKyT,cAAgBzT,KAAKyT,YAI9B,SAASqjC,iBAAiBrhB,EAAMp0B,EAAMw1C,GACrC72C,KAAK6T,6BAA6B4hB,GAClCz1B,KAAK4T,SAAW5T,KAAK0T,yBACrB1T,KAAKoX,EAAIwZ,gBAAgB8F,QAAQjB,EAAKp0B,EAAK+V,EAAE,EAAE,IAAKpX,MACpDA,KAAK6W,EAAI+Z,gBAAgB8F,QAAQjB,EAAKp0B,EAAKwV,EAAE,EAAE,IAAI7W,MACnDA,KAAK6O,MAAQgoC,EAId,SAASE,yBAAyBthB,EAAMp0B,EAAMw1C,GAC1C72C,KAAK6T,6BAA6B4hB,GAClCz1B,KAAK4T,SAAW5T,KAAK0T,yBACrB1T,KAAKg3C,iBAAiBvhB,EAAMp0B,EAAMw1C,GAsEtC,SAASI,2BAA2BxhB,EAAMp0B,EAAMw1C,GAC/C72C,KAAK6T,6BAA6B4hB,GAClCz1B,KAAK4T,SAAW5T,KAAK0T,yBACrB1T,KAAKksB,EAAI0E,gBAAgB8F,QAAQjB,EAAKp0B,EAAK6qB,EAAE,EAAE,KAAKlsB,MACpDA,KAAKyR,EAAI,IAAIosB,aAAapI,EAAKp0B,EAAKoQ,GAAG,GAAG,MAAMzR,MAC7CA,KAAKg3C,iBAAiBvhB,EAAMp0B,EAAMw1C,GAClC72C,KAAKyT,cAAgBzT,KAAKyT,YAI9B,SAASyjC,iBACRl3C,KAAKoqB,GAAK,GACPpqB,KAAKm3C,aAAe,GACpBn3C,KAAKo3C,GAAKlkC,SAAS,KArrDvB6+B,aAAa5tC,UAAUkzC,YAAc,SAASC,GAC1C,IAAIxtC,EAA6BzI,EAA1B2M,EAAMhO,KAAK6oB,OAAOhf,OAEzB,IADA7J,KAAK4oB,gBAAiB,EACjB9e,EAAIkE,EAAM,EAAGlE,GAAK,EAAGA,IACjB9J,KAAK+C,SAAS+G,KACfzI,EAAOrB,KAAK6oB,OAAO/e,GAChBzI,EAAKk2C,GAAKl2C,EAAKk1B,IAAO+gB,EAAMt3C,KAAK6oB,OAAO/e,GAAGysB,IAAOl1B,EAAKwiC,GAAKxiC,EAAKk1B,GAAM+gB,EAAMt3C,KAAK6oB,OAAO/e,GAAGysB,IAE3Fv2B,KAAKw3C,UAAU1tC,IAGvB9J,KAAK4oB,iBAAiB5oB,KAAK+C,SAAS+G,IAAK9J,KAAK4oB,eAElD5oB,KAAKy3C,wBAGT1F,aAAa5tC,UAAUuzC,WAAa,SAASC,GACzC,OAAOA,EAAMpgC,IACT,KAAK,EACD,OAAOvX,KAAK43C,YAAYD,GAC5B,KAAK,EACD,OAAO33C,KAAK63C,WAAWF,GAC3B,KAAK,EACD,OAAO33C,KAAK83C,YAAYH,GAC5B,KAAK,EACD,OAAO33C,KAAK+3C,WAAWJ,GAC3B,KAAK,EACD,OAAO33C,KAAKg4C,YAAYL,GAC5B,KAAK,EACD,OAAO33C,KAAKi4C,WAAWN,GAC3B,KAAK,GACD,OAAO33C,KAAKk4C,aAAaP,GAEjC,OAAO33C,KAAK+3C,WAAWJ,IAG3B5F,aAAa5tC,UAAU+zC,aAAe,WAClC,MAAM,IAAI9yC,MAAM,qDAGpB2sC,aAAa5tC,UAAUg0C,cAAgB,WACnC,IAAIruC,EAAGkE,EAAMhO,KAAK6oB,OAAOhf,OACzB,IAAIC,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACb9J,KAAKw3C,UAAU1tC,GAEnB9J,KAAKy3C,wBAGT1F,aAAa5tC,UAAUi0C,cAAgB,SAASC,GAC5Cr4C,KAAK4oB,gBAAiB,EACtB,IAAI9e,EACAiN,EADG/I,EAAMqqC,EAAUxuC,OAChBof,EAAOjpB,KAAK6oB,OAAOhf,OAC1B,IAAIC,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EAAE,CACfiN,EAAI,EACJ,MAAMA,EAAEkS,EAAK,CACT,GAAGjpB,KAAK6oB,OAAO9R,GAAG1Q,IAAMgyC,EAAUvuC,GAAGzD,GAAG,CACpCrG,KAAK6oB,OAAO9R,GAAKshC,EAAUvuC,GAC3B,MAEJiN,GAAK,KAKjBg7B,aAAa5tC,UAAUm0C,oBAAsB,SAASC,GAClDv4C,KAAK01B,WAAW8iB,iBAAmBD,GAGvCxG,aAAa5tC,UAAUs0C,UAAY,WAC3Bz4C,KAAK01B,WAAWqd,iBAChB/yC,KAAKm4C,iBAGbpG,aAAa5tC,UAAUu0C,sBAAwB,SAAS9pC,EAAS+pC,EAAYC,GACzE,IAAI71C,EAAW/C,KAAK+C,SAChB8lB,EAAS7oB,KAAK6oB,OACd/e,EAAE,EAAGkE,EAAM6a,EAAOhf,OACtB,MAAOC,EAAIkE,EACH6a,EAAO/e,GAAGmoB,KAAO0mB,IACZ51C,EAAS+G,KAAsB,IAAhB/G,EAAS+G,IAIzB8uC,EAAUrmC,KAAKxP,EAAS+G,IACxB/G,EAAS+G,GAAG+uC,mBACY3uC,IAArB2e,EAAO/e,GAAGqjB,OACTntB,KAAK04C,sBAAsB9pC,EAASia,EAAO/e,GAAGqjB,OAAQyrB,GAEtDhqC,EAAQkqC,aAAaF,KARzB54C,KAAKw3C,UAAU1tC,GACf9J,KAAK+4C,kBAAkBnqC,KAW/B9E,GAAK,GAIbioC,aAAa5tC,UAAU40C,kBAAoB,SAASnqC,GAChD5O,KAAKqzC,gBAAgB9gC,KAAK3D,IAG9BmjC,aAAa5tC,UAAU60C,wBAA0B,SAAShuB,GACtD,IAAIlhB,EAAGkE,EAAMgd,EAAOnhB,OACpB,IAAIC,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACb,GAAGkhB,EAAOlhB,GAAGmvC,GAAG,CACZ,IAAI71C,EAAOpD,KAAK63C,WAAW7sB,EAAOlhB,IAClC1G,EAAK81C,kBACLl5C,KAAK01B,WAAW8iB,iBAAiBW,oBAAoB/1C,KAKjE2uC,aAAa5tC,UAAUi1C,gBAAkB,SAASC,EAAUC,GACxDt5C,KAAK01B,WAAW3M,YAAc,IAAIgD,YAClC/rB,KAAK01B,WAAW3M,YAAY2G,SAAS2pB,EAASnuB,OAC9ClrB,KAAK01B,WAAW3M,YAAY4F,SAAS0qB,EAAShsB,MAAOisB,GACrDt5C,KAAK01B,WAAW6jB,aAAev5C,KAAKiyC,cAAcsH,aAAa9mC,KAAKzS,KAAKiyC,eACzEjyC,KAAK01B,WAAWsP,cAAgBhlC,KAAKiyC,cAAcjN,cAAcvyB,KAAKzS,KAAKiyC,eAC3EjyC,KAAK01B,WAAW8jB,YAAcx5C,KAAKiyC,cAAcwH,eACjDz5C,KAAK01B,WAAWC,QAAU,EAC1B31B,KAAK01B,WAAWuC,UAAYohB,EAASK,GACrC15C,KAAK01B,WAAWlW,GAAK65B,EAAS75B,GAC9Bxf,KAAK01B,WAAWikB,SAAW,CACvBztB,EAAGmtB,EAASntB,EACZpb,EAAGuoC,EAASvoC,IA0DpBwR,gBAAgB,CAACyvB,cAAcC,aAE/BA,YAAY7tC,UAAU4zC,WAAa,SAAU12C,GACzC,OAAO,IAAIu4C,YAAYv4C,EAAKrB,KAAK01B,WAAW11B,OAGhDgyC,YAAY7tC,UAAU6zC,YAAc,SAAU32C,GAC1C,OAAO,IAAIw4C,gBAAgBx4C,EAAKrB,KAAK01B,WAAW11B,OAGpDgyC,YAAY7tC,UAAU8zC,WAAa,SAAU52C,GACzC,OAAO,IAAIy4C,eAAez4C,EAAKrB,KAAK01B,WAAW11B,OAInDgyC,YAAY7tC,UAAUyzC,YAAc,SAAUv2C,GAC1C,OAAO,IAAI04C,cAAc14C,EAAKrB,KAAK01B,WAAW11B,OAGlDgyC,YAAY7tC,UAAU0zC,WAAa,SAAUx2C,GACzC,OAAO,IAAI24C,eAAe34C,EAAKrB,KAAK01B,WAAW11B,OAInDgyC,YAAY7tC,UAAU2zC,YAAc,SAAUz2C,GAC1C,OAAO,IAAI44C,cAAc54C,EAAKrB,KAAK01B,WAAW11B,OAGlDgyC,YAAY7tC,UAAU+1C,gBAAkB,SAASb,GAC7Cr5C,KAAKmyC,WAAWhkB,aAAa,QAAQ,8BAClCnuB,KAAK4yC,aAAaM,YACjBlzC,KAAKmyC,WAAWhkB,aAAa,UAAUnuB,KAAK4yC,aAAaM,aAEzDlzC,KAAKmyC,WAAWhkB,aAAa,UAAU,OAAOkrB,EAASntB,EAAE,IAAImtB,EAASvoC,GAGtE9Q,KAAK4yC,aAAaK,cAClBjzC,KAAKmyC,WAAWhkB,aAAa,QAAQkrB,EAASntB,GAC9ClsB,KAAKmyC,WAAWhkB,aAAa,SAASkrB,EAASvoC,GAC/C9Q,KAAKmyC,WAAWtjC,MAAMsN,MAAQ,OAC9Bnc,KAAKmyC,WAAWtjC,MAAM21B,OAAS,OAC/BxkC,KAAKmyC,WAAWtjC,MAAM4I,UAAY,sBAElCzX,KAAK4yC,aAAaO,WAClBnzC,KAAKmyC,WAAWhkB,aAAa,QAASnuB,KAAK4yC,aAAaO,WAExDnzC,KAAK4yC,aAAavsC,IAClBrG,KAAKmyC,WAAWhkB,aAAa,KAAMnuB,KAAK4yC,aAAavsC,SAErB6D,IAAhClK,KAAK4yC,aAAaQ,WAClBpzC,KAAKmyC,WAAWhkB,aAAa,YAAanuB,KAAK4yC,aAAaQ,WAEhEpzC,KAAKmyC,WAAWhkB,aAAa,sBAAsBnuB,KAAK4yC,aAAaC,qBAGrE7yC,KAAKiyC,cAAc2B,QAAQnoC,YAAYzL,KAAKmyC,YAE5C,IAAIvjB,EAAO5uB,KAAK01B,WAAW9G,KAE3B5uB,KAAKo5C,gBAAgBC,EAAUzqB,GAC/B5uB,KAAK01B,WAAWqd,gBAAkB/yC,KAAK4yC,aAAaG,gBACpD/yC,KAAKqB,KAAOg4C,EAEZ,IAAI3G,EAAcx/B,SAAU,YACxBuhC,EAAOvhC,SAAS,QACpBuhC,EAAKtmB,aAAa,QAAQkrB,EAASntB,GACnCuoB,EAAKtmB,aAAa,SAASkrB,EAASvoC,GACpC2jC,EAAKtmB,aAAa,IAAI,GACtBsmB,EAAKtmB,aAAa,IAAI,GACtB,IAAIgsB,EAASxpC,kBACb+hC,EAAYvkB,aAAa,KAAMgsB,GAC/BzH,EAAYjnC,YAAYgpC,GACxBz0C,KAAK2yC,aAAaxkB,aAAa,YAAa,OAAS/hB,aAAe,IAAI+tC,EAAO,KAE/EvrB,EAAKnjB,YAAYinC,GACjB1yC,KAAK6oB,OAASwwB,EAASxwB,OACvB7oB,KAAK+C,SAAWqL,iBAAiBirC,EAASxwB,OAAOhf,SAIrDmoC,YAAY7tC,UAAU8hC,QAAU,WAC5BjmC,KAAKiyC,cAAc2B,QAAQjnB,UAAY,GACvC3sB,KAAK2yC,aAAe,KACpB3yC,KAAK01B,WAAW9G,KAAO,KACvB,IAAI9kB,EAAGkE,EAAMhO,KAAK6oB,OAAS7oB,KAAK6oB,OAAOhf,OAAS,EAChD,IAAKC,EAAI,EAAGA,EAAIkE,EAAKlE,IACd9J,KAAK+C,SAAS+G,IACb9J,KAAK+C,SAAS+G,GAAGm8B,UAGzBjmC,KAAK+C,SAAS8G,OAAS,EACvB7J,KAAKszC,WAAY,EACjBtzC,KAAKiyC,cAAgB,MAGzBD,YAAY7tC,UAAUi2C,oBAAsB,aAG5CpI,YAAY7tC,UAAUqzC,UAAa,SAAS1e,GACxC,IAAI/1B,EAAW/C,KAAK+C,SACpB,IAAGA,EAAS+1B,IAA+B,IAAvB94B,KAAK6oB,OAAOiQ,GAAKvhB,GAArC,CAGAxU,EAAS+1B,IAAO,EAChB,IAAIlqB,EAAU5O,KAAK03C,WAAW13C,KAAK6oB,OAAOiQ,IAE1C/1B,EAAS+1B,GAAOlqB,EACbrC,oBAC4B,IAAxBvM,KAAK6oB,OAAOiQ,GAAKvhB,IAChBvX,KAAK01B,WAAW8iB,iBAAiBW,oBAAoBvqC,GAEzDA,EAAQsqC,mBAEZl5C,KAAKq6C,mBAAmBzrC,EAAQkqB,GAC7B94B,KAAK6oB,OAAOiQ,GAAK1P,KACZppB,KAAK+C,SAAS+1B,EAAM,KAAiC,IAA3B94B,KAAK+C,SAAS+1B,EAAM,GAI9ClqB,EAAQ0rC,SAASv3C,EAAS+1B,EAAM,GAAGgc,UAHnC90C,KAAKw3C,UAAU1e,EAAM,GACrB94B,KAAK+4C,kBAAkBnqC,OAOnCojC,YAAY7tC,UAAUszC,qBAAwB,WAC1C,MAAMz3C,KAAKqzC,gBAAgBxpC,OAAO,CAC9B,IAAI+E,EAAU5O,KAAKqzC,gBAAgBlT,MAEnC,GADAvxB,EAAQ2rC,iBACL3rC,EAAQvN,KAAK+nB,GAAG,CACf,IAAItf,EAAI,EAAGkE,EAAMhO,KAAK+C,SAAS8G,OAC/B,MAAMC,EAAEkE,EAAI,CACR,GAAGhO,KAAK+C,SAAS+G,KAAO8E,EAAQ,CAC5BA,EAAQ0rC,SAASt6C,KAAK+C,SAAS+G,EAAI,GAAGgrC,SACtC,MAEJhrC,GAAK,MAMrBkoC,YAAY7tC,UAAUq2C,YAAc,SAASlD,GACzC,GAAGt3C,KAAKi1B,gBAAkBqiB,IAAOt3C,KAAKszC,UAAtC,CAGW,OAARgE,EACCA,EAAMt3C,KAAKi1B,cAEXj1B,KAAKi1B,cAAgBqiB,EAIzBt3C,KAAK01B,WAAW1E,SAAWsmB,EAC3Bt3C,KAAK01B,WAAWC,SAAW,EAC3B31B,KAAK01B,WAAW8iB,iBAAiBiC,aAAenD,EAChDt3C,KAAK01B,WAAW/hB,MAAO,EACvB,IAAI7J,EAAGkE,EAAMhO,KAAK6oB,OAAOhf,OAIzB,IAHI7J,KAAK4oB,gBACL5oB,KAAKq3C,YAAYC,GAEhBxtC,EAAIkE,EAAM,EAAGlE,GAAK,EAAGA,KACnB9J,KAAK4oB,gBAAkB5oB,KAAK+C,SAAS+G,KACpC9J,KAAK+C,SAAS+G,GAAG4wC,aAAapD,EAAMt3C,KAAK6oB,OAAO/e,GAAGysB,IAG3D,GAAGv2B,KAAK01B,WAAW/hB,KACf,IAAK7J,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,GACnB9J,KAAK4oB,gBAAkB5oB,KAAK+C,SAAS+G,KACpC9J,KAAK+C,SAAS+G,GAAG0wC,gBAMjCxI,YAAY7tC,UAAUk2C,mBAAqB,SAASzrC,EAASkqB,GACzD,IAAIjU,EAAajW,EAAQ+rC,iBACzB,GAAI91B,EAAJ,CAGA,IACI+1B,EADA9wC,EAAI,EAER,MAAMA,EAAEgvB,EACD94B,KAAK+C,SAAS+G,KAA0B,IAApB9J,KAAK+C,SAAS+G,IAAc9J,KAAK+C,SAAS+G,GAAG6wC,mBAChEC,EAAc56C,KAAK+C,SAAS+G,GAAG6wC,kBAEnC7wC,GAAK,EAEN8wC,EACC56C,KAAK2yC,aAAakI,aAAah2B,EAAY+1B,GAE3C56C,KAAK2yC,aAAalnC,YAAYoZ,KAItCmtB,YAAY7tC,UAAU22C,KAAO,WACzB96C,KAAK2yC,aAAa9jC,MAAMI,QAAU,QAGtC+iC,YAAY7tC,UAAU42C,KAAO,WACzB/6C,KAAK2yC,aAAa9jC,MAAMI,QAAU,SAgCtCqT,gBAAgB,CAACyvB,cAAcyB,gBAE/BA,eAAervC,UAAU6zC,YAAc,SAAU32C,GAC7C,OAAO,IAAI25C,eAAe35C,EAAMrB,KAAK01B,WAAY11B,OAGrDwzC,eAAervC,UAAU8zC,WAAa,SAAU52C,GAC5C,OAAO,IAAI45C,cAAc55C,EAAMrB,KAAK01B,WAAY11B,OAGpDwzC,eAAervC,UAAUyzC,YAAc,SAAUv2C,GAC7C,OAAO,IAAI65C,eAAe75C,EAAMrB,KAAK01B,WAAY11B,OAGrDwzC,eAAervC,UAAU0zC,WAAa,SAAUx2C,GAC5C,OAAO,IAAI85C,cAAc95C,EAAMrB,KAAK01B,WAAY11B,OAGpDwzC,eAAervC,UAAU2zC,YAAc,SAAUz2C,GAC7C,OAAO,IAAI+5C,eAAe/5C,EAAMrB,KAAK01B,WAAY11B,OAGrDwzC,eAAervC,UAAU4zC,WAAa/F,YAAY7tC,UAAU4zC,WAE5DvE,eAAervC,UAAUk3C,aAAe,SAAS95C,GAC7C,GAAgB,IAAbA,EAAM,IAAyB,IAAbA,EAAM,IAAyB,IAAbA,EAAM,IAAyB,IAAbA,EAAM,IAA0B,IAAdA,EAAM,KAA2B,IAAdA,EAAM,IAGpG,GAAIvB,KAAK4yC,aAAaa,YAAtB,CAIAzzC,KAAKi0C,aAAap6B,eAAetY,GACjC,IAAI+5C,EAASt7C,KAAK+zC,YAAYwH,IAAIh6C,MAClCvB,KAAKi0C,aAAax8B,UAAU6jC,EAAO,GAAGA,EAAO,GAAGA,EAAO,GAAGA,EAAO,GAAGA,EAAO,GAAGA,EAAO,GAAGA,EAAO,GAAGA,EAAO,GAAGA,EAAO,GAAGA,EAAO,GAAGA,EAAO,IAAIA,EAAO,IAAIA,EAAO,IAAIA,EAAO,IAAIA,EAAO,IAAIA,EAAO,KAE9Lt7C,KAAK+zC,YAAYwH,IAAI1hC,eAAe7Z,KAAKi0C,aAAa1yC,OACtD,IAAIi6C,EAAUx7C,KAAK+zC,YAAYwH,IAAIh6C,MACnCvB,KAAKy7C,cAAc9kC,aAAa6kC,EAAQ,GAAGA,EAAQ,GAAGA,EAAQ,GAAGA,EAAQ,GAAGA,EAAQ,IAAIA,EAAQ,UAT5Fx7C,KAAKy7C,cAAchkC,UAAUlW,EAAM,GAAGA,EAAM,GAAGA,EAAM,GAAGA,EAAM,GAAGA,EAAM,IAAIA,EAAM,MAYzFiyC,eAAervC,UAAUu3C,WAAa,SAAS7X,GAI3C,IAAI7jC,KAAK4yC,aAAaa,YAGlB,OAFAzzC,KAAKy7C,cAAcE,aAAe9X,EAAK,EAAI,EAAIA,OAC/C7jC,KAAK01B,WAAWoe,mBAAqB9zC,KAAK+zC,YAAY6H,IAG1D57C,KAAK+zC,YAAY6H,IAAM/X,EAAK,EAAI,EAAIA,EACjC7jC,KAAK01B,WAAWoe,qBAAuB9zC,KAAK+zC,YAAY6H,KACvD57C,KAAKy7C,cAAcE,YAAc37C,KAAK+zC,YAAY6H,GAClD57C,KAAK01B,WAAWoe,mBAAqB9zC,KAAK+zC,YAAY6H,KAI9DpI,eAAervC,UAAUsR,MAAQ,WACzBzV,KAAK4yC,aAAaa,YAItBzzC,KAAK+zC,YAAYt+B,QAHbzV,KAAKy7C,cAAcI,WAM3BrI,eAAervC,UAAU23C,KAAO,SAASC,GACrC,GAAI/7C,KAAK4yC,aAAaa,YAAtB,CAIGsI,GACC/7C,KAAKy7C,cAAcK,OAEvB,IAAIv6C,EAAQvB,KAAK+zC,YAAYwH,IAAIh6C,MAC9BvB,KAAK+zC,YAAYvuB,SAAWxlB,KAAK+zC,YAAYiI,SAC5Ch8C,KAAK+zC,YAAYkI,YAErB,IAAInyC,EAAGgJ,EAAM9S,KAAK+zC,YAAYmI,MAAMl8C,KAAK+zC,YAAYiI,SACrD,IAAKlyC,EAAI,EAAGA,EAAI,GAAIA,GAAK,EACrBgJ,EAAIhJ,GAAKvI,EAAMuI,GAEnB9J,KAAK+zC,YAAYoI,QAAQn8C,KAAK+zC,YAAYiI,SAAWh8C,KAAK+zC,YAAY6H,GACtE57C,KAAK+zC,YAAYiI,SAAW,OAfxBh8C,KAAKy7C,cAAcK,QAkB3BtI,eAAervC,UAAU03C,QAAU,SAASE,GACxC,GAAI/7C,KAAK4yC,aAAaa,YAAtB,CAIGsI,IACC/7C,KAAKy7C,cAAcI,UACnB77C,KAAK01B,WAAW0mB,UAAY,eAEhCp8C,KAAK+zC,YAAYiI,SAAW,EAC5B,IACIlyC,EADAuyC,EAASr8C,KAAK+zC,YAAYmI,MAAMl8C,KAAK+zC,YAAYiI,SAC/ClpC,EAAM9S,KAAK+zC,YAAYwH,IAAIh6C,MACjC,IAAIuI,EAAE,EAAEA,EAAE,GAAGA,GAAG,EACZgJ,EAAIhJ,GAAKuyC,EAAOvyC,GAEpB9J,KAAKy7C,cAAc9kC,aAAa0lC,EAAO,GAAGA,EAAO,GAAGA,EAAO,GAAGA,EAAO,GAAGA,EAAO,IAAIA,EAAO,KAC1FA,EAASr8C,KAAK+zC,YAAYoI,QAAQn8C,KAAK+zC,YAAYiI,SACnDh8C,KAAK+zC,YAAY6H,GAAKS,EACnBr8C,KAAK01B,WAAWoe,qBAAuBuI,IACtCr8C,KAAKy7C,cAAcE,YAAcU,EACjCr8C,KAAK01B,WAAWoe,mBAAqBuI,QAlBrCr8C,KAAKy7C,cAAcI,WAsB3BrI,eAAervC,UAAU+1C,gBAAkB,SAASb,GAC7Cr5C,KAAKiyC,cAAc2B,SAClB5zC,KAAKiyC,cAAc5vC,UAAY+Q,UAAU,UACzCpT,KAAKiyC,cAAc5vC,UAAUwM,MAAMsN,MAAQ,OAC3Cnc,KAAKiyC,cAAc5vC,UAAUwM,MAAM21B,OAAS,OAG5CxkC,KAAKiyC,cAAc5vC,UAAUwM,MAAMK,gBAAkBlP,KAAKiyC,cAAc5vC,UAAUwM,MAAMytC,mBAAqBt8C,KAAKiyC,cAAc5vC,UAAUwM,MAAMM,sBAAwBnP,KAAKiyC,cAAc5vC,UAAUwM,MAAM,qBAAuB,cAClO7O,KAAKiyC,cAAc2B,QAAQnoC,YAAYzL,KAAKiyC,cAAc5vC,WAC1DrC,KAAKy7C,cAAgBz7C,KAAKiyC,cAAc5vC,UAAUqsB,WAAW,MAC1D1uB,KAAK4yC,aAAaO,WACjBnzC,KAAKiyC,cAAc5vC,UAAU8rB,aAAa,QAASnuB,KAAK4yC,aAAaO,WAEtEnzC,KAAK4yC,aAAavsC,IACjBrG,KAAKiyC,cAAc5vC,UAAU8rB,aAAa,KAAMnuB,KAAK4yC,aAAavsC,KAGtErG,KAAKy7C,cAAgBz7C,KAAK4yC,aAAac,QAE3C1zC,KAAKqB,KAAOg4C,EACZr5C,KAAK6oB,OAASwwB,EAASxwB,OACvB7oB,KAAKu8C,gBAAkB,CACnBrwB,EAAGmtB,EAASntB,EACZpb,EAAEuoC,EAASvoC,EACXqF,GAAG,EACHC,GAAG,EACHkB,GAAG,EACHC,GAAG,GAEPvX,KAAKo5C,gBAAgBC,EAAUtwC,SAASkkB,MACxCjtB,KAAK01B,WAAW+lB,cAAgBz7C,KAAKy7C,cACrCz7C,KAAK01B,WAAW5yB,SAAW9C,KAC3BA,KAAK01B,WAAW8mB,UAAW,EAC3Bx8C,KAAK01B,WAAWqd,gBAAkB/yC,KAAK4yC,aAAaG,gBACpD/yC,KAAK01B,WAAW6mB,gBAAkBv8C,KAAKu8C,gBACvCv8C,KAAK+C,SAAWqL,iBAAiBirC,EAASxwB,OAAOhf,QAEjD7J,KAAKo6C,uBAGT5G,eAAervC,UAAUi2C,oBAAsB,WAE3C,IAAIqC,EAAaC,EAUbC,EAAWC,EACf,GAZA58C,KAAKyV,QAEFzV,KAAKiyC,cAAc2B,SAAW5zC,KAAKiyC,cAAc5vC,WAChDo6C,EAAez8C,KAAKiyC,cAAc2B,QAAQ1mB,YAC1CwvB,EAAgB18C,KAAKiyC,cAAc2B,QAAQiJ,aAC3C78C,KAAKiyC,cAAc5vC,UAAU8rB,aAAa,QAAQsuB,EAAez8C,KAAK4yC,aAAae,KACnF3zC,KAAKiyC,cAAc5vC,UAAU8rB,aAAa,SAASuuB,EAAgB18C,KAAK4yC,aAAae,OAErF8I,EAAez8C,KAAKy7C,cAAclX,OAAOpoB,MAAQnc,KAAK4yC,aAAae,IACnE+I,EAAgB18C,KAAKy7C,cAAclX,OAAOC,OAASxkC,KAAK4yC,aAAae,MAGX,IAA3D3zC,KAAK4yC,aAAaC,oBAAoB/nC,QAAQ,UAA8E,IAA5D9K,KAAK4yC,aAAaC,oBAAoB/nC,QAAQ,SAAgB,CAC7H,IAAIgyC,EAAM98C,KAAK4yC,aAAaC,oBAAoBpoB,MAAM,KAClDsyB,EAAWD,EAAI,IAAM,OACrBhkB,EAAMgkB,EAAI,IAAM,WAChB/R,EAAOjS,EAAI+V,OAAO,EAAE,GACpB7D,EAAOlS,EAAI+V,OAAO,GACtB8N,EAAaF,EAAaC,EAC1BE,EAAe58C,KAAKu8C,gBAAgBrwB,EAAElsB,KAAKu8C,gBAAgBzrC,EACxD8rC,EAAaD,GAA2B,SAAbI,GAAuBH,EAAaD,GAA2B,UAAbI,GAC5E/8C,KAAKu8C,gBAAgBpmC,GAAKsmC,GAAcz8C,KAAKu8C,gBAAgBrwB,EAAElsB,KAAK4yC,aAAae,KACjF3zC,KAAKu8C,gBAAgBnmC,GAAKqmC,GAAcz8C,KAAKu8C,gBAAgBrwB,EAAElsB,KAAK4yC,aAAae,OAEjF3zC,KAAKu8C,gBAAgBpmC,GAAKumC,GAAe18C,KAAKu8C,gBAAgBzrC,EAAI9Q,KAAK4yC,aAAae,KACpF3zC,KAAKu8C,gBAAgBnmC,GAAKsmC,GAAe18C,KAAKu8C,gBAAgBzrC,EAAI9Q,KAAK4yC,aAAae,MAIpF3zC,KAAKu8C,gBAAgBjlC,GADb,SAATyzB,IAAqB6R,EAAaD,GAAyB,SAAXI,GAAuBH,EAAaD,GAA2B,UAAbI,IACtEN,EAAaz8C,KAAKu8C,gBAAgBrwB,GAAGwwB,EAAc18C,KAAKu8C,gBAAgBzrC,IAAI,EAAE9Q,KAAK4yC,aAAae,IAC5G,SAAT5I,IAAqB6R,EAAaD,GAAyB,SAAXI,GAAuBH,EAAaD,GAA2B,UAAbI,IAC7EN,EAAaz8C,KAAKu8C,gBAAgBrwB,GAAGwwB,EAAc18C,KAAKu8C,gBAAgBzrC,IAAI9Q,KAAK4yC,aAAae,IAE/F,EAG1B3zC,KAAKu8C,gBAAgBhlC,GADb,SAATyzB,IAAqB4R,EAAaD,GAAyB,SAAXI,GAAuBH,EAAaD,GAA2B,UAAbI,IACrEL,EAAc18C,KAAKu8C,gBAAgBzrC,GAAG2rC,EAAaz8C,KAAKu8C,gBAAgBrwB,IAAI,EAAGlsB,KAAK4yC,aAAae,IAC9G,SAAT3I,IAAqB4R,EAAaD,GAAyB,SAAXI,GAAuBH,EAAaD,GAA2B,UAAbI,IAC5EL,EAAc18C,KAAKu8C,gBAAgBzrC,GAAG2rC,EAAaz8C,KAAKu8C,gBAAgBrwB,IAAKlsB,KAAK4yC,aAAae,IAEjG,MAGgB,QAAzC3zC,KAAK4yC,aAAaC,qBACvB7yC,KAAKu8C,gBAAgBpmC,GAAKsmC,GAAcz8C,KAAKu8C,gBAAgBrwB,EAAElsB,KAAK4yC,aAAae,KACjF3zC,KAAKu8C,gBAAgBnmC,GAAKsmC,GAAe18C,KAAKu8C,gBAAgBzrC,EAAE9Q,KAAK4yC,aAAae,KAClF3zC,KAAKu8C,gBAAgBjlC,GAAK,EAC1BtX,KAAKu8C,gBAAgBhlC,GAAK,IAE1BvX,KAAKu8C,gBAAgBpmC,GAAKnW,KAAK4yC,aAAae,IAC5C3zC,KAAKu8C,gBAAgBnmC,GAAKpW,KAAK4yC,aAAae,IAC5C3zC,KAAKu8C,gBAAgBjlC,GAAK,EAC1BtX,KAAKu8C,gBAAgBhlC,GAAK,GAE9BvX,KAAKu8C,gBAAgBh7C,MAAQ,CAACvB,KAAKu8C,gBAAgBpmC,GAAG,EAAE,EAAE,EAAE,EAAEnW,KAAKu8C,gBAAgBnmC,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAEpW,KAAKu8C,gBAAgBjlC,GAAGtX,KAAKu8C,gBAAgBhlC,GAAG,EAAE,GAOpJvX,KAAKq7C,aAAar7C,KAAKu8C,gBAAgBh7C,OACvCvB,KAAKy7C,cAAcuB,YACnBh9C,KAAKy7C,cAAchH,KAAK,EAAE,EAAEz0C,KAAKu8C,gBAAgBrwB,EAAElsB,KAAKu8C,gBAAgBzrC,GACxE9Q,KAAKy7C,cAAcwB,YACnBj9C,KAAKy7C,cAAcyB,OAEnBl9C,KAAKw6C,YAAYx6C,KAAKi1B,eAAe,IAGzCue,eAAervC,UAAU8hC,QAAU,WAC5BjmC,KAAK4yC,aAAaa,cACjBzzC,KAAKiyC,cAAc2B,QAAQjnB,UAAY,IAE3C,IAAI7iB,EAAGkE,EAAMhO,KAAK6oB,OAAS7oB,KAAK6oB,OAAOhf,OAAS,EAChD,IAAKC,EAAIkE,EAAM,EAAGlE,GAAK,EAAGA,GAAG,EACtB9J,KAAK+C,SAAS+G,IACb9J,KAAK+C,SAAS+G,GAAGm8B,UAGzBjmC,KAAK+C,SAAS8G,OAAS,EACvB7J,KAAK01B,WAAW+lB,cAAgB,KAChCz7C,KAAKiyC,cAAc5vC,UAAY,KAC/BrC,KAAKszC,WAAY,GAGrBE,eAAervC,UAAUq2C,YAAc,SAASlD,EAAK7f,GACjD,IAAIz3B,KAAKi1B,gBAAkBqiB,IAAyC,IAAlCt3C,KAAK4yC,aAAaa,aAAyBhc,KAAgBz3B,KAAKszC,YAAsB,IAATgE,EAA/G,CAGAt3C,KAAKi1B,cAAgBqiB,EACrBt3C,KAAK01B,WAAW1E,SAAWsmB,EAAMt3C,KAAKiyC,cAAcnc,cACpD91B,KAAK01B,WAAWC,SAAW,EAC3B31B,KAAK01B,WAAW/hB,MAAQ3T,KAAK4yC,aAAaa,aAAehc,EACzDz3B,KAAK01B,WAAW8iB,iBAAiBiC,aAAenD,EAIhD,IAAIxtC,EAAGkE,EAAMhO,KAAK6oB,OAAOhf,OAKzB,IAJI7J,KAAK4oB,gBACL5oB,KAAKq3C,YAAYC,GAGhBxtC,EAAI,EAAGA,EAAIkE,EAAKlE,KACd9J,KAAK4oB,gBAAkB5oB,KAAK+C,SAAS+G,KACpC9J,KAAK+C,SAAS+G,GAAG4wC,aAAapD,EAAMt3C,KAAK6oB,OAAO/e,GAAGysB,IAG3D,GAAGv2B,KAAK01B,WAAW/hB,KAAM,CAMrB,KALqC,IAAlC3T,KAAK4yC,aAAaa,YACjBzzC,KAAKy7C,cAAc0B,UAAU,EAAG,EAAGn9C,KAAKu8C,gBAAgBrwB,EAAGlsB,KAAKu8C,gBAAgBzrC,GAEhF9Q,KAAK87C,OAEJhyC,EAAIkE,EAAM,EAAGlE,GAAK,EAAGA,GAAG,GACtB9J,KAAK4oB,gBAAkB5oB,KAAK+C,SAAS+G,KACpC9J,KAAK+C,SAAS+G,GAAG0wC,eAGY,IAAlCx6C,KAAK4yC,aAAaa,aACjBzzC,KAAK67C,aAKjBrI,eAAervC,UAAUqzC,UAAY,SAAS1e,GAC1C,IAAI/1B,EAAW/C,KAAK+C,SACpB,IAAGA,EAAS+1B,IAA+B,IAAvB94B,KAAK6oB,OAAOiQ,GAAKvhB,GAArC,CAGA,IAAI3I,EAAU5O,KAAK03C,WAAW13C,KAAK6oB,OAAOiQ,GAAM94B,KAAKA,KAAK01B,YAC1D3yB,EAAS+1B,GAAOlqB,EAChBA,EAAQsqC,oBAMZ1F,eAAervC,UAAUszC,qBAAwB,WAC7C,MAAMz3C,KAAKqzC,gBAAgBxpC,OAAO,CAC9B,IAAI+E,EAAU5O,KAAKqzC,gBAAgBlT,MACnCvxB,EAAQ2rC,mBAIhB/G,eAAervC,UAAU22C,KAAO,WAC5B96C,KAAKiyC,cAAc5vC,UAAUwM,MAAMI,QAAU,QAGjDukC,eAAervC,UAAU42C,KAAO,WAC5B/6C,KAAKiyC,cAAc5vC,UAAUwM,MAAMI,QAAU,SA2BjDqT,gBAAgB,CAACyvB,cAAcmC,gBAE/BA,eAAe/vC,UAAUqzC,UAAYxF,YAAY7tC,UAAUqzC,UAE3DtD,eAAe/vC,UAAUszC,qBAAwB,WAC7C,MAAMz3C,KAAKqzC,gBAAgBxpC,OAAO,CAC9B,IAAI+E,EAAU5O,KAAKqzC,gBAAgBlT,MACnCvxB,EAAQ2rC,mBAIhBrG,eAAe/vC,UAAUk2C,mBAAqB,SAASzrC,EAASkqB,GAC5D,IAAIskB,EAAgBxuC,EAAQ+rC,iBAC5B,GAAIyC,EAAJ,CAGA,IAAIzF,EAAQ33C,KAAK6oB,OAAOiQ,GACxB,GAAI6e,EAAM0F,KAAQr9C,KAAKq0C,WA0BnBr0C,KAAKs9C,iBAAiBF,EAActkB,QAzBpC,GAAG94B,KAAKm0C,eACJn0C,KAAKs9C,iBAAiBF,EAActkB,OACjC,CACH,IACIykB,EAAgBC,EAAWC,EAD3B3zC,EAAI,EAER,MAAMA,EAAEgvB,EACD94B,KAAK+C,SAAS+G,KAA0B,IAApB9J,KAAK+C,SAAS+G,IAAc9J,KAAK+C,SAAS+G,GAAG6wC,iBAChE6C,EAAYx9C,KAAK+C,SAAS+G,GAC1B2zC,EAAgBz9C,KAAK6oB,OAAO/e,GAAGuzC,IAAMr9C,KAAK09C,wBAAwB5zC,GAAK0zC,EAAU7C,iBACjF4C,EAAiBE,GAAiBF,GAEtCzzC,GAAK,EAENyzC,EACK5F,EAAM0F,KAAQr9C,KAAKq0C,YACnBr0C,KAAK2yC,aAAakI,aAAauC,EAAeG,GAG9C5F,EAAM0F,KAAQr9C,KAAKq0C,YACnBr0C,KAAK2yC,aAAalnC,YAAY2xC,MAUlDlJ,eAAe/vC,UAAU6zC,YAAc,SAAU32C,GAC7C,OAAIrB,KAAKq0C,WAGF,IAAIsJ,cAAct8C,EAAMrB,KAAK01B,WAAY11B,MAFrC,IAAI65C,gBAAgBx4C,EAAMrB,KAAK01B,WAAY11B,OAK1Dk0C,eAAe/vC,UAAU8zC,WAAa,SAAU52C,GAC5C,OAAIrB,KAAKq0C,WAGF,IAAIuJ,aAAav8C,EAAMrB,KAAK01B,WAAY11B,MAFpC,IAAI85C,eAAez4C,EAAMrB,KAAK01B,WAAY11B,OAKzDk0C,eAAe/vC,UAAU+zC,aAAe,SAAU72C,GAE9C,OADArB,KAAKo0C,OAAS,IAAIyJ,eAAex8C,EAAMrB,KAAK01B,WAAY11B,MACjDA,KAAKo0C,QAGhBF,eAAe/vC,UAAUyzC,YAAc,SAAUv2C,GAC7C,OAAIrB,KAAKq0C,WAGF,IAAIyJ,cAAcz8C,EAAMrB,KAAK01B,WAAY11B,MAFrC,IAAI+5C,cAAc14C,EAAMrB,KAAK01B,WAAY11B,OAKxDk0C,eAAe/vC,UAAU0zC,WAAa,SAAUx2C,GAC5C,OAAIrB,KAAKq0C,WAGF,IAAI0J,aAAa18C,EAAMrB,KAAK01B,WAAY11B,MAFpC,IAAIg6C,eAAe34C,EAAMrB,KAAK01B,WAAY11B,OAMzDk0C,eAAe/vC,UAAU2zC,YAAc,SAAUz2C,GAC7C,OAAIrB,KAAKq0C,WAGF,IAAI2J,cAAc38C,EAAMrB,KAAK01B,WAAY11B,MAFrC,IAAIi6C,cAAc54C,EAAMrB,KAAK01B,WAAY11B,OAKxDk0C,eAAe/vC,UAAU4zC,WAAa/F,YAAY7tC,UAAU4zC,WAE5D7D,eAAe/vC,UAAUu5C,wBAA0B,SAAS5kB,GACxD,IAAIhvB,EAAI,EAAGkE,EAAMhO,KAAKm0C,eAAetqC,OACrC,MAAMC,EAAEkE,EAAK,CACT,GAAGhO,KAAKm0C,eAAerqC,GAAGm0C,UAAYnlB,GAAO94B,KAAKm0C,eAAerqC,GAAGo0C,QAAUplB,EAC1E,OAAO94B,KAAKm0C,eAAerqC,GAAGq0C,gBAElCr0C,GAAK,IAIboqC,eAAe/vC,UAAUi6C,sBAAwB,SAAStlB,EAAKp3B,GAC3D,IAAIy8C,EAAkB/qC,UAAU,OAChCzE,SAASwvC,GACT,IAAI97C,EAAY+Q,UAAU,OAC1BzE,SAAStM,GACG,OAATX,IACCy8C,EAAgBtvC,MAAMsN,MAAQnc,KAAK01B,WAAWikB,SAASztB,EAAE,KACzDiyB,EAAgBtvC,MAAM21B,OAASxkC,KAAK01B,WAAWikB,SAAS7oC,EAAE,KAC1DqtC,EAAgBtvC,MAAMK,gBAAkBivC,EAAgBtvC,MAAMytC,mBAAqB6B,EAAgBtvC,MAAMM,sBAAwB,UACjI9M,EAAUwM,MAAM4I,UAAYpV,EAAUwM,MAAMwvC,gBAAkB,6CAGlEF,EAAgB1yC,YAAYpJ,GAE5B,IAAIi8C,EAAsB,CACtBj8C,UAAUA,EACV87C,gBAAgBA,EAChBF,SAAUnlB,EACVolB,OAAQplB,EACRp3B,KAAMA,GAGV,OADA1B,KAAKm0C,eAAe5hC,KAAK+rC,GAClBA,GAGXpK,eAAe/vC,UAAUo6C,kBAAoB,WACzC,IAAIz0C,EACA00C,EADGxwC,EAAMhO,KAAK6oB,OAAOhf,OAErB40C,EAAmB,GACvB,IAAI30C,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACV9J,KAAK6oB,OAAO/e,GAAGuzC,KAA6B,IAAtBr9C,KAAK6oB,OAAO/e,GAAGyN,IACZ,OAArBknC,IACCA,EAAmB,KACnBD,EAA0Bx+C,KAAKo+C,sBAAsBt0C,EAAE,OAE3D00C,EAAwBN,OAASxzC,KAAK+C,IAAI+wC,EAAwBN,OAAOp0C,KAEjD,OAArB20C,IACCA,EAAmB,KACnBD,EAA0Bx+C,KAAKo+C,sBAAsBt0C,EAAE,OAE3D00C,EAAwBN,OAASxzC,KAAK+C,IAAI+wC,EAAwBN,OAAOp0C,IAIjF,IADAkE,EAAMhO,KAAKm0C,eAAetqC,OACtBC,EAAIkE,EAAM,EAAGlE,GAAK,EAAGA,IACrB9J,KAAK0+C,YAAYjzC,YAAYzL,KAAKm0C,eAAerqC,GAAGq0C,kBAI5DjK,eAAe/vC,UAAUm5C,iBAAmB,SAAS7nB,EAAKqD,GACtD,IAAIhvB,EAAI,EAAGkE,EAAMhO,KAAKm0C,eAAetqC,OACrC,MAAMC,EAAEkE,EAAI,CACR,GAAG8qB,GAAO94B,KAAKm0C,eAAerqC,GAAGo0C,OAAO,CACpC,IACItD,EADA7jC,EAAI/W,KAAKm0C,eAAerqC,GAAGm0C,SAE/B,MAAMlnC,EAAE+hB,EACD94B,KAAK+C,SAASgU,IAAM/W,KAAK+C,SAASgU,GAAG4jC,iBACpCC,EAAc56C,KAAK+C,SAASgU,GAAG4jC,kBAEnC5jC,GAAK,EAEN6jC,EACC56C,KAAKm0C,eAAerqC,GAAGzH,UAAUw4C,aAAaplB,EAAMmlB,GAEpD56C,KAAKm0C,eAAerqC,GAAGzH,UAAUoJ,YAAYgqB,GAEjD,MAEJ3rB,GAAK,IAIboqC,eAAe/vC,UAAU+1C,gBAAkB,SAASb,GAChD,IAAIqF,EAActrC,UAAU,OACxBwgC,EAAU5zC,KAAKiyC,cAAc2B,QACjC8K,EAAY7vC,MAAMsN,MAAQk9B,EAASntB,EAAE,KACrCwyB,EAAY7vC,MAAM21B,OAAS6U,EAASvoC,EAAE,KACtC9Q,KAAK0+C,YAAcA,EACnB/vC,SAAS+vC,GACTA,EAAY7vC,MAAMS,eAAiBovC,EAAY7vC,MAAMU,qBAAuBmvC,EAAY7vC,MAAMW,kBAAoB,OAC/GxP,KAAK4yC,aAAaO,WACnBuL,EAAYvwB,aAAa,QAASnuB,KAAK4yC,aAAaO,WAEtDS,EAAQnoC,YAAYizC,GAEpBA,EAAY7vC,MAAM4N,SAAW,SAC7B,IAAIkiC,EAAMzrC,SAAS,OACnByrC,EAAIxwB,aAAa,QAAQ,KACzBwwB,EAAIxwB,aAAa,SAAS,KAC1Bxf,SAASgwC,GACT3+C,KAAK0+C,YAAYjzC,YAAYkzC,GAC7B,IAAI/vB,EAAO1b,SAAS,QACpByrC,EAAIlzC,YAAYmjB,GAChB5uB,KAAKqB,KAAOg4C,EAEZr5C,KAAKo5C,gBAAgBC,EAAUsF,GAC/B3+C,KAAK01B,WAAW9G,KAAOA,EACvB5uB,KAAK6oB,OAASwwB,EAASxwB,OACvB7oB,KAAK2yC,aAAe3yC,KAAK0+C,YACzB1+C,KAAKu+C,oBACLv+C,KAAKo6C,uBAGTlG,eAAe/vC,UAAU8hC,QAAU,WAC/BjmC,KAAKiyC,cAAc2B,QAAQjnB,UAAY,GACvC3sB,KAAKiyC,cAAc5vC,UAAY,KAC/BrC,KAAK01B,WAAW9G,KAAO,KACvB,IAAI9kB,EAAGkE,EAAMhO,KAAK6oB,OAAS7oB,KAAK6oB,OAAOhf,OAAS,EAChD,IAAKC,EAAI,EAAGA,EAAIkE,EAAKlE,IACjB9J,KAAK+C,SAAS+G,GAAGm8B,UAErBjmC,KAAK+C,SAAS8G,OAAS,EACvB7J,KAAKszC,WAAY,EACjBtzC,KAAKiyC,cAAgB,MAGzBiC,eAAe/vC,UAAUi2C,oBAAsB,WAC3C,IAIIjkC,EAAGC,EAAGkB,EAAGC,EAJTklC,EAAez8C,KAAKiyC,cAAc2B,QAAQ1mB,YAC1CwvB,EAAgB18C,KAAKiyC,cAAc2B,QAAQiJ,aAC3CF,EAAaF,EAAaC,EAC1BE,EAAe58C,KAAK01B,WAAWikB,SAASztB,EAAElsB,KAAK01B,WAAWikB,SAAS7oC,EAEpE8rC,EAAaD,GACZxmC,EAAKsmC,EAAcz8C,KAAK01B,WAAWikB,SAAU,EAC7CvjC,EAAKqmC,EAAcz8C,KAAK01B,WAAWikB,SAAU,EAC7CriC,EAAK,EACLC,GAAOmlC,EAAc18C,KAAK01B,WAAWikB,SAAS7oC,GAAG2rC,EAAaz8C,KAAK01B,WAAWikB,SAASztB,IAAI,IAE3F/V,EAAKumC,EAAe18C,KAAK01B,WAAWikB,SAAU,EAC9CvjC,EAAKsmC,EAAe18C,KAAK01B,WAAWikB,SAAU,EAC9CriC,GAAMmlC,EAAaz8C,KAAK01B,WAAWikB,SAASztB,GAAGwwB,EAAc18C,KAAK01B,WAAWikB,SAAS7oC,IAAI,EAC1FyG,EAAK,GAETvX,KAAK0+C,YAAY7vC,MAAM4I,UAAYzX,KAAK0+C,YAAY7vC,MAAMwvC,gBAAkB,YAAcloC,EAAK,YAAYC,EAAG,gBAAgBkB,EAAG,IAAIC,EAAG,SAG5I28B,eAAe/vC,UAAUq2C,YAAcxI,YAAY7tC,UAAUq2C,YAE7DtG,eAAe/vC,UAAU22C,KAAO,WAC5B96C,KAAK0+C,YAAY7vC,MAAMI,QAAU,QAGrCilC,eAAe/vC,UAAU42C,KAAO,WAC5B/6C,KAAK0+C,YAAY7vC,MAAMI,QAAU,SAGrCilC,eAAe/vC,UAAUs0C,UAAY,WAEjC,GADAz4C,KAAKm4C,gBACFn4C,KAAKo0C,OACJp0C,KAAKo0C,OAAOwK,YACT,CACH,IAEI90C,EAFA+0C,EAAS7+C,KAAK01B,WAAWikB,SAASztB,EAClC4yB,EAAU9+C,KAAK01B,WAAWikB,SAAS7oC,EAChC9C,EAAMhO,KAAKm0C,eAAetqC,OACjC,IAAIC,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACb9J,KAAKm0C,eAAerqC,GAAGq0C,gBAAgBtvC,MAAMkwC,YAAc/+C,KAAKm0C,eAAerqC,GAAGq0C,gBAAgBtvC,MAAMmwC,kBAAoBt0C,KAAKyC,KAAKzC,KAAKuC,IAAI4xC,EAAO,GAAKn0C,KAAKuC,IAAI6xC,EAAQ,IAAM,OAK9L5K,eAAe/vC,UAAU60C,wBAA0B,SAAShuB,GACxD,IAAIlhB,EAAGkE,EAAMgd,EAAOnhB,OAChBo1C,EAAoB7rC,UAAU,OAClC,IAAItJ,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACb,GAAGkhB,EAAOlhB,GAAGmvC,GAAG,CACZ,IAAI71C,EAAOpD,KAAK63C,WAAW7sB,EAAOlhB,GAAGm1C,EAAkBj/C,KAAK01B,WAAWtyB,KAAK,MAC5EA,EAAK81C,kBACLl5C,KAAK01B,WAAW8iB,iBAAiBW,oBAAoB/1C,KA4IjEkxC,YAAYnwC,UAAU0mC,gBAAkB,SAAS/R,GAC7C,OAAO94B,KAAKu0C,SAASzb,GAAKvlB,MAG9B+gC,YAAYnwC,UAAUq2C,YAAc,SAAU0E,GAC1C,IACIp1C,EADAq1C,EAAWn/C,KAAK4O,QAAQwwC,eAAetoB,IACpC9oB,EAAMhO,KAAKwpB,gBAAgB3f,OAClC,IAAKC,EAAI,EAAGA,EAAIkE,EAAKlE,IAOjB,IANG9J,KAAKu0C,SAASzqC,GAAGyJ,KAAKI,MAAQurC,IAC7Bl/C,KAAKw1C,SAASx1C,KAAKwpB,gBAAgB1f,GAAG9J,KAAKu0C,SAASzqC,GAAGyJ,KAAKvC,EAAEhR,KAAKu0C,SAASzqC,KAE7E9J,KAAKu0C,SAASzqC,GAAG+5B,GAAGlwB,MAAQurC,IAC3Bl/C,KAAKu0C,SAASzqC,GAAG2rB,KAAKtH,aAAa,eAAenuB,KAAKu0C,SAASzqC,GAAG+5B,GAAG7yB,GAEtC,MAAjChR,KAAKwpB,gBAAgB1f,GAAGkL,OACpBhV,KAAKu0C,SAASzqC,GAAGyrC,UAAYv1C,KAAK4O,QAAQwwC,eAAeC,MAAM1rC,MAAQurC,IACtEl/C,KAAKu0C,SAASzqC,GAAGyrC,QAAQpnB,aAAa,YAAagxB,EAAS9kC,mBAAmBsB,WAEhF3b,KAAKgmB,WAAWlc,GAAGiQ,IAAM/Z,KAAKgmB,WAAWlc,GAAGiQ,EAAEpG,MAAQurC,IAAc,CACnE,IAAIvK,EAAU30C,KAAKgmB,WAAWlc,GAAGmrC,MAC9Bj1C,KAAKgmB,WAAWlc,GAAGiQ,EAAE/I,EAAI,GACe,UAApChR,KAAKgmB,WAAWlc,GAAGqrC,eAClBn1C,KAAKgmB,WAAWlc,GAAGqrC,aAAe,QAClCn1C,KAAKgmB,WAAWlc,GAAG2rB,KAAKtH,aAAa,SAAS,OAAS/hB,aAAe,IAAIpM,KAAKgmB,WAAWlc,GAAGsrC,SAAS,MAE1GT,EAAQxmB,aAAa,UAAUnuB,KAAKgmB,WAAWlc,GAAGiQ,EAAE/I,KAEb,WAApChR,KAAKgmB,WAAWlc,GAAGqrC,eAClBn1C,KAAKgmB,WAAWlc,GAAGqrC,aAAe,SAClCn1C,KAAKgmB,WAAWlc,GAAG2rB,KAAKtH,aAAa,SAAS,OAElDnuB,KAAKgmB,WAAWlc,GAAG2rB,KAAKtH,aAAa,eAAuC,EAAvBnuB,KAAKgmB,WAAWlc,GAAGiQ,EAAE/I,MAQ9FsjC,YAAYnwC,UAAUm7C,eAAiB,WACnC,OAAOt/C,KAAK0yC,aAGhB4B,YAAYnwC,UAAUmxC,qBAAuB,WACzC,IAAIjwC,EAAO,QAKX,OAJAA,GAAQ,KAAOrF,KAAK01B,WAAWikB,SAASztB,EACxC7mB,GAAQ,KAAOrF,KAAK01B,WAAWikB,SAAS7oC,EACxCzL,GAAQ,MAAQrF,KAAK01B,WAAWikB,SAASztB,EACzC7mB,GAAQ,MAAQrF,KAAK01B,WAAWikB,SAAS7oC,EAAI,IACtCzL,GAGXivC,YAAYnwC,UAAUqxC,SAAW,SAASrqB,EAAS8Y,EAAUsQ,GACzD,IACIzqC,EAAGkE,EADHuxC,EAAa,KAAKtb,EAAUjzB,EAAE,GAAG,GAAG,IAAIizB,EAAUjzB,EAAE,GAAG,GAG3D,IADAhD,EAAMi2B,EAAUze,QACZ1b,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EAEby1C,GAAc,KAAKtb,EAAU7sB,EAAEtN,EAAE,GAAG,GAAG,IAAIm6B,EAAU7sB,EAAEtN,EAAE,GAAG,GAAK,IAAIm6B,EAAUn6B,EAAEA,GAAG,GAAG,IAAIm6B,EAAUn6B,EAAEA,GAAG,GAAK,IAAIm6B,EAAUjzB,EAAElH,GAAG,GAAG,IAAIm6B,EAAUjzB,EAAElH,GAAG,GAQ5J,GALGm6B,EAAUptB,GAAK7I,EAAM,IACpBuxC,GAAc,KAAKtb,EAAU7sB,EAAEtN,EAAE,GAAG,GAAG,IAAIm6B,EAAU7sB,EAAEtN,EAAE,GAAG,GAAK,IAAIm6B,EAAUn6B,EAAE,GAAG,GAAG,IAAIm6B,EAAUn6B,EAAE,GAAG,GAAK,IAAIm6B,EAAUjzB,EAAE,GAAG,GAAG,IAAIizB,EAAUjzB,EAAE,GAAG,IAIzJujC,EAASW,WAAaqK,EAAW,CAChC,IAAIC,EAAiB,GAClBjL,EAAS9e,OACLwO,EAAUptB,IACT2oC,EAAiBr0B,EAAS6W,IAAMhiC,KAAKw0C,UAAY+K,EAAaA,GAElEhL,EAAS9e,KAAKtH,aAAa,IAAIqxB,IAEnCjL,EAASW,SAAWqK,IAI5BjL,YAAYnwC,UAAU8hC,QAAU,WAC5BjmC,KAAK4O,QAAU,KACf5O,KAAK01B,WAAa,KAClB11B,KAAK0yC,YAAc,KACnB1yC,KAAKqB,KAAO,KACZrB,KAAKwpB,gBAAkB,MAW3BmsB,iBAAiBxxC,UAAY,CAM5Bs7C,cAAe,WAEXz/C,KAAK44C,UAAY,GAEjB54C,KAAK0/C,WAAY,EACjB1/C,KAAKu6C,kBASTzB,aAAc,SAASF,GACnB54C,KAAK44C,UAAYA,GAOrBC,YAAa,WACT74C,KAAK0/C,WAAY,GAOrBnF,eAAgB,gBACarwC,IAArBlK,KAAKqB,KAAK8rB,QACVntB,KAAKoD,KAAKs1C,sBAAsB14C,KAAMA,KAAKqB,KAAK8rB,OAAQ,MAajEyoB,aAAazxC,UAAY,CAMrB0sB,UAAW,WAEP7wB,KAAK81B,eAAgB,EAErB91B,KAAKwT,kBAAoB,GAEzBxT,KAAK2T,MAAO,GAYhBgsC,kBAAmB,SAASrI,EAAKsI,GAC7B,IAAI91C,EAAGkE,EAAMhO,KAAKwT,kBAAkB3J,OACpC,IAAKC,EAAI,EAAEA,EAAIkE,EAAKlE,GAAK,GACjB81C,GAAc5/C,KAAK0/C,WAAoD,cAAvC1/C,KAAKwT,kBAAkB1J,GAAGsnB,YAC1DpxB,KAAKwT,kBAAkB1J,GAAG8J,WACtB5T,KAAKwT,kBAAkB1J,GAAG6J,OAC1B3T,KAAK01B,WAAW/hB,MAAO,EACvB3T,KAAK2T,MAAO,KAK5BL,mBAAoB,SAASC,IACoB,IAA1CvT,KAAKwT,kBAAkB1I,QAAQyI,IAC9BvT,KAAKwT,kBAAkBjB,KAAKgB,KAMxCsiC,iBAAiB1xC,UAAY,CACzB07C,cAAe,WACX7/C,KAAKo/C,eAAiB,CAClBC,MAAOr/C,KAAKqB,KAAK8oB,GAAKwM,yBAAyB2B,qBAAqBt4B,KAAMA,KAAKqB,KAAK8oB,GAAInqB,MAAQ,CAACoX,EAAE,GACnG0oC,SAAS,EACTC,QAAQ,EACRjpB,IAAK,IAAI7hB,QAETjV,KAAKqB,KAAK2+C,KACVhgD,KAAKo/C,eAAeC,MAAMvnB,cAAe,GAIzC93B,KAAKqB,KAAKkW,IAIlB0oC,gBAAiB,WAKb,GAHAjgD,KAAKo/C,eAAeW,OAAS//C,KAAKo/C,eAAeC,MAAMjoC,EAAEzD,MAAQ3T,KAAK81B,cACtE91B,KAAKo/C,eAAeU,QAAU9/C,KAAKo/C,eAAeC,MAAM1rC,MAAQ3T,KAAK81B,cAEjE91B,KAAK44C,UAAW,CAChB,IAAI9hB,EACAqoB,EAAWn/C,KAAKo/C,eAAetoB,IAC/BhtB,EAAI,EAAGkE,EAAMhO,KAAK44C,UAAU/uC,OAEhC,IAAK7J,KAAKo/C,eAAeU,QACrB,MAAOh2C,EAAIkE,EAAK,CACZ,GAAIhO,KAAK44C,UAAU9uC,GAAGs1C,eAAeC,MAAM1rC,KAAM,CAC7C3T,KAAKo/C,eAAeU,SAAU,EAC9B,MAEJh2C,GAAK,EAIb,GAAI9J,KAAKo/C,eAAeU,QAGpB,IAFAhpB,EAAM92B,KAAKo/C,eAAeC,MAAMruC,EAAEzP,MAClC49C,EAAStlC,eAAeid,GACnBhtB,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EACtBgtB,EAAM92B,KAAK44C,UAAU9uC,GAAGs1C,eAAeC,MAAMruC,EAAEzP,MAC/C49C,EAAS1nC,UAAUqf,EAAI,GAAIA,EAAI,GAAIA,EAAI,GAAIA,EAAI,GAAIA,EAAI,GAAIA,EAAI,GAAIA,EAAI,GAAIA,EAAI,GAAIA,EAAI,GAAIA,EAAI,GAAIA,EAAI,IAAKA,EAAI,IAAKA,EAAI,IAAKA,EAAI,IAAKA,EAAI,IAAKA,EAAI,OAKpKopB,cAAe,SAASzlC,GACpB,IAAI0lC,EAAa,GACjBA,EAAW5tC,KAAKvS,KAAKo/C,gBACrB,IAAI1wC,GAAO,EACPtL,EAAOpD,KAAKoD,KAChB,MAAOsL,EACCtL,EAAKg8C,gBACDh8C,EAAK/B,KAAKioB,SACV62B,EAAWztC,OAAO,EAAG,EAAGtP,EAAKg8C,gBAEjCh8C,EAAOA,EAAKA,MAEZsL,GAAO,EAGf,IAAI5E,EAA2Bs2C,EAAxBpyC,EAAMmyC,EAAWt2C,OACxB,IAAKC,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EACtBs2C,EAAQD,EAAWr2C,GAAGgtB,IAAIpc,kBAAkB,EAAG,EAAG,GAElDD,EAAK,CAACA,EAAG,GAAK2lC,EAAM,GAAI3lC,EAAG,GAAK2lC,EAAM,GAAI,GAE9C,OAAO3lC,GAEXixB,QAAS,IAAIz2B,QAMjB6gC,kBAAkB3xC,UAAY,CAC1Bk8C,eAAgB,WAEZrgD,KAAKsgD,WAAY,EAEjBtgD,KAAKugD,QAAS,EAEdvgD,KAAKwgD,eAAgB,EAErBxgD,KAAKygD,qBAAuB,IAEhC/K,uBAAwB,SAASzyC,IACwB,IAAlDjD,KAAKygD,qBAAqB31C,QAAQ7H,IACjCjD,KAAKygD,qBAAqBluC,KAAKtP,IAGvCy9C,0BAA2B,SAASz9C,IACqB,IAAlDjD,KAAKygD,qBAAqB31C,QAAQ7H,IACjCjD,KAAKygD,qBAAqB/tC,OAAO1S,KAAKygD,qBAAqB31C,QAAQ7H,GAAY,IAGvF09C,uBAAwB,SAASrJ,GAC7Bt3C,KAAK4gD,iBAAiBtJ,IAE1BuJ,kBAAmB,WACZ7gD,KAAKo/C,eAAeC,MAAMjoC,EAAEpG,GAAK,GAC5BhR,KAAKwgD,eAAiBxgD,KAAK01B,WAAWkd,aAAaI,oBACnDhzC,KAAKwgD,eAAgB,EACrBxgD,KAAK86C,QAEH96C,KAAKwgD,gBACXxgD,KAAKwgD,eAAgB,EACrBxgD,KAAK+6C,SAWb6F,iBAAkB,SAAStJ,GACpBt3C,KAAKqB,KAAKk2C,GAAKv3C,KAAKqB,KAAKk1B,IAAM+gB,GAAOt3C,KAAKqB,KAAKwiC,GAAK7jC,KAAKqB,KAAKk1B,GAAK+gB,GAE7C,IAAnBt3C,KAAKsgD,YACJtgD,KAAK01B,WAAW/hB,MAAO,EACvB3T,KAAK2T,MAAO,EACZ3T,KAAKsgD,WAAY,EACjBtgD,KAAK+6C,SAGa,IAAnB/6C,KAAKsgD,YACJtgD,KAAK01B,WAAW/hB,MAAO,EACvB3T,KAAKsgD,WAAY,EACjBtgD,KAAK86C,SAIjBgG,iBAAkB,WACd,IAAIh3C,EAAGkE,EAAMhO,KAAKygD,qBAAqB52C,OACvC,IAAIC,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EACrB9J,KAAKygD,qBAAqB32C,GAAG0wC,YAAYx6C,KAAK81B,gBAKtDirB,iBAAkB,WACd,MAAO,CACHhyC,IAAI,EACJC,KAAK,EACLmN,MAAM,IACNqoB,OAAO,MAGfwc,aAAc,WACV,OAAoB,IAAjBhhD,KAAKqB,KAAKkW,GACF,CAAC2U,EAAElsB,KAAKqB,KAAKqmC,SAASvrB,MAAMrL,EAAE9Q,KAAKqB,KAAKqmC,SAASlD,QAEjD,CAACtY,EAAElsB,KAAKqB,KAAK8a,MAAMrL,EAAE9Q,KAAKqB,KAAKmjC,UAMjD,WACG,IAAIyc,EAAa,CACbC,YAAa,SAAS7/C,EAAKq0B,EAAWtyB,GAClCpD,KAAK6wB,YACL7wB,KAAKmhD,aAAa9/C,EAAMq0B,EAAYtyB,GACpCpD,KAAK6/C,cAAcx+C,EAAMq0B,EAAYtyB,GACrCpD,KAAKy/C,gBACLz/C,KAAKqgD,iBACLrgD,KAAKohD,sBACLphD,KAAKqhD,0BACLrhD,KAAKshD,6BACLthD,KAAKuhD,gBACLvhD,KAAK86C,QAETA,KAAM,WACF,IAAK96C,KAAKugD,UAAYvgD,KAAKsgD,WAAatgD,KAAKwgD,eAAgB,CACzD,IAAI/qB,EAAOz1B,KAAKwhD,aAAexhD,KAAK2yC,aACpCld,EAAK5mB,MAAMI,QAAU,OACrBjP,KAAKugD,QAAS,IAGtBxF,KAAM,WACF,GAAI/6C,KAAKsgD,YAActgD,KAAKwgD,cAAc,CACtC,IAAKxgD,KAAKqB,KAAK+0C,GAAI,CACf,IAAI3gB,EAAOz1B,KAAKwhD,aAAexhD,KAAK2yC,aACpCld,EAAK5mB,MAAMI,QAAU,QAEzBjP,KAAKugD,QAAS,EACdvgD,KAAK81B,eAAgB,IAG7B0kB,YAAa,WAGLx6C,KAAKqB,KAAK+0C,IAAMp2C,KAAKugD,SAGzBvgD,KAAKigD,kBACLjgD,KAAK8gD,mBACL9gD,KAAKyhD,gBACLzhD,KAAK0hD,qBACD1hD,KAAK81B,gBACL91B,KAAK81B,eAAgB,KAG7B4rB,mBAAoB,aACpBhH,aAAc,SAASpD,GACnBt3C,KAAK2T,MAAO,EACZ3T,KAAK2gD,uBAAuBrJ,GAC5Bt3C,KAAK2/C,kBAAkBrI,EAAKt3C,KAAKsgD,WACjCtgD,KAAK6gD,qBAET5a,QAAS,WACLjmC,KAAK2hD,UAAa,KAClB3hD,KAAK4hD,uBAGbt/B,gBAAgB,CAACwzB,kBAAmB/yB,oBAAoBk+B,IAAclL,sBAzD1E,GA0EAE,aAAa9xC,UAAUsR,MAAQ,WAC9BzV,KAAKyR,EAAI,GACTzR,KAAK2T,MAAO,GAwBb4iC,aAAapyC,UAAUy6B,cAAgB,WACnC5+B,KAAKyT,aAAc,GAsBvB6O,gBAAgB,CAACjP,0BAA2BujC,oBAS5Ct0B,gBAAgB,CAACjP,0BAA2ByjC,kBAO5CC,yBAAyB5yC,UAAU6yC,iBAAmB,SAASvhB,EAAMp0B,EAAMw1C,GACvE72C,KAAKoX,EAAIwZ,gBAAgB8F,QAAQjB,EAAKp0B,EAAK+V,EAAE,EAAE,IAAKpX,MACpDA,KAAK+Q,EAAI6f,gBAAgB8F,QAAQjB,EAAKp0B,EAAK0P,EAAE,EAAE,KAAK/Q,MACpDA,KAAK8W,EAAI8Z,gBAAgB8F,QAAQjB,EAAKp0B,EAAKyV,EAAE,EAAE,KAAK9W,MACpDA,KAAK8Q,EAAI8f,gBAAgB8F,QAAQjB,EAAKp0B,EAAKyP,GAAG,CAACkG,EAAE,GAAG,EAAE,IAAKhX,MAC3DA,KAAK4W,EAAIga,gBAAgB8F,QAAQjB,EAAKp0B,EAAKuV,GAAG,CAACI,EAAE,GAAG,EAAE1I,UAAUtO,MAChEA,KAAKkR,EAAI,IAAIgtB,iBAAiBzI,EAAKp0B,EAAK6P,EAAElR,MAC1CA,KAAK6O,MAAQgoC,EACb72C,KAAK6hD,MAAQ,GACb7hD,KAAK8hD,gBAAgBjL,EAAQR,MAAOh1C,GACpCrB,KAAK+hD,mBAAmB1gD,EAAMw1C,GAC9B72C,KAAKyT,cAAgBzT,KAAKyT,aAI9BsjC,yBAAyB5yC,UAAU29C,gBAAkB,SAASE,EAAY3gD,GAEtE,IAAI4gD,EAAatxC,kBACbuxC,EAAQhvC,SAAoB,IAAX7R,EAAKkQ,EAAU,iBAAmB,kBACvD2wC,EAAM/zB,aAAa,KAAK8zB,GACxBC,EAAM/zB,aAAa,eAAe,OAClC+zB,EAAM/zB,aAAa,gBAAgB,kBACnC,IACIxrB,EAAMoU,EAAGkS,EADT44B,EAAQ,GAGZ,IADA54B,EAAgB,EAAT5nB,EAAK6P,EAAEG,EACV0F,EAAE,EAAEA,EAAEkS,EAAKlS,GAAG,EACdpU,EAAOuQ,SAAS,QAChBgvC,EAAMz2C,YAAY9I,GAClBk/C,EAAMtvC,KAAK5P,GAEfq/C,EAAY7zB,aAA0B,OAAZ9sB,EAAKkW,GAAc,OAAO,SAAS,OAASnL,aAAe,IAAI61C,EAAW,KAEpGjiD,KAAKmiD,GAAKD,EACVliD,KAAKoiD,IAAMP,GAGf9K,yBAAyB5yC,UAAU49C,mBAAqB,SAAS1gD,EAAMw1C,GACnE,GAAG72C,KAAKkR,EAAEstB,cAAgBx+B,KAAKkR,EAAEotB,aAAa,CAC1C,IAAI37B,EAAMoU,EAAGkS,EACTvM,EAAOxJ,SAAS,QAChBw/B,EAAcx/B,SAAU,QAC5BwJ,EAAKjR,YAAYinC,GACjB,IAAI2P,EAAY1xC,kBACZwpC,EAASxpC,kBACb+L,EAAKyR,aAAa,KAAKgsB,GACvB,IAAImI,EAASpvC,SAAoB,IAAX7R,EAAKkQ,EAAU,iBAAmB,kBACxD+wC,EAAOn0B,aAAa,KAAKk0B,GACzBC,EAAOn0B,aAAa,eAAe,OACnCm0B,EAAOn0B,aAAa,gBAAgB,kBACpClF,EAAO5nB,EAAK6P,EAAE8F,EAAEA,EAAE,GAAGjG,EAAI1P,EAAK6P,EAAE8F,EAAEA,EAAE,GAAGjG,EAAElH,OAASxI,EAAK6P,EAAE8F,EAAEA,EAAEnN,OAC7D,IAAIg4C,EAAQ7hD,KAAK6hD,MACjB,IAAI9qC,EAAW,EAAT1V,EAAK6P,EAAEG,EAAI0F,EAAEkS,EAAKlS,GAAG,EACvBpU,EAAOuQ,SAAS,QAChBvQ,EAAKwrB,aAAa,aAAa,oBAC/Bm0B,EAAO72C,YAAY9I,GACnBk/C,EAAMtvC,KAAK5P,GAEf+vC,EAAYvkB,aAA0B,OAAZ9sB,EAAKkW,GAAc,OAAO,SAAS,OAASnL,aAAe,IAAIi2C,EAAU,KACnGriD,KAAK+pC,GAAKuY,EACVtiD,KAAKuiD,GAAK7lC,EACV1c,KAAKwiD,IAAMX,EACX7hD,KAAKm6C,OAASA,EACdtD,EAAQP,OAAS5D,IAIzBpwB,gBAAgB,CAACjP,0BAA2B0jC,0BAU5Cz0B,gBAAgB,CAACy0B,yBAA0B1jC,0BAA2B4jC,4BAMtE,IAAIwL,oBAAuB,WAC1B,IAAIC,EAAkB,IAAIztC,OACtB0tC,EAAgB,IAAI1tC,OAEpBoK,EAAK,CACRujC,qBAAsBA,GAGvB,SAASA,EAAqBvhD,GACjBA,EAAKkW,GACd,OAAOlW,EAAKkW,IACR,IAAK,KACL,OAAOsrC,EACP,IAAK,KACL,OAAOC,EACP,IAAK,KACL,OAAOC,EACP,IAAK,KACL,OAAOC,EACP,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,OAAOC,EACP,IAAK,KACL,OAAOC,GAIf,SAASA,EAAuBC,EAAWC,EAAUlE,IAC9CA,GAAgBkE,EAAS3rC,UAAUosB,GAAGlwB,OACrCyvC,EAAS3rC,UAAUpV,UAAU8rB,aAAa,UAAUi1B,EAAS3rC,UAAUosB,GAAG7yB,IAE3EkuC,GAAgBkE,EAAS3rC,UAAUmsB,OAAOjwB,OACzCyvC,EAAS3rC,UAAUpV,UAAU8rB,aAAa,YAAYi1B,EAAS3rC,UAAUmsB,OAAO5yB,EAAE2K,WAI1F,SAASsnC,EAAWE,EAAWC,EAAUlE,GACrC,IAAInoC,EAAGkS,EAAKo6B,EAAsBC,EAAOrf,EAAUhtB,EAE/CmU,EAAO0L,EAAKv1B,EAAOgiD,EAAYvsC,EAFmBwsC,EAAOJ,EAAS9T,OAAOzlC,OACzEssC,EAAMiN,EAASjN,IAEnB,IAAIl/B,EAAE,EAAEA,EAAEusC,EAAKvsC,GAAG,EAAE,CAEhB,GADAqsC,EAASF,EAAStwB,GAAGnf,MAAQurC,EAC1BkE,EAAS9T,OAAOr4B,GAAGk/B,IAAMA,EAAI,CAC5Brf,EAAM6rB,EAAcltC,QACpB8tC,EAAapN,EAAMiN,EAAS9T,OAAOr4B,GAAGk/B,IACtCn/B,EAAIosC,EAAS5M,aAAa3sC,OAAO,EACjC,OAAOy5C,GAAUC,EAAa,EAC1BD,EAASF,EAAS5M,aAAax/B,GAAG4sB,OAAOjwB,MAAQ2vC,EACjDC,IACAvsC,IAEJ,GAAGssC,EAAQ,CACPC,EAAapN,EAAMiN,EAAS9T,OAAOr4B,GAAGk/B,IACtCn/B,EAAIosC,EAAS5M,aAAa3sC,OAAO,EACjC,MAAM05C,EAAa,EACfhiD,EAAQ6hD,EAAS5M,aAAax/B,GAAG4sB,OAAO5yB,EAAEzP,MAC1Cu1B,EAAIrf,UAAUlW,EAAM,GAAGA,EAAM,GAAGA,EAAM,GAAGA,EAAM,GAAGA,EAAM,GAAGA,EAAM,GAAGA,EAAM,GAAGA,EAAM,GAAGA,EAAM,GAAGA,EAAM,GAAGA,EAAM,IAAIA,EAAM,IAAIA,EAAM,IAAIA,EAAM,IAAIA,EAAM,IAAIA,EAAM,KAChKgiD,IACAvsC,UAIR8f,EAAM4rB,EAIV,GAFAt3B,EAAQg4B,EAAStwB,GAAG1H,MACpBnC,EAAOmC,EAAM5F,QACV89B,EAAO,CAEN,IADAD,EAAwB,GACpBtsC,EAAE,EAAEA,EAAEkS,EAAKlS,GAAG,EACdktB,EAAY7Y,EAAMvB,OAAO9S,GACtBktB,GAAaA,EAAUze,UACtB69B,GAAyBrf,iBAAiBC,EAAWA,EAAUze,QAASye,EAAUptB,EAAGigB,IAG7FssB,EAAS3M,OAAOx/B,GAAKosC,OAErBA,EAAwBD,EAAS3M,OAAOx/B,GAE5CmsC,EAAS9T,OAAOr4B,GAAGxF,IAAsB,IAAjB0xC,EAAU/M,GAAc,GAAKiN,EACrDD,EAAS9T,OAAOr4B,GAAGtD,KAAO2vC,GAAUF,EAAS9T,OAAOr4B,GAAGtD,MAI/D,SAASkvC,EAAYM,EAAUC,EAAUlE,GACrC,IAAIuE,EAAYL,EAASv0C,OAEtBu0C,EAASvsC,EAAElD,MAAQurC,IAClBuE,EAAUpN,MAAMloB,aAAa,OAAO,OAAO7gB,SAAS81C,EAASvsC,EAAE7F,EAAE,IAAI,IAAI1D,SAAS81C,EAASvsC,EAAE7F,EAAE,IAAI,IAAI1D,SAAS81C,EAASvsC,EAAE7F,EAAE,IAAI,MAElIoyC,EAAShsC,EAAEzD,MAAQurC,IAClBuE,EAAUpN,MAAMloB,aAAa,eAAei1B,EAAShsC,EAAEpG,GAI/D,SAAS+xC,EAAsBI,EAAWC,EAAUlE,GAChD4D,EAAeK,EAAWC,EAAUlE,GACpC8D,EAAaG,EAAWC,EAAUlE,GAGtC,SAAS4D,EAAeK,EAAWC,EAAUlE,GACzC,IAkBI2C,EAAO/3C,EAAGkE,EAAKrL,EAqCXm5B,EAvDJomB,EAAQkB,EAASjB,GACjBuB,EAAaN,EAASlyC,EAAEstB,YACxBzjB,EAAMqoC,EAASryC,EAAEC,EAAGgK,EAAMooC,EAAStsC,EAAE9F,EAEzC,GAAIoyC,EAAShsC,EAAEzD,MAAQurC,EAAc,CACjC,IAAIx8B,EAAwB,OAAjBygC,EAAU5rC,GAAc,eAAiB,iBACpD6rC,EAASv0C,MAAMwnC,MAAMloB,aAAazL,EAAM0gC,EAAShsC,EAAEpG,GAEvD,GAAIoyC,EAASryC,EAAE4C,MAAQurC,EAAc,CACjC,IAAIyE,EAAwB,IAAhBR,EAAU5xC,EAAU,KAAO,KACnCqyC,EAAkB,OAAVD,EAAiB,KAAO,KACpCzB,EAAM/zB,aAAaw1B,EAAO5oC,EAAI,IAC9BmnC,EAAM/zB,aAAay1B,EAAO7oC,EAAI,IAC1B2oC,IAAeN,EAASlyC,EAAEotB,eAC1B8kB,EAASrZ,GAAG5b,aAAaw1B,EAAO5oC,EAAI,IACpCqoC,EAASrZ,GAAG5b,aAAay1B,EAAO7oC,EAAI,KAI5C,GAAIqoC,EAASlyC,EAAEktB,OAAS8gB,EAAc,CAClC2C,EAAQuB,EAAShB,IACjB,IAAIyB,EAAUT,EAASlyC,EAAE2F,EAEzB,IADA7I,EAAM6zC,EAAMh4C,OACPC,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EACtBnH,EAAOk/C,EAAM/3C,GACbnH,EAAKwrB,aAAa,SAAU01B,EAAY,EAAJ/5C,GAAS,KAC7CnH,EAAKwrB,aAAa,aAAa,OAAQ01B,EAAY,EAAJ/5C,EAAQ,GAAK,IAAM+5C,EAAY,EAAJ/5C,EAAQ,GAAK,IAAI+5C,EAAY,EAAJ/5C,EAAQ,GAAK,KAGxH,GAAI45C,IAAeN,EAASlyC,EAAEmtB,OAAS6gB,GAAe,CAClD,IAAI4E,EAAUV,EAASlyC,EAAEkG,EAOzB,IALIyqC,EADDuB,EAASlyC,EAAEotB,aACF8kB,EAAShB,IAETgB,EAASZ,IAErBx0C,EAAM6zC,EAAMh4C,OACPC,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EACtBnH,EAAOk/C,EAAM/3C,GACTs5C,EAASlyC,EAAEotB,cACX37B,EAAKwrB,aAAa,SAAU21B,EAAY,EAAJh6C,GAAS,KAEjDnH,EAAKwrB,aAAa,eAAgB21B,EAAY,EAAJh6C,EAAQ,IAG1D,GAAoB,IAAhBq5C,EAAU5xC,GACN6xC,EAAStsC,EAAEnD,MAASurC,KACpBgD,EAAM/zB,aAAa,KAAMnT,EAAI,IAC7BknC,EAAM/zB,aAAa,KAAMnT,EAAI,IACzB0oC,IAAeN,EAASlyC,EAAEotB,eAC1B8kB,EAASrZ,GAAG5b,aAAa,KAAMnT,EAAI,IACnCooC,EAASrZ,GAAG5b,aAAa,KAAMnT,EAAI,WAY3C,IAPIooC,EAASryC,EAAE4C,MAAQyvC,EAAStsC,EAAEnD,MAAQurC,KACtCpjB,EAAMpxB,KAAKyC,KAAKzC,KAAKuC,IAAI8N,EAAI,GAAKC,EAAI,GAAI,GAAKtQ,KAAKuC,IAAI8N,EAAI,GAAKC,EAAI,GAAI,IACzEknC,EAAM/zB,aAAa,IAAK2N,GACrB4nB,IAAeN,EAASlyC,EAAEotB,cACzB8kB,EAASrZ,GAAG5b,aAAa,IAAK2N,IAGlCsnB,EAAStsC,EAAEnD,MAAQyvC,EAAStyC,EAAE6C,MAAQyvC,EAASxsC,EAAEjD,MAAQurC,EAAc,CAClEpjB,IACDA,EAAMpxB,KAAKyC,KAAKzC,KAAKuC,IAAI8N,EAAI,GAAKC,EAAI,GAAI,GAAKtQ,KAAKuC,IAAI8N,EAAI,GAAKC,EAAI,GAAI,KAE7E,IAAI+oC,EAAMr5C,KAAK6pB,MAAMvZ,EAAI,GAAKD,EAAI,GAAIC,EAAI,GAAKD,EAAI,IAE/CyL,EAAU48B,EAAStyC,EAAEE,GAAK,EAAI,IAAOoyC,EAAStyC,EAAEE,IAAM,GAAK,IAAMoyC,EAAStyC,EAAEE,EAC5EmR,EAAO2Z,EAAMtV,EACbzM,EAAIrP,KAAKyK,IAAI4uC,EAAMX,EAASxsC,EAAE5F,GAAKmR,EAAOpH,EAAI,GAC9Cf,EAAItP,KAAK2K,IAAI0uC,EAAMX,EAASxsC,EAAE5F,GAAKmR,EAAOpH,EAAI,GAClDmnC,EAAM/zB,aAAa,KAAMpU,GACzBmoC,EAAM/zB,aAAa,KAAMnU,GACrB0pC,IAAeN,EAASlyC,EAAEotB,eAC1B8kB,EAASrZ,GAAG5b,aAAa,KAAMpU,GAC/BqpC,EAASrZ,GAAG5b,aAAa,KAAMnU,KAO/C,SAASgpC,EAAaG,EAAWC,EAAUlE,GACvC,IAAIuE,EAAYL,EAASv0C,MACrB4C,EAAI2xC,EAAS3xC,EACbA,IAAMA,EAAEkC,MAAQurC,IAAiBztC,EAAEssB,UACnC0lB,EAAUpN,MAAMloB,aAAa,mBAAoB1c,EAAEssB,SACnD0lB,EAAUpN,MAAMloB,aAAa,oBAAqB1c,EAAEwsB,WAAW,KAEhEmlB,EAASvsC,IAAMusC,EAASvsC,EAAElD,MAAQurC,IACjCuE,EAAUpN,MAAMloB,aAAa,SAAS,OAAS7gB,SAAS81C,EAASvsC,EAAE7F,EAAE,IAAM,IAAM1D,SAAS81C,EAASvsC,EAAE7F,EAAE,IAAM,IAAM1D,SAAS81C,EAASvsC,EAAE7F,EAAE,IAAM,MAEhJoyC,EAAShsC,EAAEzD,MAAQurC,IAClBuE,EAAUpN,MAAMloB,aAAa,iBAAkBi1B,EAAShsC,EAAEpG,IAE3DoyC,EAASl3B,EAAEvY,MAAQurC,KAClBuE,EAAUpN,MAAMloB,aAAa,eAAgBi1B,EAASl3B,EAAElb,GACrDyyC,EAAUnN,QACTmN,EAAUnN,OAAOnoB,aAAa,eAAgBi1B,EAASl3B,EAAElb,IAKrE,OAAOqO,EA/MkB,GAiN1B,SAAS2kC,wBACRhkD,KAAKikD,UAAY,GACjBjkD,KAAKkkD,aAAe,GACjBlkD,KAAKmkD,oBAAsB,EAqD/B,SAASC,YAAYx1C,EAASvN,EAAMiuC,EAAQ+U,GACxCrkD,KAAKskD,aAAe,GACpBtkD,KAAKuhC,GAAK,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,GACrB,IAAIhqB,EAAK,EACK,MAAXlW,EAAKkW,GACJA,EAAK,EACW,MAAXlW,EAAKkW,GACVA,EAAK,EACW,MAAXlW,EAAKkW,KACVA,EAAK,GAETvX,KAAK8yB,GAAK+G,qBAAqBkD,aAAanuB,EAAQvN,EAAKkW,EAAG3I,GAC5D,IAAI9E,EAAwBy6C,EAApBv2C,EAAMshC,EAAOzlC,OACrB,IAAKC,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EACjBwlC,EAAOxlC,GAAGsb,SACXm/B,EAAc,CACVpE,WAAYkE,EAAkBG,qBAAqBlV,EAAOxlC,GAAGq2C,YAC7DsE,QAAS,IAEbzkD,KAAKskD,aAAa/xC,KAAKgyC,GACvBjV,EAAOxlC,GAAG/G,SAASwP,KAAKgyC,IAMpC,SAASG,eA4DT,SAAS9K,YAAYv4C,EAAKq0B,EAAWtyB,GACjCpD,KAAK6wB,YACR7wB,KAAKmhD,aAAa9/C,EAAMq0B,EAAYtyB,GACjCpD,KAAK6wB,YACL7wB,KAAK6/C,cAAcx+C,EAAMq0B,EAAYtyB,GACrCpD,KAAKy/C,gBAyBT,SAASkF,kBA6JT,SAASC,iBAuET,SAASC,gBAgFT,SAASC,gBA8FT,SAAS/K,cAAc14C,EAAKq0B,EAAWtyB,GACnCpD,KAAKilC,UAAYvP,EAAW6jB,aAAal4C,EAAKsoB,OAC9C3pB,KAAKkhD,YAAY7/C,EAAKq0B,EAAWtyB,GACjCpD,KAAK+kD,WAAa,CAACh2C,IAAI,EAAEC,KAAK,EAAEmN,MAAMnc,KAAKilC,UAAU/Y,EAAEsY,OAAOxkC,KAAKilC,UAAUn0B,GAqBjF,SAASmpC,cAAc54C,EAAKq0B,EAAWtyB,GACnCpD,KAAKkhD,YAAY7/C,EAAKq0B,EAAWtyB,GAerC,SAAS42C,eAAe34C,EAAKq0B,EAAWtyB,GACpCpD,KAAK6oB,OAASxnB,EAAKwnB,OACnB7oB,KAAKq0C,YAAa,EAClBr0C,KAAK4oB,gBAAiB,EACtB5oB,KAAKqzC,gBAAkB,GACvBrzC,KAAK+C,SAAW/C,KAAK6oB,OAASza,iBAAiBpO,KAAK6oB,OAAOhf,QAAU,GAErE7J,KAAKkhD,YAAY7/C,EAAKq0B,EAAWtyB,GACjCpD,KAAKglD,GAAK3jD,EAAK2jD,GAAKp0B,gBAAgB8F,QAAQ12B,KAAKqB,EAAK2jD,GAAG,EAAEtvB,EAAWuC,UAAUj4B,MAAQ,CAACilD,cAAa,GAI1G,SAASnL,eAAez4C,EAAKq0B,EAAWtyB,GACpCpD,KAAKklD,UAAY,GACjBllD,KAAK2nC,WAAa,MAClB3nC,KAAKkhD,YAAY7/C,EAAKq0B,EAAWtyB,GA8MrC,SAASy2C,gBAAgBx4C,EAAKq0B,EAAWtyB,GAErCpD,KAAK6pB,OAAS,GAEd7pB,KAAKmlD,WAAa9jD,EAAKwoB,OAEvB7pB,KAAKolD,WAAa,GAElBplD,KAAKqlD,eAAiB,GAEtBrlD,KAAKslD,UAAY,GAEjBtlD,KAAKulD,kBAAoB,GAEzBvlD,KAAKwlD,iBAAmB,GACxBxlD,KAAKkhD,YAAY7/C,EAAKq0B,EAAWtyB,GAGjCpD,KAAKm3C,aAAe,GAySxB,SAASsO,cAAcC,EAAQC,GAC3B3lD,KAAK2lD,cAAgBA,EACrB,IAAIlf,EAAgBvzB,SAAS,iBAa7B,GAZAuzB,EAActY,aAAa,OAAO,UAClCsY,EAActY,aAAa,8BAA8B,aACzDsY,EAActY,aAAa,SAAS,wFACpCsY,EAActY,aAAa,SAAS,MACpCu3B,EAAOj6C,YAAYg7B,GACnBA,EAAgBvzB,SAAS,iBACzBuzB,EAActY,aAAa,OAAO,UAClCsY,EAActY,aAAa,8BAA8B,QACzDsY,EAActY,aAAa,SAAS,2CACpCsY,EAActY,aAAa,SAAS,MACpCu3B,EAAOj6C,YAAYg7B,GACnBzmC,KAAK4lD,aAAenf,EACuB,MAAxCkf,EAAcE,eAAe,GAAGx0C,EAAEL,GAAa20C,EAAcE,eAAe,GAAGx0C,EAAE2F,EAAE,CAClF,IAEI8uC,EAFAC,EAAU7yC,SAAS,WACvBwyC,EAAOj6C,YAAYs6C,GAEnBD,EAAc5yC,SAAS,eACvB4yC,EAAY33B,aAAa,KAAK,iBAC9B43B,EAAQt6C,YAAYq6C,GACpBA,EAAc5yC,SAAS,eACvB4yC,EAAY33B,aAAa,KAAK,MAC9B43B,EAAQt6C,YAAYq6C,IAY5B,SAASE,cAAcN,EAAQC,GAC3B3lD,KAAK2lD,cAAgBA,EACrB,IAAIlf,EAAgBvzB,SAAS,iBAC7BuzB,EAActY,aAAa,OAAO,UAClCsY,EAActY,aAAa,8BAA8B,QACzDsY,EAActY,aAAa,SAAS,2CACpCu3B,EAAOj6C,YAAYg7B,GACnBzmC,KAAK4lD,aAAenf,EASxB,SAASwf,sBAAsBP,EAAQC,GAEnCD,EAAOv3B,aAAa,IAAI,SACxBu3B,EAAOv3B,aAAa,IAAI,SACxBu3B,EAAOv3B,aAAa,QAAQ,QAC5Bu3B,EAAOv3B,aAAa,SAAS,QAE7BnuB,KAAK2lD,cAAgBA,EACrB,IAAIO,EAAiBhzC,SAAS,kBAC9BwyC,EAAOj6C,YAAYy6C,GACnBlmD,KAAKkmD,eAAiBA,EA6B1B,SAASC,gBAAgB1wB,EAAMkwB,GAC3B3lD,KAAKomD,aAAc,EACnBpmD,KAAK2lD,cAAgBA,EACrB3lD,KAAKy1B,KAAOA,EACZz1B,KAAKorB,MAAQ,GAuGjB,SAASi7B,iBAAiBX,EAAQC,GAC9B3lD,KAAK2lD,cAAgBA,EACrB,IAAIlf,EAAgBvzB,SAAS,iBAC7BuzB,EAActY,aAAa,OAAO,UAClCsY,EAActY,aAAa,8BAA8B,aACzDsY,EAActY,aAAa,SAAS,wFACpCsY,EAActY,aAAa,SAAS,MACpCu3B,EAAOj6C,YAAYg7B,GACnB,IAAI6f,EAAsBpzC,SAAS,uBACnCozC,EAAoBn4B,aAAa,8BAA8B,QAC/Du3B,EAAOj6C,YAAY66C,GACnBtmD,KAAK4lD,aAAeU,EACpB,IAAIC,EAAUrzC,SAAS,WACvBqzC,EAAQp4B,aAAa,OAAO,SAC5Bm4B,EAAoB76C,YAAY86C,GAChCvmD,KAAKumD,QAAUA,EACf,IAAIC,EAAUtzC,SAAS,WACvBszC,EAAQr4B,aAAa,OAAO,SAC5Bm4B,EAAoB76C,YAAY+6C,GAChCxmD,KAAKwmD,QAAUA,EACf,IAAIC,EAAUvzC,SAAS,WACvBuzC,EAAQt4B,aAAa,OAAO,SAC5Bm4B,EAAoB76C,YAAYg7C,GAChCzmD,KAAKymD,QAAUA,EAkBnB,SAASC,mBAAmBhB,EAAQC,GAChC3lD,KAAK2lD,cAAgBA,EACrB,IAAIE,EAAiB7lD,KAAK2lD,cAAcE,eACpCS,EAAsBpzC,SAAS,wBAGhC2yC,EAAe,IAAIx0C,EAAE2F,GAAgC,IAA3B6uC,EAAe,IAAIx0C,EAAEL,GAAW60C,EAAe,IAAIx0C,EAAE2F,GAAgC,IAA3B6uC,EAAe,IAAIx0C,EAAEL,GAAW60C,EAAe,IAAIx0C,EAAE2F,GAAgC,IAA3B6uC,EAAe,IAAIx0C,EAAEL,GAAW60C,EAAe,IAAIx0C,EAAE2F,GAAgC,IAA3B6uC,EAAe,IAAIx0C,EAAEL,GAAW60C,EAAe,IAAIx0C,EAAE2F,GAAgC,IAA3B6uC,EAAe,IAAIx0C,EAAEL,KACtRhR,KAAKumD,QAAUvmD,KAAK2mD,aAAa,UAAWL,KAE7CT,EAAe,IAAIx0C,EAAE2F,GAAgC,IAA3B6uC,EAAe,IAAIx0C,EAAEL,GAAW60C,EAAe,IAAIx0C,EAAE2F,GAAgC,IAA3B6uC,EAAe,IAAIx0C,EAAEL,GAAW60C,EAAe,IAAIx0C,EAAE2F,GAAgC,IAA3B6uC,EAAe,IAAIx0C,EAAEL,GAAW60C,EAAe,IAAIx0C,EAAE2F,GAAgC,IAA3B6uC,EAAe,IAAIx0C,EAAEL,GAAW60C,EAAe,IAAIx0C,EAAE2F,GAAgC,IAA3B6uC,EAAe,IAAIx0C,EAAEL,KACtRhR,KAAKwmD,QAAUxmD,KAAK2mD,aAAa,UAAWL,KAE7CT,EAAe,IAAIx0C,EAAE2F,GAAgC,IAA3B6uC,EAAe,IAAIx0C,EAAEL,GAAW60C,EAAe,IAAIx0C,EAAE2F,GAAgC,IAA3B6uC,EAAe,IAAIx0C,EAAEL,GAAW60C,EAAe,IAAIx0C,EAAE2F,GAAgC,IAA3B6uC,EAAe,IAAIx0C,EAAEL,GAAW60C,EAAe,IAAIx0C,EAAE2F,GAAgC,IAA3B6uC,EAAe,IAAIx0C,EAAEL,GAAW60C,EAAe,IAAIx0C,EAAE2F,GAAgC,IAA3B6uC,EAAe,IAAIx0C,EAAEL,KACtRhR,KAAKymD,QAAUzmD,KAAK2mD,aAAa,UAAWL,KAE7CT,EAAe,IAAIx0C,EAAE2F,GAAgC,IAA3B6uC,EAAe,IAAIx0C,EAAEL,GAAW60C,EAAe,IAAIx0C,EAAE2F,GAAgC,IAA3B6uC,EAAe,IAAIx0C,EAAEL,GAAW60C,EAAe,IAAIx0C,EAAE2F,GAAgC,IAA3B6uC,EAAe,IAAIx0C,EAAEL,GAAW60C,EAAe,IAAIx0C,EAAE2F,GAAgC,IAA3B6uC,EAAe,IAAIx0C,EAAEL,GAAW60C,EAAe,IAAIx0C,EAAE2F,GAAgC,IAA3B6uC,EAAe,IAAIx0C,EAAEL,KACtRhR,KAAK4mD,QAAU5mD,KAAK2mD,aAAa,UAAWL,KAG7CtmD,KAAKumD,SAAWvmD,KAAKwmD,SAAWxmD,KAAKymD,SAAWzmD,KAAK4mD,WACpDN,EAAoBn4B,aAAa,8BAA8B,QAC/Du3B,EAAOj6C,YAAY66C,GACnBA,EAAsBpzC,SAAS,yBAGhC2yC,EAAe,GAAGx0C,EAAE2F,GAA+B,IAA1B6uC,EAAe,GAAGx0C,EAAEL,GAAW60C,EAAe,GAAGx0C,EAAE2F,GAA+B,IAA1B6uC,EAAe,GAAGx0C,EAAEL,GAAW60C,EAAe,GAAGx0C,EAAE2F,GAA+B,IAA1B6uC,EAAe,GAAGx0C,EAAEL,GAAW60C,EAAe,GAAGx0C,EAAE2F,GAA+B,IAA1B6uC,EAAe,GAAGx0C,EAAEL,GAAW60C,EAAe,GAAGx0C,EAAE2F,GAA+B,IAA1B6uC,EAAe,GAAGx0C,EAAEL,KAE5Qs1C,EAAoBn4B,aAAa,8BAA8B,QAC/Du3B,EAAOj6C,YAAY66C,GACnBtmD,KAAK6mD,gBAAkB7mD,KAAK2mD,aAAa,UAAWL,GACpDtmD,KAAK8mD,gBAAkB9mD,KAAK2mD,aAAa,UAAWL,GACpDtmD,KAAK+mD,gBAAkB/mD,KAAK2mD,aAAa,UAAWL,IAuE5D,SAASU,oBAAoBtB,EAAQC,GACjCD,EAAOv3B,aAAa,IAAI,SACxBu3B,EAAOv3B,aAAa,IAAI,SACxBu3B,EAAOv3B,aAAa,QAAQ,QAC5Bu3B,EAAOv3B,aAAa,SAAS,QAC7BnuB,KAAK2lD,cAAgBA,EAErB,IAAIO,EAAiBhzC,SAAS,kBAC9BgzC,EAAe/3B,aAAa,KAAK,eACjC+3B,EAAe/3B,aAAa,SAAS,iBACrC+3B,EAAe/3B,aAAa,eAAe,KAC3CnuB,KAAKkmD,eAAiBA,EACtBR,EAAOj6C,YAAYy6C,GAEnB,IAAIe,EAAW/zC,SAAS,YACxB+zC,EAAS94B,aAAa,KAAK,MAC3B84B,EAAS94B,aAAa,KAAK,KAC3B84B,EAAS94B,aAAa,KAAK,iBAC3B84B,EAAS94B,aAAa,SAAS,iBAC/BnuB,KAAKinD,SAAWA,EAChBvB,EAAOj6C,YAAYw7C,GACnB,IAAIC,EAAUh0C,SAAS,WACvBg0C,EAAQ/4B,aAAa,cAAc,WACnC+4B,EAAQ/4B,aAAa,gBAAgB,KACrC+4B,EAAQ/4B,aAAa,SAAS,iBAC9BnuB,KAAKknD,QAAUA,EACfxB,EAAOj6C,YAAYy7C,GAEnB,IAAIC,EAAcj0C,SAAS,eAC3Bi0C,EAAYh5B,aAAa,KAAK,iBAC9Bg5B,EAAYh5B,aAAa,MAAM,iBAC/Bg5B,EAAYh5B,aAAa,WAAW,MACpCg5B,EAAYh5B,aAAa,SAAS,iBAClCu3B,EAAOj6C,YAAY07C,GAGnB,IAEIrB,EAFAC,EAAU7yC,SAAS,WACvBwyC,EAAOj6C,YAAYs6C,GAEnBD,EAAc5yC,SAAS,eACvB6yC,EAAQt6C,YAAYq6C,GACpBA,EAAc5yC,SAAS,eACvB4yC,EAAY33B,aAAa,KAAK,iBAC9BnuB,KAAK8lD,YAAcA,EACnB9lD,KAAK+lD,QAAUA,EACf/lD,KAAKonD,mBAAoB,EACzBrB,EAAQt6C,YAAYq6C,GA3/CxB9B,sBAAsB7/C,UAAY,CACjCqgD,qBAAsB,SAASrE,GAC9B,IAAIr2C,EAAGkE,EAAMmyC,EAAWt2C,OACpBiT,EAAM,IACV,IAAIhT,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EACxBgT,GAAOqjC,EAAWr2C,GAAG2N,UAAUqF,IAAM,IAEtC,IAAIuqC,EAAWrnD,KAAKikD,UAAUnnC,GAU9B,OATIuqC,IACHA,EAAW,CACVlH,WAAY,GAAG1vB,OAAO0vB,GACtBf,eAAgB,IAAInqC,OACpBtB,MAAM,GAEP3T,KAAKikD,UAAUnnC,GAAOuqC,EACtBrnD,KAAKkkD,aAAa3xC,KAAK80C,IAEjBA,GAERC,gBAAiB,SAASD,EAAUnI,GACnC,IASK39C,EATDuI,EAAI,EAAGkE,EAAMq5C,EAASlH,WAAWt2C,OAAQ8J,EAAOurC,EACpD,MAAOp1C,EAAIkE,IAAQkxC,EAAc,CAChC,GAAImI,EAASlH,WAAWr2C,GAAG2N,UAAUmsB,OAAOjwB,KAAM,CACjDA,GAAO,EACP,MAED7J,GAAK,EAEN,GAAI6J,EAGH,IADA0zC,EAASjI,eAAe3pC,QACnB3L,EAAIkE,EAAM,EAAGlE,GAAK,EAAGA,GAAK,EACxBvI,EAAQ8lD,EAASlH,WAAWr2C,GAAG2N,UAAUmsB,OAAO5yB,EAAEzP,MAClD8lD,EAASjI,eAAe3nC,UAAUlW,EAAM,GAAGA,EAAM,GAAGA,EAAM,GAAGA,EAAM,GAAGA,EAAM,GAAGA,EAAM,GAAGA,EAAM,GAAGA,EAAM,GAAGA,EAAM,GAAGA,EAAM,GAAGA,EAAM,IAAIA,EAAM,IAAIA,EAAM,IAAIA,EAAM,IAAIA,EAAM,IAAIA,EAAM,KAG5L8lD,EAAS1zC,KAAOA,GAGjB4zC,iBAAkB,SAASrI,GAC1B,IAAIp1C,EAAGkE,EAAMhO,KAAKkkD,aAAar6C,OAC/B,IAAKC,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EACzB9J,KAAKsnD,gBAAgBtnD,KAAKkkD,aAAap6C,GAAIo1C,IAI7CsI,UAAW,WACV,MAAO,IAAMxnD,KAAKmkD,wBA4BpBC,YAAYjgD,UAAUy6B,cAAgB2X,aAAapyC,UAAUy6B,cAI7D8lB,YAAYvgD,UAAY,CACpBsjD,WAAY,WACR,IAAIznD,KAAKqB,KAAKioB,QACV,OAAO,EAEX,IAAIxf,EAAI,EAAGkE,EAAMhO,KAAKqB,KAAKmoB,gBAAgB3f,OAC3C,MAAMC,EAAEkE,EAAK,CACT,GAA0C,MAAtChO,KAAKqB,KAAKmoB,gBAAgB1f,GAAGkL,OAAoD,IAApChV,KAAKqB,KAAKmoB,gBAAgB1f,GAAG2hB,GAC1E,OAAO,EAEX3hB,GAAK,EAET,OAAO,GAEXovC,gBAAiB,WACbl5C,KAAK0nD,eAAiBC,yBAAyB3nD,MAC5CA,KAAKqB,KAAKioB,SAAWtpB,KAAK4qC,aACzB5qC,KAAK0nD,eAAeE,sBAAsB5nD,KAAK4qC,aAEnD,IAAIid,EAAmBC,2BAA2BC,uBAAuB/nD,KAAKA,KAAK0nD,gBACnF1nD,KAAK0nD,eAAeM,yBAAyBH,GAEzB,IAAjB7nD,KAAKqB,KAAKkW,IAAYvX,KAAKqB,KAAK43C,GAC/Bj5C,KAAKioD,cAAgBC,wBAAwBloD,MACtB,IAAjBA,KAAKqB,KAAKkW,IAChBvX,KAAK0nD,eAAeS,eAAiBC,yBAAyBpoD,KAAKmlD,WAAWnlD,KAAKslD,UAAUtlD,KAAK0nD,gBAClG1nD,KAAK0nD,eAAeW,QAAUroD,KAAK0nD,eAAeS,gBAC3B,IAAjBnoD,KAAKqB,KAAKkW,KAChBvX,KAAK0nD,eAAeY,cAAgBC,wBAAwBvoD,MAC5DA,KAAK0nD,eAAejZ,KAAOzuC,KAAK0nD,eAAeY,gBAGvDE,aAAc,WACV,IAAIC,EAAiB30C,aAAa9T,KAAKqB,KAAKqnD,IACxCjzB,EAAOz1B,KAAKwhD,aAAexhD,KAAK2yC,aAEpCld,EAAK5mB,MAAM,kBAAoB45C,GAEnCtH,aAAc,SAAS9/C,EAAMq0B,EAAYtyB,GACrCpD,KAAK01B,WAAaA,EAClB11B,KAAKoD,KAAOA,EACZpD,KAAKqB,KAAOA,EACZrB,KAAK80C,QAAUnkC,kBAGX3Q,KAAKqB,KAAKsnD,KACV3oD,KAAKqB,KAAKsnD,GAAK,GAGnB3oD,KAAK4oD,eAAiB,IAAIC,eAAe7oD,KAAKqB,KAAKrB,KAAKA,KAAKwT,oBAGjEs1C,QAAS,WACL,OAAO9oD,KAAK0B,MAEfq/C,iBAAkB,cAUvBnH,YAAYz1C,UAAUu2C,aAAe,SAASpD,GAC1Ct3C,KAAK2/C,kBAAkBrI,GAAK,IAGhCsC,YAAYz1C,UAAUq2C,YAAc,aAGpCZ,YAAYz1C,UAAUw2C,eAAiB,WACtC,OAAO,MAGRf,YAAYz1C,UAAU8hC,QAAU,aAGhC2T,YAAYz1C,UAAU48C,iBAAmB,aAGzCnH,YAAYz1C,UAAU22C,KAAO,aAG7Bx4B,gBAAgB,CAACoiC,YAAY7O,iBAAiBF,iBAAiBC,cAAegE,aAK9E+K,eAAexgD,UAAY,CACvBi9C,oBAAqB,WACjBphD,KAAK2yC,aAAez/B,SAAS,MAEjCmuC,wBAAyB,WACrBrhD,KAAK+oD,aAAe71C,SAAS,KAC7BlT,KAAKgpD,mBAAqBhpD,KAAK2yC,aAC/B3yC,KAAKy1C,cAAgBz1C,KAAK2yC,aAC1B3yC,KAAKipD,cAAe,EACpB,IAEI3iB,EAAOC,EAAK2iB,EAFZC,EAAqB,KAGzB,GAAInpD,KAAKqB,KAAKgoB,IACV,GAAoB,GAAhBrpB,KAAKqB,KAAKgoB,IAA2B,GAAhBrpB,KAAKqB,KAAKgoB,GAAS,CACxC,IAAI+/B,EAASl2C,SAAS,QACtBk2C,EAAOj7B,aAAa,KAAMnuB,KAAK80C,SAC/BsU,EAAOj7B,aAAa,YAA6B,GAAhBnuB,KAAKqB,KAAKgoB,GAAU,YAAc,SACnE+/B,EAAO39C,YAAYzL,KAAK2yC,cACxBwW,EAAqBC,EACrBppD,KAAK01B,WAAW9G,KAAKnjB,YAAY29C,GAE5BljB,eAAeC,UAA4B,GAAhBnmC,KAAKqB,KAAKgoB,KACtC+/B,EAAOj7B,aAAa,YAAa,aACjCmY,EAAQ31B,kBACR41B,EAAMH,eAAeC,aAAaC,GAClCtmC,KAAK01B,WAAW9G,KAAKnjB,YAAY86B,GACjCA,EAAI96B,YAAY26B,eAAeI,gCAC/B0iB,EAAKh2C,SAAS,KACdg2C,EAAGz9C,YAAYzL,KAAK2yC,cACpBwW,EAAqBD,EACrBE,EAAO39C,YAAYy9C,GACnBA,EAAG/6B,aAAa,SAAS,OAAS/hB,aAAe,IAAMk6B,EAAQ,WAEhE,GAAmB,GAAhBtmC,KAAKqB,KAAKgoB,GAAS,CACzB,IAAIggC,EAAYn2C,SAAS,QACzBm2C,EAAUl7B,aAAa,KAAMnuB,KAAK80C,SAClCuU,EAAUl7B,aAAa,YAAY,SACnC,IAAIm7B,EAAcp2C,SAAS,KAC3Bm2C,EAAU59C,YAAY69C,GACtBhjB,EAAQ31B,kBACR41B,EAAMH,eAAeC,aAAaC,GAUlC,IAAIijB,EAAQr2C,SAAS,uBACrBq2C,EAAMp7B,aAAa,KAAK,iBACxBoY,EAAI96B,YAAY89C,GAChB,IAAIC,EAASt2C,SAAS,WACtBs2C,EAAOr7B,aAAa,OAAO,SAC3Bq7B,EAAOr7B,aAAa,cAAc,WAClCo7B,EAAM99C,YAAY+9C,GAElBxpD,KAAK01B,WAAW9G,KAAKnjB,YAAY86B,GACjC,IAAIkjB,EAAYv2C,SAAS,QACzBu2C,EAAUt7B,aAAa,QAAUnuB,KAAKoD,KAAK/B,KAAK6qB,GAChDu9B,EAAUt7B,aAAa,SAAUnuB,KAAKoD,KAAK/B,KAAKyP,GAChD24C,EAAUt7B,aAAa,IAAI,KAC3Bs7B,EAAUt7B,aAAa,IAAI,KAC3Bs7B,EAAUt7B,aAAa,OAAO,WAC9Bs7B,EAAUt7B,aAAa,UAAU,KACjCm7B,EAAYn7B,aAAa,SAAU,OAAS/hB,aAAe,IAAIk6B,EAAM,KACrEgjB,EAAY79C,YAAYg+C,GACxBH,EAAY79C,YAAYzL,KAAK2yC,cAC7BwW,EAAqBG,EAChBpjB,eAAeC,WAChBkjB,EAAUl7B,aAAa,YAAa,aACpCoY,EAAI96B,YAAY26B,eAAeI,gCAC/B0iB,EAAKh2C,SAAS,KACdo2C,EAAY79C,YAAYg+C,GACxBP,EAAGz9C,YAAYzL,KAAK2yC,cACpBwW,EAAqBD,EACrBI,EAAY79C,YAAYy9C,IAE5BlpD,KAAK01B,WAAW9G,KAAKnjB,YAAY49C,SAE9BrpD,KAAKqB,KAAK+nB,IACjBppB,KAAK+oD,aAAat9C,YAAYzL,KAAK2yC,cACnCwW,EAAqBnpD,KAAK+oD,aAC1B/oD,KAAKwhD,YAAcxhD,KAAK+oD,cAExB/oD,KAAKwhD,YAAcxhD,KAAK2yC,aAS5B,GAPI3yC,KAAKqB,KAAKqoD,IACV1pD,KAAK2yC,aAAaxkB,aAAa,KAAMnuB,KAAKqB,KAAKqoD,IAE/C1pD,KAAKqB,KAAKoqB,IACVzrB,KAAK2yC,aAAaxkB,aAAa,QAASnuB,KAAKqB,KAAKoqB,IAGjC,IAAjBzrB,KAAKqB,KAAKkW,KAAavX,KAAKqB,KAAK+0C,GAAI,CACrC,IAAIuT,EAAKz2C,SAAU,YACfuH,EAAKvH,SAAS,QAClBuH,EAAG0T,aAAa,IAAI,SAAWnuB,KAAKqB,KAAK6qB,EAAI,OAAclsB,KAAKqB,KAAK6qB,EAAI,IAAMlsB,KAAKqB,KAAKyP,EAAI,OAAS9Q,KAAKqB,KAAKyP,EAAI,KACpH,IAAI84C,EAASj5C,kBAKb,GAJAg5C,EAAGx7B,aAAa,KAAKy7B,GACrBD,EAAGl+C,YAAYgP,GACfza,KAAK01B,WAAW9G,KAAKnjB,YAAYk+C,GAE7B3pD,KAAKynD,aAAc,CACnB,IAAIoC,EAAU32C,SAAS,KACvB22C,EAAQ17B,aAAa,YAAY,OAAS/hB,aAAe,IAAIw9C,EAAS,KACtEC,EAAQp+C,YAAYzL,KAAK2yC,cACzB3yC,KAAKgpD,mBAAqBa,EACtBV,EACAA,EAAmB19C,YAAYzL,KAAKgpD,oBAEpChpD,KAAKwhD,YAAcxhD,KAAKgpD,wBAG5BhpD,KAAK2yC,aAAaxkB,aAAa,YAAY,OAAS/hB,aAAe,IAAIw9C,EAAO,KAIjE,IAAjB5pD,KAAKqB,KAAKqnD,IACV1oD,KAAKwoD,gBAIb/G,cAAe,WACPzhD,KAAKo/C,eAAeU,SACpB9/C,KAAKgpD,mBAAmB76B,aAAa,YAAanuB,KAAKo/C,eAAetoB,IAAInb,WAE1E3b,KAAKo/C,eAAeW,QACpB//C,KAAKgpD,mBAAmB76B,aAAa,UAAWnuB,KAAKo/C,eAAeC,MAAMjoC,EAAEpG,IAGpF4wC,mBAAoB,WAChB5hD,KAAK2yC,aAAe,KACpB3yC,KAAK+oD,aAAe,KACpB/oD,KAAK4qC,YAAY3E,WAErB0U,eAAgB,WACZ,OAAI36C,KAAKqB,KAAK+0C,GACH,KAEJp2C,KAAKwhD,aAEhBF,2BAA4B,WACxBthD,KAAK4qC,YAAc,IAAI0J,YAAYt0C,KAAKqB,KAAMrB,KAAMA,KAAK01B,YACzD11B,KAAK8pD,yBAA2B,IAAIC,WAAW/pD,OAEnDs6C,SAAU,SAASj0C,GACVrG,KAAK+oD,cAGV/oD,KAAK+oD,aAAa56B,aAAa,OAAQ,OAAS/hB,aAAe,IAAM/F,EAAK,OAMlFu+C,cAAczgD,UAAY,CACtB6lD,oBAAqB,SAAS3oD,GAC1B,IAAIyI,EAAGkE,EAAMhO,KAAKqlD,eAAex7C,OACjC,IAAIC,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACb9J,KAAKqlD,eAAev7C,GAAG8wB,SAASv5B,IAGxC4oD,2BAA4B,SAAS5oD,GACjC,IAAIyI,EAAI,EAAGkE,EAAMhO,KAAKqlD,eAAex7C,OACrC,MAAMC,EAAIkE,EACN,GAAGhO,KAAKqlD,eAAev7C,GAAGogD,oBAAoB7oD,GAC1C,OAAO,EAGf,OAAO,GAEX8oD,gBAAiB,WACb,GAAInqD,KAAKqlD,eAAex7C,OAAxB,CAGA,IAAIC,EAAGkE,EAAMhO,KAAK6pB,OAAOhgB,OACzB,IAAIC,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACb9J,KAAK6pB,OAAO/f,GAAGgpB,GAAGrd,QAItB,IADAzH,EAAMhO,KAAKqlD,eAAex7C,OACtBC,EAAEkE,EAAI,EAAElE,GAAG,EAAEA,GAAG,EAChB9J,KAAKqlD,eAAev7C,GAAG41B,cAAc1/B,KAAK81B,iBAGlDs0B,OAAQ,CACJ,EAAK,OACL,EAAK,QACL,EAAK,UAETC,OAAQ,CACJ,EAAK,QACL,EAAK,QACL,EAAK,SAETC,uBAAwB,SAAS70B,GAC7B,IAAI1yB,EAAW/C,KAAKulD,kBAChBz7C,EAAI,EAAGkE,EAAMjL,EAAS8G,OAC1B,MAAOC,EAAIkE,EAAK,CACZ,GAAIjL,EAAS+G,GAAG2rB,OAASA,EACrB,OAAO1yB,EAAS+G,GAAGgvB,IAEvBhvB,GAAK,EAET,OAAO,GAEXygD,oBAAqB,SAAS90B,EAAMqD,GAChC,IAAI/1B,EAAW/C,KAAKulD,kBAChBz7C,EAAI/G,EAAS8G,OACjB,MAAMC,EAEF,GADAA,GAAK,EACD/G,EAAS+G,GAAG2rB,OAASA,EAErB,YADA1yB,EAAS+G,GAAGgvB,IAAMA,GAI1B/1B,EAASwP,KAAK,IAAIyjC,iBAAiBvgB,EAAMqD,KAE7C4hB,aAAc,SAASpD,GACnBt3C,KAAK2gD,uBAAuBrJ,GAC5Bt3C,KAAK2/C,kBAAkBrI,EAAKt3C,KAAKsgD,aAMzCuE,aAAa1gD,UAAU+8C,YAAc,SAAS7/C,EAAKq0B,EAAWtyB,GAC1DpD,KAAKsoC,oBAAqB,EAC1BtoC,KAAK6wB,YACL7wB,KAAKmhD,aAAa9/C,EAAMq0B,EAAYtyB,GACpCpD,KAAKixC,aAAe,IAAI9H,aAAanpC,KAAMqB,EAAKkQ,EAAGvR,KAAKwT,mBACxDxT,KAAKwqD,aAAe,IAAI/iB,qBAAqBpmC,EAAKkQ,EAAGvR,KAAK2nC,WAAY3nC,MACtEA,KAAK6/C,cAAcx+C,EAAMq0B,EAAYtyB,GACrCpD,KAAKy/C,gBACLz/C,KAAKqgD,iBACLrgD,KAAKohD,sBACLphD,KAAKqhD,0BACLrhD,KAAKshD,6BACLthD,KAAKuhD,gBACLvhD,KAAK86C,OACL96C,KAAKwqD,aAAa7f,iBAAiB3qC,KAAKwT,oBAG5CqxC,aAAa1gD,UAAUu2C,aAAe,SAASpD,GAC3Ct3C,KAAK2T,MAAO,EACZ3T,KAAK2gD,uBAAuBrJ,GAC5Bt3C,KAAK2/C,kBAAkBrI,EAAKt3C,KAAKsgD,YAC9BtgD,KAAKixC,aAAat9B,MAAQ3T,KAAKixC,aAAanb,iBAC3C91B,KAAKyqD,eACLzqD,KAAKixC,aAAanb,eAAgB,EAClC91B,KAAKixC,aAAat9B,MAAO,IAIjCkxC,aAAa1gD,UAAUumD,gBAAkB,SAASjf,EAAc5hB,GAC5D,IAAI9S,EACSktB,EADPhb,EAAOY,EAAOhgB,OAEhB8gD,EAAW,GACf,IAAI5zC,EAAE,EAAEA,EAAEkS,EAAKlS,GAAG,EACdktB,EAAYpa,EAAO9S,GAAGoT,GAAGnT,EACzB2zC,GAAY3mB,iBAAiBC,EAAWA,EAAUn6B,EAAED,QAAQ,EAAM4hC,GAEtE,OAAOkf,GAGX9F,aAAa1gD,UAAUnB,mBAAqB,SAASqtC,EAASlgB,GAC1DnwB,KAAKixC,aAAajuC,mBAAmBqtC,EAASlgB,IAGlD00B,aAAa1gD,UAAUqsC,cAAgB,SAASC,GAC5CzwC,KAAKixC,aAAaT,cAAcC,IAGpCoU,aAAa1gD,UAAUusC,mBAAqB,SAASka,GACjD5qD,KAAKixC,aAAaP,mBAAmBka,IAGzC/F,aAAa1gD,UAAU0mD,4BAA8B,SAAS//B,EAAc2gB,EAAcqf,EAAY/f,EAAMC,GAKxG,OAJGlgB,EAAakf,IACZyB,EAAap0B,UAAUyT,EAAakf,GAAG,GAAGlf,EAAakf,GAAG,GAAKlf,EAAa0e,OAAO,GAEvFiC,EAAap0B,UAAU,GAAGyT,EAAagf,GAAG,GACnChf,EAAa/T,GAChB,KAAK,EACD00B,EAAap0B,UAAUyT,EAAa6e,eAAiB7e,EAAa2e,SAAW3e,EAAa+e,WAAWihB,IAAa,EAAE,GACpH,MACJ,KAAK,EACDrf,EAAap0B,UAAUyT,EAAa6e,eAAiB7e,EAAa2e,SAAW3e,EAAa+e,WAAWihB,IAAc,EAAE,EAAE,GACvH,MAERrf,EAAap0B,UAAU0zB,EAAMC,EAAM,IAIvC6Z,aAAa1gD,UAAU4mD,WAAa,SAASC,GACzC,MAAO,OAAStgD,KAAKoC,MAAmB,IAAbk+C,EAAU,IAAU,IAAMtgD,KAAKoC,MAAmB,IAAbk+C,EAAU,IAAU,IAAMtgD,KAAKoC,MAAmB,IAAbk+C,EAAU,IAAU,KAG7HnG,aAAa1gD,UAAU8mD,UAAY,IAAI/hB,YAEvC2b,aAAa1gD,UAAU8hC,QAAU,aAKjC3jB,gBAAgB,CAACoiC,YAAa7O,iBAAkBF,iBAAkBC,aAAcG,sBAAuB+O,cAEvGA,aAAa3gD,UAAU+8C,YAAc,SAAS7/C,EAAKq0B,EAAWtyB,GAC1DpD,KAAK6wB,YACL7wB,KAAKmhD,aAAa9/C,EAAMq0B,EAAYtyB,GACpCpD,KAAK6/C,cAAcx+C,EAAMq0B,EAAYtyB,GACrCpD,KAAKqgD,iBACLrgD,KAAKy/C,gBACLz/C,KAAKohD,sBACLphD,KAAKqhD,0BACLrhD,KAAKshD,8BACFthD,KAAKqB,KAAK43C,IAAOvjB,EAAWqd,iBAC3B/yC,KAAKm4C,gBAETn4C,KAAK86C,QAeTgK,aAAa3gD,UAAUu2C,aAAe,SAASpD,GAI3C,GAHAt3C,KAAK2T,MAAO,EACZ3T,KAAK2gD,uBAAuBrJ,GAC5Bt3C,KAAK2/C,kBAAkBrI,EAAKt3C,KAAKsgD,WAC7BtgD,KAAKsgD,WAActgD,KAAKqB,KAAK43C,GAAjC,CAIA,GAAKj5C,KAAKglD,GAAGC,aAOTjlD,KAAKi1B,cAAgBqiB,EAAIt3C,KAAKqB,KAAKsnD,OAPZ,CACvB,IAAIuC,EAAelrD,KAAKglD,GAAGh0C,EACxBk6C,IAAiBlrD,KAAKqB,KAAKwiC,KAC1BqnB,EAAelrD,KAAKqB,KAAKwiC,GAAK,GAElC7jC,KAAKi1B,cAAgBi2B,EAIzB,IAAIphD,EAAEkE,EAAMhO,KAAK+C,SAAS8G,OAK1B,IAJI7J,KAAK4oB,gBACL5oB,KAAKq3C,YAAYr3C,KAAKi1B,eAGrBnrB,EAAIkE,EAAM,EAAGlE,GAAK,EAAGA,GAAK,GACxB9J,KAAK4oB,gBAAkB5oB,KAAK+C,SAAS+G,MACpC9J,KAAK+C,SAAS+G,GAAG4wC,aAAa16C,KAAKi1B,cAAgBj1B,KAAK6oB,OAAO/e,GAAGysB,IAC/Dv2B,KAAK+C,SAAS+G,GAAG6J,OAChB3T,KAAK2T,MAAO,MAM5BmxC,aAAa3gD,UAAUu9C,mBAAqB,WACxC,IAAI53C,EAAEkE,EAAMhO,KAAK6oB,OAAOhf,OACxB,IAAKC,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,GACnB9J,KAAK4oB,gBAAkB5oB,KAAK+C,SAAS+G,KACpC9J,KAAK+C,SAAS+G,GAAG0wC,eAK7BsK,aAAa3gD,UAAUgnD,YAAc,SAASC,GAC1CprD,KAAK+C,SAAWqoD,GAGpBtG,aAAa3gD,UAAUknD,YAAc,WACjC,OAAOrrD,KAAK+C,UAGhB+hD,aAAa3gD,UAAUmnD,gBAAkB,WACrC,IAAIxhD,EAAEkE,EAAMhO,KAAK6oB,OAAOhf,OACxB,IAAKC,EAAI,EAAGA,EAAIkE,EAAKlE,GAAG,EACjB9J,KAAK+C,SAAS+G,IACb9J,KAAK+C,SAAS+G,GAAGm8B,WAK7B6e,aAAa3gD,UAAU8hC,QAAU,WAC7BjmC,KAAKsrD,kBACLtrD,KAAK4hD,sBASTt/B,gBAAgB,CAACoiC,YAAY7O,iBAAiB8O,eAAehP,iBAAiBC,aAAaG,sBAAuBgE,eAElHA,cAAc51C,UAAUo9C,cAAgB,WAEpC,IAAIgK,EAAYvrD,KAAK01B,WAAWsP,cAAchlC,KAAKilC,WAEnDjlC,KAAK2hD,UAAYzuC,SAAS,SAC1BlT,KAAK2hD,UAAUxzB,aAAa,QAAQnuB,KAAKilC,UAAU/Y,EAAE,MACrDlsB,KAAK2hD,UAAUxzB,aAAa,SAASnuB,KAAKilC,UAAUn0B,EAAE,MACtD9Q,KAAK2hD,UAAUxzB,aAAa,sBAAsBnuB,KAAKilC,UAAUumB,IAAMxrD,KAAK01B,WAAWkd,aAAaE,0BACpG9yC,KAAK2hD,UAAU8J,eAAe,+BAA+B,OAAOF,GAEpEvrD,KAAK2yC,aAAalnC,YAAYzL,KAAK2hD,YAGvC5H,cAAc51C,UAAU48C,iBAAmB,WAC1C,OAAO/gD,KAAK+kD,YAKbziC,gBAAgB,CAACy3B,eAAgBE,eAEjCA,cAAc91C,UAAUo9C,cAAgB,WAEpC,IAAI9M,EAAOvhC,SAAS,QAIpBuhC,EAAKtmB,aAAa,QAAQnuB,KAAKqB,KAAKsnC,IACpC8L,EAAKtmB,aAAa,SAASnuB,KAAKqB,KAAKyxB,IACrC2hB,EAAKtmB,aAAa,OAAOnuB,KAAKqB,KAAKkuB,IACnCvvB,KAAK2yC,aAAalnC,YAAYgpC,IAalCnyB,gBAAgB,CAAC0vB,YAAa8S,aAAcH,gBAAiB3K,gBAO7D13B,gBAAgB,CAACoiC,YAAY7O,iBAAiB8O,eAAehP,iBAAiBC,aAAaG,qBAAqB8O,cAAe/K,gBAE/HA,eAAe31C,UAAUo9C,cAAgB,WAEjCvhD,KAAKqB,KAAKuqB,cAAgB5rB,KAAK01B,WAAW3M,YAAYmC,QACtDlrB,KAAK0rD,cAAgBx4C,SAAS,UAItC4mC,eAAe31C,UAAUwnD,kBAAoB,SAASC,GAClD,IAAI9hD,EAAI,EAAGkE,EAAM49C,EAAU/hD,OACvBgiD,EAAe,GAAIC,EAAqB,GAC5C,MAAOhiD,EAAIkE,EACJ49C,EAAU9hD,KAAO9H,OAAOmd,aAAa,KAAOysC,EAAU9hD,KAAO9H,OAAOmd,aAAa,IAChF0sC,EAAat5C,KAAKu5C,GAClBA,EAAqB,IAErBA,GAAsBF,EAAU9hD,GAEpCA,GAAK,EAGT,OADA+hD,EAAat5C,KAAKu5C,GACXD,GAGX/R,eAAe31C,UAAUsmD,aAAe,WACpC,IAAI3gD,EAAGkE,EAEH8c,EAAe9qB,KAAKixC,aAAa1H,YACrCvpC,KAAKqoC,gBAAkBj6B,iBAAiB0c,EAAeA,EAAa7T,EAAEpN,OAAS,GAC5EihB,EAAa8d,GACZ5oC,KAAK2yC,aAAaxkB,aAAa,OAAQnuB,KAAK+qD,WAAWjgC,EAAa8d,KAEpE5oC,KAAK2yC,aAAaxkB,aAAa,OAAQ,iBAExCrD,EAAayE,KACZvvB,KAAK2yC,aAAaxkB,aAAa,SAAUnuB,KAAK+qD,WAAWjgC,EAAayE,KACtEvvB,KAAK2yC,aAAaxkB,aAAa,eAAgBrD,EAAa6d,KAEhE3oC,KAAK2yC,aAAaxkB,aAAa,YAAarD,EAAauf,WACzD,IAAIpc,EAAWjuB,KAAK01B,WAAW3M,YAAYmH,cAAcpF,EAAa1Z,GACtE,GAAG6c,EAASO,OACRxuB,KAAK2yC,aAAaxkB,aAAa,QAAQF,EAASO,YAC7C,CACHxuB,KAAK2yC,aAAaxkB,aAAa,cAAeF,EAASG,SACvD,IAAIE,EAAUxD,EAAawD,QAASD,EAASvD,EAAauD,OAC1DruB,KAAK2yC,aAAaxkB,aAAa,aAAcE,GAC7CruB,KAAK2yC,aAAaxkB,aAAa,cAAeG,GAElDtuB,KAAK2yC,aAAaxkB,aAAa,aAAcrD,EAAavZ,GAE1D,IAIIw6C,EAJAngB,EAAU9gB,EAAa7T,GAAK,GAC5B+0C,IAAehsD,KAAK01B,WAAW3M,YAAYmC,MAC/Cld,EAAM49B,EAAQ/hC,OAGd,IACIggB,EADA4hB,EAAezrC,KAAK0rC,QACZif,EAAW,GAAI/+B,EAAc5rB,KAAKqB,KAAKuqB,YAC/Cmf,EAAO,EAAGC,EAAO,EAAGkB,GAAY,EAChCsD,EAAiB1kB,EAAayW,GAAG,IAAKzW,EAAauf,UACvD,IAAGze,GAAgBogC,GAAelhC,EAAapU,GA4BxC,CACH,IACIuO,EAAW8pB,EADXkd,EAAoBjsD,KAAKklD,UAAUr7C,OAEvC,IAAKC,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EAClBkiD,GAAepgC,GAAqB,IAAN9hB,IAC9BiiD,EAAQE,EAAoBniD,EAAI9J,KAAKklD,UAAUp7C,GAAKoJ,SAAS84C,EAAW,OAAO,QAC3EC,GAAqBniD,IACrBiiD,EAAM59B,aAAa,iBAAkB,QACrC49B,EAAM59B,aAAa,kBAAkB,SACrC49B,EAAM59B,aAAa,oBAAoB,KACvCnuB,KAAKklD,UAAUp7C,GAAKiiD,EACpB/rD,KAAK2yC,aAAalnC,YAAYsgD,IAElCA,EAAMl9C,MAAMI,QAAU,WAG1Bw8B,EAAah2B,QACbg2B,EAAah1B,MAAMqU,EAAauf,UAAY,IAAKvf,EAAauf,UAAY,KACtEze,IACGggB,EAAQ9hC,GAAGqN,IACV4zB,GAAQyE,EACRxE,GAAQlgB,EAAasf,QACrBY,GAAQkB,EAAY,EAAI,EACxBA,GAAY,GAEhBlsC,KAAK6qD,4BAA4B//B,EAAc2gB,EAAcG,EAAQ9hC,GAAG2jC,KAAM1C,EAAMC,GACpFD,GAAQa,EAAQ9hC,GAAGmN,GAAK,EAExB8zB,GAAQyE,GAETwc,GACCjd,EAAW/uC,KAAK01B,WAAW3M,YAAY8G,YAAY/E,EAAawf,UAAUxgC,GAAImkB,EAASI,OAAQruB,KAAK01B,WAAW3M,YAAYmH,cAAcpF,EAAa1Z,GAAGgd,SACzJnJ,EAAY8pB,GAAYA,EAAS1tC,MAAQ,GACzCwoB,EAAS5E,EAAU4E,OAAS5E,EAAU4E,OAAO,GAAGO,GAAK,GACjDwB,EAGA++B,GAAY3qD,KAAK0qD,gBAAgBjf,EAAa5hB,GAF9CkiC,EAAM59B,aAAa,IAAInuB,KAAK0qD,gBAAgBjf,EAAa5hB,MAK1D+B,GACCmgC,EAAM59B,aAAa,YAAa,aAAesd,EAAalqC,MAAM,IAAM,IAAMkqC,EAAalqC,MAAM,IAAM,KAE3GwqD,EAAMx9B,YAAcqd,EAAQ9hC,GAAGmE,IAC/B89C,EAAMN,eAAe,uCAAwC,YAAY,aAI7E7/B,GAAemgC,GACfA,EAAM59B,aAAa,IAAIw8B,OA7EoB,CAC/C,IAAIuB,EAAWlsD,KAAK0rD,cAChBS,EAAU,QACd,OAAOrhC,EAAa/T,GAChB,KAAK,EACDo1C,EAAU,MACV,MACJ,KAAK,EACDA,EAAU,SACV,MAERD,EAAS/9B,aAAa,cAAcg+B,GACpCD,EAAS/9B,aAAa,iBAAiBqhB,GACvC,IAAIjhB,EAAcvuB,KAAK2rD,kBAAkB7gC,EAAawf,WAGtD,IAFAt8B,EAAMugB,EAAY1kB,OAClBmhC,EAAOlgB,EAAakf,GAAKlf,EAAakf,GAAG,GAAKlf,EAAa0e,OAAS,EAC9D1/B,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EACvBiiD,EAAQ/rD,KAAKklD,UAAUp7C,IAAMoJ,SAAS,SACtC64C,EAAMx9B,YAAcA,EAAYzkB,GAChCiiD,EAAM59B,aAAa,IAAK,GACxB49B,EAAM59B,aAAa,IAAK6c,GACxB+gB,EAAMl9C,MAAMI,QAAU,UACtBi9C,EAASzgD,YAAYsgD,GACrB/rD,KAAKklD,UAAUp7C,GAAKiiD,EACpB/gB,GAAQlgB,EAAayf,gBAGzBvqC,KAAK2yC,aAAalnC,YAAYygD,GAqDlC,MAAOpiD,EAAI9J,KAAKklD,UAAUr7C,OACtB7J,KAAKklD,UAAUp7C,GAAG+E,MAAMI,QAAU,OAClCnF,GAAK,EAGT9J,KAAKipD,cAAe,GAGxBnP,eAAe31C,UAAU48C,iBAAmB,SAAS7tB,GAGjD,GAFAlzB,KAAK06C,aAAa16C,KAAKoD,KAAK6xB,cAAgBj1B,KAAKqB,KAAKk1B,IACtDv2B,KAAK0hD,qBACF1hD,KAAKipD,aAAa,CACjBjpD,KAAKipD,cAAe,EACpB,IAAImD,EAAUpsD,KAAK2yC,aAAa0Z,UAChCrsD,KAAKssD,KAAO,CACRv9C,IAAKq9C,EAAQpyC,EACbhL,KAAMo9C,EAAQryC,EACdoC,MAAOiwC,EAAQjwC,MACfqoB,OAAQ4nB,EAAQ5nB,QAGxB,OAAOxkC,KAAKssD,MAGhBxS,eAAe31C,UAAUu9C,mBAAqB,WAE1C,IAAI1hD,KAAKqB,KAAKuqB,cACV5rB,KAAKwqD,aAAa1f,YAAY9qC,KAAKixC,aAAa1H,YAAavpC,KAAKsoC,oBAC/DtoC,KAAKsoC,oBAAsBtoC,KAAKwqD,aAAaliB,oBAAmB,CAE/D,IAAKx+B,EAAEkE,EADPhO,KAAKipD,cAAe,EAEpB,IAKIsD,EAAgBC,EALhBnkB,EAAkBroC,KAAKwqD,aAAaniB,gBAEpCuD,EAAU5rC,KAAKixC,aAAa1H,YAAYtyB,EAI5C,IAFAjJ,EAAM49B,EAAQ/hC,OAEVC,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACV8hC,EAAQ9hC,GAAGqN,IAGdo1C,EAAiBlkB,EAAgBv+B,GACjC0iD,EAAWxsD,KAAKklD,UAAUp7C,GACvByiD,EAAe54C,KAAKuD,GACnBs1C,EAASr+B,aAAa,YAAYo+B,EAAer1C,GAElDq1C,EAAe54C,KAAKyD,GACnBo1C,EAASr+B,aAAa,UAAUo+B,EAAen1C,GAEhDm1C,EAAe54C,KAAKg1B,IACnB6jB,EAASr+B,aAAa,eAAeo+B,EAAe5jB,IAErD4jB,EAAe54C,KAAK4b,IACnBi9B,EAASr+B,aAAa,SAASo+B,EAAeh9B,IAE/Cg9B,EAAe54C,KAAKi1B,IACnB4jB,EAASr+B,aAAa,OAAOo+B,EAAe3jB,OA6BhEtmB,gBAAgB,CAACoiC,YAAY7O,iBAAiB8O,eAAeC,cAAcjP,iBAAiBC,aAAaG,sBAAuB8D,iBAEhIA,gBAAgB11C,UAAUsoD,qBAAuB,aAGjD5S,gBAAgB11C,UAAUuoD,eAAiB,IAAIz3C,OAE/C4kC,gBAAgB11C,UAAUwoD,yBAA2B,aAErD9S,gBAAgB11C,UAAUo9C,cAAgB,WACtCvhD,KAAK4sD,aAAa5sD,KAAKmlD,WAAWnlD,KAAKslD,UAAUtlD,KAAKm3C,aAAan3C,KAAK2yC,aAAc,EAAG,IAAI,GAC7F3yC,KAAK6sD,sBAMThT,gBAAgB11C,UAAU0oD,mBAAqB,WAC3C,IAAI/iD,EAA6B60B,EAC7B5nB,EACAlI,EAFGb,EAAMhO,KAAK6pB,OAAOhgB,OAClBof,EAAOjpB,KAAKolD,WAAWv7C,OAE1BijD,EAAa,GACbC,GAAc,EAClB,IAAIh2C,EAAI,EAAGA,EAAIkS,EAAMlS,GAAK,EAAG,CAIzB,IAHAlI,EAAQ7O,KAAKolD,WAAWruC,GACxBg2C,GAAc,EACdD,EAAWjjD,OAAS,EAChBC,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EACrB60B,EAAQ3+B,KAAK6pB,OAAO/f,IACgB,IAAjC60B,EAAM2Q,OAAOxkC,QAAQ+D,KACpBi+C,EAAWv6C,KAAKosB,GAChBouB,EAAcpuB,EAAMlrB,aAAes5C,GAGxCD,EAAWjjD,OAAS,GAAKkjD,GACxB/sD,KAAKgtD,oBAAoBF,KAKrCjT,gBAAgB11C,UAAU6oD,oBAAsB,SAASnjC,GACrD,IAAI/f,EAAGkE,EAAM6b,EAAOhgB,OACpB,IAAIC,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EACrB+f,EAAO/f,GAAG80B,iBAIlBib,gBAAgB11C,UAAU8oD,mBAAqB,SAAS5rD,EAAM60C,GAE1D,IAAIgX,EACArW,EAAU,IAAIZ,aAAa50C,EAAM60C,GAEjC8L,EAAcnL,EAAQR,MAC1B,GAAe,OAAZh1C,EAAKkW,GACJ21C,EAAc,IAAItW,mBAAmB52C,KAAMqB,EAAMw1C,QAC9C,GAAe,OAAZx1C,EAAKkW,GACX21C,EAAc,IAAIpW,iBAAiB92C,KAAMqB,EAAMw1C,QAC5C,GAAe,OAAZx1C,EAAKkW,IAA2B,OAAZlW,EAAKkW,GAAa,CAC5C,IAAI41C,EAAkC,OAAZ9rD,EAAKkW,GAAcw/B,yBAA2BE,2BACxEiW,EAAc,IAAIC,EAAoBntD,KAAMqB,EAAMw1C,GAClD72C,KAAK01B,WAAW9G,KAAKnjB,YAAYyhD,EAAY/K,IACzC+K,EAAY/S,SACZn6C,KAAK01B,WAAW9G,KAAKnjB,YAAYyhD,EAAY3K,IAC7CviD,KAAK01B,WAAW9G,KAAKnjB,YAAYyhD,EAAYnjB,IAC7CiY,EAAY7zB,aAAa,OAAO,OAAS/hB,aAAe,IAAM8gD,EAAY/S,OAAS,MA4B3F,MAxBe,OAAZ94C,EAAKkW,IAA2B,OAAZlW,EAAKkW,KACxByqC,EAAY7zB,aAAa,iBAAkBnuB,KAAKoqD,OAAO/oD,EAAK+rD,KAAO,SACnEpL,EAAY7zB,aAAa,kBAAkBnuB,KAAKqqD,OAAOhpD,EAAKgsD,KAAO,SACnErL,EAAY7zB,aAAa,eAAe,KACzB,IAAZ9sB,EAAKgsD,IACJrL,EAAY7zB,aAAa,oBAAoB9sB,EAAKisD,KAI5C,IAAXjsD,EAAK4P,GACJ+wC,EAAY7zB,aAAa,YAAa,WAGvC9sB,EAAKqoD,IACJ1H,EAAY7zB,aAAa,KAAK9sB,EAAKqoD,IAEpCroD,EAAKoqB,IACJu2B,EAAY7zB,aAAa,QAAQ9sB,EAAKoqB,IAEvCpqB,EAAKqnD,KACJ1G,EAAYnzC,MAAM,kBAAoBiF,aAAazS,EAAKqnD,KAE5D1oD,KAAKolD,WAAW7yC,KAAKskC,GACrB72C,KAAKutD,sBAAsBlsD,EAAM6rD,GAC1BA,GAGXrT,gBAAgB11C,UAAUqpD,mBAAqB,SAASnsD,GACpD,IAAI6rD,EAAc,IAAIhW,eAUtB,OATG71C,EAAKqoD,IACJwD,EAAY9V,GAAGjpB,aAAa,KAAK9sB,EAAKqoD,IAEvCroD,EAAKoqB,IACJyhC,EAAY9V,GAAGjpB,aAAa,QAAQ9sB,EAAKoqB,IAE1CpqB,EAAKqnD,KACJwE,EAAY9V,GAAGvoC,MAAM,kBAAoBiF,aAAazS,EAAKqnD,KAExDwE,GAGXrT,gBAAgB11C,UAAUspD,uBAAyB,SAASpsD,EAAMgB,GAC9D,IAAIqrD,EAAoB/2B,yBAAyB2B,qBAAqBt4B,KAAKqB,EAAKrB,MAC5EktD,EAAc,IAAIvW,iBAAiB+W,EAAmBA,EAAkBt2C,EAAG/U,GAE/E,OADArC,KAAKutD,sBAAsBlsD,EAAM6rD,GAC1BA,GAGXrT,gBAAgB11C,UAAUwpD,mBAAqB,SAAStsD,EAAMusD,EAAiB1X,GAC3E,IAAI3+B,EAAK,EACM,OAAZlW,EAAKkW,GACJA,EAAK,EACY,OAAZlW,EAAKkW,GACVA,EAAK,EACY,OAAZlW,EAAKkW,KACVA,EAAK,GAET,IAAIs2C,EAAgBh0B,qBAAqBkD,aAAa/8B,KAAKqB,EAAKkW,EAAGvX,MAC/DktD,EAAc,IAAI3W,aAAaqX,EAAiB1X,EAAO2X,GAI3D,OAHA7tD,KAAK6pB,OAAOtX,KAAK26C,GACjBltD,KAAKgqD,oBAAoBkD,GACzBltD,KAAKutD,sBAAsBlsD,EAAM6rD,GAC1BA,GAGXrT,gBAAgB11C,UAAUopD,sBAAwB,SAASlsD,EAAMuN,GAC7D,IAAI9E,EAAI,EAAGkE,EAAMhO,KAAKwlD,iBAAiB37C,OACvC,MAAMC,EAAIkE,EAAK,CACX,GAAGhO,KAAKwlD,iBAAiB17C,GAAG8E,UAAYA,EACpC,OAEJ9E,GAAK,EAET9J,KAAKwlD,iBAAiBjzC,KAAK,CACvBtO,GAAIw+C,oBAAoBG,qBAAqBvhD,GAC7CuN,QAASA,EACTvN,KAAMA,KAIdw4C,gBAAgB11C,UAAU2pD,iBAAmB,SAASZ,GAClD,IACIn2C,EADAjE,EAAMo6C,EAAY5d,OACfrmB,EAAOjpB,KAAKolD,WAAWv7C,OAC9B,IAAKkN,EAAI,EAAGA,EAAIkS,EAAMlS,GAAK,EAClB/W,KAAKolD,WAAWruC,GAAGqO,QACpBtS,EAAIP,KAAKvS,KAAKolD,WAAWruC,KAKrC8iC,gBAAgB11C,UAAUk/B,aAAe,WACrCrjC,KAAK81B,eAAgB,EACrB,IAAIhsB,EAAGkE,EAAMhO,KAAKslD,UAAUz7C,OAC5B,IAAKC,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EACtB9J,KAAKm3C,aAAartC,GAAK9J,KAAKslD,UAAUx7C,GAK1C,IAHA9J,KAAK4sD,aAAa5sD,KAAKmlD,WAAWnlD,KAAKslD,UAAUtlD,KAAKm3C,aAAan3C,KAAK2yC,aAAc,EAAG,IAAI,GAC7F3yC,KAAK6sD,qBACL7+C,EAAMhO,KAAKwT,kBAAkB3J,OACzBC,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EACrB9J,KAAKwT,kBAAkB1J,GAAG8J,WAE9B5T,KAAKmqD,mBAGTtQ,gBAAgB11C,UAAUyoD,aAAe,SAAS95C,EAAIwyC,EAAUnO,EAAa90C,EAAW6zC,EAAOM,EAAc12C,GACzG,IACIgK,EACAiN,EAAGkS,EACyC8kC,EAAkBC,EAAUC,EAHxEL,EAAkB,GAAGn9B,OAAO+lB,GACzBxoC,EAAM8E,EAAIjJ,OAAS,EAEtBqkD,EAAY,GAAIC,EAAe,GACnC,IAAIrkD,EAAEkE,EAAIlE,GAAG,EAAEA,GAAG,EAAE,CAOhB,GANAmkD,EAAejuD,KAAKsqD,uBAAuBx3C,EAAIhJ,IAC3CmkD,EAGA3I,EAAUx7C,GAAKqtC,EAAa8W,EAAe,GAF3Cn7C,EAAIhJ,GAAGg5B,QAAUhjC,EAIL,MAAbgT,EAAIhJ,GAAGyN,IAA2B,MAAbzE,EAAIhJ,GAAGyN,IAA2B,MAAbzE,EAAIhJ,GAAGyN,IAA2B,MAAbzE,EAAIhJ,GAAGyN,GACjE02C,EAGA3I,EAAUx7C,GAAG+E,MAAMuW,QAAS,EAF5BkgC,EAAUx7C,GAAK9J,KAAKitD,mBAAmBn6C,EAAIhJ,GAAIosC,GAIhDpjC,EAAIhJ,GAAGg5B,SACNzgC,EAAUoJ,YAAY65C,EAAUx7C,GAAG+E,MAAMwnC,OAE7C6X,EAAU37C,KAAK+yC,EAAUx7C,GAAG+E,YAC1B,GAAgB,MAAbiE,EAAIhJ,GAAGyN,GAAW,CACvB,GAAI02C,EAIA,IADAhlC,EAAOq8B,EAAUx7C,GAAGsgB,GAAGvgB,OACnBkN,EAAE,EAAEA,EAAEkS,EAAKlS,GAAG,EACduuC,EAAUx7C,GAAGqtC,aAAapgC,GAAKuuC,EAAUx7C,GAAGsgB,GAAGrT,QAJnDuuC,EAAUx7C,GAAK9J,KAAKwtD,mBAAmB16C,EAAIhJ,IAO/C9J,KAAK4sD,aAAa95C,EAAIhJ,GAAGsgB,GAAGk7B,EAAUx7C,GAAGsgB,GAAGk7B,EAAUx7C,GAAGqtC,aAAamO,EAAUx7C,GAAGstC,GAAIlB,EAAQ,EAAG0X,EAAiB9tD,GAChHgT,EAAIhJ,GAAGg5B,SACNzgC,EAAUoJ,YAAY65C,EAAUx7C,GAAGstC,QAErB,MAAbtkC,EAAIhJ,GAAGyN,IACR02C,IACA3I,EAAUx7C,GAAK9J,KAAKytD,uBAAuB36C,EAAIhJ,GAAIzH,IAEvD0rD,EAAmBzI,EAAUx7C,GAAG2N,UAChCm2C,EAAgBr7C,KAAKw7C,IACH,MAAbj7C,EAAIhJ,GAAGyN,IAA2B,MAAbzE,EAAIhJ,GAAGyN,IAA2B,MAAbzE,EAAIhJ,GAAGyN,IAA2B,MAAbzE,EAAIhJ,GAAGyN,IACvE02C,IACA3I,EAAUx7C,GAAK9J,KAAK2tD,mBAAmB76C,EAAIhJ,GAAI8jD,EAAiB1X,IAEpEl2C,KAAK8tD,iBAAiBxI,EAAUx7C,KAEd,MAAbgJ,EAAIhJ,GAAGyN,IAA2B,MAAbzE,EAAIhJ,GAAGyN,IAA2B,MAAbzE,EAAIhJ,GAAGyN,IAClD02C,GAMAD,EAAW1I,EAAUx7C,GACrBkkD,EAAS5oC,QAAS,IANlB4oC,EAAW5wB,eAAeG,YAAYzqB,EAAIhJ,GAAGyN,IAC7Cy2C,EAASr0B,KAAK35B,KAAK8S,EAAIhJ,IACvBw7C,EAAUx7C,GAAKkkD,EACfhuD,KAAKqlD,eAAe9yC,KAAKy7C,IAK7BG,EAAa57C,KAAKy7C,IACA,MAAbl7C,EAAIhJ,GAAGyN,KACR02C,GAOAD,EAAW1I,EAAUx7C,GACrBkkD,EAAS5oC,QAAS,IAPlB4oC,EAAW5wB,eAAeG,YAAYzqB,EAAIhJ,GAAGyN,IAC7C+tC,EAAUx7C,GAAKkkD,EACfA,EAASr0B,KAAK35B,KAAK8S,EAAIhJ,EAAEw7C,GACzBtlD,KAAKqlD,eAAe9yC,KAAKy7C,GACzBluD,GAAS,GAKbquD,EAAa57C,KAAKy7C,IAEtBhuD,KAAKuqD,oBAAoBz3C,EAAIhJ,GAAIA,EAAI,GAGzC,IADAkE,EAAMkgD,EAAUrkD,OACZC,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACbokD,EAAUpkD,GAAGsb,QAAS,EAG1B,IADApX,EAAMmgD,EAAatkD,OACfC,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACbqkD,EAAarkD,GAAGsb,QAAS,GAIjCy0B,gBAAgB11C,UAAUu9C,mBAAqB,WAC3C1hD,KAAKmqD,kBACL,IAAIrgD,EAAGkE,EAAMhO,KAAKolD,WAAWv7C,OAC7B,IAAIC,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACb9J,KAAKolD,WAAWt7C,GAAG2L,QAIvB,IAFAzV,KAAKouD,cAEAtkD,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,GAClB9J,KAAKolD,WAAWt7C,GAAG6J,MAAQ3T,KAAK81B,iBAC7B91B,KAAKolD,WAAWt7C,GAAGwsC,SAClBt2C,KAAKolD,WAAWt7C,GAAGwsC,OAAOnoB,aAAa,IAAKnuB,KAAKolD,WAAWt7C,GAAG2H,GAE/DzR,KAAKolD,WAAWt7C,GAAG2H,EAAI,OAASzR,KAAKolD,WAAWt7C,GAAG2H,GAEvDzR,KAAKolD,WAAWt7C,GAAGusC,MAAMloB,aAAa,IAAKnuB,KAAKolD,WAAWt7C,GAAG2H,GAAK,UAK/EooC,gBAAgB11C,UAAUiqD,YAAc,WACpC,IAAItkD,EACAukD,EADGrgD,EAAMhO,KAAKwlD,iBAAiB37C,OAEnC,IAAIC,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EACrBukD,EAAkBruD,KAAKwlD,iBAAiB17C,IACpC9J,KAAK81B,eAAiBu4B,EAAgBz/C,QAAQ6E,eAAyC,IAAzB46C,EAAgBhtD,MAC9EgtD,EAAgBpqD,GAAGoqD,EAAgBhtD,KAAMgtD,EAAgBz/C,QAAS5O,KAAK81B,gBAKnF+jB,gBAAgB11C,UAAU8hC,QAAU,WAChCjmC,KAAK4hD,qBACL5hD,KAAKmlD,WAAa,KAClBnlD,KAAKslD,UAAY,MA+BrBG,cAActhD,UAAUq2C,YAAc,SAAS/iB,GAC3C,GAAGA,GAAez3B,KAAK2lD,cAAchyC,KAAK,CACtC,IAAI26C,EAAatuD,KAAK2lD,cAAcE,eAAe,GAAGx0C,EAAEL,EACpDu9C,EAAavuD,KAAK2lD,cAAcE,eAAe,GAAGx0C,EAAEL,EACpDw9C,EAAUxuD,KAAK2lD,cAAcE,eAAe,GAAGx0C,EAAEL,EAAE,IACvDhR,KAAK4lD,aAAaz3B,aAAa,SAAUogC,EAAW,GAAID,EAAW,GAAI,UAAWA,EAAW,GAAI,KAAMC,EAAW,GAAID,EAAW,IAAK,UAAWA,EAAW,GAAI,KAAMC,EAAW,GAAID,EAAW,IAAK,UAAWA,EAAW,GAAI,UAAYE,EAAU,QAY7PxI,cAAc7hD,UAAUq2C,YAAc,SAAS/iB,GAC3C,GAAGA,GAAez3B,KAAK2lD,cAAchyC,KAAK,CACtC,IAAIhC,EAAQ3R,KAAK2lD,cAAcE,eAAe,GAAGx0C,EAAEL,EAC/Cw9C,EAAUxuD,KAAK2lD,cAAcE,eAAe,GAAGx0C,EAAEL,EACrDhR,KAAK4lD,aAAaz3B,aAAa,SAAS,WAAWxc,EAAM,GAAG,YAAYA,EAAM,GAAG,YAAYA,EAAM,GAAG,UAAU68C,EAAQ,QAgBhIvI,sBAAsB9hD,UAAUq2C,YAAc,SAAS/iB,GACnD,GAAGA,GAAez3B,KAAK2lD,cAAchyC,KAAK,CAEtC,IAAI86C,EAAqB,GACrBC,EAAQ1uD,KAAK2lD,cAAcE,eAAe,GAAGx0C,EAAEL,EAAIy9C,EAQnDE,EAAa3uD,KAAK2lD,cAAcE,eAAe,GAAGx0C,EAAEL,EACpD49C,EAAwB,GAAdD,EAAmB,EAAID,EACjCG,EAAwB,GAAdF,EAAmB,EAAID,EAErC1uD,KAAKkmD,eAAe/3B,aAAa,eAAgBygC,EAAS,IAAMC,GAMhE,IAAIC,EAAwD,GAA5C9uD,KAAK2lD,cAAcE,eAAe,GAAGx0C,EAAEL,EAAU,OAAS,YAC1EhR,KAAKkmD,eAAe/3B,aAAa,WAAY2gC,KAUrD3I,gBAAgBhiD,UAAU4qD,WAAa,WAEnC,IACI1pD,EAAK2pD,EAAWllD,EAAGkE,EADnBihD,EAAejvD,KAAKy1B,KAAKkd,aAAauc,UAAYlvD,KAAKy1B,KAAKkd,aAAawc,WAa7E,IAXgD,IAA7CnvD,KAAK2lD,cAAcE,eAAe,GAAGx0C,EAAEL,GACtChD,EAAMhO,KAAKy1B,KAAKmV,YAAYphB,gBAAgB3f,OAC5CC,EAAI,IAEJA,EAAI9J,KAAK2lD,cAAcE,eAAe,GAAGx0C,EAAEL,EAAI,EAC/ChD,EAAMlE,EAAI,GAEdklD,EAAY97C,SAAS,KACrB87C,EAAU7gC,aAAa,OAAO,QAC9B6gC,EAAU7gC,aAAa,iBAAiB,SACxC6gC,EAAU7gC,aAAa,oBAAoB,GACvCrkB,EAAEA,EAAEkE,EAAIlE,GAAG,EACXzE,EAAO6N,SAAS,QAChB87C,EAAUvjD,YAAYpG,GACtBrF,KAAKorB,MAAM7Y,KAAK,CAAClB,EAAEhM,EAAK6R,EAAEpN,IAE9B,GAAiD,IAA9C9J,KAAK2lD,cAAcE,eAAe,IAAIx0C,EAAEL,EAAQ,CAC/C,IAAI0L,EAAOxJ,SAAS,QAChB7M,EAAKsK,kBACT+L,EAAKyR,aAAa,KAAK9nB,GACvBqW,EAAKyR,aAAa,YAAY,SAC9BzR,EAAKjR,YAAYujD,GACjBhvD,KAAKy1B,KAAKC,WAAW9G,KAAKnjB,YAAYiR,GACtC,IAAIxL,EAAIgC,SAAS,KACjBhC,EAAEid,aAAa,OAAO,OAAS/hB,aAAe,IAAI/F,EAAG,KACrD,MAAO4oD,EAAa,GAChB/9C,EAAEzF,YAAYwjD,EAAa,IAE/BjvD,KAAKy1B,KAAKkd,aAAalnC,YAAYyF,GACnClR,KAAKopD,OAAS1sC,EACdsyC,EAAU7gC,aAAa,SAAS,aAC7B,GAAiD,IAA9CnuB,KAAK2lD,cAAcE,eAAe,IAAIx0C,EAAEL,GAAyD,IAA9ChR,KAAK2lD,cAAcE,eAAe,IAAIx0C,EAAEL,EAAQ,CACzG,GAAiD,IAA9ChR,KAAK2lD,cAAcE,eAAe,IAAIx0C,EAAEL,EAAQ,CAC/Ci+C,EAAejvD,KAAKy1B,KAAKkd,aAAauc,UAAYlvD,KAAKy1B,KAAKkd,aAAawc,WACzE,MAAMF,EAAaplD,OACf7J,KAAKy1B,KAAKkd,aAAannC,YAAYyjD,EAAa,IAGxDjvD,KAAKy1B,KAAKkd,aAAalnC,YAAYujD,GACnChvD,KAAKy1B,KAAKkd,aAAayc,gBAAgB,QACvCJ,EAAU7gC,aAAa,SAAS,QAEpCnuB,KAAKomD,aAAc,EACnBpmD,KAAKqvD,WAAaL,GAGtB7I,gBAAgBhiD,UAAUq2C,YAAc,SAAS/iB,GACzCz3B,KAAKomD,aACLpmD,KAAK+uD,aAET,IAAIjlD,EACA4S,EAAMrX,EADH2I,EAAMhO,KAAKorB,MAAMvhB,OAExB,IAAIC,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACb,IAAwB,IAArB9J,KAAKorB,MAAMthB,GAAGoN,IAGjBwF,EAAO1c,KAAKy1B,KAAKmV,YAAY2J,SAASv0C,KAAKorB,MAAMthB,GAAGoN,GACpD7R,EAAOrF,KAAKorB,MAAMthB,GAAGuH,GAClBomB,GAAez3B,KAAK2lD,cAAchyC,MAAQ+I,EAAKnJ,KAAKI,OACnDtO,EAAK8oB,aAAa,IAAIzR,EAAKw4B,UAE5Bzd,GAAez3B,KAAK2lD,cAAcE,eAAe,GAAGx0C,EAAEsC,MAAQ3T,KAAK2lD,cAAcE,eAAe,GAAGx0C,EAAEsC,MAAQ3T,KAAK2lD,cAAcE,eAAe,GAAGx0C,EAAEsC,MAAQ3T,KAAK2lD,cAAcE,eAAe,GAAGx0C,EAAEsC,MAAQ+I,EAAKnJ,KAAKI,MAAK,CACzN,IAAI27C,EACJ,GAAgD,IAA7CtvD,KAAK2lD,cAAcE,eAAe,GAAGx0C,EAAEL,GAAwD,MAA7ChR,KAAK2lD,cAAcE,eAAe,GAAGx0C,EAAEL,EAAU,CAClG,IAAID,EAAIrG,KAAKiD,IAAI3N,KAAK2lD,cAAcE,eAAe,GAAGx0C,EAAEL,EAAEhR,KAAK2lD,cAAcE,eAAe,GAAGx0C,EAAEL,GAAG,IAChG8F,EAAIpM,KAAK+C,IAAIzN,KAAK2lD,cAAcE,eAAe,GAAGx0C,EAAEL,EAAEhR,KAAK2lD,cAAcE,eAAe,GAAGx0C,EAAEL,GAAG,IAChGiG,EAAI5R,EAAKkqD,iBACbD,EAAiB,SAAWr4C,EAAElG,EAAI,IAClC,IAGIgG,EAHAy4C,EAAav4C,GAAGH,EAAE/F,GAClB8vB,EAAU,EAA2C,EAAzC7gC,KAAK2lD,cAAcE,eAAe,GAAGx0C,EAAEL,EAAIhR,KAAK2lD,cAAcE,eAAe,GAAGx0C,EAAEL,EAAE,IAChGy+C,EAAQ/kD,KAAK6C,MAAMiiD,EAAW3uB,GAElC,IAAI9pB,EAAE,EAAEA,EAAE04C,EAAM14C,GAAG,EACfu4C,GAAkB,KAAgD,EAAzCtvD,KAAK2lD,cAAcE,eAAe,GAAGx0C,EAAEL,EAAIhR,KAAK2lD,cAAcE,eAAe,GAAGx0C,EAAEL,EAAE,IAAM,IAEvHs+C,GAAkB,KAAS,GAAFr4C,EAAO,YAEhCq4C,EAAiB,KAAgD,EAAzCtvD,KAAK2lD,cAAcE,eAAe,GAAGx0C,EAAEL,EAAIhR,KAAK2lD,cAAcE,eAAe,GAAGx0C,EAAEL,EAAE,IAEhH3L,EAAK8oB,aAAa,mBAAmBmhC,GAU7C,IAPG73B,GAAez3B,KAAK2lD,cAAcE,eAAe,GAAGx0C,EAAEsC,OACrD3T,KAAKqvD,WAAWlhC,aAAa,eAAwD,EAAzCnuB,KAAK2lD,cAAcE,eAAe,GAAGx0C,EAAEL,IAGpFymB,GAAez3B,KAAK2lD,cAAcE,eAAe,GAAGx0C,EAAEsC,OACrD3T,KAAKqvD,WAAWlhC,aAAa,UAAUnuB,KAAK2lD,cAAcE,eAAe,GAAGx0C,EAAEL,IAEjC,IAA9ChR,KAAK2lD,cAAcE,eAAe,IAAIx0C,EAAEL,GAAyD,IAA9ChR,KAAK2lD,cAAcE,eAAe,IAAIx0C,EAAEL,KACvFymB,GAAez3B,KAAK2lD,cAAcE,eAAe,GAAGx0C,EAAEsC,MAAK,CAC1D,IAAIhC,EAAQ3R,KAAK2lD,cAAcE,eAAe,GAAGx0C,EAAEL,EACnDhR,KAAKqvD,WAAWlhC,aAAa,SAAS,OAAO7gB,SAAkB,IAATqE,EAAM,IAAQ,IAAIrE,SAAkB,IAATqE,EAAM,IAAQ,IAAIrE,SAAkB,IAATqE,EAAM,IAAQ,OA8BtI00C,iBAAiBliD,UAAUq2C,YAAc,SAAS/iB,GAC9C,GAAGA,GAAez3B,KAAK2lD,cAAchyC,KAAK,CACtC,IAAI+7C,EAAS1vD,KAAK2lD,cAAcE,eAAe,GAAGx0C,EAAEL,EAChD2+C,EAAS3vD,KAAK2lD,cAAcE,eAAe,GAAGx0C,EAAEL,EAChD4+C,EAAS5vD,KAAK2lD,cAAcE,eAAe,GAAGx0C,EAAEL,EAChD6+C,EAASD,EAAO,GAAK,IAAMD,EAAO,GAAK,IAAMD,EAAO,GACpDI,EAASF,EAAO,GAAK,IAAMD,EAAO,GAAK,IAAMD,EAAO,GACpDK,EAASH,EAAO,GAAK,IAAMD,EAAO,GAAK,IAAMD,EAAO,GACxD1vD,KAAKumD,QAAQp4B,aAAa,cAAe0hC,GACzC7vD,KAAKwmD,QAAQr4B,aAAa,cAAe2hC,GACzC9vD,KAAKymD,QAAQt4B,aAAa,cAAe4hC,KAwCjDrJ,mBAAmBviD,UAAUwiD,aAAe,SAASjlD,EAAM4kD,GACvD,IAAIkD,EAASt2C,SAASxR,GAGtB,OAFA8nD,EAAOr7B,aAAa,OAAO,SAC3Bm4B,EAAoB76C,YAAY+9C,GACzBA,GAGX9C,mBAAmBviD,UAAU6rD,cAAgB,SAASC,EAAYC,EAAYC,EAAOC,EAAaC,GAC9F,IAEIhsC,EAIAisC,EANA12B,EAAM,EACNuF,EAAW,IAEXxxB,EAAMjD,KAAKiD,IAAIsiD,EAAYC,GAC3BziD,EAAM/C,KAAK+C,IAAIwiD,EAAYC,GAC3BK,EAAQ5uD,MAAM0C,KAAK,KAAK,CAACwF,OAAOs1B,IAEhCrG,EAAM,EACN03B,EAAcH,EAAcD,EAC5BK,EAAaP,EAAaD,EAC9B,MAAMr2B,GAAO,IACTvV,EAAOuV,EAAI,IAEP02B,EADDjsC,GAAQ1W,EACM8iD,EAAa,EAAIJ,EAAcD,EACtC/rC,GAAQ5W,EACDgjD,EAAa,EAAIL,EAAcC,EAE9BD,EAAcI,EAAc9lD,KAAKuC,KAAKoX,EAAO4rC,GAAcQ,EAAY,EAAIN,GAE7FI,EAAMz3B,KAASw3B,EACf12B,GAAO,KAAKuF,EAAS,GAEzB,OAAOoxB,EAAMG,KAAK,MAGtBhK,mBAAmBviD,UAAUq2C,YAAc,SAAS/iB,GAChD,GAAGA,GAAez3B,KAAK2lD,cAAchyC,KAAK,CACtC,IAAI1F,EACA43C,EAAiB7lD,KAAK2lD,cAAcE,eACrC7lD,KAAK6mD,kBAAoBpvB,GAAeouB,EAAe,GAAGx0C,EAAEsC,MAAQkyC,EAAe,GAAGx0C,EAAEsC,MAAQkyC,EAAe,GAAGx0C,EAAEsC,MAAQkyC,EAAe,GAAGx0C,EAAEsC,MAAQkyC,EAAe,GAAGx0C,EAAEsC,QAC3K1F,EAAMjO,KAAKgwD,cAAcnK,EAAe,GAAGx0C,EAAEL,EAAE60C,EAAe,GAAGx0C,EAAEL,EAAE60C,EAAe,GAAGx0C,EAAEL,EAAE60C,EAAe,GAAGx0C,EAAEL,EAAE60C,EAAe,GAAGx0C,EAAEL,GACrIhR,KAAK6mD,gBAAgB14B,aAAa,cAAclgB,GAChDjO,KAAK8mD,gBAAgB34B,aAAa,cAAclgB,GAChDjO,KAAK+mD,gBAAgB54B,aAAa,cAAclgB,IAIjDjO,KAAKumD,UAAY9uB,GAAeouB,EAAe,IAAIx0C,EAAEsC,MAAQkyC,EAAe,IAAIx0C,EAAEsC,MAAQkyC,EAAe,IAAIx0C,EAAEsC,MAAQkyC,EAAe,IAAIx0C,EAAEsC,MAAQkyC,EAAe,IAAIx0C,EAAEsC,QACxK1F,EAAMjO,KAAKgwD,cAAcnK,EAAe,IAAIx0C,EAAEL,EAAE60C,EAAe,IAAIx0C,EAAEL,EAAE60C,EAAe,IAAIx0C,EAAEL,EAAE60C,EAAe,IAAIx0C,EAAEL,EAAE60C,EAAe,IAAIx0C,EAAEL,GAC1IhR,KAAKumD,QAAQp4B,aAAa,cAAclgB,IAGzCjO,KAAKwmD,UAAY/uB,GAAeouB,EAAe,IAAIx0C,EAAEsC,MAAQkyC,EAAe,IAAIx0C,EAAEsC,MAAQkyC,EAAe,IAAIx0C,EAAEsC,MAAQkyC,EAAe,IAAIx0C,EAAEsC,MAAQkyC,EAAe,IAAIx0C,EAAEsC,QACxK1F,EAAMjO,KAAKgwD,cAAcnK,EAAe,IAAIx0C,EAAEL,EAAE60C,EAAe,IAAIx0C,EAAEL,EAAE60C,EAAe,IAAIx0C,EAAEL,EAAE60C,EAAe,IAAIx0C,EAAEL,EAAE60C,EAAe,IAAIx0C,EAAEL,GAC1IhR,KAAKwmD,QAAQr4B,aAAa,cAAclgB,IAGzCjO,KAAKymD,UAAYhvB,GAAeouB,EAAe,IAAIx0C,EAAEsC,MAAQkyC,EAAe,IAAIx0C,EAAEsC,MAAQkyC,EAAe,IAAIx0C,EAAEsC,MAAQkyC,EAAe,IAAIx0C,EAAEsC,MAAQkyC,EAAe,IAAIx0C,EAAEsC,QACxK1F,EAAMjO,KAAKgwD,cAAcnK,EAAe,IAAIx0C,EAAEL,EAAE60C,EAAe,IAAIx0C,EAAEL,EAAE60C,EAAe,IAAIx0C,EAAEL,EAAE60C,EAAe,IAAIx0C,EAAEL,EAAE60C,EAAe,IAAIx0C,EAAEL,GAC1IhR,KAAKymD,QAAQt4B,aAAa,cAAclgB,IAGzCjO,KAAK4mD,UAAYnvB,GAAeouB,EAAe,IAAIx0C,EAAEsC,MAAQkyC,EAAe,IAAIx0C,EAAEsC,MAAQkyC,EAAe,IAAIx0C,EAAEsC,MAAQkyC,EAAe,IAAIx0C,EAAEsC,MAAQkyC,EAAe,IAAIx0C,EAAEsC,QACxK1F,EAAMjO,KAAKgwD,cAAcnK,EAAe,IAAIx0C,EAAEL,EAAE60C,EAAe,IAAIx0C,EAAEL,EAAE60C,EAAe,IAAIx0C,EAAEL,EAAE60C,EAAe,IAAIx0C,EAAEL,EAAE60C,EAAe,IAAIx0C,EAAEL,GAC1IhR,KAAK4mD,QAAQz4B,aAAa,cAAclgB,MAsDpD+4C,oBAAoB7iD,UAAUq2C,YAAc,SAAS/iB,GACjD,GAAGA,GAAez3B,KAAK2lD,cAAchyC,KAAK,CAItC,IAHG8jB,GAAez3B,KAAK2lD,cAAcE,eAAe,GAAGx0C,EAAEsC,OACrD3T,KAAKkmD,eAAe/3B,aAAa,eAAgBnuB,KAAK2lD,cAAcE,eAAe,GAAGx0C,EAAEL,EAAI,GAE7FymB,GAAez3B,KAAK2lD,cAAcE,eAAe,GAAGx0C,EAAEsC,KAAK,CAC1D,IAAIg9C,EAAM3wD,KAAK2lD,cAAcE,eAAe,GAAGx0C,EAAEL,EACjDhR,KAAKknD,QAAQ/4B,aAAa,cAAcnc,SAAStH,KAAKoC,MAAa,IAAP6jD,EAAI,IAAQjmD,KAAKoC,MAAa,IAAP6jD,EAAI,IAAQjmD,KAAKoC,MAAa,IAAP6jD,EAAI,MAKlH,IAHGl5B,GAAez3B,KAAK2lD,cAAcE,eAAe,GAAGx0C,EAAEsC,OACrD3T,KAAKknD,QAAQ/4B,aAAa,gBAAgBnuB,KAAK2lD,cAAcE,eAAe,GAAGx0C,EAAEL,EAAE,KAEpFymB,GAAez3B,KAAK2lD,cAAcE,eAAe,GAAGx0C,EAAEsC,MAAQ3T,KAAK2lD,cAAcE,eAAe,GAAGx0C,EAAEsC,KAAK,CACzG,IAAI0tB,EAAWrhC,KAAK2lD,cAAcE,eAAe,GAAGx0C,EAAEL,EAClD2E,GAAS3V,KAAK2lD,cAAcE,eAAe,GAAGx0C,EAAEL,EAAI,IAAM1C,UAC1DyL,EAAIsnB,EAAW32B,KAAKyK,IAAIQ,GACxBqE,EAAIqnB,EAAW32B,KAAK2K,IAAIM,GAC5B3V,KAAKinD,SAAS94B,aAAa,KAAMpU,GACjC/Z,KAAKinD,SAAS94B,aAAa,KAAMnU,MAa7C,IAAI42C,iBAAmB,GAEvB,SAASC,gBAAgBC,EAAYnL,EAAelwB,GAChDz1B,KAAKomD,aAAc,EACnBpmD,KAAK2lD,cAAgBA,EACrB3lD,KAAK8wD,WAAaA,EAClB9wD,KAAKy1B,KAAOA,EACZA,EAAKszB,aAAe71C,SAAS,KAC7BuiB,EAAKszB,aAAat9C,YAAYgqB,EAAKkd,cACnCld,EAAKszB,aAAat9C,YAAYgqB,EAAKuzB,oBACnCvzB,EAAK+rB,YAAc/rB,EAAKszB,aAiF5B,SAASgB,WAAWt0B,GAChB,IAAI3rB,EAKA67C,EALG33C,EAAMynB,EAAKp0B,KAAK0vD,GAAKt7B,EAAKp0B,KAAK0vD,GAAGlnD,OAAS,EAC9Cy8B,EAAQ31B,kBACR41B,EAAMH,eAAeC,aAAaC,GAClCpoB,EAAQ,EAGZ,IAFAle,KAAKgxD,QAAU,GAEXlnD,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACb67C,EAAgB,KACU,KAAvBlwB,EAAKp0B,KAAK0vD,GAAGjnD,GAAGyN,IACf2G,GAAS,EACTynC,EAAgB,IAAIF,cAAclf,EAAK9Q,EAAKmzB,eAAe/C,eAAe/7C,KAC9C,KAAvB2rB,EAAKp0B,KAAK0vD,GAAGjnD,GAAGyN,IACrB2G,GAAS,EACTynC,EAAgB,IAAIK,cAAczf,EAAK9Q,EAAKmzB,eAAe/C,eAAe/7C,KAC9C,KAAvB2rB,EAAKp0B,KAAK0vD,GAAGjnD,GAAGyN,GACrBouC,EAAgB,IAAIQ,gBAAgB1wB,EAAMA,EAAKmzB,eAAe/C,eAAe/7C,IACjD,KAAvB2rB,EAAKp0B,KAAK0vD,GAAGjnD,GAAGyN,IACrB2G,GAAS,EACTynC,EAAgB,IAAIU,iBAAiB9f,EAAK9Q,EAAKmzB,eAAe/C,eAAe/7C,KACjD,KAAvB2rB,EAAKp0B,KAAK0vD,GAAGjnD,GAAGyN,IACrB2G,GAAS,EACTynC,EAAgB,IAAIe,mBAAmBngB,EAAK9Q,EAAKmzB,eAAe/C,eAAe/7C,KACnD,KAAvB2rB,EAAKp0B,KAAK0vD,GAAGjnD,GAAGyN,IACrB2G,GAAS,EACTynC,EAAgB,IAAIqB,oBAAoBzgB,EAAK9Q,EAAKmzB,eAAe/C,eAAe/7C,KACpD,KAAvB2rB,EAAKp0B,KAAK0vD,GAAGjnD,GAAGyN,GAErBouC,EAAgB,IAAIkL,gBAAgBtqB,EAAK9Q,EAAKmzB,eAAe/C,eAAe/7C,GAAI2rB,GACpD,KAAvBA,EAAKp0B,KAAK0vD,GAAGjnD,GAAGyN,KACrB2G,GAAS,EACTynC,EAAgB,IAAIM,sBAAsB1f,EAAK9Q,EAAKmzB,eAAe/C,eAAe/7C,KAEnF67C,GACC3lD,KAAKgxD,QAAQz+C,KAAKozC,GAGvBznC,IACCuX,EAAKC,WAAW9G,KAAKnjB,YAAY86B,GACjC9Q,EAAKkd,aAAaxkB,aAAa,SAAS,OAAS/hB,aAAe,IAAIk6B,EAAM,MAE1EtmC,KAAKgxD,QAAQnnD,QACb4rB,EAAKigB,uBAAuB11C,MAUpC,SAASg0C,gBACRh0C,KAAKk8C,MAAQ,GACVl8C,KAAKg8C,QAAU,EACfh8C,KAAKu7C,IAAM,IAAItmC,OACfjV,KAAK47C,GAAK,EACV,IAAI9xC,EAAGkE,EAAM,GAEb,IADAhO,KAAKm8C,QAAUxpC,iBAAiB,UAAW3E,GACvClE,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACb9J,KAAKk8C,MAAMpyC,GAAK6I,iBAAiB,UAAW,IAEhD3S,KAAKwlB,QAAUxX,EAoBnB,SAASijD,iBAiET,SAAS/V,eAAe75C,EAAMq0B,EAAYtyB,GACtCpD,KAAKilC,UAAYvP,EAAW6jB,aAAal4C,EAAKsoB,OAC9C3pB,KAAKulC,IAAM7P,EAAW8jB,YAAYxT,SAAShmC,KAAKilC,WAChDjlC,KAAKkhD,YAAY7/C,EAAKq0B,EAAWtyB,GAyCrC,SAAS+3C,cAAc95C,EAAMq0B,EAAYtyB,GACrCpD,KAAK4oB,gBAAiB,EACtB5oB,KAAK6oB,OAASxnB,EAAKwnB,OACnB7oB,KAAKqzC,gBAAkB,GACvBrzC,KAAK+C,SAAWqL,iBAAiBpO,KAAK6oB,OAAOhf,QAC7C7J,KAAKkhD,YAAY7/C,EAAMq0B,EAAYtyB,GACnCpD,KAAKglD,GAAK3jD,EAAK2jD,GAAKp0B,gBAAgB8F,QAAQ12B,KAAKqB,EAAK2jD,GAAG,EAAEtvB,EAAWuC,UAAWj4B,MAAQ,CAACilD,cAAa,GAiC3G,SAASiM,cAAc7vD,EAAKuN,GACxB5O,KAAKqB,KAAOA,EACZrB,KAAK4O,QAAUA,EACf5O,KAAKwpB,gBAAkBxpB,KAAKqB,KAAKmoB,iBAAmB,GACpDxpB,KAAKu0C,SAAWnmC,iBAAiBpO,KAAKwpB,gBAAgB3f,QACtD,IAAIC,EAAGkE,EAAMhO,KAAKwpB,gBAAgB3f,OAAQsnD,GAAW,EACrD,IAAKrnD,EAAI,EAAGA,EAAIkE,EAAKlE,IACmB,MAAjC9J,KAAKwpB,gBAAgB1f,GAAGkL,OACvBm8C,GAAW,GAEfnxD,KAAKu0C,SAASzqC,GAAK+vB,qBAAqBkD,aAAa/8B,KAAK4O,QAAQ5O,KAAKwpB,gBAAgB1f,GAAG,GAE9F9J,KAAKmxD,SAAWA,EACbA,GACCnxD,KAAK4O,QAAQ8mC,uBAAuB11C,MA2C5C,SAASg7C,eAAe35C,EAAMq0B,EAAYtyB,GACtCpD,KAAK6pB,OAAS,GACd7pB,KAAKmlD,WAAa9jD,EAAKwoB,OACvB7pB,KAAKolD,WAAa,GAClBplD,KAAKslD,UAAY,GACjBtlD,KAAKm3C,aAAe,GACpBn3C,KAAKqlD,eAAiB,GACtBrlD,KAAKulD,kBAAoB,GACzBvlD,KAAKqkD,kBAAoB,IAAIL,sBAC7BhkD,KAAKkhD,YAAY7/C,EAAMq0B,EAAYtyB,GAkcvC,SAASg4C,eAAe/5C,EAAMq0B,EAAYtyB,GACtCpD,KAAKkhD,YAAY7/C,EAAKq0B,EAAWtyB,GAarC,SAAS63C,cAAc55C,EAAMq0B,EAAYtyB,GACrCpD,KAAKklD,UAAY,GACjBllD,KAAKoqC,QAAU,EACfpqC,KAAKiqC,eAAgB,EACrBjqC,KAAKkqC,iBAAkB,EACvBlqC,KAAKmqC,iBAAkB,EACvBnqC,KAAKoxD,QAAS,EACdpxD,KAAKqxD,MAAO,EACZrxD,KAAK2pC,cAAgB,EACrB3pC,KAAKsxD,cAAgB,KACrBtxD,KAAK2nC,WAAa,SAClB3nC,KAAK20B,OAAS,CACV08B,KAAM,gBACND,OAAQ,gBACRG,OAAQ,EACRC,OAAQ,IAEZxxD,KAAKkhD,YAAY7/C,EAAKq0B,EAAWtyB,GA8KrC,SAASquD,aAIT,SAASC,aAAarwD,EAAKq0B,EAAWtyB,IAyEtC,SAAS46C,cAAc38C,EAAKq0B,EAAWtyB,GACnCpD,KAAKkhD,YAAY7/C,EAAKq0B,EAAWtyB,GAsBrC,SAAS26C,aAAa18C,EAAKq0B,EAAWtyB,GAClCpD,KAAK6oB,OAASxnB,EAAKwnB,OACnB7oB,KAAKq0C,YAAchzC,EAAKioB,QACxBtpB,KAAK4oB,gBAAiB,EACtB5oB,KAAKqzC,gBAAkB,GACvBrzC,KAAK+C,SAAW/C,KAAK6oB,OAASza,iBAAiBpO,KAAK6oB,OAAOhf,QAAU,GACrE7J,KAAKkhD,YAAY7/C,EAAKq0B,EAAWtyB,GACjCpD,KAAKglD,GAAK3jD,EAAK2jD,GAAKp0B,gBAAgB8F,QAAQ12B,KAAKqB,EAAK2jD,GAAG,EAAEtvB,EAAWuC,UAAUj4B,MAAQ,CAACilD,cAAa,GAkC1G,SAAStH,cAAct8C,EAAKq0B,EAAWtyB,GAEnCpD,KAAK6pB,OAAS,GAEd7pB,KAAKmlD,WAAa9jD,EAAKwoB,OAEvB7pB,KAAKolD,WAAa,GAElBplD,KAAKqlD,eAAiB,GAEtBrlD,KAAKslD,UAAY,GAEjBtlD,KAAKulD,kBAAoB,GAEzBvlD,KAAKwlD,iBAAmB,GACxBxlD,KAAK2xD,gBAAkBz+C,SAAS,KAChClT,KAAKkhD,YAAY7/C,EAAKq0B,EAAWtyB,GAGjCpD,KAAKm3C,aAAe,GACpBn3C,KAAK4xD,YAAc,CACf73C,EAAE,OACFC,GAAI,OACJlJ,EAAG,EACHob,EAAG,GAmMX,SAAS0xB,aAAav8C,EAAKq0B,EAAWtyB,GAClCpD,KAAKklD,UAAY,GACjBllD,KAAK6xD,UAAY,GACjB7xD,KAAK4xD,YAAc,CACf73C,EAAE,OACFC,GAAI,OACJlJ,EAAG,EACHob,EAAG,GAEPlsB,KAAK2nC,WAAa,MAClB3nC,KAAK8xD,UAAW,EAChB9xD,KAAKkhD,YAAY7/C,EAAKq0B,EAAWtyB,GA8OrC,SAAS06C,cAAcz8C,EAAKq0B,EAAWtyB,GACnCpD,KAAKilC,UAAYvP,EAAW6jB,aAAal4C,EAAKsoB,OAC9C3pB,KAAKkhD,YAAY7/C,EAAKq0B,EAAWtyB,GA0BrC,SAASy6C,eAAex8C,EAAKq0B,EAAWtyB,GACpCpD,KAAK6wB,YACL7wB,KAAKmhD,aAAa9/C,EAAKq0B,EAAWtyB,GAClCpD,KAAKy/C,gBACL,IAAI/oB,EAAU9F,gBAAgB8F,QAY9B,GAXA12B,KAAK+xD,GAAKr7B,EAAQ12B,KAAKqB,EAAK0wD,GAAG,EAAE,EAAE/xD,MAChCqB,EAAK8oB,GAAG9Y,EAAEN,GACT/Q,KAAKq3B,GAAKX,EAAQ12B,KAAKqB,EAAK8oB,GAAG9Y,EAAE0I,EAAE,EAAE,EAAE/Z,MACvCA,KAAKs3B,GAAKZ,EAAQ12B,KAAKqB,EAAK8oB,GAAG9Y,EAAE2I,EAAE,EAAE,EAAEha,MACvCA,KAAKu3B,GAAKb,EAAQ12B,KAAKqB,EAAK8oB,GAAG9Y,EAAE4I,EAAE,EAAE,EAAEja,OAEvCA,KAAKqR,EAAIqlB,EAAQ12B,KAAKqB,EAAK8oB,GAAG9Y,EAAE,EAAE,EAAErR,MAErCqB,EAAK8oB,GAAGvT,IACP5W,KAAK4W,EAAI8f,EAAQ12B,KAAKqB,EAAK8oB,GAAGvT,EAAE,EAAE,EAAE5W,OAErCqB,EAAK8oB,GAAGiN,GAAGpgB,EAAEnN,QAAUxI,EAAK8oB,GAAGiN,GAAGpgB,EAAE,GAAG+a,GAAG,CACzC,IAAIjoB,EAAEkE,EAAM3M,EAAK8oB,GAAGiN,GAAGpgB,EAAEnN,OACzB,IAAIC,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACbzI,EAAK8oB,GAAGiN,GAAGpgB,EAAElN,GAAGioB,GAAK,KACrB1wB,EAAK8oB,GAAGiN,GAAGpgB,EAAElN,GAAGkoB,GAAK,KAG7BhyB,KAAKo3B,GAAKV,EAAQ12B,KAAKqB,EAAK8oB,GAAGiN,GAAG,EAAE9oB,UAAUtO,MAC9CA,KAAKo3B,GAAGtE,IAAK,EACb9yB,KAAKm3B,GAAKT,EAAQ12B,KAAKqB,EAAK8oB,GAAGgN,GAAG,EAAE7oB,UAAUtO,MAC9CA,KAAKk3B,GAAKR,EAAQ12B,KAAKqB,EAAK8oB,GAAG+M,GAAG,EAAE5oB,UAAUtO,MAC9CA,KAAKi3B,GAAKP,EAAQ12B,KAAKqB,EAAK8oB,GAAG8M,GAAG,EAAE3oB,UAAUtO,MAC9CA,KAAK82B,IAAM,IAAI7hB,OACfjV,KAAKgyD,SAAW,IAAI/8C,OACpBjV,KAAK81B,eAAgB,EAGrB91B,KAAKo/C,eAAiB,CAClBC,MAAOr/C,MAyGf,SAASiyD,YA7wDTpB,gBAAgB1sD,UAAU+tD,WAAa,SAASx1C,GAC5C,IAAI5S,EAAI,EAAGkE,EAAM4iD,iBAAiB/mD,OAClC,MAAMC,EAAIkE,EAAK,CACX,GAAG4iD,iBAAiB9mD,KAAO4S,EACvB,OAAOk0C,iBAAiB9mD,GAE5BA,GAAK,EAET,OAAO,MAGX+mD,gBAAgB1sD,UAAUguD,gBAAkB,SAASz1C,EAAM01C,GACvD,IAAI5lC,EAAa9P,EAAKi2B,aAAanmB,WACnC,GAAIA,EAAJ,CAGA,IAQI6lC,EARAnD,EAAW1iC,EAAW0iC,SACtBplD,EAAI,EAAGkE,EAAMkhD,EAASrlD,OAC1B,MAAOC,EAAIkE,EAAK,CACZ,GAAIkhD,EAASplD,KAAO4S,EAAKi2B,aACrB,MAEJ7oC,GAAK,EAGLA,GAAKkE,EAAM,IACXqkD,EAAYnD,EAASplD,EAAI,IAE7B,IAAIwoD,EAAUp/C,SAAS,OACvBo/C,EAAQnkC,aAAa,OAAQ,IAAMikC,GAChCC,EACC7lC,EAAWquB,aAAayX,EAASD,GAEjC7lC,EAAW/gB,YAAY6mD,KAI/BzB,gBAAgB1sD,UAAUouD,iBAAmB,SAAS98B,EAAM/Y,GACxD,IAAI1c,KAAKkyD,WAAWx1C,GAAO,CACvB,IAAI01C,EAAWzhD,kBACXy4C,EAASl2C,SAAS,QACtBk2C,EAAOj7B,aAAa,KAAMzR,EAAKo4B,SAC/BsU,EAAOj7B,aAAa,YAAa,SACjCyiC,iBAAiBr+C,KAAKmK,GACtB,IAAIkS,EAAO6G,EAAKC,WAAW9G,KAC3BA,EAAKnjB,YAAY29C,GACjB,IAAIoJ,EAASt/C,SAAS,UACtBs/C,EAAOrkC,aAAa,KAAMikC,GAC1BpyD,KAAKmyD,gBAAgBz1C,EAAM01C,GAC3BI,EAAO/mD,YAAYiR,EAAKi2B,cACxB/jB,EAAKnjB,YAAY+mD,GACjB,IAAIF,EAAUp/C,SAAS,OACvBo/C,EAAQnkC,aAAa,OAAQ,IAAMikC,GACnChJ,EAAO39C,YAAY6mD,GACnB51C,EAAKrb,KAAK+0C,IAAK,EACf15B,EAAKq+B,OAETtlB,EAAK6kB,SAAS59B,EAAKo4B,UAGvB+b,gBAAgB1sD,UAAU4qD,WAAa,WACnC,IAAI98B,EAAMjyB,KAAK2lD,cAAcE,eAAe,GAAGx0C,EAAEL,EAC7CjO,EAAW/C,KAAKy1B,KAAKryB,KAAKL,SAC1B+G,EAAI,EAAGkE,EAAMjL,EAAS8G,OAC1B,MAAOC,EAAIkE,EACNjL,EAAS+G,IAAM/G,EAAS+G,GAAGzI,KAAK4wB,MAAQA,GAC3CjyB,KAAKuyD,iBAAiBvyD,KAAKy1B,KAAM1yB,EAAS+G,IAE3CA,GAAK,EAEN9J,KAAKomD,aAAc,GAGvByK,gBAAgB1sD,UAAUq2C,YAAc,WACnCx6C,KAAKomD,aACRpmD,KAAK+uD,cAiDPhF,WAAW5lD,UAAUq2C,YAAc,SAAS1kB,GACxC,IAAIhsB,EAAGkE,EAAMhO,KAAKgxD,QAAQnnD,OAC1B,IAAIC,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACb9J,KAAKgxD,QAAQlnD,GAAG0wC,YAAY1kB,IAgBpCke,cAAc7vC,UAAU83C,UAAY,WACnC,IAAIwW,EAA2B,EAAfzyD,KAAKwlB,QACjBktC,EAAiB1yD,KAAKm8C,QACvBn8C,KAAKm8C,QAAUxpC,iBAAiB,UAAW8/C,GAC3CzyD,KAAKm8C,QAAQwW,IAAID,GACjB,IAAI5oD,EAAI,EACR,IAAIA,EAAI9J,KAAKwlB,QAAS1b,EAAI2oD,EAAW3oD,GAAK,EACtC9J,KAAKk8C,MAAMpyC,GAAK6I,iBAAiB,UAAW,IAEhD3S,KAAKwlB,QAAUitC,GAGnBze,cAAc7vC,UAAUsR,MAAQ,WAC/BzV,KAAKg8C,QAAU,EACfh8C,KAAKu7C,IAAI9lC,QACNzV,KAAK47C,GAAK,GAKdqV,cAAc9sD,UAAY,CACtByuD,eAAgB,aAChBxR,oBAAqB,aACrBC,wBAAyB,WACrBrhD,KAAKy7C,cAAgBz7C,KAAK01B,WAAW+lB,cACrCz7C,KAAK8pD,yBAA2B,IAAI2H,UAAUzxD,OAElDuhD,cAAe,aACfiH,aAAc,WACV,IAAI9yB,EAAa11B,KAAK01B,WACtB,GAAGA,EAAW0mB,YAAcp8C,KAAKqB,KAAKqnD,GAAI,CACtChzB,EAAW0mB,UAAYp8C,KAAKqB,KAAKqnD,GACjC,IAAID,EAAiB30C,aAAa9T,KAAKqB,KAAKqnD,IAC5ChzB,EAAW+lB,cAAcoX,yBAA2BpK,IAG5DnH,2BAA4B,WACxBthD,KAAK4qC,YAAc,IAAIsmB,cAAclxD,KAAKqB,KAAMrB,OAEpD8yD,YAAa,WACJ9yD,KAAKugD,QAAYvgD,KAAKsgD,YAAatgD,KAAKwgD,gBACzCxgD,KAAKugD,QAAS,IAGtBwS,YAAa,WACL/yD,KAAKsgD,YAActgD,KAAKwgD,gBACxBxgD,KAAKugD,QAAS,EACdvgD,KAAK81B,eAAgB,EACrB91B,KAAK4qC,YAAY9U,eAAgB,IAGzC0kB,YAAa,WACT,IAAIx6C,KAAKugD,SAAUvgD,KAAKqB,KAAK+0C,GAA7B,CAGAp2C,KAAKigD,kBACLjgD,KAAK8gD,mBACL9gD,KAAKwoD,eACL,IAAIwK,EAAkC,IAAjBhzD,KAAKqB,KAAKkW,GAC/BvX,KAAK01B,WAAW5yB,SAASg5C,KAAKkX,GAC9BhzD,KAAK01B,WAAW5yB,SAASu4C,aAAar7C,KAAKo/C,eAAetoB,IAAIv1B,OAC9DvB,KAAK01B,WAAW5yB,SAAS44C,WAAW17C,KAAKo/C,eAAeC,MAAMjoC,EAAEpG,GAChEhR,KAAK0hD,qBACL1hD,KAAK01B,WAAW5yB,SAAS+4C,QAAQmX,GAC9BhzD,KAAK4qC,YAAYumB,UAChBnxD,KAAK01B,WAAW5yB,SAAS+4C,SAAQ,GAEjC77C,KAAK81B,gBACL91B,KAAK81B,eAAgB,KAG7BmQ,QAAS,WACLjmC,KAAKy7C,cAAgB,KACrBz7C,KAAKqB,KAAO,KACZrB,KAAK01B,WAAa,KAClB11B,KAAK4qC,YAAY3E,WAErByF,QAAS,IAAIz2B,QAEjBg8C,cAAc9sD,UAAU22C,KAAOmW,cAAc9sD,UAAU2uD,YACvD7B,cAAc9sD,UAAU42C,KAAOkW,cAAc9sD,UAAU4uD,YAOvDzwC,gBAAgB,CAACoiC,YAAa7O,iBAAkBob,cAAetb,iBAAkBC,aAAcE,mBAAoBoF,gBAEnHA,eAAe/2C,UAAU+8C,YAAcrH,gBAAgB11C,UAAU+8C,YACjEhG,eAAe/2C,UAAUu2C,aAAeX,cAAc51C,UAAUu2C,aAEhEQ,eAAe/2C,UAAUo9C,cAAgB,WAErC,GAAIvhD,KAAKulC,IAAIppB,QAAUnc,KAAKilC,UAAU/Y,IAAMlsB,KAAKulC,IAAIppB,OAASnc,KAAKilC,UAAUn0B,IAAM9Q,KAAKulC,IAAIf,QAAS,CACjG,IAAID,EAASnxB,UAAU,UACvBmxB,EAAOpoB,MAAQnc,KAAKilC,UAAU/Y,EAC9BqY,EAAOC,OAASxkC,KAAKilC,UAAUn0B,EAC/B,IAMImiD,EAAWC,EANXzuB,EAAMF,EAAO7V,WAAW,MAExBykC,EAAOnzD,KAAKulC,IAAIppB,MAChBi3C,EAAOpzD,KAAKulC,IAAIf,OAChB6uB,EAASF,EAAOC,EAChBE,EAAYtzD,KAAKilC,UAAU/Y,EAAElsB,KAAKilC,UAAUn0B,EAE5CgsC,EAAM98C,KAAKilC,UAAUumB,IAAMxrD,KAAK01B,WAAWkd,aAAaE,yBACxDugB,EAASC,GAAqB,mBAARxW,GAA8BuW,EAASC,GAAqB,mBAARxW,GAC1EoW,EAAaE,EACbH,EAAYC,EAAWI,IAEvBL,EAAYE,EACZD,EAAaD,EAAUK,GAE3B7uB,EAAI8uB,UAAUvzD,KAAKulC,KAAK4tB,EAAKF,GAAW,GAAGG,EAAKF,GAAY,EAAED,EAAUC,EAAW,EAAE,EAAElzD,KAAKilC,UAAU/Y,EAAElsB,KAAKilC,UAAUn0B,GACvH9Q,KAAKulC,IAAMhB,IAKnB2W,eAAe/2C,UAAUu9C,mBAAqB,SAAS8R,GACnDxzD,KAAKy7C,cAAc8X,UAAUvzD,KAAKulC,IAAK,EAAG,IAG9C2V,eAAe/2C,UAAU8hC,QAAU,WAC/BjmC,KAAKulC,IAAM,MAWfjjB,gBAAgB,CAACkxB,eAAgBsR,aAAcmM,eAAgB9V,eAE/DA,cAAch3C,UAAUu9C,mBAAqB,WACzC,IAAIjd,EAAMzkC,KAAKy7C,cACfhX,EAAIuY,YACJvY,EAAIgvB,OAAO,EAAG,GACdhvB,EAAIivB,OAAO1zD,KAAKqB,KAAK6qB,EAAG,GACxBuY,EAAIivB,OAAO1zD,KAAKqB,KAAK6qB,EAAGlsB,KAAKqB,KAAKyP,GAClC2zB,EAAIivB,OAAO,EAAG1zD,KAAKqB,KAAKyP,GACxB2zB,EAAIivB,OAAO,EAAG,GACdjvB,EAAIyY,OACJ,IAAIpzC,EAAEkE,EAAMhO,KAAK6oB,OAAOhf,OACxB,IAAKC,EAAIkE,EAAM,EAAGlE,GAAK,EAAGA,GAAK,GACxB9J,KAAK4oB,gBAAkB5oB,KAAK+C,SAAS+G,KACpC9J,KAAK+C,SAAS+G,GAAG0wC,eAK7BW,cAAch3C,UAAU8hC,QAAU,WAC9B,IAAIn8B,EAAEkE,EAAMhO,KAAK6oB,OAAOhf,OACxB,IAAKC,EAAIkE,EAAM,EAAGlE,GAAK,EAAGA,GAAK,EACxB9J,KAAK+C,SAAS+G,IACb9J,KAAK+C,SAAS+G,GAAGm8B,UAGzBjmC,KAAK6oB,OAAS,KACd7oB,KAAK+C,SAAW,MAqBpBmuD,cAAc/sD,UAAUq2C,YAAc,WAClC,GAAIx6C,KAAKmxD,SAAT,CAGA,IAEIrnD,EACA2Q,EAAGG,EAAIvZ,EAHPoW,EAAYzX,KAAK4O,QAAQwwC,eAAetoB,IACxC2N,EAAMzkC,KAAK4O,QAAQ6sC,cAChBztC,EAAMhO,KAAKwpB,gBAAgB3f,OAGlC,IADA46B,EAAIuY,YACClzC,EAAI,EAAGA,EAAIkE,EAAKlE,IACjB,GAAoC,MAAjC9J,KAAKwpB,gBAAgB1f,GAAGkL,KAAa,CAChChV,KAAKwpB,gBAAgB1f,GAAGk4B,MACxByC,EAAIgvB,OAAO,EAAG,GACdhvB,EAAIivB,OAAO1zD,KAAK4O,QAAQ8mB,WAAWikB,SAASztB,EAAG,GAC/CuY,EAAIivB,OAAO1zD,KAAK4O,QAAQ8mB,WAAWikB,SAASztB,EAAGlsB,KAAK4O,QAAQ8mB,WAAWikB,SAAS7oC,GAChF2zB,EAAIivB,OAAO,EAAG1zD,KAAK4O,QAAQ8mB,WAAWikB,SAAS7oC,GAC/C2zB,EAAIivB,OAAO,EAAG,IAElBryD,EAAOrB,KAAKu0C,SAASzqC,GAAGkH,EACxByJ,EAAKhD,EAAUiD,kBAAkBrZ,EAAK2P,EAAE,GAAG,GAAG3P,EAAK2P,EAAE,GAAG,GAAG,GAC3DyzB,EAAIgvB,OAAOh5C,EAAG,GAAIA,EAAG,IACrB,IAAI1D,EAAGkS,EAAO5nB,EAAKmkB,QACnB,IAAKzO,EAAI,EAAGA,EAAIkS,EAAMlS,IAClB6D,EAAMnD,EAAUqD,oBAAoBzZ,EAAK+V,EAAEL,EAAI,GAAI1V,EAAKyI,EAAEiN,GAAI1V,EAAK2P,EAAE+F,IACrE0tB,EAAIkvB,cAAc/4C,EAAI,GAAIA,EAAI,GAAIA,EAAI,GAAIA,EAAI,GAAIA,EAAI,GAAIA,EAAI,IAElEA,EAAMnD,EAAUqD,oBAAoBzZ,EAAK+V,EAAEL,EAAI,GAAI1V,EAAKyI,EAAE,GAAIzI,EAAK2P,EAAE,IACrEyzB,EAAIkvB,cAAc/4C,EAAI,GAAIA,EAAI,GAAIA,EAAI,GAAIA,EAAI,GAAIA,EAAI,GAAIA,EAAI,IAGtE5a,KAAK4O,QAAQ8mB,WAAW5yB,SAASg5C,MAAK,GACtCrX,EAAIyY,SAGRgU,cAAc/sD,UAAU0mC,gBAAkByJ,YAAYnwC,UAAU0mC,gBAEhEqmB,cAAc/sD,UAAU8hC,QAAU,WAC9BjmC,KAAK4O,QAAU,MAcnB0T,gBAAgB,CAACoiC,YAAY7O,iBAAiBob,cAAcrM,cAAcjP,iBAAiBC,aAAaE,mBAAoBkF,gBAE5HA,eAAe72C,UAAU+8C,YAAcnL,qBAAqB5xC,UAAU+8C,YAEtElG,eAAe72C,UAAUyvD,gBAAkB,CAACpF,QAAQ,EAAEzO,QAAO,GAE7D/E,eAAe72C,UAAU0vD,aAAe,GAExC7Y,eAAe72C,UAAUo9C,cAAgB,WACrCvhD,KAAK4sD,aAAa5sD,KAAKmlD,WAAWnlD,KAAKslD,UAAUtlD,KAAKm3C,cAAc,EAAM,KAG9E6D,eAAe72C,UAAU8oD,mBAAqB,SAAS5rD,EAAM8+C,GACzD,IAAIsD,EAAY,CACZpiD,KAAMA,EACNK,KAAML,EAAKkW,GACXu8C,cAAe9zD,KAAKqkD,kBAAkBG,qBAAqBrE,GAC3DA,WAAY,GACZp9C,SAAU,GACVqiB,QAAoB,IAAZ/jB,EAAK+0C,IAEb8W,EAAc,GAclB,GAbc,MAAX7rD,EAAKkW,IAAyB,MAAXlW,EAAKkW,IACvB21C,EAAYr2C,EAAI+Z,gBAAgB8F,QAAQ12B,KAAKqB,EAAKwV,EAAE,EAAE,IAAI7W,MACtDktD,EAAYr2C,EAAEG,IACdysC,EAAUsQ,GAAK,OAAOzmD,SAAS4/C,EAAYr2C,EAAE7F,EAAE,IAAI,IAAI1D,SAAS4/C,EAAYr2C,EAAE7F,EAAE,IAAI,IAAI1D,SAAS4/C,EAAYr2C,EAAE7F,EAAE,IAAI,MAEtG,OAAZ3P,EAAKkW,IAA2B,OAAZlW,EAAKkW,KAChC21C,EAAYn8C,EAAI6f,gBAAgB8F,QAAQ12B,KAAKqB,EAAK0P,EAAE,EAAE,KAAK/Q,MAC3DktD,EAAYp2C,EAAI8Z,gBAAgB8F,QAAQ12B,KAAKqB,EAAKyV,EAAE,EAAE,KAAK9W,MAC3DktD,EAAYp8C,EAAI8f,gBAAgB8F,QAAQ12B,KAAKqB,EAAKyP,GAAG,CAACkG,EAAE,GAAG,EAAE,IAAKhX,MAClEktD,EAAYt2C,EAAIga,gBAAgB8F,QAAQ12B,KAAKqB,EAAKuV,GAAG,CAACI,EAAE,GAAG,EAAE1I,UAAUtO,MACvEktD,EAAYh8C,EAAI,IAAIgtB,iBAAiBl+B,KAAKqB,EAAK6P,EAAElR,OAErDktD,EAAY91C,EAAIwZ,gBAAgB8F,QAAQ12B,KAAKqB,EAAK+V,EAAE,EAAE,IAAKpX,MAC7C,MAAXqB,EAAKkW,IAAyB,MAAXlW,EAAKkW,IAUvB,GATAksC,EAAU2J,GAAKptD,KAAKoqD,OAAO/oD,EAAK+rD,KAAO,QACvC3J,EAAU4J,GAAKrtD,KAAKqqD,OAAOhpD,EAAKgsD,KAAO,QACzB,GAAXhsD,EAAKgsD,KACJ5J,EAAU6J,GAAKjsD,EAAKisD,IAExBJ,EAAYhhC,EAAI0E,gBAAgB8F,QAAQ12B,KAAKqB,EAAK6qB,EAAE,EAAE,KAAKlsB,MACvDktD,EAAYhhC,EAAElV,IACdysC,EAAUuQ,GAAK9G,EAAYhhC,EAAElb,GAE9B3P,EAAKoQ,EAAE,CACN,IAAIA,EAAI,IAAIosB,aAAa79B,KAAKqB,EAAKoQ,EAAE,SAAUzR,MAC/CktD,EAAYz7C,EAAIA,EACZy7C,EAAYz7C,EAAEuF,IACdysC,EAAUwQ,GAAK/G,EAAYz7C,EAAEusB,UAC7BylB,EAAUyQ,GAAKhH,EAAYz7C,EAAEwsB,WAAW,UAIhDwlB,EAAUxyC,EAAe,IAAX5P,EAAK4P,EAAU,UAAY,UAI7C,OAFAjR,KAAKolD,WAAW7yC,KAAKkxC,GACrByJ,EAAYr+C,MAAQ40C,EACbyJ,GAGXlS,eAAe72C,UAAUqpD,mBAAqB,SAASnsD,GACnD,IAAI6rD,EAAc,CACd9iC,GAAI,GACJ+sB,aAAc,IAElB,OAAO+V,GAGXlS,eAAe72C,UAAUspD,uBAAyB,SAASpsD,GACvD,IAAI6rD,EAAc,CACdz1C,UAAY,CACR+2C,QAAS,EACTzO,QAAO,EACPjjC,IAAK9c,KAAKqkD,kBAAkBmD,YAC5B3jB,GAAIjT,gBAAgB8F,QAAQ12B,KAAKqB,EAAK+V,EAAE,EAAE,IAAKpX,MAC/C4jC,OAAQjN,yBAAyB2B,qBAAqBt4B,KAAKqB,EAAKrB,QAGxE,OAAOktD,GAGXlS,eAAe72C,UAAUwpD,mBAAqB,SAAStsD,GACnD,IAAI6rD,EAAc,IAAI9I,YAAYpkD,KAAMqB,EAAMrB,KAAKolD,WAAYplD,KAAKqkD,mBAIpE,OAFArkD,KAAK6pB,OAAOtX,KAAK26C,GACjBltD,KAAKgqD,oBAAoBkD,GAClBA,GAGXlS,eAAe72C,UAAUk/B,aAAe,WACpCrjC,KAAK81B,eAAgB,EACrB,IAAIhsB,EAAGkE,EAAMhO,KAAKslD,UAAUz7C,OAC5B,IAAKC,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EACtB9J,KAAKm3C,aAAartC,GAAK9J,KAAKslD,UAAUx7C,GAI1C,IAFA9J,KAAK4sD,aAAa5sD,KAAKmlD,WAAWnlD,KAAKslD,UAAUtlD,KAAKm3C,cAAc,EAAM,IAC1EnpC,EAAMhO,KAAKwT,kBAAkB3J,OACxBC,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EACtB9J,KAAKwT,kBAAkB1J,GAAG8J,WAE9B5T,KAAKmqD,kBACLnqD,KAAKqkD,kBAAkBkD,iBAAiBvnD,KAAK81B,gBAGjDklB,eAAe72C,UAAUgwD,wBAA0B,SAAS18C,GACxD,IAAI3N,EAAGkE,EAAMhO,KAAKolD,WAAWv7C,OAC7B,IAAKC,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EAClB9J,KAAKolD,WAAWt7C,GAAGsb,QACnBplB,KAAKolD,WAAWt7C,GAAGq2C,WAAW5tC,KAAKkF,IAK/CujC,eAAe72C,UAAUiwD,6BAA+B,WACpD,IAAItqD,EAAGkE,EAAMhO,KAAKolD,WAAWv7C,OAC7B,IAAKC,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EAClB9J,KAAKolD,WAAWt7C,GAAGsb,QACnBplB,KAAKolD,WAAWt7C,GAAGq2C,WAAWhgB,OAK1C6a,eAAe72C,UAAUkwD,YAAc,SAAS/kB,GAC5C,IAAIxlC,EAAGkE,EAAMshC,EAAOzlC,OACpB,IAAKC,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EACtBwlC,EAAOxlC,GAAGsb,QAAS,GAI3B41B,eAAe72C,UAAUyoD,aAAe,SAAS95C,EAAIwyC,EAAWnO,EAAcmd,EAAcnU,GACxF,IAAIr2C,EACAiN,EAAGkS,EACgCglC,EAAcD,EAAUD,EAFxD//C,EAAM8E,EAAIjJ,OAAS,EAEtBqkD,EAAY,GAAIC,EAAe,GAC/BoG,EAAgB,GAAG9jC,OAAO0vB,GAC9B,IAAIr2C,EAAEkE,EAAIlE,GAAG,EAAEA,GAAG,EAAE,CAOhB,GANAmkD,EAAejuD,KAAKsqD,uBAAuBx3C,EAAIhJ,IAC3CmkD,EAGA3I,EAAUx7C,GAAKqtC,EAAa8W,EAAe,GAF3Cn7C,EAAIhJ,GAAG0qD,cAAgBF,EAIX,MAAbxhD,EAAIhJ,GAAGyN,IAA2B,MAAbzE,EAAIhJ,GAAGyN,IAA0B,MAAbzE,EAAIhJ,GAAGyN,IAA0B,MAAbzE,EAAIhJ,GAAGyN,GAC/D02C,EAGA3I,EAAUx7C,GAAG+E,MAAMuW,QAAS,EAF5BkgC,EAAUx7C,GAAK9J,KAAKitD,mBAAmBn6C,EAAIhJ,GAAIyqD,GAKnDrG,EAAU37C,KAAK+yC,EAAUx7C,GAAG+E,YAC1B,GAAgB,MAAbiE,EAAIhJ,GAAGyN,GAAW,CACvB,GAAI02C,EAIA,IADAhlC,EAAOq8B,EAAUx7C,GAAGsgB,GAAGvgB,OACnBkN,EAAE,EAAEA,EAAEkS,EAAKlS,GAAG,EACduuC,EAAUx7C,GAAGqtC,aAAapgC,GAAKuuC,EAAUx7C,GAAGsgB,GAAGrT,QAJnDuuC,EAAUx7C,GAAK9J,KAAKwtD,mBAAmB16C,EAAIhJ,IAO/C9J,KAAK4sD,aAAa95C,EAAIhJ,GAAGsgB,GAAGk7B,EAAUx7C,GAAGsgB,GAAGk7B,EAAUx7C,GAAGqtC,aAAcmd,EAAcC,OACnE,MAAbzhD,EAAIhJ,GAAGyN,IACR02C,IACAF,EAAmB/tD,KAAKytD,uBAAuB36C,EAAIhJ,IACnDw7C,EAAUx7C,GAAKikD,GAEnBwG,EAAchiD,KAAK+yC,EAAUx7C,IAC7B9J,KAAKm0D,wBAAwB7O,EAAUx7C,KACrB,MAAbgJ,EAAIhJ,GAAGyN,IAA2B,MAAbzE,EAAIhJ,GAAGyN,IAA2B,MAAbzE,EAAIhJ,GAAGyN,IAA2B,MAAbzE,EAAIhJ,GAAGyN,GACvE02C,IACA3I,EAAUx7C,GAAK9J,KAAK2tD,mBAAmB76C,EAAIhJ,KAG7B,MAAbgJ,EAAIhJ,GAAGyN,IAA2B,MAAbzE,EAAIhJ,GAAGyN,IAC7B02C,GAMAD,EAAW1I,EAAUx7C,GACrBkkD,EAAS5oC,QAAS,IANlB4oC,EAAW5wB,eAAeG,YAAYzqB,EAAIhJ,GAAGyN,IAC7Cy2C,EAASr0B,KAAK35B,KAAK8S,EAAIhJ,IACvBw7C,EAAUx7C,GAAKkkD,EACfhuD,KAAKqlD,eAAe9yC,KAAKy7C,IAK7BG,EAAa57C,KAAKy7C,IACC,MAAbl7C,EAAIhJ,GAAGyN,KACT02C,GAOAD,EAAW1I,EAAUx7C,GACrBkkD,EAAS5oC,QAAS,IAPlB4oC,EAAW5wB,eAAeG,YAAYzqB,EAAIhJ,GAAGyN,IAC7C+tC,EAAUx7C,GAAKkkD,EACfA,EAASr0B,KAAK35B,KAAK8S,EAAIhJ,EAAEw7C,GACzBtlD,KAAKqlD,eAAe9yC,KAAKy7C,GACzBsG,GAAe,GAKnBnG,EAAa57C,KAAKy7C,IAEtBhuD,KAAKuqD,oBAAoBz3C,EAAIhJ,GAAIA,EAAI,GAKzC,IAHA9J,KAAKo0D,+BACLp0D,KAAKq0D,YAAYnG,GACjBlgD,EAAMmgD,EAAatkD,OACfC,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACbqkD,EAAarkD,GAAGsb,QAAS,GAIjC41B,eAAe72C,UAAUu9C,mBAAqB,WAC1C1hD,KAAK4zD,gBAAgBpF,QAAU,EAC/BxuD,KAAK4zD,gBAAgB7T,QAAS,EAC9B//C,KAAKmqD,kBACLnqD,KAAKqkD,kBAAkBkD,iBAAiBvnD,KAAK81B,eAC7C91B,KAAKouD,YAAYpuD,KAAK4zD,gBAAgB5zD,KAAKmlD,WAAWnlD,KAAKslD,WAAU,IAGzEtK,eAAe72C,UAAUswD,qBAAuB,SAASC,EAAiBC,IAEnED,EAAgB3U,QAAU4U,EAAe9wB,GAAGlwB,MAAQ3T,KAAK81B,iBACxD6+B,EAAenG,QAAUkG,EAAgBlG,QACzCmG,EAAenG,SAAWmG,EAAe9wB,GAAG7yB,EAC5C2jD,EAAe5U,QAAS,IAIhC/E,eAAe72C,UAAUywD,UAAY,WACjC,IAAI9qD,EACAiN,EAAGkS,EAAMjS,EAAGkS,EAAKkiC,EAAMyJ,EAAiFnzD,EAAMozD,EAD3G9mD,EAAMhO,KAAKolD,WAAWv7C,OACK/G,EAAW9C,KAAK01B,WAAW5yB,SAAU2hC,EAAMzkC,KAAK01B,WAAW+lB,cAC7F,IAAI3xC,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EASb,GARAgrD,EAAe90D,KAAKolD,WAAWt7C,GAC/BpI,EAAOozD,EAAapzD,MAON,OAATA,GAA0B,OAATA,GAAsC,IAApBozD,EAAad,KAAcc,EAAazzD,KAAKmzD,eAAuC,IAAtBM,EAAaC,MAAqD,IAAvC/0D,KAAK01B,WAAWoe,mBAAjJ,CAoBA,IAjBAhxC,EAASg5C,OACTsP,EAAQ0J,EAAa/xD,SACT,OAATrB,GAA0B,OAATA,GAChB+iC,EAAIuwB,YAAuB,OAATtzD,EAAgBozD,EAAaf,GAAKe,EAAaG,IACjExwB,EAAI2K,UAAY0lB,EAAad,GAC7BvvB,EAAIywB,QAAUJ,EAAa1H,GAC3B3oB,EAAI0wB,SAAWL,EAAazH,GAC5B5oB,EAAI2wB,WAAaN,EAAaxH,IAAM,GAEpC7oB,EAAIC,UAAqB,OAAThjC,EAAgBozD,EAAaf,GAAKe,EAAaG,IAEnEnyD,EAAS44C,WAAWoZ,EAAaC,MACrB,OAATrzD,GAA0B,OAATA,GAChB+iC,EAAIuY,YAERl6C,EAASu4C,aAAayZ,EAAahB,cAAc1U,eAAe79C,OAChE0nB,EAAOmiC,EAAMvhD,OACTkN,EAAE,EAAEA,EAAEkS,EAAKlS,GAAG,EAAE,CAWhB,IAVY,OAATrV,GAA0B,OAATA,IAChB+iC,EAAIuY,YACD8X,EAAab,KACZxvB,EAAI4wB,YAAYP,EAAab,IAC7BxvB,EAAI6wB,eAAiBR,EAAaZ,KAG1CW,EAAQzJ,EAAMr0C,GAAG0tC,QACjBv7B,EAAO2rC,EAAMhrD,OAETmN,EAAE,EAAEA,EAAEkS,EAAKlS,GAAG,EACG,KAAd69C,EAAM79C,GAAGzF,EACRkzB,EAAIgvB,OAAOoB,EAAM79C,GAAG3F,EAAE,GAAGwjD,EAAM79C,GAAG3F,EAAE,IACjB,KAAdwjD,EAAM79C,GAAGzF,EACdkzB,EAAIkvB,cAAckB,EAAM79C,GAAG4D,IAAI,GAAGi6C,EAAM79C,GAAG4D,IAAI,GAAGi6C,EAAM79C,GAAG4D,IAAI,GAAGi6C,EAAM79C,GAAG4D,IAAI,GAAGi6C,EAAM79C,GAAG4D,IAAI,GAAGi6C,EAAM79C,GAAG4D,IAAI,IAE/G6pB,EAAIwY,YAGA,OAATv7C,GAA0B,OAATA,IAChB+iC,EAAI2sB,SACD0D,EAAab,IACZxvB,EAAI4wB,YAAYr1D,KAAK6zD,eAIrB,OAATnyD,GAA0B,OAATA,GAChB+iC,EAAI4sB,KAAKyD,EAAa7jD,GAE1BnO,EAAS+4C,YAIjBb,eAAe72C,UAAUiqD,YAAc,SAASsG,EAAgB3xB,EAAM1hC,EAAKk0D,GACvE,IAAIzrD,EACA6qD,EADG3mD,EAAM+0B,EAAMl5B,OAAS,EAG5B,IADA8qD,EAAiBD,EACb5qD,EAAEkE,EAAIlE,GAAG,EAAEA,GAAG,EACI,MAAfi5B,EAAMj5B,GAAGyN,IACRo9C,EAAiBtzD,EAAKyI,GAAG2N,UACzBzX,KAAKy0D,qBAAqBC,EAAiBC,IACvB,MAAf5xB,EAAMj5B,GAAGyN,IAA6B,MAAfwrB,EAAMj5B,GAAGyN,IAA6B,MAAfwrB,EAAMj5B,GAAGyN,IAA6B,MAAfwrB,EAAMj5B,GAAGyN,GACnFvX,KAAKijD,WAAWlgB,EAAMj5B,GAAGzI,EAAKyI,IACV,MAAfi5B,EAAMj5B,GAAGyN,GACdvX,KAAK6iD,WAAW9f,EAAMj5B,GAAGzI,EAAKyI,GAAG6qD,GACb,MAAf5xB,EAAMj5B,GAAGyN,GACdvX,KAAKgjD,aAAajgB,EAAMj5B,GAAGzI,EAAKyI,GAAG6qD,GACf,MAAf5xB,EAAMj5B,GAAGyN,IAA6B,MAAfwrB,EAAMj5B,GAAGyN,GACrCvX,KAAKw1D,mBAAmBzyB,EAAMj5B,GAAGzI,EAAKyI,GAAG6qD,GACrB,MAAf5xB,EAAMj5B,GAAGyN,GACdvX,KAAKouD,YAAYuG,EAAe5xB,EAAMj5B,GAAGsgB,GAAG/oB,EAAKyI,GAAGsgB,IAC/C2Y,EAAMj5B,GAAGyN,GAInBg+C,GACCv1D,KAAK40D,aAKb5Z,eAAe72C,UAAUsxD,kBAAoB,SAASlR,EAAa5lB,GAC/D,GAAG3+B,KAAK81B,eAAiB6I,EAAMhrB,MAAQ4wC,EAAYpE,WAAWxsC,KAAM,CAChE,IAEI7J,EAAGkE,EAAK+I,EAFR2+C,EAAanR,EAAYE,QACzBr5B,EAAQuT,EAAMvT,MACHnC,EAAOmC,EAAM5F,QAC5BkwC,EAAW7rD,OAAS,EACpB,IAAI8rD,EAAoBpR,EAAYpE,WAAWf,eAC/C,IAAKroC,EAAI,EAAGA,EAAIkS,EAAMlS,GAAK,EAAG,CAC1B,IAAIktB,EAAY7Y,EAAMvB,OAAO9S,GAC7B,GAAGktB,GAAaA,EAAUjzB,EAAE,CAExB,IADAhD,EAAMi2B,EAAUze,QACX1b,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EACZ,IAANA,GACA4rD,EAAWnjD,KAAK,CACZhB,EAAG,IACHF,EAAGskD,EAAkBj7C,kBAAkBupB,EAAUjzB,EAAE,GAAG,GAAIizB,EAAUjzB,EAAE,GAAG,GAAI,KAGrF0kD,EAAWnjD,KAAK,CACZhB,EAAG,IACHqJ,IAAK+6C,EAAkB76C,oBAAoBmpB,EAAU7sB,EAAEtN,EAAI,GAAIm6B,EAAUn6B,EAAEA,GAAIm6B,EAAUjzB,EAAElH,MAGvF,IAARkE,GACA0nD,EAAWnjD,KAAK,CACZhB,EAAG,IACHF,EAAGskD,EAAkBj7C,kBAAkBupB,EAAUjzB,EAAE,GAAG,GAAIizB,EAAUjzB,EAAE,GAAG,GAAI,KAGjFizB,EAAUptB,GAAK7I,IACf0nD,EAAWnjD,KAAK,CACZhB,EAAG,IACHqJ,IAAK+6C,EAAkB76C,oBAAoBmpB,EAAU7sB,EAAEtN,EAAI,GAAIm6B,EAAUn6B,EAAE,GAAIm6B,EAAUjzB,EAAE,MAE/F0kD,EAAWnjD,KAAK,CACZhB,EAAG,QAKnBgzC,EAAYE,QAAUiR,IAI9B1a,eAAe72C,UAAU8+C,WAAa,SAAS93B,EAASi4B,GACpD,IAAmB,IAAhBj4B,EAASirB,IAAejrB,EAASqpC,cAAe,CAC/C,IAAI1qD,EAAGkE,EAAMo1C,EAASkB,aAAaz6C,OACnC,IAAKC,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EACtB9J,KAAKy1D,kBAAkBrS,EAASkB,aAAax6C,GAAIs5C,EAAStwB,MAKtEkoB,eAAe72C,UAAU0+C,WAAa,SAASM,EAAUC,EAAUuR,GAC/D,IAAIlR,EAAYL,EAASv0C,OAErBu0C,EAASvsC,EAAElD,MAAQ3T,KAAK81B,iBACxB2tB,EAAUsQ,GAAK,OACbzmD,SAAS81C,EAASvsC,EAAE7F,EAAE,IAAM,IAC5B1D,SAAS81C,EAASvsC,EAAE7F,EAAE,IAAM,IAC5B1D,SAAS81C,EAASvsC,EAAE7F,EAAE,IAAM,MAE9BoyC,EAAShsC,EAAEzD,MAAQghD,EAAe5U,QAAU//C,KAAK81B,iBACjD2tB,EAAUsR,KAAO3R,EAAShsC,EAAEpG,EAAI2jD,EAAenG,UAIvDxT,eAAe72C,UAAUqxD,mBAAqB,SAASrS,EAAUC,EAAUuR,GACvE,IAAIlR,EAAYL,EAASv0C,MACzB,IAAI40C,EAAUwR,KAAO7R,EAASlyC,EAAEyC,MAAQyvC,EAASryC,EAAE4C,MAAQyvC,EAAStsC,EAAEnD,MAAyB,IAAhBwvC,EAAU5xC,IAAY6xC,EAAStyC,EAAE6C,MAAQyvC,EAASxsC,EAAEjD,MAAQ,CACvI,IAAI8wB,EAAMzkC,KAAK01B,WAAW+lB,cAEtB1gC,EAAMqoC,EAASryC,EAAEC,EAAGgK,EAAMooC,EAAStsC,EAAE9F,EACzC,GAAoB,IAAhBmyC,EAAU5xC,EACV0jD,EAAMxwB,EAAImxB,qBAAqB76C,EAAI,GAAIA,EAAI,GAAIC,EAAI,GAAIA,EAAI,SAE3D,IAAI8gB,EAAMpxB,KAAKyC,KAAKzC,KAAKuC,IAAI8N,EAAI,GAAKC,EAAI,GAAI,GAAKtQ,KAAKuC,IAAI8N,EAAI,GAAKC,EAAI,GAAI,IACzE+oC,EAAMr5C,KAAK6pB,MAAMvZ,EAAI,GAAKD,EAAI,GAAIC,EAAI,GAAKD,EAAI,IAE/CyL,EAAU48B,EAAStyC,EAAEE,GAAK,EAAI,IAAOoyC,EAAStyC,EAAEE,IAAM,GAAK,IAAMoyC,EAAStyC,EAAEE,EAC5EmR,EAAO2Z,EAAMtV,EACbzM,EAAIrP,KAAKyK,IAAI4uC,EAAMX,EAASxsC,EAAE5F,GAAKmR,EAAOpH,EAAI,GAC9Cf,EAAItP,KAAK2K,IAAI0uC,EAAMX,EAASxsC,EAAE5F,GAAKmR,EAAOpH,EAAI,GAC9Ck6C,EAAMxwB,EAAIoxB,qBAAqB97C,EAAGC,EAAG,EAAGe,EAAI,GAAIA,EAAI,GAAI+gB,GAGhE,IAAIhyB,EAAGkE,EAAMm1C,EAAUjyC,EAAEG,EACrBwyC,EAAUT,EAASlyC,EAAE2F,EACrB23C,EAAU,EAEd,IAAK1kD,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EACnBs5C,EAASlyC,EAAEstB,aAAe4kB,EAASlyC,EAAEotB,eACpCkwB,EAAUpL,EAASlyC,EAAEkG,EAAI,EAAFtN,EAAM,IAEjCmrD,EAAIa,aAAajS,EAAY,EAAJ/5C,GAAS,IAAI,QAAS+5C,EAAY,EAAJ/5C,EAAQ,GAAK,IAAM+5C,EAAY,EAAJ/5C,EAAQ,GAAK,IAAI+5C,EAAY,EAAJ/5C,EAAQ,GAAK,IAAM0kD,EAAU,KAE5I/K,EAAUwR,IAAMA,EAEpBxR,EAAUsR,KAAO3R,EAAShsC,EAAEpG,EAAE2jD,EAAenG,SAIjDxT,eAAe72C,UAAU6+C,aAAe,SAASG,EAAUC,EAAUuR,GACjE,IAAIlR,EAAYL,EAASv0C,MACrB4C,EAAI2xC,EAAS3xC,EACdA,IAAMA,EAAEkC,MAAS3T,KAAK81B,iBACrB2tB,EAAUwQ,GAAKxiD,EAAEusB,UACjBylB,EAAUyQ,GAAKziD,EAAEwsB,WAAW,KAE7BmlB,EAASvsC,EAAElD,MAAQ3T,KAAK81B,iBACvB2tB,EAAUsQ,GAAK,OAAOzmD,SAAS81C,EAASvsC,EAAE7F,EAAE,IAAI,IAAI1D,SAAS81C,EAASvsC,EAAE7F,EAAE,IAAI,IAAI1D,SAAS81C,EAASvsC,EAAE7F,EAAE,IAAI,MAE7GoyC,EAAShsC,EAAEzD,MAAQghD,EAAe5U,QAAU//C,KAAK81B,iBAChD2tB,EAAUsR,KAAO3R,EAAShsC,EAAEpG,EAAE2jD,EAAenG,UAE9CpL,EAASl3B,EAAEvY,MAAQ3T,KAAK81B,iBACvB2tB,EAAUuQ,GAAK5Q,EAASl3B,EAAElb,IAKlCgqC,eAAe72C,UAAU8hC,QAAU,WAC/BjmC,KAAKmlD,WAAa,KAClBnlD,KAAK01B,WAAa,KAClB11B,KAAKy7C,cAAgB,KACrBz7C,KAAKolD,WAAWv7C,OAAS,EACzB7J,KAAKslD,UAAUz7C,OAAS,GAO5ByY,gBAAgB,CAACoiC,YAAa7O,iBAAkBob,cAAetb,iBAAkBC,aAAcE,mBAAoBsF,gBAEnHA,eAAej3C,UAAU+8C,YAAcrH,gBAAgB11C,UAAU+8C,YACjE9F,eAAej3C,UAAUu2C,aAAeX,cAAc51C,UAAUu2C,aAEhEU,eAAej3C,UAAUu9C,mBAAqB,WAC1C,IAAIjd,EAAMzkC,KAAKy7C,cACfhX,EAAIC,UAAY1kC,KAAKqB,KAAKkuB,GAC1BkV,EAAIE,SAAS,EAAG,EAAG3kC,KAAKqB,KAAKsnC,GAAI3oC,KAAKqB,KAAKyxB,KAsB/CxQ,gBAAgB,CAACoiC,YAAY7O,iBAAiBob,cAActb,iBAAiBC,aAAaE,kBAAkB+O,cAAe5J,eAE3HA,cAAc92C,UAAU+pB,QAAU9a,UAAU,UAAUsb,WAAW,MAEjEusB,cAAc92C,UAAUsmD,aAAe,WACnC,IAAI3/B,EAAe9qB,KAAKixC,aAAa1H,YACrCvpC,KAAKqoC,gBAAkBj6B,iBAAiB0c,EAAa7T,EAAI6T,EAAa7T,EAAEpN,OAAS,GAEjF,IAAIksD,GAAU,EACXjrC,EAAa8d,IACZmtB,GAAU,EACV/1D,KAAK20B,OAAO08B,KAAOrxD,KAAK+qD,WAAWjgC,EAAa8d,KAEhD5oC,KAAK20B,OAAO08B,KAAO,gBAEvBrxD,KAAKqxD,KAAO0E,EACZ,IAAIC,GAAY,EACblrC,EAAayE,KACZymC,GAAY,EACZh2D,KAAK20B,OAAOy8B,OAASpxD,KAAK+qD,WAAWjgC,EAAayE,IAClDvvB,KAAK20B,OAAO48B,OAASzmC,EAAa6d,IAEtC,IACI7+B,EAAGkE,EADHigB,EAAWjuB,KAAK01B,WAAW3M,YAAYmH,cAAcpF,EAAa1Z,GAElEw6B,EAAU9gB,EAAa7T,EACvBw0B,EAAezrC,KAAK0rC,QACxB1rC,KAAKoxD,OAAS4E,EACdh2D,KAAK20B,OAAO68B,OAAS1mC,EAAauf,UAAY,MAAOrqC,KAAK01B,WAAW3M,YAAYmH,cAAcpF,EAAa1Z,GAAGgd,QAC/GpgB,EAAM8c,EAAawf,UAAUzgC,OAE7B,IAAIklC,EAAU9pB,EAAWjO,EAAGkS,EAAMW,EAAQ9S,EAAGkS,EAAMgb,EAAWgyB,EAAUC,EAAStqC,EAAc5rB,KAAKqB,KAAKuqB,YACrG4jB,EAAiB1kB,EAAayW,GAAG,IAAKzW,EAAauf,UACnDU,EAAO,EAAGC,EAAO,EAAGkB,GAAY,EAChCtS,EAAM,EACV,IAAK9vB,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EAAG,CAkBzB,IAjBAilC,EAAW/uC,KAAK01B,WAAW3M,YAAY8G,YAAY/E,EAAawf,UAAUxgC,GAAImkB,EAASI,OAAQruB,KAAK01B,WAAW3M,YAAYmH,cAAcpF,EAAa1Z,GAAGgd,SACzJnJ,EAAY8pB,GAAYA,EAAS1tC,MAAQ,GACzCoqC,EAAah2B,QACVmW,GAAeggB,EAAQ9hC,GAAGqN,IACzB4zB,GAAQyE,EACRxE,GAAQlgB,EAAasf,QACrBY,GAAQkB,EAAY,EAAI,EACxBA,GAAY,GAGhBriB,EAAS5E,EAAU4E,OAAS5E,EAAU4E,OAAO,GAAGO,GAAK,GACrDnB,EAAOY,EAAOhgB,OACd4hC,EAAah1B,MAAMqU,EAAauf,UAAU,IAAIvf,EAAauf,UAAU,KAClEze,GACC5rB,KAAK6qD,4BAA4B//B,EAAc2gB,EAAcG,EAAQ9hC,GAAG2jC,KAAM1C,EAAMC,GAExFirB,EAAW7nD,iBAAiB6a,GACxBlS,EAAE,EAAEA,EAAEkS,EAAKlS,GAAG,EAAE,CAIhB,IAHAmS,EAAOW,EAAO9S,GAAGoT,GAAGnT,EAAElN,EAAED,OACxBo6B,EAAYpa,EAAO9S,GAAGoT,GAAGnT,EACzBk/C,EAAU,GACNl/C,EAAE,EAAEA,EAAEkS,EAAKlS,GAAG,EACR,GAAHA,GACCk/C,EAAQ3jD,KAAKk5B,EAAavxB,SAAS+pB,EAAUjzB,EAAE,GAAG,GAAGizB,EAAUjzB,EAAE,GAAG,GAAG,GAAGy6B,EAAatxB,SAAS8pB,EAAUjzB,EAAE,GAAG,GAAGizB,EAAUjzB,EAAE,GAAG,GAAG,IAExIklD,EAAQ3jD,KAAKk5B,EAAavxB,SAAS+pB,EAAU7sB,EAAEJ,EAAE,GAAG,GAAGitB,EAAU7sB,EAAEJ,EAAE,GAAG,GAAG,GAAGy0B,EAAatxB,SAAS8pB,EAAU7sB,EAAEJ,EAAE,GAAG,GAAGitB,EAAU7sB,EAAEJ,EAAE,GAAG,GAAG,GAAGy0B,EAAavxB,SAAS+pB,EAAUn6B,EAAEkN,GAAG,GAAGitB,EAAUn6B,EAAEkN,GAAG,GAAG,GAAGy0B,EAAatxB,SAAS8pB,EAAUn6B,EAAEkN,GAAG,GAAGitB,EAAUn6B,EAAEkN,GAAG,GAAG,GAAGy0B,EAAavxB,SAAS+pB,EAAUjzB,EAAEgG,GAAG,GAAGitB,EAAUjzB,EAAEgG,GAAG,GAAG,GAAGy0B,EAAatxB,SAAS8pB,EAAUjzB,EAAEgG,GAAG,GAAGitB,EAAUjzB,EAAEgG,GAAG,GAAG,IAEpYk/C,EAAQ3jD,KAAKk5B,EAAavxB,SAAS+pB,EAAU7sB,EAAEJ,EAAE,GAAG,GAAGitB,EAAU7sB,EAAEJ,EAAE,GAAG,GAAG,GAAGy0B,EAAatxB,SAAS8pB,EAAU7sB,EAAEJ,EAAE,GAAG,GAAGitB,EAAU7sB,EAAEJ,EAAE,GAAG,GAAG,GAAGy0B,EAAavxB,SAAS+pB,EAAUn6B,EAAE,GAAG,GAAGm6B,EAAUn6B,EAAE,GAAG,GAAG,GAAG2hC,EAAatxB,SAAS8pB,EAAUn6B,EAAE,GAAG,GAAGm6B,EAAUn6B,EAAE,GAAG,GAAG,GAAG2hC,EAAavxB,SAAS+pB,EAAUjzB,EAAE,GAAG,GAAGizB,EAAUjzB,EAAE,GAAG,GAAG,GAAGy6B,EAAatxB,SAAS8pB,EAAUjzB,EAAE,GAAG,GAAGizB,EAAUjzB,EAAE,GAAG,GAAG,IAChYilD,EAASl/C,GAAKm/C,EAEftqC,IACCmf,GAAQa,EAAQ9hC,GAAGmN,EACnB8zB,GAAQyE,GAETxvC,KAAKklD,UAAUtrB,GACd55B,KAAKklD,UAAUtrB,GAAKnE,KAAOwgC,EAE3Bj2D,KAAKklD,UAAUtrB,GAAO,CAACnE,KAAMwgC,GAEjCr8B,GAAM,IAIdqhB,cAAc92C,UAAUu9C,mBAAqB,WACzC,IAWK53C,EAAEkE,EAAK+I,EAAGkS,EAAMjS,EAAGkS,EAXpBub,EAAMzkC,KAAKy7C,cACAz7C,KAAKo/C,eAAetoB,IAAIv1B,MACvCkjC,EAAInY,KAAOtsB,KAAK20B,OAAO68B,OACvB/sB,EAAIywB,QAAU,OACdzwB,EAAI0wB,SAAW,QACf1wB,EAAI2wB,WAAa,EAEbp1D,KAAKqB,KAAKuqB,aACV5rB,KAAKwqD,aAAa1f,YAAY9qC,KAAKixC,aAAa1H,YAAavpC,KAAKsoC,oBAItE,IAKIikB,EALAlkB,EAAkBroC,KAAKwqD,aAAaniB,gBAEpCuD,EAAU5rC,KAAKixC,aAAa1H,YAAYtyB,EAE5CjJ,EAAM49B,EAAQ/hC,OAEd,IAA4DosD,EAAUC,EAAlEC,EAAW,KAAMC,EAAa,KAAMC,EAAc,KACtD,IAAIvsD,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACb,IAAG8hC,EAAQ9hC,GAAGqN,EAAd,CASA,GANAo1C,EAAiBlkB,EAAgBv+B,GAC9ByiD,IACCvsD,KAAK01B,WAAW5yB,SAASg5C,OACzB97C,KAAK01B,WAAW5yB,SAASu4C,aAAakR,EAAel7C,GACrDrR,KAAK01B,WAAW5yB,SAAS44C,WAAW6Q,EAAen1C,IAEpDpX,KAAKqxD,KAAK,CAaT,IAZG9E,GAAkBA,EAAe3jB,GAC7ButB,IAAa5J,EAAe3jB,KAC3ButB,EAAW5J,EAAe3jB,GAC1BnE,EAAIC,UAAY6nB,EAAe3jB,IAE9ButB,IAAan2D,KAAK20B,OAAO08B,OAC9B8E,EAAWn2D,KAAK20B,OAAO08B,KACvB5sB,EAAIC,UAAY1kC,KAAK20B,OAAO08B,MAEhC4E,EAAWj2D,KAAKklD,UAAUp7C,GAAG2rB,KAC7BxM,EAAOgtC,EAASpsD,OAChB7J,KAAK01B,WAAW+lB,cAAcuB,YAC1BjmC,EAAE,EAAEA,EAAEkS,EAAKlS,GAAG,EAId,IAHAm/C,EAAUD,EAASl/C,GACnBmS,EAAOgtC,EAAQrsD,OACf7J,KAAK01B,WAAW+lB,cAAcgY,OAAOyC,EAAQ,GAAIA,EAAQ,IACpDl/C,EAAI,EAAGA,EAAIkS,EAAMlS,GAAK,EACvBhX,KAAK01B,WAAW+lB,cAAckY,cAAcuC,EAAQl/C,GAAIk/C,EAAQl/C,EAAI,GAAIk/C,EAAQl/C,EAAI,GAAIk/C,EAAQl/C,EAAI,GAAIk/C,EAAQl/C,EAAI,GAAIk/C,EAAQl/C,EAAI,IAG5IhX,KAAK01B,WAAW+lB,cAAcwB,YAC9Bj9C,KAAK01B,WAAW+lB,cAAc4V,OAGlC,GAAGrxD,KAAKoxD,OAAO,CAsBX,IArBG7E,GAAkBA,EAAe5jB,GAC7B0tB,IAAgB9J,EAAe5jB,KAC9B0tB,EAAc9J,EAAe5jB,GAC7BlE,EAAI2K,UAAYmd,EAAe5jB,IAE9B0tB,IAAgBr2D,KAAK20B,OAAO48B,SACjC8E,EAAcr2D,KAAK20B,OAAO48B,OAC1B9sB,EAAI2K,UAAYpvC,KAAK20B,OAAO48B,QAE7BhF,GAAkBA,EAAeh9B,GAC7B6mC,IAAe7J,EAAeh9B,KAC7B6mC,EAAa7J,EAAeh9B,GAC5BkV,EAAIuwB,YAAczI,EAAeh9B,IAEhC6mC,IAAep2D,KAAK20B,OAAOy8B,SAChCgF,EAAap2D,KAAK20B,OAAOy8B,OACzB3sB,EAAIuwB,YAAch1D,KAAK20B,OAAOy8B,QAElC6E,EAAWj2D,KAAKklD,UAAUp7C,GAAG2rB,KAC7BxM,EAAOgtC,EAASpsD,OAChB7J,KAAK01B,WAAW+lB,cAAcuB,YAC1BjmC,EAAE,EAAEA,EAAEkS,EAAKlS,GAAG,EAId,IAHAm/C,EAAUD,EAASl/C,GACnBmS,EAAOgtC,EAAQrsD,OACf7J,KAAK01B,WAAW+lB,cAAcgY,OAAOyC,EAAQ,GAAIA,EAAQ,IACpDl/C,EAAI,EAAGA,EAAIkS,EAAMlS,GAAK,EACvBhX,KAAK01B,WAAW+lB,cAAckY,cAAcuC,EAAQl/C,GAAIk/C,EAAQl/C,EAAI,GAAIk/C,EAAQl/C,EAAI,GAAIk/C,EAAQl/C,EAAI,GAAIk/C,EAAQl/C,EAAI,GAAIk/C,EAAQl/C,EAAI,IAG5IhX,KAAK01B,WAAW+lB,cAAcwB,YAC9Bj9C,KAAK01B,WAAW+lB,cAAc2V,SAG/B7E,GACCvsD,KAAK01B,WAAW5yB,SAAS+4C,YAOrC4V,UAAUttD,UAAUq2C,YAAc,aAElCkX,aAAavtD,UAAY,CACrBmyD,eAAgB,aAChBlV,oBAAqB,WACjBphD,KAAKwhD,YAAcpuC,UAAUpT,KAAKqB,KAAKk1D,IAAM,OAC1Cv2D,KAAKqB,KAAKioB,SACTtpB,KAAKmyC,WAAaj/B,SAAS,OAC3BlT,KAAK2yC,aAAez/B,SAAS,KAC7BlT,KAAKy1C,cAAgBz1C,KAAK2yC,aAC1B3yC,KAAKmyC,WAAW1mC,YAAYzL,KAAK2yC,cACjC3yC,KAAKwhD,YAAY/1C,YAAYzL,KAAKmyC,aAElCnyC,KAAK2yC,aAAe3yC,KAAKwhD,YAE7B7yC,SAAS3O,KAAKwhD,cAElBH,wBAAyB,WACrBrhD,KAAK8pD,yBAA2B,IAAI2H,UAAUzxD,MAC9CA,KAAKgpD,mBAAqBhpD,KAAKwhD,YAC/BxhD,KAAKy1C,cAAgBz1C,KAAK2yC,aACtB3yC,KAAKqB,KAAKqoD,IACV1pD,KAAK2yC,aAAaxkB,aAAa,KAAKnuB,KAAKqB,KAAKqoD,IAE9C1pD,KAAKqB,KAAKoqB,IACVzrB,KAAK2yC,aAAaxkB,aAAa,QAASnuB,KAAKqB,KAAKoqB,IAEjC,IAAjBzrB,KAAKqB,KAAKqnD,IACV1oD,KAAKwoD,gBAGb/G,cAAe,WACRzhD,KAAKo/C,eAAeU,UACnB9/C,KAAKgpD,mBAAmBn6C,MAAM4I,UAAYzX,KAAKgpD,mBAAmBn6C,MAAMwvC,gBAAkBr+C,KAAKo/C,eAAetoB,IAAItb,SAEnHxb,KAAKo/C,eAAeW,SACnB//C,KAAKgpD,mBAAmBn6C,MAAM2/C,QAAUxuD,KAAKo/C,eAAeC,MAAMjoC,EAAEpG,IAG5EwpC,YAAa,WAGLx6C,KAAKqB,KAAK+0C,IAAMp2C,KAAKugD,SAGzBvgD,KAAKigD,kBACLjgD,KAAK8gD,mBACL9gD,KAAKyhD,gBACLzhD,KAAK0hD,qBACD1hD,KAAK81B,gBACL91B,KAAK81B,eAAgB,KAG7BmQ,QAAS,WACLjmC,KAAK2yC,aAAe,KACpB3yC,KAAKgpD,mBAAqB,KACvBhpD,KAAK+oD,eACJ/oD,KAAK+oD,aAAe,MAErB/oD,KAAK4qC,cACJ5qC,KAAK4qC,YAAY3E,UACjBjmC,KAAK4qC,YAAc,OAG3B0W,2BAA4B,WACxBthD,KAAK4qC,YAAc,IAAI0J,YAAYt0C,KAAKqB,KAAMrB,KAAMA,KAAK01B,aAE7D8gC,WAAY,aAEZlc,SAAU,cAEdoX,aAAavtD,UAAUw2C,eAAiBgK,eAAexgD,UAAUw2C,eACjE+W,aAAavtD,UAAUy9C,mBAAqB8P,aAAavtD,UAAU8hC,QACnEyrB,aAAavtD,UAAUu0C,sBAAwBxE,eAAe/vC,UAAUu0C,sBAIxEp2B,gBAAgB,CAACoiC,YAAY7O,iBAAiB6b,aAAa/b,iBAAiBC,aAAaG,sBAAuBiI,eAEhHA,cAAc75C,UAAUo9C,cAAgB,WACpC,IAAI9M,EACDz0C,KAAKqB,KAAKioB,SACTmrB,EAAOvhC,SAAS,QAChBuhC,EAAKtmB,aAAa,QAAQnuB,KAAKqB,KAAKsnC,IACpC8L,EAAKtmB,aAAa,SAASnuB,KAAKqB,KAAKyxB,IACrC2hB,EAAKtmB,aAAa,OAAOnuB,KAAKqB,KAAKkuB,IACnCvvB,KAAKmyC,WAAWhkB,aAAa,QAAQnuB,KAAKqB,KAAKsnC,IAC/C3oC,KAAKmyC,WAAWhkB,aAAa,SAASnuB,KAAKqB,KAAKyxB,MAEhD2hB,EAAOrhC,UAAU,OACjBqhC,EAAK5lC,MAAMsN,MAAQnc,KAAKqB,KAAKsnC,GAAK,KAClC8L,EAAK5lC,MAAM21B,OAASxkC,KAAKqB,KAAKyxB,GAAK,KACnC2hB,EAAK5lC,MAAM4nD,gBAAkBz2D,KAAKqB,KAAKkuB,IAE3CvvB,KAAK2yC,aAAalnC,YAAYgpC,IAalCnyB,gBAAgB,CAAC4xB,eAAgB4Q,aAAc4M,cAAe3T,cAC9DA,aAAa55C,UAAUuyD,6BAA+B3Y,aAAa55C,UAAUk9C,wBAE7EtD,aAAa55C,UAAUk9C,wBAA0B,WAC7CrhD,KAAK02D,+BAEF12D,KAAKqB,KAAKioB,SACTtpB,KAAKmyC,WAAWhkB,aAAa,QAAQnuB,KAAKqB,KAAK6qB,GAC/ClsB,KAAKmyC,WAAWhkB,aAAa,SAASnuB,KAAKqB,KAAKyP,GAChD9Q,KAAKgpD,mBAAqBhpD,KAAKwhD,aAE/BxhD,KAAKgpD,mBAAqBhpD,KAAK2yC,cAIvCoL,aAAa55C,UAAUm5C,iBAAmB,SAAS7nB,EAAKqD,GACpD,IACI8hB,EADA7jC,EAAI,EAER,MAAMA,EAAE+hB,EACD94B,KAAK+C,SAASgU,IAAM/W,KAAK+C,SAASgU,GAAG4jC,iBACpCC,EAAc56C,KAAK+C,SAASgU,GAAG4jC,kBAEnC5jC,GAAK,EAEN6jC,EACC56C,KAAK2yC,aAAakI,aAAaplB,EAAMmlB,GAErC56C,KAAK2yC,aAAalnC,YAAYgqB,IA+BtCnT,gBAAgB,CAACoiC,YAAY7O,iBAAiBmI,cAAcnE,gBAAgB6X,aAAa/b,iBAAiBC,aAAaE,mBAAoB6H,eAC3IA,cAAcx5C,UAAUwyD,kBAAoBhZ,cAAcx5C,UAAUu9C,mBAEpE/D,cAAcx5C,UAAUo9C,cAAgB,WACpC,IAAIte,EAEJ,GADAjjC,KAAKwhD,YAAY3yC,MAAM+d,SAAW,EAC9B5sB,KAAKqB,KAAKioB,QACVtpB,KAAK2yC,aAAalnC,YAAYzL,KAAK2xD,iBACnC1uB,EAAOjjC,KAAKmyC,eACT,CACHlP,EAAO/vB,SAAS,OAChB,IAAIiZ,EAAOnsB,KAAKoD,KAAK/B,KAAOrB,KAAKoD,KAAK/B,KAAOrB,KAAK01B,WAAWikB,SAC7D1W,EAAK9U,aAAa,QAAQhC,EAAKD,GAC/B+W,EAAK9U,aAAa,SAAShC,EAAKrb,GAChCmyB,EAAKx3B,YAAYzL,KAAK2xD,iBACtB3xD,KAAK2yC,aAAalnC,YAAYw3B,GAGlCjjC,KAAK4sD,aAAa5sD,KAAKmlD,WAAWnlD,KAAKslD,UAAUtlD,KAAKm3C,aAAan3C,KAAK2xD,gBAAgB,EAAG,IAAI,GAC/F3xD,KAAK6sD,qBACL7sD,KAAK42D,UAAY3zB,GAGrB0a,cAAcx5C,UAAU0yD,oBAAsB,SAASrgB,EAAc/xB,GACjE,IAAI3a,EAAGkE,EAAMwoC,EAAa3sC,OAC1B,IAAIC,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EACrB2a,EAAQ+xB,EAAa1sC,GAAG85B,OAAO5yB,EAAE0J,kBAAkB+J,EAAM,GAAIA,EAAM,GAAI,GAE3E,OAAOA,GAGXk5B,cAAcx5C,UAAU2yD,0BAA4B,SAAS7vD,EAAM8vD,GAC/D,IAEIjtD,EAAwBktD,EAAQC,EAAQC,EAAYC,EAFpDx4B,EAAQ13B,EAAK6rB,GAAG9hB,EAChBwlC,EAAevvC,EAAKuvC,aACjBxoC,EAAM2wB,EAAMnZ,QACnB,KAAIxX,GAAO,GAAX,CAGA,IAAKlE,EAAI,EAAGA,EAAIkE,EAAM,EAAGlE,GAAK,EAC1BktD,EAASh3D,KAAK62D,oBAAoBrgB,EAAc7X,EAAM3tB,EAAElH,IACxDmtD,EAASj3D,KAAK62D,oBAAoBrgB,EAAc7X,EAAMvnB,EAAEtN,IACxDotD,EAAal3D,KAAK62D,oBAAoBrgB,EAAc7X,EAAM70B,EAAEA,EAAI,IAChEqtD,EAAan3D,KAAK62D,oBAAoBrgB,EAAc7X,EAAM3tB,EAAElH,EAAI,IAChE9J,KAAKo3D,YAAYJ,EAAQC,EAAQC,EAAYC,EAAYJ,GAE1Dp4B,EAAM9nB,IACLmgD,EAASh3D,KAAK62D,oBAAoBrgB,EAAc7X,EAAM3tB,EAAElH,IACxDmtD,EAASj3D,KAAK62D,oBAAoBrgB,EAAc7X,EAAMvnB,EAAEtN,IACxDotD,EAAal3D,KAAK62D,oBAAoBrgB,EAAc7X,EAAM70B,EAAE,IAC5DqtD,EAAan3D,KAAK62D,oBAAoBrgB,EAAc7X,EAAM3tB,EAAE,IAC5DhR,KAAKo3D,YAAYJ,EAAQC,EAAQC,EAAYC,EAAYJ,MAIjEpZ,cAAcx5C,UAAUizD,YAAc,SAASJ,EAAQC,EAAQC,EAAYC,EAAYJ,GACnF/2D,KAAKq3D,iBAAiBL,EAAQC,EAAQC,EAAYC,GAClD,IAAIG,EAASt3D,KAAKu3D,iBAClBR,EAAYh9C,EAAIrM,OAAO4pD,EAAOtoD,KAAM+nD,EAAYh9C,GAChDg9C,EAAYS,KAAOhqD,OAAO8pD,EAAOG,MAAOV,EAAYS,MACpDT,EAAY/8C,EAAItM,OAAO4pD,EAAOvoD,IAAKgoD,EAAY/8C,GAC/C+8C,EAAYW,KAAOlqD,OAAO8pD,EAAOK,OAAQZ,EAAYW,OAGzD/Z,cAAcx5C,UAAUozD,iBAAmB,CACvCvoD,KAAK,EACLyoD,MAAM,EACN1oD,IAAI,EACJ4oD,OAAO,GAGXha,cAAcx5C,UAAUyzD,gBAAkB,CACtC79C,EAAE,EACFy9C,KAAK,EACLx9C,EAAE,EACF09C,KAAK,EACLv7C,MAAM,EACNqoB,OAAO,GAGXmZ,cAAcx5C,UAAUkzD,iBAAmB,SAASn8C,EAAI3B,EAAIhB,EAAIs/C,GAI5D,IAFA,IAESjhD,EAAGzF,EAAG0F,EAAGtF,EAAGumD,EAAMrxC,EAAIsxC,EAF3BT,EAAS,CAAC,CAACp8C,EAAG,GAAG28C,EAAG,IAAK,CAAC38C,EAAG,GAAG28C,EAAG,KAEJ/tD,EAAI,EAAGA,EAAI,IAAKA,EAUjD,GARAqH,EAAI,EAAI+J,EAAGpR,GAAK,GAAKyP,EAAGzP,GAAK,EAAIyO,EAAGzO,GACpC8M,GAAK,EAAIsE,EAAGpR,GAAK,EAAIyP,EAAGzP,GAAK,EAAIyO,EAAGzO,GAAK,EAAI+tD,EAAG/tD,GAChD+M,EAAI,EAAI0C,EAAGzP,GAAK,EAAIoR,EAAGpR,GAEvBqH,GAAQ,EACRyF,GAAQ,EACRC,GAAQ,EAEE,IAAND,EAcJkhD,EAAO3mD,EAAIA,EAAI,EAAI0F,EAAID,EAEnBkhD,EAAO,IAIXrxC,IAAOtV,EAAIjE,QAAQ4qD,KAAQ,EAAIlhD,GAC3B,EAAI6P,GAAMA,EAAK,GAAG6wC,EAAOxtD,GAAGyI,KAAKvS,KAAKg4D,WAAWvxC,EAAGvL,EAAG3B,EAAGhB,EAAGs/C,EAAG/tD,IAEpEiuD,IAAO5mD,EAAIjE,QAAQ4qD,KAAQ,EAAIlhD,GAC3B,EAAImhD,GAAMA,EAAK,GAAGT,EAAOxtD,GAAGyI,KAAKvS,KAAKg4D,WAAWD,EAAG78C,EAAG3B,EAAGhB,EAAGs/C,EAAG/tD,SAxBpE,CAEE,GAAU,IAANqH,EACF,SAGFI,GAAKsF,EAAI1F,EAEL,EAAII,GAAKA,EAAI,GACf+lD,EAAOxtD,GAAGyI,KAAKvS,KAAKg4D,WAAWzmD,EAAE2J,EAAG3B,EAAGhB,EAAGs/C,EAAG/tD,IAmBnD9J,KAAKu3D,iBAAiBvoD,KAAOtB,OAAOjJ,MAAM,KAAM6yD,EAAO,IACvDt3D,KAAKu3D,iBAAiBxoD,IAAMrB,OAAOjJ,MAAM,KAAM6yD,EAAO,IACtDt3D,KAAKu3D,iBAAiBE,MAAQjqD,OAAO/I,MAAM,KAAM6yD,EAAO,IACxDt3D,KAAKu3D,iBAAiBI,OAASnqD,OAAO/I,MAAM,KAAM6yD,EAAO,KAG3D3Z,cAAcx5C,UAAU6zD,WAAa,SAASzmD,EAAG2J,EAAI3B,EAAIhB,EAAIs/C,EAAI/tD,GAC/D,OAAOkD,OAAO,EAAEuE,EAAG,GAAK2J,EAAGpR,GACrB,EAAIkD,OAAO,EAAEuE,EAAG,GAAKA,EAAIgI,EAAGzP,GAC5B,GAAK,EAAEyH,GAAKvE,OAAOuE,EAAG,GAAKgH,EAAGzO,GAC9BkD,OAAOuE,EAAG,GAAKsmD,EAAG/tD,IAG5B6zC,cAAcx5C,UAAU8zD,qBAAuB,SAAS3S,EAAWyR,GAC/D,IAAIjtD,EAAGkE,EAAMs3C,EAAUz7C,OACvB,IAAIC,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EAClBw7C,EAAUx7C,IAAMw7C,EAAUx7C,GAAGgpB,GAC5B9yB,KAAK82D,0BAA0BxR,EAAUx7C,GAAIitD,GACvCzR,EAAUx7C,IAAMw7C,EAAUx7C,GAAGsgB,IACnCpqB,KAAKi4D,qBAAqB3S,EAAUx7C,GAAGsgB,GAAI2sC,IAKvDpZ,cAAcx5C,UAAU+zD,mBAAqB,SAASC,GAClD,OAAOn4D,KAAK4xD,YAAY73C,GAAKo+C,EAAIp+C,GAC9B/Z,KAAK4xD,YAAY53C,GAAKm+C,EAAIn+C,GAC1Bha,KAAK4xD,YAAYz1C,MAAQnc,KAAK4xD,YAAY73C,GAAKo+C,EAAIp+C,EAAIo+C,EAAIh8C,OAC3Dnc,KAAK4xD,YAAYptB,OAASxkC,KAAK4xD,YAAY53C,GAAKm+C,EAAIn+C,EAAIm+C,EAAI3zB,QAGnEmZ,cAAcx5C,UAAUu9C,mBAAqB,WAGzC,GAFA1hD,KAAK22D,qBAED32D,KAAKugD,SAAWvgD,KAAK81B,eAAiB91B,KAAK2T,MAAO,CAClD,IAAIikD,EAAkB53D,KAAK43D,gBACvBnqD,EAAM,OASV,GARAmqD,EAAgB79C,EAAItM,EACpBmqD,EAAgBJ,MAAQ/pD,EACxBmqD,EAAgB59C,EAAIvM,EACpBmqD,EAAgBF,MAAQjqD,EACxBzN,KAAKi4D,qBAAqBj4D,KAAKslD,UAAWsS,GAC1CA,EAAgBz7C,MAAQy7C,EAAgBJ,KAAOI,EAAgB79C,EAAI,EAAI69C,EAAgBJ,KAAOI,EAAgB79C,EAC9G69C,EAAgBpzB,OAASozB,EAAgBF,KAAOE,EAAgB59C,EAAI,EAAI49C,EAAgBF,KAAOE,EAAgB59C,EAE5Gha,KAAKk4D,mBAAmBN,GACvB,OAEJ,IAAIQ,GAAU,EACXp4D,KAAK4xD,YAAY1lC,IAAM0rC,EAAgBz7C,QACtCnc,KAAK4xD,YAAY1lC,EAAI0rC,EAAgBz7C,MACrCnc,KAAK42D,UAAUzoC,aAAa,QAAQypC,EAAgBz7C,OACpDi8C,GAAU,GAEXp4D,KAAK4xD,YAAY9gD,IAAM8mD,EAAgBpzB,SACtCxkC,KAAK4xD,YAAY9gD,EAAI8mD,EAAgBpzB,OACrCxkC,KAAK42D,UAAUzoC,aAAa,SAASypC,EAAgBpzB,QACrD4zB,GAAU,IAEXA,GAAYp4D,KAAK4xD,YAAY73C,IAAM69C,EAAgB79C,GAAM/Z,KAAK4xD,YAAY53C,IAAM49C,EAAgB59C,KAC/Fha,KAAK4xD,YAAY1lC,EAAI0rC,EAAgBz7C,MACrCnc,KAAK4xD,YAAY9gD,EAAI8mD,EAAgBpzB,OACrCxkC,KAAK4xD,YAAY73C,EAAI69C,EAAgB79C,EACrC/Z,KAAK4xD,YAAY53C,EAAI49C,EAAgB59C,EAErCha,KAAK42D,UAAUzoC,aAAa,UAAUnuB,KAAK4xD,YAAY73C,EAAE,IAAI/Z,KAAK4xD,YAAY53C,EAAE,IAAIha,KAAK4xD,YAAY1lC,EAAE,IAAIlsB,KAAK4xD,YAAY9gD,GAC5H9Q,KAAK42D,UAAU/nD,MAAM4I,UAAYzX,KAAK42D,UAAU/nD,MAAMwvC,gBAAkB,aAAer+C,KAAK4xD,YAAY73C,EAAI,MAAQ/Z,KAAK4xD,YAAY53C,EAAI,SAmBrJsI,gBAAgB,CAACoiC,YAAY7O,iBAAiB6b,aAAa/b,iBAAiBC,aAAaG,qBAAqB8O,cAAejH,cAE7HA,aAAaz5C,UAAUo9C,cAAgB,WAEnC,GADAvhD,KAAK8xD,SAAW9xD,KAAKynD,aAClBznD,KAAK8xD,SAAS,CACb9xD,KAAK2nC,WAAa,MAClB3nC,KAAKq4D,MAAQr4D,KAAKoD,KAAK/B,KAAK6qB,EAC5BlsB,KAAKs4D,MAAQt4D,KAAKoD,KAAK/B,KAAKyP,EAC5B9Q,KAAKmyC,WAAWhkB,aAAa,QAAQnuB,KAAKq4D,OAC1Cr4D,KAAKmyC,WAAWhkB,aAAa,SAASnuB,KAAKs4D,OAC3C,IAAIpnD,EAAIgC,SAAS,KACjBlT,KAAKy1C,cAAchqC,YAAYyF,GAC/BlR,KAAK2hD,UAAYzwC,OAEjBlR,KAAK2nC,WAAa,OAClB3nC,KAAK2hD,UAAY3hD,KAAK2yC,aAG1B3yC,KAAKu6C,kBAITqD,aAAaz5C,UAAUsmD,aAAe,WAClC,IAAI3/B,EAAe9qB,KAAKixC,aAAa1H,YACrCvpC,KAAKqoC,gBAAkBj6B,iBAAiB0c,EAAa7T,EAAI6T,EAAa7T,EAAEpN,OAAS,GACjF,IAAI0uD,EAAiBv4D,KAAK2hD,UAAU9yC,MACpC0pD,EAAe5mD,MAAQ4mD,EAAelH,KAAOvmC,EAAa8d,GAAK5oC,KAAK+qD,WAAWjgC,EAAa8d,IAAM,gBAC/F9d,EAAayE,KACZgpC,EAAenH,OAASpxD,KAAK+qD,WAAWjgC,EAAayE,IACrDgpC,EAAeC,YAAc1tC,EAAa6d,GAAG,MAEjD,IAaI7+B,EAAGkE,EAbHigB,EAAWjuB,KAAK01B,WAAW3M,YAAYmH,cAAcpF,EAAa1Z,GACtE,IAAIpR,KAAK01B,WAAW3M,YAAYmC,MAG5B,GAFAqtC,EAAe3rC,SAAW9B,EAAauf,UAAU,KACjDkuB,EAAeE,WAAa3tC,EAAauf,UAAU,KAChDpc,EAASO,OACRxuB,KAAK2hD,UAAUxO,UAAYllB,EAASO,WACjC,CACH+pC,EAAe9rC,WAAawB,EAASG,QACrC,IAAIE,EAAUxD,EAAawD,QAASD,EAASvD,EAAauD,OAC1DkqC,EAAezrC,UAAYuB,EAC3BkqC,EAAexrC,WAAauB,EAKpC,IAEIy9B,EAAM2M,EAAQC,EAFd/sB,EAAU9gB,EAAa7T,EAC3BjJ,EAAM49B,EAAQ/hC,OAEd,IACIggB,EADA4hB,EAAezrC,KAAK0rC,QACZif,EAAW,GACnB/wB,EAAM,EACV,IAAK9vB,EAAI,EAAEA,EAAIkE,EAAKlE,GAAK,EAAG,CAwCxB,GAvCG9J,KAAK01B,WAAW3M,YAAYmC,OACvBlrB,KAAK6xD,UAAUj4B,GAMfmyB,EAAQ/rD,KAAK6xD,UAAUj4B,IALvBmyB,EAAQ74C,SAAS,QACjB64C,EAAM59B,aAAa,iBAAkB,QACrC49B,EAAM59B,aAAa,kBAAkB,SACrC49B,EAAM59B,aAAa,oBAAoB,MAIvCnuB,KAAK8xD,WACF9xD,KAAKklD,UAAUtrB,IACd8+B,EAAU14D,KAAKklD,UAAUtrB,GACzB++B,EAAQD,EAAQxJ,SAAS,KAGzBwJ,EAAUtlD,UAAU,OACpBslD,EAAQ7pD,MAAM4pD,WAAa,EAC3BE,EAAQzlD,SAAS,OACjBylD,EAAMltD,YAAYsgD,GAClBp9C,SAAS+pD,MAIb14D,KAAK8xD,SAYL/F,EAAQ/rD,KAAK6xD,UAAUj4B,GAAO55B,KAAK6xD,UAAUj4B,GAAO1mB,SAAS,QAX1DlT,KAAKklD,UAAUtrB,IACd8+B,EAAU14D,KAAKklD,UAAUtrB,GACzBmyB,EAAQ/rD,KAAK6xD,UAAUj4B,KAEvB8+B,EAAUtlD,UAAU,QACpBzE,SAAS+pD,GACT3M,EAAQ34C,UAAU,QAClBzE,SAASo9C,GACT2M,EAAQjtD,YAAYsgD,IAO7B/rD,KAAK01B,WAAW3M,YAAYmC,MAAM,CACjC,IACIjG,EADA8pB,EAAW/uC,KAAK01B,WAAW3M,YAAY8G,YAAY/E,EAAawf,UAAUxgC,GAAImkB,EAASI,OAAQruB,KAAK01B,WAAW3M,YAAYmH,cAAcpF,EAAa1Z,GAAGgd,SAc7J,GAXInJ,EADD8pB,EACaA,EAAS1tC,KAET,KAEhBoqC,EAAah2B,QACVwP,GAAaA,EAAU4E,SACtBA,EAAS5E,EAAU4E,OAAO,GAAGO,GAC7BqhB,EAAah1B,MAAMqU,EAAauf,UAAU,IAAIvf,EAAauf,UAAU,KACrEsgB,EAAW3qD,KAAK0qD,gBAAgBjf,EAAa5hB,GAC7CkiC,EAAM59B,aAAa,IAAIw8B,IAEvB3qD,KAAK8xD,SAoBL9xD,KAAK2hD,UAAUl2C,YAAYsgD,OApBb,CAEd,GADA/rD,KAAK2hD,UAAUl2C,YAAYitD,GACxBzzC,GAAaA,EAAU4E,OAAO,CAG7B9gB,SAASkkB,KAAKxhB,YAAYktD,GAC1B,IAAI5B,EAAc4B,EAAMtM,UACxBsM,EAAMxqC,aAAa,QAAQ4oC,EAAY56C,MAAQ,GAC/Cw8C,EAAMxqC,aAAa,SAAS4oC,EAAYvyB,OAAS,GACjDm0B,EAAMxqC,aAAa,UAAW4oC,EAAYh9C,EAAE,EAAG,KAAMg9C,EAAY/8C,EAAE,GAAG,KAAM+8C,EAAY56C,MAAM,GAAG,KAAM46C,EAAYvyB,OAAO,IAC1Hm0B,EAAM9pD,MAAM4I,UAAYkhD,EAAM9pD,MAAMwvC,gBAAkB,cAAgB0Y,EAAYh9C,EAAE,GAAK,OAASg9C,EAAY/8C,EAAE,GAAK,MAErH4xB,EAAQ9hC,GAAGsgC,QAAU2sB,EAAY/8C,EAAE,OAGnC2+C,EAAMxqC,aAAa,QAAQ,GAC3BwqC,EAAMxqC,aAAa,SAAS,GAE5BuqC,EAAQjtD,YAAYktD,SAK5B5M,EAAMx9B,YAAcqd,EAAQ9hC,GAAGmE,IAC/B89C,EAAMN,eAAe,uCAAwC,YAAY,YACrEzrD,KAAK8xD,SAKL9xD,KAAK2hD,UAAUl2C,YAAYsgD,IAJ3B/rD,KAAK2hD,UAAUl2C,YAAYitD,GAE3B3M,EAAMl9C,MAAM4I,UAAYs0C,EAAMl9C,MAAMwvC,gBAAkB,kBAAmBvzB,EAAauf,UAAU,IAAI,SAMxGrqC,KAAK8xD,SAGL9xD,KAAKklD,UAAUtrB,GAAOmyB,EAFtB/rD,KAAKklD,UAAUtrB,GAAO8+B,EAI1B14D,KAAKklD,UAAUtrB,GAAK/qB,MAAMI,QAAU,QACpCjP,KAAK6xD,UAAUj4B,GAAOmyB,EACtBnyB,GAAO,EAEX,MAAMA,EAAM55B,KAAKklD,UAAUr7C,OACvB7J,KAAKklD,UAAUtrB,GAAK/qB,MAAMI,QAAU,OACpC2qB,GAAO,GAIfgkB,aAAaz5C,UAAUu9C,mBAAqB,WAExC,GAAG1hD,KAAKqB,KAAKuqB,YAAY,CACrB,IAAI5rB,KAAK81B,gBAAkB91B,KAAKsoC,mBAC5B,OAGItoC,KAAK8xD,UAAY9xD,KAAKo/C,eAAeU,UACpC9/C,KAAKmyC,WAAWhkB,aAAa,WAAWnuB,KAAKo/C,eAAeC,MAAMhuC,EAAEL,EAAE,GAAG,KAAMhR,KAAKo/C,eAAeC,MAAMhuC,EAAEL,EAAE,GAAG,IAAIhR,KAAKq4D,MAAM,IAAIr4D,KAAKs4D,OACzIt4D,KAAKmyC,WAAWtjC,MAAM4I,UAAYzX,KAAKmyC,WAAWtjC,MAAMwvC,gBAAkB,cAAgBr+C,KAAKo/C,eAAeC,MAAMhuC,EAAEL,EAAE,GAAK,OAAShR,KAAKo/C,eAAeC,MAAMhuC,EAAEL,EAAE,GAAK,OAMrL,GADAhR,KAAKwqD,aAAa1f,YAAY9qC,KAAKixC,aAAa1H,YAAavpC,KAAKsoC,oBAC9DtoC,KAAKsoC,oBAAuBtoC,KAAKwqD,aAAaliB,mBAAlD,CAGA,IAAKx+B,EAAEkE,EAMHu+C,EAAgBC,EAAUoM,EANlB16C,EAAQ,EAChBmqB,EAAkBroC,KAAKwqD,aAAaniB,gBAEpCuD,EAAU5rC,KAAKixC,aAAa1H,YAAYtyB,EAI5C,IAFAjJ,EAAM49B,EAAQ/hC,OAEVC,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACV8hC,EAAQ9hC,GAAGqN,EACV+G,GAAS,GAGbsuC,EAAWxsD,KAAKklD,UAAUp7C,GAC1B8uD,EAAW54D,KAAK6xD,UAAU/nD,GAC1ByiD,EAAiBlkB,EAAgBnqB,GACjCA,GAAS,EACNquC,EAAe54C,KAAKuD,IACflX,KAAK8xD,SAGLtF,EAASr+B,aAAa,YAAYo+B,EAAer1C,GAFjDs1C,EAAS39C,MAAM4I,UAAY+0C,EAAS39C,MAAMwvC,gBAAkBkO,EAAer1C,GAMnFs1C,EAAS39C,MAAM2/C,QAAUjC,EAAen1C,EACrCm1C,EAAe5jB,IAAM4jB,EAAe54C,KAAKg1B,IACxCiwB,EAASzqC,aAAa,eAAeo+B,EAAe5jB,IAErD4jB,EAAeh9B,IAAMg9B,EAAe54C,KAAK4b,IACxCqpC,EAASzqC,aAAa,SAASo+B,EAAeh9B,IAE/Cg9B,EAAe3jB,IAAM2jB,EAAe54C,KAAKi1B,KACxCgwB,EAASzqC,aAAa,OAAOo+B,EAAe3jB,IAC5CgwB,EAAS/pD,MAAM8C,MAAQ46C,EAAe3jB,KAI9C,GAAG5oC,KAAK2hD,UAAU0K,UAAYrsD,KAAKugD,SAAWvgD,KAAK81B,eAAiB91B,KAAK2T,MAAM,CAC3E,IAAIojD,EAAc/2D,KAAK2hD,UAAU0K,UAE9BrsD,KAAK4xD,YAAY1lC,IAAM6qC,EAAY56C,QAClCnc,KAAK4xD,YAAY1lC,EAAI6qC,EAAY56C,MACjCnc,KAAKmyC,WAAWhkB,aAAa,QAAQ4oC,EAAY56C,QAElDnc,KAAK4xD,YAAY9gD,IAAMimD,EAAYvyB,SAClCxkC,KAAK4xD,YAAY9gD,EAAIimD,EAAYvyB,OACjCxkC,KAAKmyC,WAAWhkB,aAAa,SAAS4oC,EAAYvyB,SAGtD,IAAIq0B,EAAS,EACV74D,KAAK4xD,YAAY1lC,IAAO6qC,EAAY56C,MAAe,EAAP08C,GAAa74D,KAAK4xD,YAAY9gD,IAAOimD,EAAYvyB,OAAgB,EAAPq0B,GAAc74D,KAAK4xD,YAAY73C,IAAOg9C,EAAYh9C,EAAI8+C,GAAY74D,KAAK4xD,YAAY53C,IAAO+8C,EAAY/8C,EAAI6+C,IAC/M74D,KAAK4xD,YAAY1lC,EAAI6qC,EAAY56C,MAAe,EAAP08C,EACzC74D,KAAK4xD,YAAY9gD,EAAIimD,EAAYvyB,OAAgB,EAAPq0B,EAC1C74D,KAAK4xD,YAAY73C,EAAIg9C,EAAYh9C,EAAI8+C,EACrC74D,KAAK4xD,YAAY53C,EAAI+8C,EAAY/8C,EAAI6+C,EAErC74D,KAAKmyC,WAAWhkB,aAAa,UAAUnuB,KAAK4xD,YAAY73C,EAAE,IAAI/Z,KAAK4xD,YAAY53C,EAAE,IAAIha,KAAK4xD,YAAY1lC,EAAE,IAAIlsB,KAAK4xD,YAAY9gD,GAC7H9Q,KAAKmyC,WAAWtjC,MAAM4I,UAAYzX,KAAKmyC,WAAWtjC,MAAMwvC,gBAAkB,aAAer+C,KAAK4xD,YAAY73C,EAAI,MAAQ/Z,KAAK4xD,YAAY53C,EAAI,UASvJsI,gBAAgB,CAACoiC,YAAY7O,iBAAiB6b,aAAa1T,cAAcrI,iBAAiBC,aAAaE,mBAAoBgI,eAG3HA,cAAc35C,UAAUo9C,cAAgB,WACpC,IAAIgK,EAAYvrD,KAAK01B,WAAWsP,cAAchlC,KAAKilC,WAC/CM,EAAM,IAAIuzB,MAEX94D,KAAKqB,KAAKioB,SACTtpB,KAAK+4D,UAAY7lD,SAAS,SAC1BlT,KAAK+4D,UAAU5qC,aAAa,QAAQnuB,KAAKilC,UAAU/Y,EAAE,MACrDlsB,KAAK+4D,UAAU5qC,aAAa,SAASnuB,KAAKilC,UAAUn0B,EAAE,MACtD9Q,KAAK+4D,UAAUtN,eAAe,+BAA+B,OAAOF,GACpEvrD,KAAK2yC,aAAalnC,YAAYzL,KAAK+4D,WACnC/4D,KAAKwhD,YAAYrzB,aAAa,QAAQnuB,KAAKilC,UAAU/Y,GACrDlsB,KAAKwhD,YAAYrzB,aAAa,SAASnuB,KAAKilC,UAAUn0B,IAEtD9Q,KAAK2yC,aAAalnC,YAAY85B,GAElCA,EAAIjW,IAAMi8B,EACPvrD,KAAKqB,KAAKqoD,IACT1pD,KAAKwhD,YAAYrzB,aAAa,KAAKnuB,KAAKqB,KAAKqoD,KAwCrDpnC,gBAAgB,CAACoiC,YAAa9O,aAAcD,kBAAmBkI,gBAE/DA,eAAe15C,UAAUy6C,MAAQ,WAC7B,IAAI90C,EAA0C1G,EAAvC4K,EAAMhO,KAAKoD,KAAK+wC,eAAetqC,OACtC,IAAIC,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EAEb1G,EAAOpD,KAAKoD,KAAK+wC,eAAerqC,GACf,OAAd1G,EAAK1B,OACJ0B,EAAK+6C,gBAAgBtvC,MAAMkwC,YAAc37C,EAAK+6C,gBAAgBtvC,MAAMmwC,kBAAoBh/C,KAAK+xD,GAAG/gD,EAAE,KAClG5N,EAAKf,UAAUwM,MAAMK,gBAAkB9L,EAAKf,UAAUwM,MAAMytC,mBAAqBl5C,EAAKf,UAAUwM,MAAMM,sBAAwB,cAC9H/L,EAAK+6C,gBAAgBtvC,MAAM4I,UAAYrU,EAAK+6C,gBAAgBtvC,MAAMwvC,gBAAkB,8CAKhGR,eAAe15C,UAAUyuD,eAAiB,aAG1C/U,eAAe15C,UAAU22C,KAAO,aAGhC+C,eAAe15C,UAAUq2C,YAAc,WACnC,IACI1wC,EAAGkE,EADH2F,EAAO3T,KAAK81B,cAEhB,GAAG91B,KAAK44C,UAEJ,IADA5qC,EAAMhO,KAAK44C,UAAU/uC,OACjBC,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACb6J,EAAO3T,KAAK44C,UAAU9uC,GAAGs1C,eAAeC,MAAM1rC,MAAQA,EAG9D,GAAGA,GAAQ3T,KAAK+xD,GAAGp+C,MAAS3T,KAAKqR,GAAKrR,KAAKqR,EAAEsC,MAAU3T,KAAKq3B,KAAOr3B,KAAKq3B,GAAG1jB,MAAQ3T,KAAKs3B,GAAG3jB,MAAQ3T,KAAKu3B,GAAG5jB,OAAU3T,KAAKm3B,GAAGxjB,MAAQ3T,KAAKk3B,GAAGvjB,MAAQ3T,KAAKi3B,GAAGtjB,MAAQ3T,KAAKo3B,GAAGzjB,MAAS3T,KAAK4W,GAAK5W,KAAK4W,EAAEjD,KAAO,CAG1M,GAFA3T,KAAK82B,IAAIrhB,QAENzV,KAAK44C,UAGJ,IADA5qC,EAAMhO,KAAK44C,UAAU/uC,OAAS,EACzBC,EAAIkE,EAAKlE,GAAK,EAAGA,GAAK,EAAG,CAC1B,IAAIkvD,EAAUh5D,KAAK44C,UAAU9uC,GAAGs1C,eAAeC,MAC/Cr/C,KAAK82B,IAAIzf,WAAW2hD,EAAQ3nD,EAAEL,EAAE,IAAIgoD,EAAQ3nD,EAAEL,EAAE,GAAGgoD,EAAQ3nD,EAAEL,EAAE,IAC/DhR,KAAK82B,IAAI/gB,SAASijD,EAAQ5hC,GAAGpmB,EAAE,IAAIgF,SAASgjD,EAAQ5hC,GAAGpmB,EAAE,IAAIiF,QAAQ+iD,EAAQ5hC,GAAGpmB,EAAE,IAClFhR,KAAK82B,IAAI/gB,SAASijD,EAAQ7hC,GAAGnmB,GAAGgF,SAASgjD,EAAQ9hC,GAAGlmB,GAAGiF,QAAQ+iD,EAAQ/hC,GAAGjmB,GAC1EhR,KAAK82B,IAAIrgB,MAAM,EAAEuiD,EAAQjoD,EAAEC,EAAE,GAAG,EAAEgoD,EAAQjoD,EAAEC,EAAE,GAAG,EAAEgoD,EAAQjoD,EAAEC,EAAE,IAC/DhR,KAAK82B,IAAIzf,UAAU2hD,EAAQpiD,EAAE5F,EAAE,GAAGgoD,EAAQpiD,EAAE5F,EAAE,GAAGgoD,EAAQpiD,EAAE5F,EAAE,IAQrE,GALIhR,KAAKqR,EACLrR,KAAK82B,IAAIzf,WAAWrX,KAAKqR,EAAEL,EAAE,IAAIhR,KAAKqR,EAAEL,EAAE,GAAGhR,KAAKqR,EAAEL,EAAE,IAEtDhR,KAAK82B,IAAIzf,WAAWrX,KAAKq3B,GAAGrmB,GAAGhR,KAAKs3B,GAAGtmB,EAAEhR,KAAKu3B,GAAGvmB,GAEjDhR,KAAK4W,EAAG,CACR,IAAIqiD,EAEAA,EADAj5D,KAAKqR,EACQ,CAACrR,KAAKqR,EAAEL,EAAE,GAAKhR,KAAK4W,EAAE5F,EAAE,GAAIhR,KAAKqR,EAAEL,EAAE,GAAKhR,KAAK4W,EAAE5F,EAAE,GAAIhR,KAAKqR,EAAEL,EAAE,GAAKhR,KAAK4W,EAAE5F,EAAE,IAE9E,CAAChR,KAAKq3B,GAAGrmB,EAAIhR,KAAK4W,EAAE5F,EAAE,GAAIhR,KAAKs3B,GAAGtmB,EAAIhR,KAAK4W,EAAE5F,EAAE,GAAIhR,KAAKu3B,GAAGvmB,EAAIhR,KAAK4W,EAAE5F,EAAE,IAEzF,IAAIkoD,EAAMxuD,KAAKyC,KAAKzC,KAAKuC,IAAIgsD,EAAW,GAAG,GAAGvuD,KAAKuC,IAAIgsD,EAAW,GAAG,GAAGvuD,KAAKuC,IAAIgsD,EAAW,GAAG,IAE3FE,EAAU,CAACF,EAAW,GAAGC,EAAID,EAAW,GAAGC,EAAID,EAAW,GAAGC,GAC7DE,EAAiB1uD,KAAKyC,KAAMgsD,EAAQ,GAAGA,EAAQ,GAAKA,EAAQ,GAAGA,EAAQ,IACvEE,EAAe3uD,KAAK6pB,MAAO4kC,EAAQ,GAAIC,GACvCE,EAAe5uD,KAAK6pB,MAAO4kC,EAAQ,IAAKA,EAAQ,IACpDn5D,KAAK82B,IAAI9gB,QAAQsjD,GAAavjD,SAASsjD,GAG3Cr5D,KAAK82B,IAAI/gB,SAAS/V,KAAKm3B,GAAGnmB,GAAGgF,SAAShW,KAAKk3B,GAAGlmB,GAAGiF,QAAQjW,KAAKi3B,GAAGjmB,GACjEhR,KAAK82B,IAAI/gB,SAAS/V,KAAKo3B,GAAGpmB,EAAE,IAAIgF,SAAShW,KAAKo3B,GAAGpmB,EAAE,IAAIiF,QAAQjW,KAAKo3B,GAAGpmB,EAAE,IACzEhR,KAAK82B,IAAIzf,UAAUrX,KAAK01B,WAAWikB,SAASztB,EAAE,EAAElsB,KAAK01B,WAAWikB,SAAS7oC,EAAE,EAAE,GAC7E9Q,KAAK82B,IAAIzf,UAAU,EAAE,EAAErX,KAAK+xD,GAAG/gD,GAK/B,IAAIuoD,GAAoBv5D,KAAKgyD,SAASt4C,OAAO1Z,KAAK82B,KAClD,IAAIyiC,GAAoBv5D,KAAK+xD,GAAGp+C,OAAS3T,KAAKoD,KAAK+wC,eAAgB,CAE/D,IAAI/wC,EACJ,IAFA4K,EAAMhO,KAAKoD,KAAK+wC,eAAetqC,OAE3BC,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACb1G,EAAOpD,KAAKoD,KAAK+wC,eAAerqC,GACf,OAAd1G,EAAK1B,OACD63D,IACCn2D,EAAKf,UAAUwM,MAAM4I,UAAYrU,EAAKf,UAAUwM,MAAMwvC,gBAAkBr+C,KAAK82B,IAAItb,SAElFxb,KAAK+xD,GAAGp+C,OACPvQ,EAAK+6C,gBAAgBtvC,MAAMkwC,YAAc37C,EAAK+6C,gBAAgBtvC,MAAMmwC,kBAAoBh/C,KAAK+xD,GAAG/gD,EAAE,OAI9GhR,KAAK82B,IAAIld,MAAM5Z,KAAKgyD,WAG5BhyD,KAAK81B,eAAgB,GAGzB+nB,eAAe15C,UAAUu2C,aAAe,SAASpD,GAC7Ct3C,KAAK2/C,kBAAkBrI,GAAK,IAGhCuG,eAAe15C,UAAU8hC,QAAU,aAEnC4X,eAAe15C,UAAUw2C,eAAiB,WAAW,OAAO,MAG5DsX,SAAS9tD,UAAUq2C,YAAc,aACjC,IAAIgf,iBAAoB,WACpB,IAAI3tC,EAAW,GACX4tC,EAAuB,GACvB5rC,EAAW,EACX7f,EAAM,EACN0rD,EAAuB,EACvBC,GAAW,EACXC,GAAY,EAEhB,SAASC,EAAcC,GACnB,IAAIhwD,EAAI,EACJiwD,EAAWD,EAAGxpD,OAClB,MAAMxG,EAAEkE,EACAyrD,EAAqB3vD,GAAGkwD,YAAcD,IACtCN,EAAqB/mD,OAAO5I,EAAG,GAC/BA,GAAK,EACLkE,GAAO,EACH+rD,EAASE,UACTC,KAGRpwD,GAAK,EAIb,SAASqwD,EAAkBvrD,EAASnO,GAChC,IAAImO,EACA,OAAO,KAEX,IAAI9E,EAAE,EACN,MAAMA,EAAEkE,EAAI,CACR,GAAGyrD,EAAqB3vD,GAAG2rB,MAAQ7mB,GAA4C,OAAjC6qD,EAAqB3vD,GAAG2rB,KAClE,OAAOgkC,EAAqB3vD,GAAGkwD,UAEnClwD,GAAG,EAEP,IAAIiwD,EAAW,IAAIK,cAGnB,OAFAC,EAAeN,EAAUnrD,GACzBmrD,EAASO,QAAQ1rD,EAASnO,GACnBs5D,EAGX,SAASQ,IACL,IAAIzwD,EAAGkE,EAAMyrD,EAAqB5vD,OAC9B2wD,EAAa,GACjB,IAAI1wD,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EACrB0wD,EAAWjoD,KAAKknD,EAAqB3vD,GAAGkwD,WAE5C,OAAOQ,EAGX,SAASC,IACLf,GAAwB,EACxBgB,IAGJ,SAASR,IACLR,GAAwB,EAG5B,SAASW,EAAeN,EAAUnrD,GAC9BmrD,EAAShvD,iBAAiB,UAAU8uD,GACpCE,EAAShvD,iBAAiB,UAAU0vD,GACpCV,EAAShvD,iBAAiB,QAAQmvD,GAClCT,EAAqBlnD,KAAK,CAACkjB,KAAM7mB,EAAQorD,UAAUD,IACnD/rD,GAAO,EAGX,SAAS2sD,EAAcC,GACnB,IAAIb,EAAW,IAAIK,cAGnB,OAFAC,EAAeN,EAAU,MACzBA,EAASc,UAAUD,GACZb,EAIX,SAASe,EAAS7sD,EAAI+rD,GAClB,IAAIlwD,EACJ,IAAIA,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACb2vD,EAAqB3vD,GAAGkwD,UAAUc,SAAS7sD,EAAK+rD,GAIxD,SAASe,EAAa9sD,EAAK+rD,GACvB,IAAIlwD,EACJ,IAAIA,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACb2vD,EAAqB3vD,GAAGkwD,UAAUe,aAAa9sD,EAAK+rD,GAI5D,SAASv3D,EAAKu3D,GACV,IAAIlwD,EACJ,IAAIA,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACb2vD,EAAqB3vD,GAAGkwD,UAAUv3D,KAAKu3D,GAG/C,SAASgB,EAAOC,GACZ,IACInxD,EADAoxD,EAAcD,EAAUptC,EAE5B,IAAI/jB,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACb2vD,EAAqB3vD,GAAGkwD,UAAUmB,YAAYD,GAElDrtC,EAAWotC,EACRvB,IAAyBE,EACxBh2D,OAAOykB,sBAAsB2yC,GAE7BrB,GAAW,EAInB,SAASyB,EAAMH,GACXptC,EAAWotC,EACXr3D,OAAOykB,sBAAsB2yC,GAGjC,SAASK,EAAMrB,GACX,IAAIlwD,EACJ,IAAIA,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACb2vD,EAAqB3vD,GAAGkwD,UAAUqB,MAAMrB,GAIhD,SAASt3D,EAAYmQ,EAAMyoD,EAAQtB,GAC/B,IAAIlwD,EACJ,IAAIA,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACb2vD,EAAqB3vD,GAAGkwD,UAAUt3D,YAAYmQ,EAAMyoD,EAAQtB,GAIpE,SAASr3D,EAAKq3D,GACV,IAAIlwD,EACJ,IAAIA,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACb2vD,EAAqB3vD,GAAGkwD,UAAUr3D,KAAKq3D,GAI/C,SAASuB,EAAYvB,GACjB,IAAIlwD,EACJ,IAAIA,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACb2vD,EAAqB3vD,GAAGkwD,UAAUuB,YAAYvB,GAItD,SAAS/zB,EAAQ+zB,GACb,IAAIlwD,EACJ,IAAIA,EAAGkE,EAAI,EAAGlE,GAAG,EAAEA,GAAG,EAClB2vD,EAAqB3vD,GAAGkwD,UAAU/zB,QAAQ+zB,GAIlD,SAASwB,EAAiB/6D,EAAeg7D,EAAY34D,GACjD,IAEIgH,EAFA4xD,EAAe,GAAGjrC,OAAO,GAAGrsB,MAAMC,KAAK0E,SAAS4yD,uBAAuB,WACjE,GAAGv3D,MAAMC,KAAK0E,SAAS4yD,uBAAuB,eACjD3tD,EAAM0tD,EAAa7xD,OAC1B,IAAIC,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACVhH,GACC44D,EAAa5xD,GAAGqkB,aAAa,eAAerrB,GAEhDq3D,EAAkBuB,EAAa5xD,GAAIrJ,GAEvC,GAAGg7D,GAAsB,IAARztD,EAAU,CACnBlL,IACAA,EAAW,OAEf,IAAImqB,EAAOlkB,SAAS6yD,qBAAqB,QAAQ,GACjD3uC,EAAKN,UAAY,GACjB,IAAIkvC,EAAMzoD,UAAU,OACpByoD,EAAIhtD,MAAMsN,MAAQ,OAClB0/C,EAAIhtD,MAAM21B,OAAS,OACnBq3B,EAAI1tC,aAAa,eAAerrB,GAChCmqB,EAAKxhB,YAAYowD,GACjB1B,EAAkB0B,EAAKp7D,IAI/B,SAASq7D,IACL,IAAIhyD,EACJ,IAAIA,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACb2vD,EAAqB3vD,GAAGkwD,UAAU8B,SAI1C,SAASpB,KACDd,GAAaF,GACVC,IACC/1D,OAAOykB,sBAAsB+yC,GAC7BzB,GAAW,GAKvB,SAASoC,IACLnC,GAAY,EAGhB,SAASoC,IACLpC,GAAY,EACZc,IAmBJ,OAhBA7uC,EAASsuC,kBAAoBA,EAC7BtuC,EAAS8uC,cAAgBA,EACzB9uC,EAASivC,SAAWA,EACpBjvC,EAASkvC,aAAeA,EACxBlvC,EAASppB,KAAOA,EAChBopB,EAASwvC,MAAQA,EACjBxvC,EAASlpB,KAAOA,EAChBkpB,EAAS0vC,YAAcA,EACvB1vC,EAAS2vC,iBAAmBA,EAC5B3vC,EAASiwC,OAASA,EAElBjwC,EAASnpB,YAAcA,EACvBmpB,EAASoa,QAAUA,EACnBpa,EAASkwC,OAASA,EAClBlwC,EAASmwC,SAAWA,EACpBnwC,EAAS0uC,wBAA0BA,EAC5B1uC,EAxNY,GA2NnBuuC,cAAgB,WAChBp6D,KAAKsS,KAAO,GACZtS,KAAKmF,KAAO,GACZnF,KAAKqF,KAAO,GACZrF,KAAK8tB,UAAW,EAChB9tB,KAAKy6C,aAAe,EACpBz6C,KAAKi8D,gBAAkB,EACvBj8D,KAAKoQ,YAAc,EACnBpQ,KAAKi4B,UAAY,EACjBj4B,KAAKk8D,UAAY,EACjBl8D,KAAKm8D,UAAY,EACjBn8D,KAAKo8D,cAAgB,EACrBp8D,KAAKq8D,UAAY,EACjBr8D,KAAKS,cAAgB,GACrBT,KAAKgrB,OAAS,GACdhrB,KAAKi6D,UAAW,EAChBj6D,KAAKkC,UAAW,EAChBlC,KAAKiC,MAAO,EACZjC,KAAK8C,SAAW,KAChB9C,KAAKs8D,YAAc3rD,kBACnB3Q,KAAKklC,WAAa,GAClBllC,KAAKu8D,cAAgB,EACrBv8D,KAAKw8D,WAAa,EAClBx8D,KAAKsM,gBAAkBA,gBACvBtM,KAAKm/B,SAAW,GAChBn/B,KAAKy8D,OAAQ,EACbz8D,KAAK08D,gBAAiB,EACtB18D,KAAKw4C,iBAAmB1qC,mBACxB9N,KAAKy5C,eAAiB,IAAIpV,gBAG9B/hB,gBAAgB,CAACnQ,WAAYioD,eAE7BA,cAAcj2D,UAAU02D,UAAY,SAASD,GACtCA,EAAOlnB,UACN1zC,KAAK0zC,QAAUknB,EAAOlnB,UAEvBknB,EAAOhnB,SAAWgnB,EAAOv4D,aACxBrC,KAAK4zC,QAAUgnB,EAAOhnB,SAAWgnB,EAAOv4D,WAE5C,IAAIs6D,EAAW/B,EAAO+B,SAAW/B,EAAO+B,SAAW/B,EAAO93D,SAAW83D,EAAO93D,SAAW,MACvF,OAAO65D,GACH,IAAK,SACD38D,KAAK8C,SAAW,IAAI0wC,eAAexzC,KAAM46D,EAAOgC,kBAChD,MACJ,IAAK,MACD58D,KAAK8C,SAAW,IAAIkvC,YAAYhyC,KAAM46D,EAAOgC,kBAC7C,MACJ,QACI58D,KAAK8C,SAAW,IAAIoxC,eAAel0C,KAAM46D,EAAOgC,kBAChD,MAER58D,KAAK8C,SAASw1C,oBAAoBt4C,KAAKw4C,kBACvCx4C,KAAK28D,SAAWA,EAEG,KAAhB/B,EAAO34D,MAA+B,OAAhB24D,EAAO34D,QACP,IAAhB24D,EAAO34D,KACZjC,KAAKiC,MAAO,GACS,IAAhB24D,EAAO34D,KACZjC,KAAKiC,MAAO,EAEZjC,KAAKiC,KAAO46D,SAASjC,EAAO34D,OAEhCjC,KAAKkC,WAAW,aAAc04D,IAASA,EAAO14D,SAC9ClC,KAAKmF,KAAOy1D,EAAOz1D,KAAOy1D,EAAOz1D,KAAQ,GACzCnF,KAAK88D,kBAAmBlC,EAAOj4C,eAAe,qBAAsBi4C,EAAOkC,iBAC3E98D,KAAKklC,WAAa01B,EAAO11B,WACrB01B,EAAOn6D,cACPT,KAAKk6C,gBAAgB0gB,EAAOn6D,eACtBm6D,EAAOv1D,QAE0B,IAAnCu1D,EAAOv1D,KAAK03D,YAAY,MACxB/8D,KAAKqF,KAAOu1D,EAAOv1D,KAAKwpC,OAAO,EAAE+rB,EAAOv1D,KAAK03D,YAAY,MAAM,GAE/D/8D,KAAKqF,KAAOu1D,EAAOv1D,KAAKwpC,OAAO,EAAE+rB,EAAOv1D,KAAK03D,YAAY,KAAK,GAElE/8D,KAAKg9D,SAAWpC,EAAOv1D,KAAKwpC,OAAO+rB,EAAOv1D,KAAK03D,YAAY,KAAK,GAChE/8D,KAAKg9D,SAAWh9D,KAAKg9D,SAASnuB,OAAO,EAAE7uC,KAAKg9D,SAASD,YAAY,UAEjEr2B,YAAYc,KAAKozB,EAAOv1D,KAAMrF,KAAKk6C,gBAAgBznC,KAAKzS,MAAO,WAC3DA,KAAKi9D,QAAQ,gBACfxqD,KAAKzS,SAIfo6D,cAAcj2D,UAAUm2D,QAAU,SAAU1mB,EAASnzC,GACjD,IAAIm6D,EAAS,CACThnB,QAASA,EACTnzC,cAAeA,EAA2C,kBAAnBA,EAA+BA,EAAgBupB,KAAKC,MAAMxpB,GAAiB,MAElHy8D,EAAoBtpB,EAAQupB,WAEhCvC,EAAOv1D,KAAO63D,EAAkBE,aAAa,uBAAyBF,EAAkBE,aAAa,uBAAuBvqD,MAAQqqD,EAAkBE,aAAa,gBAAkBF,EAAkBE,aAAa,gBAAgBvqD,MAASqqD,EAAkBE,aAAa,WAAaF,EAAkBE,aAAa,WAAWvqD,MAAQ,GAC3U+nD,EAAO+B,SAAWO,EAAkBE,aAAa,kBAAoBF,EAAkBE,aAAa,kBAAkBvqD,MAAQqqD,EAAkBE,aAAa,gBAAkBF,EAAkBE,aAAa,gBAAgBvqD,MAAQqqD,EAAkBE,aAAa,WAAaF,EAAkBE,aAAa,WAAWvqD,MAASqqD,EAAkBE,aAAa,oBAAsBF,EAAkBE,aAAa,oBAAoBvqD,MAAQqqD,EAAkBE,aAAa,eAAiBF,EAAkBE,aAAa,eAAevqD,MAAQ,SAE3hB,IAAI5Q,EAAOi7D,EAAkBE,aAAa,kBAAoBF,EAAkBE,aAAa,kBAAkBvqD,MAASqqD,EAAkBE,aAAa,gBAAkBF,EAAkBE,aAAa,gBAAgBvqD,MAASqqD,EAAkBE,aAAa,WAAaF,EAAkBE,aAAa,WAAWvqD,MAAQ,GACnT,KAAT5Q,IAEC24D,EAAO34D,KADO,UAATA,IAES,SAATA,GAGS46D,SAAS56D,KAE3B,IAAIC,EAAWg7D,EAAkBE,aAAa,sBAAwBF,EAAkBE,aAAa,sBAAsBvqD,MAASqqD,EAAkBE,aAAa,oBAAsBF,EAAkBE,aAAa,oBAAoBvqD,OAASqqD,EAAkBE,aAAa,gBAAiBF,EAAkBE,aAAa,eAAevqD,MACnV+nD,EAAO14D,SAAwB,UAAbA,EAElB04D,EAAOz1D,KAAO+3D,EAAkBE,aAAa,aAAeF,EAAkBE,aAAa,aAAavqD,MAASqqD,EAAkBE,aAAa,gBAAkBF,EAAkBE,aAAa,gBAAgBvqD,MAAQqqD,EAAkBE,aAAa,WAAaF,EAAkBE,aAAa,WAAWvqD,MAAS,GACxT,IAAIwqD,EAAYH,EAAkBE,aAAa,uBAAyBF,EAAkBE,aAAa,uBAAuBvqD,MAASqqD,EAAkBE,aAAa,qBAAuBF,EAAkBE,aAAa,qBAAqBvqD,MAASqqD,EAAkBE,aAAa,gBAAkBF,EAAkBE,aAAa,gBAAgBvqD,MAAQ,GAEjV,UAAdwqD,IACCzC,EAAOyC,WAAY,GAEvBr9D,KAAK66D,UAAUD,IAGnBR,cAAcj2D,UAAUi0C,cAAgB,SAAS/2C,GAC1CA,EAAKwiC,GAAK7jC,KAAKS,cAAcojC,KAC5B7jC,KAAKS,cAAcojC,GAAKxiC,EAAKwiC,GAC7B7jC,KAAKoQ,YAAc1F,KAAK6C,MAAMlM,EAAKwiC,GAAK7jC,KAAKS,cAAc82C,KAE/D,IACIztC,EAEAiN,EAHA8R,EAAS7oB,KAAKS,cAAcooB,OACzB7a,EAAM6a,EAAOhf,OAChBwuC,EAAYh3C,EAAKwnB,OACdI,EAAOovB,EAAUxuC,OACxB,IAAIkN,EAAE,EAAEA,EAAEkS,EAAKlS,GAAG,EAAE,CAChBjN,EAAI,EACJ,MAAMA,EAAEkE,EAAI,CACR,GAAG6a,EAAO/e,GAAGzD,IAAMgyC,EAAUthC,GAAG1Q,GAAG,CAC/BwiB,EAAO/e,GAAKuuC,EAAUthC,GACtB,MAEJjN,GAAK,GAOb,IAJGzI,EAAK6pB,OAAS7pB,EAAKgsB,SAClBrtB,KAAK8C,SAAS4yB,WAAW3M,YAAY2G,SAASruB,EAAK6pB,OACnDlrB,KAAK8C,SAAS4yB,WAAW3M,YAAY4F,SAASttB,EAAKgsB,MAAOrtB,KAAK8C,SAAS4yB,WAAW9G,OAEpFvtB,EAAK2pB,OAEJ,IADAhd,EAAM3M,EAAK2pB,OAAOnhB,OACdC,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EACrB9J,KAAKS,cAAcuqB,OAAOzY,KAAKlR,EAAK2pB,OAAOlhB,IAGnD9J,KAAKS,cAAckrB,YAAa,EAChCG,YAAYJ,aAAa1rB,KAAKS,cAAcT,KAAK8C,SAAS4yB,WAAW3M,aACrE/oB,KAAK8C,SAASs1C,cAAc/2C,EAAKwnB,QAC9Btc,mBACCA,kBAAkB2sC,gBAAgBl5C,MAEtCA,KAAKs9D,mBAGTlD,cAAcj2D,UAAUm5D,gBAAkB,WACtC,IAAIn+B,EAAWn/B,KAAKS,cAAc0+B,SAClC,IAAIA,GAAgC,IAApBA,EAASt1B,SAAiB7J,KAAK88D,iBAG3C,OAFA98D,KAAKi9D,QAAQ,mBACbj9D,KAAKu8D,cAAgBv8D,KAAKoQ,aAG9B,IAAIywB,EAAU1B,EAAS56B,QACvBvE,KAAKu8D,cAAgB17B,EAAQ3N,KAAOlzB,KAAKi4B,UACzC,IAAIslC,EAAcv9D,KAAKqF,KAAKrF,KAAKg9D,SAAS,IAAMh9D,KAAKw8D,WAAa,QAClEx8D,KAAKw8D,YAAc,EACnB91B,YAAYc,KAAK+1B,EAAav9D,KAAKo4C,cAAc3lC,KAAKzS,MAAO,WACzDA,KAAKi9D,QAAQ,gBACfxqD,KAAKzS,QAGXo6D,cAAcj2D,UAAUq5D,aAAe,WACnC,IAAIr+B,EAAWn/B,KAAKS,cAAc0+B,SAC9BA,IACAn/B,KAAKu8D,cAAgBv8D,KAAKoQ,aAE9BpQ,KAAKs9D,mBAGTlD,cAAcj2D,UAAUs5D,aAAe,WACnCz9D,KAAKi9D,QAAQ,iBACbj9D,KAAK09D,eAGTtD,cAAcj2D,UAAUw5D,cAAgB,WACpC39D,KAAKy5C,eAAe1T,cAAc/lC,KAAKklC,YACvCllC,KAAKy5C,eAAe3T,QAAQ9lC,KAAKqF,MACjCrF,KAAKy5C,eAAe/T,WAAW1lC,KAAKS,cAAcuqB,OAAQhrB,KAAKy9D,aAAahrD,KAAKzS,QAGrFo6D,cAAcj2D,UAAU+1C,gBAAkB,SAAUb,GAChD,GAAIr5C,KAAK8C,SAGT,IACI9C,KAAKS,cAAgB44C,EACrBr5C,KAAKoQ,YAAc1F,KAAK6C,MAAMvN,KAAKS,cAAcojC,GAAK7jC,KAAKS,cAAc82C,IACzEv3C,KAAK8C,SAASo3C,gBAAgBb,GAC1BA,EAASruB,SACTquB,EAASruB,OAAS,IAGtBhrB,KAAKgrB,OAAShrB,KAAKS,cAAcuqB,OACjChrB,KAAKi4B,UAAYj4B,KAAKS,cAAci5C,GACpC15C,KAAKmQ,WAAazF,KAAKoC,MAAM9M,KAAKS,cAAc82C,IAChDv3C,KAAKk8D,UAAYl8D,KAAKS,cAAci5C,GAAK,IACzC15C,KAAK8C,SAASk2C,wBAAwBK,EAASruB,QAC/ChrB,KAAKi9D,QAAQ,gBACbj9D,KAAK29D,gBACL39D,KAAKw9D,eACLx9D,KAAK49D,oBACL59D,KAAK69D,qBACP,MAAMC,GACJ99D,KAAK+9D,mBAAmBD,KAIhC1D,cAAcj2D,UAAU05D,mBAAqB,WACrC79D,KAAK8C,WAGN9C,KAAK8C,SAAS4yB,WAAW3M,YAAYwE,SACpCvtB,KAAK09D,cAELl5D,WAAWxE,KAAK69D,mBAAmBprD,KAAKzS,MAAM,MAItDo6D,cAAcj2D,UAAUu5D,YAAc,WAC7B19D,KAAK8tB,WAAY9tB,KAAK8C,SAAS4yB,WAAW3M,YAAYwE,WAAavtB,KAAKy5C,eAAelsB,UAA2C,WAA/BvtB,KAAK8C,SAASywC,eAClHvzC,KAAK8tB,UAAW,EAChBhC,YAAYJ,aAAa1rB,KAAKS,cAAeT,KAAK8C,SAAS4yB,WAAW3M,aACnExc,mBACCA,kBAAkB2sC,gBAAgBl5C,MAEtCA,KAAK8C,SAAS21C,YACdj0C,WAAW,WACPxE,KAAKi9D,QAAQ,cACfxqD,KAAKzS,MAAO,GACdA,KAAKg+D,YACFh+D,KAAKkC,UACJlC,KAAKyC,SAKjB23D,cAAcj2D,UAAU23D,OAAS,WAC7B97D,KAAK8C,SAASs3C,uBAGlBggB,cAAcj2D,UAAU85D,YAAc,SAASvvD,GAC3C1O,KAAKsM,kBAAkBoC,GAG3B0rD,cAAcj2D,UAAU65D,UAAY,WAChCh+D,KAAKy6C,aAAez6C,KAAKsM,gBAAkBtM,KAAKi8D,kBAAoBj8D,KAAKi8D,gBAEtEj8D,KAAKu8D,gBAAkBv8D,KAAKoQ,aAAepQ,KAAKy6C,aAAez6C,KAAKu8D,gBACnEv8D,KAAKy6C,aAAez6C,KAAKu8D,eAE7Bv8D,KAAKi9D,QAAQ,cACbj9D,KAAKw6C,eAGT4f,cAAcj2D,UAAUq2C,YAAc,WAClC,IAAqB,IAAlBx6C,KAAK8tB,SAGR,IACI9tB,KAAK8C,SAAS03C,YAAYx6C,KAAKy6C,aAAez6C,KAAKmQ,YACrD,MAAM2tD,GACJ99D,KAAKk+D,wBAAwBJ,KAIrC1D,cAAcj2D,UAAU1B,KAAO,SAAU0C,GAClCA,GAAQnF,KAAKmF,MAAQA,IAGH,IAAlBnF,KAAKi6D,WACJj6D,KAAKi6D,UAAW,EACbj6D,KAAKy8D,QACJz8D,KAAKy8D,OAAQ,EACbz8D,KAAKi9D,QAAQ,cAKzB7C,cAAcj2D,UAAUk3D,MAAQ,SAAUl2D,GACnCA,GAAQnF,KAAKmF,MAAQA,IAGH,IAAlBnF,KAAKi6D,WACJj6D,KAAKi6D,UAAW,EAChBj6D,KAAKy8D,OAAQ,EACbz8D,KAAKi9D,QAAQ,WAIrB7C,cAAcj2D,UAAUo3D,YAAc,SAAUp2D,GACzCA,GAAQnF,KAAKmF,MAAQA,KAGH,IAAlBnF,KAAKi6D,SACJj6D,KAAKyC,OAELzC,KAAKq7D,UAIbjB,cAAcj2D,UAAUxB,KAAO,SAAUwC,GAClCA,GAAQnF,KAAKmF,MAAQA,IAGxBnF,KAAKq7D,QACLr7D,KAAKq8D,UAAY,EACjBr8D,KAAK08D,gBAAiB,EACtB18D,KAAKm+D,wBAAwB,KAGjC/D,cAAcj2D,UAAUzB,YAAc,SAAUmQ,EAAOyoD,EAASn2D,GACzDA,GAAQnF,KAAKmF,MAAQA,IAGrBm2D,EACCt7D,KAAKm+D,wBAAwBtrD,GAE7B7S,KAAKm+D,wBAAwBtrD,EAAQ7S,KAAKo+D,eAE9Cp+D,KAAKq7D,UAGTjB,cAAcj2D,UAAUk6D,YAAc,SAAUxrD,EAAOyoD,EAASn2D,GAC5DnF,KAAK0C,YAAYmQ,EAAOyoD,EAASn2D,GACjCnF,KAAKyC,QAGT23D,cAAcj2D,UAAUg3D,YAAc,SAAUtoD,GAC5C,IAAsB,IAAlB7S,KAAKi6D,WAAuC,IAAlBj6D,KAAK8tB,SAAnC,CAGA,IAAIwwC,EAAYt+D,KAAKi8D,gBAAkBppD,EAAQ7S,KAAKo+D,cAChDG,GAAc,EAGdD,GAAat+D,KAAKoQ,YAAc,GAAKpQ,KAAKo+D,cAAgB,EACrDp+D,KAAKiC,MAAQjC,KAAKq8D,YAAcr8D,KAAKiC,KAK/Bq8D,GAAat+D,KAAKoQ,aACzBpQ,KAAKq8D,WAAa,EACbr8D,KAAKw+D,cAAcF,EAAYt+D,KAAKoQ,eACrCpQ,KAAKm+D,wBAAwBG,EAAYt+D,KAAKoQ,aAC9CpQ,KAAK08D,gBAAiB,EACtB18D,KAAKi9D,QAAQ,kBAGjBj9D,KAAKm+D,wBAAwBG,GAZxBt+D,KAAKw+D,cAAcF,EAAat+D,KAAKoQ,YAAckuD,EAAYt+D,KAAKoQ,YAAc,KACnFmuD,GAAc,EACdD,EAAYt+D,KAAKoQ,YAAc,GAYjCkuD,EAAY,EACbt+D,KAAKw+D,cAAcF,EAAYt+D,KAAKoQ,gBACjCpQ,KAAKiC,MAAUjC,KAAKq8D,aAAe,IAAmB,IAAdr8D,KAAKiC,MAQ7Cs8D,GAAc,EACdD,EAAY,IARZt+D,KAAKm+D,wBAAwBn+D,KAAKoQ,YAAekuD,EAAYt+D,KAAKoQ,aAC9DpQ,KAAK08D,eAGL18D,KAAKi9D,QAAQ,gBAFbj9D,KAAK08D,gBAAiB,IAUlC18D,KAAKm+D,wBAAwBG,GAE7BC,IACAv+D,KAAKm+D,wBAAwBG,GAC7Bt+D,KAAKq7D,QACLr7D,KAAKi9D,QAAQ,eAIrB7C,cAAcj2D,UAAUs6D,cAAgB,SAAS3rD,EAAKlB,GAClD5R,KAAKq8D,UAAY,EACdvpD,EAAI,GAAKA,EAAI,IACT9S,KAAKo+D,cAAgB,IACjBp+D,KAAKm8D,UAAY,EAChBn8D,KAAK86D,UAAU96D,KAAKm8D,WAEpBn8D,KAAK+6D,cAAc,IAG3B/6D,KAAKu8D,cAAgBv8D,KAAKoQ,YAAc0C,EAAI,GAAKA,EAAI,GACrD9S,KAAKmQ,WAAa2C,EAAI,GACtB9S,KAAKm+D,wBAAwBn+D,KAAKoQ,YAAc,KAAQwB,IAClDkB,EAAI,GAAKA,EAAI,KAChB9S,KAAKo+D,cAAgB,IACjBp+D,KAAKm8D,UAAY,EAChBn8D,KAAK86D,UAAU96D,KAAKm8D,WAEpBn8D,KAAK+6D,aAAa,IAG1B/6D,KAAKu8D,cAAgBv8D,KAAKoQ,YAAc0C,EAAI,GAAKA,EAAI,GACrD9S,KAAKmQ,WAAa2C,EAAI,GACtB9S,KAAKm+D,wBAAwB,KAAQvsD,IAEzC5R,KAAKi9D,QAAQ,iBAEjB7C,cAAcj2D,UAAUu6D,WAAa,SAAU/kC,EAAKnxB,GAChD,IAAIm2D,GAAgB,EACjB3+D,KAAKi6D,WACAj6D,KAAKi8D,gBAAkBj8D,KAAKmQ,WAAawpB,EACzCglC,EAAehlC,EACR35B,KAAKi8D,gBAAkBj8D,KAAKmQ,WAAa3H,IAChDm2D,EAAen2D,EAAMmxB,IAI7B35B,KAAKmQ,WAAawpB,EAClB35B,KAAKu8D,cAAgBv8D,KAAKoQ,YAAc5H,EAAMmxB,GACzB,IAAlBglC,GACC3+D,KAAK0C,YAAYi8D,GAAa,IAItCvE,cAAcj2D,UAAUvB,aAAe,SAAUkQ,EAAK8rD,GAIlD,GAHIA,IACA5+D,KAAKm/B,SAASt1B,OAAS,GAEL,kBAAXiJ,EAAI,GAAiB,CAC5B,IAAIhJ,EAAGkE,EAAM8E,EAAIjJ,OACjB,IAAKC,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EACtB9J,KAAKm/B,SAAS5sB,KAAKO,EAAIhJ,SAG3B9J,KAAKm/B,SAAS5sB,KAAKO,GAEnB9S,KAAKm/B,SAASt1B,QAAU+0D,GACxB5+D,KAAKy+D,cAAcz+D,KAAKm/B,SAAS56B,QAAS,GAE1CvE,KAAKi6D,UACLj6D,KAAKyC,QAIb23D,cAAcj2D,UAAU06D,cAAgB,SAAUD,GAC9C5+D,KAAKm/B,SAASt1B,OAAS,EACvB7J,KAAKm/B,SAAS5sB,KAAK,CAACvS,KAAKS,cAAc82C,GAAGv3C,KAAKS,cAAcojC,KAEzD+6B,GACA5+D,KAAKw+D,cAAc,IAG3BpE,cAAcj2D,UAAUq6D,cAAgB,SAAS5sD,GAC7C,QAAI5R,KAAKm/B,SAASt1B,SACd7J,KAAKy+D,cAAcz+D,KAAKm/B,SAAS56B,QAASqN,IACnC,IAKfwoD,cAAcj2D,UAAU8hC,QAAU,SAAU9gC,GACnCA,GAAQnF,KAAKmF,MAAQA,IAAUnF,KAAK8C,WAGzC9C,KAAK8C,SAASmjC,UACdjmC,KAAKy5C,eAAexT,UACpBjmC,KAAKi9D,QAAQ,WACbj9D,KAAKsS,KAAO,KACZtS,KAAK8+D,aAAe9+D,KAAK++D,eAAiB/+D,KAAKg/D,WAAah/D,KAAKi/D,eAAiBj/D,KAAKk/D,UAAY,KACnGl/D,KAAK8C,SAAW,OAGpBs3D,cAAcj2D,UAAUg6D,wBAA0B,SAAStrD,GACvD7S,KAAKi8D,gBAAkBppD,EACvB7S,KAAKg+D,aAGT5D,cAAcj2D,UAAU22D,SAAW,SAAU7sD,GACzCjO,KAAKm8D,UAAYluD,EACjBjO,KAAK49D,qBAGTxD,cAAcj2D,UAAU42D,aAAe,SAAU9sD,GAC7CjO,KAAKo8D,cAAgBnuD,EAAM,GAAK,EAAI,EACpCjO,KAAK49D,qBAGTxD,cAAcj2D,UAAUy5D,kBAAoB,WACxC59D,KAAKo+D,cAAgBp+D,KAAKk8D,UAAYl8D,KAAKm8D,UAAYn8D,KAAKo8D,eAGhEhC,cAAcj2D,UAAUg7D,QAAU,WAC9B,OAAOn/D,KAAKqF,MAGhB+0D,cAAcj2D,UAAU6gC,cAAgB,SAAUC,GAC9C,IAAI5/B,EAAO,GACX,GAAG4/B,EAAUnuB,EACTzR,EAAO4/B,EAAU5zB,OACd,GAAGrR,KAAKklC,WAAW,CACtB,IAAIE,EAAYH,EAAU5zB,GACW,IAAlC+zB,EAAUt6B,QAAQ,aACjBs6B,EAAYA,EAAU3a,MAAM,KAAK,IAErCplB,EAAOrF,KAAKklC,WAAaE,OAEzB//B,EAAOrF,KAAKqF,KACZA,GAAQ4/B,EAAUI,EAAIJ,EAAUI,EAAI,GACpChgC,GAAQ4/B,EAAU5zB,EAEtB,OAAOhM,GAGX+0D,cAAcj2D,UAAUo1C,aAAe,SAAUlzC,GAC7C,IAAIyD,EAAI,EAAGkE,EAAMhO,KAAKgrB,OAAOnhB,OAC7B,MAAOC,EAAIkE,EAAK,CACZ,GAAG3H,GAAMrG,KAAKgrB,OAAOlhB,GAAGzD,GACpB,OAAOrG,KAAKgrB,OAAOlhB,GAEvBA,GAAK,IAIbswD,cAAcj2D,UAAU22C,KAAO,WAC3B96C,KAAK8C,SAASg4C,QAGlBsf,cAAcj2D,UAAU42C,KAAO,WAC3B/6C,KAAK8C,SAASi4C,QAGlBqf,cAAcj2D,UAAUi7D,YAAc,SAAU9D,GAC5C,OAAOA,EAAUt7D,KAAKoQ,YAAcpQ,KAAKoQ,YAAcpQ,KAAKi4B,WAGhEmiC,cAAcj2D,UAAU84D,QAAU,SAAS93D,GACvC,GAAGnF,KAAKsS,MAAQtS,KAAKsS,KAAKnN,GACtB,OAAOA,GACH,IAAK,aACDnF,KAAKoS,aAAajN,EAAK,IAAIsK,kBAAkBtK,EAAKnF,KAAKy6C,aAAaz6C,KAAKoQ,YAAYpQ,KAAKo+D,gBAC1F,MACJ,IAAK,eACDp+D,KAAKoS,aAAajN,EAAK,IAAI4K,oBAAoB5K,EAAKnF,KAAKiC,KAAKjC,KAAKq8D,UAAUr8D,KAAKk8D,YAClF,MACJ,IAAK,WACDl8D,KAAKoS,aAAajN,EAAK,IAAI2K,gBAAgB3K,EAAKnF,KAAKk8D,YACrD,MACJ,IAAK,eACDl8D,KAAKoS,aAAajN,EAAK,IAAI+K,oBAAoB/K,EAAKnF,KAAKmQ,WAAWnQ,KAAKoQ,cACzE,MACJ,IAAK,UACDpQ,KAAKoS,aAAajN,EAAK,IAAIkL,eAAelL,EAAKnF,OAC/C,MACJ,QACIA,KAAKoS,aAAajN,GAGlB,eAATA,GAAyBnF,KAAK8+D,cAC7B9+D,KAAK8+D,aAAaz6D,KAAKrE,KAAK,IAAIyP,kBAAkBtK,EAAKnF,KAAKy6C,aAAaz6C,KAAKoQ,YAAYpQ,KAAKk8D,YAEvF,iBAAT/2D,GAA2BnF,KAAK++D,gBAC/B/+D,KAAK++D,eAAe16D,KAAKrE,KAAK,IAAI+P,oBAAoB5K,EAAKnF,KAAKiC,KAAKjC,KAAKq8D,UAAUr8D,KAAKk8D,YAEjF,aAAT/2D,GAAuBnF,KAAKg/D,YAC3Bh/D,KAAKg/D,WAAW36D,KAAKrE,KAAK,IAAI8P,gBAAgB3K,EAAKnF,KAAKk8D,YAEhD,iBAAT/2D,GAA2BnF,KAAKi/D,gBAC/Bj/D,KAAKi/D,eAAe56D,KAAKrE,KAAK,IAAIkQ,oBAAoB/K,EAAKnF,KAAKmQ,WAAWnQ,KAAKoQ,cAExE,YAATjL,GAAsBnF,KAAKk/D,WAC1Bl/D,KAAKk/D,UAAU76D,KAAKrE,KAAK,IAAIqQ,eAAelL,EAAKnF,QAIzDo6D,cAAcj2D,UAAU+5D,wBAA0B,SAAS1tD,GAEvD,IAAIstD,EAAQ,IAAIvtD,wBAAwBC,EAAaxQ,KAAKy6C,cAC1Dz6C,KAAKoS,aAAa,QAAS0rD,GAEvB99D,KAAKq/D,SACLr/D,KAAKq/D,QAAQh7D,KAAKrE,KAAM89D,IAIhC1D,cAAcj2D,UAAU45D,mBAAqB,SAASvtD,GAElD,IAAIstD,EAAQ,IAAIrtD,mBAAmBD,EAAaxQ,KAAKy6C,cACrDz6C,KAAKoS,aAAa,QAAS0rD,GAEvB99D,KAAKq/D,SACLr/D,KAAKq/D,QAAQh7D,KAAKrE,KAAM89D,IAGhC,IAAIwB,YAAe,WACf,IAAIjgD,EAAK,GAIT,SAAS65B,EAAgB8gB,GAExB,IAAIuF,EAAa,EACbC,EAAY,GAEhB,SAASC,IACXF,GAAc,EAGZ,SAASG,IACXH,GAAc,EACK,IAAfA,GACHI,IAIC,SAASC,EAA2BC,IACI,IAAnCL,EAAU10D,QAAQ+0D,IACxBL,EAAUjtD,KAAKstD,GAId,SAASF,IACR,IAAI71D,EAAGkE,EAAMwxD,EAAU31D,OACvB,IAAKC,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EAC5B01D,EAAU11D,GAAG21B,UAEX+/B,EAAU31D,OAAS,EAGjBmwD,EAAUl3D,SAASmlD,cAAgBC,wBAAwB8R,EAAUl3D,UACrEk3D,EAAUl3D,SAAS4yB,WAAW8iB,iBAAiBW,oBAAoB6gB,EAAUl3D,UAC7Ek3D,EAAUl3D,SAAS4yB,WAAW+pC,eAAiBA,EAC/CzF,EAAUl3D,SAAS4yB,WAAWgqC,cAAgBA,EAC9C1F,EAAUl3D,SAAS4yB,WAAWkqC,2BAA6BA,EAEhE,OAvCCvgD,EAAG65B,gBAAkBA,EAuCf75B,EAzCQ,GA4ClB9S,kBAAoB+yD,YAEpB,IAAIQ,kBAAqB,WAErB,IAAIzgD,GAAK,GACL3U,KAAOmD,OACPjK,OAAS,KACTmF,SAAW,KAEf,SAASg3D,sBAAsBjtD,GAC3B,OAAOA,EAAI9G,cAAgBrK,OAASmR,EAAI9G,cAAgB+G,aAG5D,SAASitD,YAAYC,EAAMjvD,GACvB,MAAgB,WAATivD,GAA8B,YAATA,GAA+B,WAATA,GAAqBjvD,aAAalP,OAGxF,SAASo+D,QAAQtpD,GACb,IAAIupD,SAAcvpD,EAClB,GAAY,WAATupD,GAA8B,YAATA,GAAuBvpD,aAAa9U,OACxD,OAAQ8U,EAEZ,GAAGmpD,sBAAsBnpD,GAAG,CACxB,IAAI9M,EAAGs2D,EAAOxpD,EAAE/M,OACZw2D,EAAS,GACb,IAAIv2D,EAAE,EAAEA,EAAEs2D,EAAKt2D,GAAG,EACdu2D,EAAOv2D,IAAM8M,EAAE9M,GAEnB,OAAOu2D,EAEX,OAAIzpD,EAAEwa,SACKxa,EAAE5F,OADb,EAKJ,IAAIsvD,UAAYlhD,cAAcE,gBAAgB,KAAM,EAAE,KAAK,KAAM,UAAUmC,IACvE8+C,WAAanhD,cAAcE,gBAAgB,KAAM,KAAM,KAAK,EAAG,WAAWmC,IAC1E++C,aAAephD,cAAcE,gBAAgB,IAAI,EAAE,KAAK,EAAG,aAAamC,IAE5E,SAASg/C,IAAI7pD,EAAEzF,GACX,IAAIgvD,SAAcvpD,EACd8pD,SAAcvvD,EAClB,GAAY,WAATgvD,GAA8B,WAATO,EACpB,OAAO9pD,EAAIzF,EAEf,GAAG6uD,YAAYG,EAAMvpD,IAAMopD,YAAYU,EAAMvvD,GACzC,OAAOyF,EAAIzF,EAEf,GAAG4uD,sBAAsBnpD,IAAMopD,YAAYU,EAAMvvD,GAG7C,OAFAyF,EAAIA,EAAExS,MAAM,GACZwS,EAAE,GAAKA,EAAE,GAAKzF,EACPyF,EAEX,GAAGopD,YAAYG,EAAMvpD,IAAMmpD,sBAAsB5uD,GAG7C,OAFAA,EAAIA,EAAE/M,MAAM,GACZ+M,EAAE,GAAKyF,EAAIzF,EAAE,GACNA,EAEX,GAAG4uD,sBAAsBnpD,IAAMmpD,sBAAsB5uD,GAAG,CAEpD,IAAIrH,EAAI,EAAGs2D,EAAOxpD,EAAE/M,OAAQ82D,EAAOxvD,EAAEtH,OACjCw2D,EAAS,GACb,MAAMv2D,EAAEs2D,GAAQt2D,EAAI62D,GACI,kBAAT/pD,EAAE9M,IAAmB8M,EAAE9M,aAAchI,UAA4B,kBAATqP,EAAErH,IAAmBqH,EAAErH,aAAchI,QACpGu+D,EAAOv2D,GAAK8M,EAAE9M,GAAKqH,EAAErH,GAErBu2D,EAAOv2D,QAAcI,IAATiH,EAAErH,GAAmB8M,EAAE9M,GAAK8M,EAAE9M,IAAMqH,EAAErH,GAEtDA,GAAK,EAET,OAAOu2D,EAEX,OAAO,EAEX,IAAIxyB,IAAM4yB,IAEV,SAASG,IAAIhqD,EAAEzF,GACX,IAAIgvD,SAAcvpD,EACd8pD,SAAcvvD,EAClB,GAAG6uD,YAAYG,EAAMvpD,IAAMopD,YAAYU,EAAMvvD,GAOzC,MANY,WAATgvD,IACCvpD,EAAIimD,SAASjmD,IAEL,WAAT8pD,IACCvvD,EAAI0rD,SAAS1rD,IAEVyF,EAAIzF,EAEf,GAAI4uD,sBAAsBnpD,IAAMopD,YAAYU,EAAMvvD,GAG9C,OAFAyF,EAAIA,EAAExS,MAAM,GACZwS,EAAE,GAAKA,EAAE,GAAKzF,EACPyF,EAEX,GAAGopD,YAAYG,EAAMvpD,IAAOmpD,sBAAsB5uD,GAG9C,OAFAA,EAAIA,EAAE/M,MAAM,GACZ+M,EAAE,GAAKyF,EAAIzF,EAAE,GACNA,EAEX,GAAG4uD,sBAAsBnpD,IAAMmpD,sBAAsB5uD,GAAG,CACpD,IAAIrH,EAAI,EAAGs2D,EAAOxpD,EAAE/M,OAAQ82D,EAAOxvD,EAAEtH,OACjCw2D,EAAS,GACb,MAAMv2D,EAAEs2D,GAAQt2D,EAAI62D,GACI,kBAAT/pD,EAAE9M,IAAmB8M,EAAE9M,aAAchI,UAA4B,kBAATqP,EAAErH,IAAmBqH,EAAErH,aAAchI,QACpGu+D,EAAOv2D,GAAK8M,EAAE9M,GAAKqH,EAAErH,GAErBu2D,EAAOv2D,QAAcI,IAATiH,EAAErH,GAAmB8M,EAAE9M,GAAK8M,EAAE9M,IAAMqH,EAAErH,GAEtDA,GAAK,EAET,OAAOu2D,EAEX,OAAO,EAGX,SAASQ,IAAIjqD,EAAEzF,GACX,IAEI2B,EAKAhJ,EAAGkE,EAPHmyD,SAAcvpD,EACd8pD,SAAcvvD,EAElB,GAAG6uD,YAAYG,EAAMvpD,IAAMopD,YAAYU,EAAMvvD,GACzC,OAAOyF,EAAIzF,EAIf,GAAG4uD,sBAAsBnpD,IAAMopD,YAAYU,EAAMvvD,GAAG,CAGhD,IAFAnD,EAAM4I,EAAE/M,OACRiJ,EAAMH,iBAAiB,UAAW3E,GAC9BlE,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACbgJ,EAAIhJ,GAAK8M,EAAE9M,GAAKqH,EAEpB,OAAO2B,EAEX,GAAGktD,YAAYG,EAAMvpD,IAAMmpD,sBAAsB5uD,GAAG,CAGhD,IAFAnD,EAAMmD,EAAEtH,OACRiJ,EAAMH,iBAAiB,UAAW3E,GAC9BlE,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACbgJ,EAAIhJ,GAAK8M,EAAIzF,EAAErH,GAEnB,OAAOgJ,EAEX,OAAO,EAGX,SAAS+oD,IAAIjlD,EAAEzF,GACX,IAEI2B,EAIAhJ,EAAGkE,EANHmyD,SAAcvpD,EACd8pD,SAAcvvD,EAElB,GAAG6uD,YAAYG,EAAMvpD,IAAMopD,YAAYU,EAAMvvD,GACzC,OAAOyF,EAAIzF,EAGf,GAAG4uD,sBAAsBnpD,IAAMopD,YAAYU,EAAMvvD,GAAG,CAGhD,IAFAnD,EAAM4I,EAAE/M,OACRiJ,EAAMH,iBAAiB,UAAW3E,GAC9BlE,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACbgJ,EAAIhJ,GAAK8M,EAAE9M,GAAKqH,EAEpB,OAAO2B,EAEX,GAAGktD,YAAYG,EAAMvpD,IAAMmpD,sBAAsB5uD,GAAG,CAGhD,IAFAnD,EAAMmD,EAAEtH,OACRiJ,EAAMH,iBAAiB,UAAW3E,GAC9BlE,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACbgJ,EAAIhJ,GAAK8M,EAAIzF,EAAErH,GAEnB,OAAOgJ,EAEX,OAAO,EAEX,SAASguD,IAAIlqD,EAAEzF,GAOX,MANgB,kBAANyF,IACNA,EAAIimD,SAASjmD,IAED,kBAANzF,IACNA,EAAI0rD,SAAS1rD,IAEVyF,EAAIzF,EAEf,IAAI4vD,QAAUN,IACVO,QAAUJ,IACVK,QAAUJ,IACVK,QAAUrF,IACVsF,QAAUL,IAEd,SAASM,MAAM9pB,EAAK3pC,EAAKF,GACrB,GAAGE,EAAMF,EAAI,CACT,IAAI4zD,EAAK5zD,EACTA,EAAME,EACNA,EAAM0zD,EAEV,OAAO32D,KAAKiD,IAAIjD,KAAK+C,IAAI6pC,EAAK3pC,GAAMF,GAGxC,SAAS6zD,iBAAiBrzD,GACtB,OAAOA,EAAIK,UAEf,IAAIizD,mBAAqBD,iBAEzB,SAASE,iBAAiBvzD,GACtB,OAAOA,EAAIK,UAEf,IAAImzD,mBAAqBH,iBAErBI,kBAAoB,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,GAEnC,SAAS73D,OAAO83D,EAAMC,GAClB,GAAoB,kBAATD,GAAqBA,aAAgB7/D,OAE5C,OADA8/D,EAAOA,GAAQ,EACRl3D,KAAK2C,IAAIs0D,EAAOC,GAEvBA,IACAA,EAAOF,mBAEX,IAAI53D,EAAGkE,EAAMtD,KAAKiD,IAAIg0D,EAAK93D,OAAQ+3D,EAAK/3D,QACpC2a,EAAc,EAClB,IAAK1a,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EACtB0a,GAAe9Z,KAAKuC,IAAI20D,EAAK93D,GAAK63D,EAAK73D,GAAI,GAE/C,OAAOY,KAAKyC,KAAKqX,GAGrB,SAASq9C,UAAUC,GACf,OAAOjG,IAAIiG,EAAKj4D,OAAOi4D,IAG3B,SAASC,SAAS9zD,GACd,IAEI6C,EAAGC,EAFHE,EAAIhD,EAAI,GAAQiD,EAAIjD,EAAI,GAAQkD,EAAIlD,EAAI,GACxCR,EAAM/C,KAAK+C,IAAIwD,EAAGC,EAAGC,GAAIxD,EAAMjD,KAAKiD,IAAIsD,EAAGC,EAAGC,GACxC8F,GAAKxJ,EAAME,GAAO,EAE5B,GAAGF,GAAOE,EACNmD,EAAIC,EAAI,MACP,CACD,IAAIU,EAAIhE,EAAME,EAEd,OADAoD,EAAIkG,EAAI,GAAMxF,GAAK,EAAIhE,EAAME,GAAO8D,GAAKhE,EAAME,GACxCF,GACH,KAAKwD,EAAGH,GAAKI,EAAIC,GAAKM,GAAKP,EAAIC,EAAI,EAAI,GAAI,MAC3C,KAAKD,EAAGJ,GAAKK,EAAIF,GAAKQ,EAAI,EAAG,MAC7B,KAAKN,EAAGL,GAAKG,EAAIC,GAAKO,EAAI,EAAG,MAEjCX,GAAK,EAGT,MAAO,CAACA,EAAGC,EAAGkG,EAAEhJ,EAAI,IAGxB,SAAS+zD,QAAQ3wD,EAAGC,EAAGC,GAGnB,OAFGA,EAAI,IAAGA,GAAK,GACZA,EAAI,IAAGA,GAAK,GACZA,EAAI,EAAE,EAAUF,EAAc,GAATC,EAAID,GAASE,EAClCA,EAAI,GAAYD,EAChBC,EAAI,EAAE,EAAUF,GAAKC,EAAID,IAAM,EAAE,EAAIE,GAAK,EACtCF,EAGX,SAAS4wD,SAASh0D,GACd,IAIIgD,EAAGC,EAAGC,EAJNL,EAAI7C,EAAI,GACR8C,EAAI9C,EAAI,GACRgJ,EAAIhJ,EAAI,GAIZ,GAAS,IAAN8C,EACCE,EAAIC,EAAIC,EAAI8F,MACX,CAED,IAAI3F,EAAI2F,EAAI,GAAMA,GAAK,EAAIlG,GAAKkG,EAAIlG,EAAIkG,EAAIlG,EACxCM,EAAI,EAAI4F,EAAI3F,EAChBL,EAAI+wD,QAAQ3wD,EAAGC,EAAGR,EAAI,EAAE,GACxBI,EAAI8wD,QAAQ3wD,EAAGC,EAAGR,GAClBK,EAAI6wD,QAAQ3wD,EAAGC,EAAGR,EAAI,EAAE,GAG5B,MAAO,CAACG,EAAGC,EAAIC,EAAGlD,EAAI,IAG1B,SAASi0D,OAAO3wD,EAAG4wD,EAAMC,EAAMC,EAAQC,GAOnC,QANcp4D,IAAXm4D,QAAmCn4D,IAAXo4D,IACvBD,EAASF,EACTG,EAASF,EACTD,EAAO,EACPC,EAAO,GAERA,EAAOD,EAAM,CACZ,IAAII,EAAQH,EACZA,EAAOD,EACPA,EAAOI,EAEX,GAAGhxD,GAAK4wD,EACJ,OAAOE,EACL,GAAG9wD,GAAK6wD,EACV,OAAOE,EAEX,IAAIj+C,EAAO+9C,IAASD,EAAO,GAAK5wD,EAAE4wD,IAAOC,EAAKD,GAC9C,IAAIE,EAAOx4D,OACP,OAAOw4D,GAAUC,EAAOD,GAAQh+C,EAEpC,IAAIva,EAAGkE,EAAMq0D,EAAOx4D,OAChBiJ,EAAMH,iBAAiB,UAAW3E,GACtC,IAAIlE,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACbgJ,EAAIhJ,GAAKu4D,EAAOv4D,IAAMw4D,EAAOx4D,GAAGu4D,EAAOv4D,IAAIua,EAE/C,OAAOvR,EAEX,SAASnI,OAAOgD,EAAIF,GAUhB,QATWvD,IAARuD,SACYvD,IAARyD,GACCA,EAAM,EACNF,EAAM,IAENA,EAAME,EACNA,OAAMzD,IAGXuD,EAAI5D,OAAO,CACV,IAAIC,EAAGkE,EAAMP,EAAI5D,OACb8D,IACAA,EAAMgF,iBAAiB,UAAW3E,IAEtC,IAAI8E,EAAMH,iBAAiB,UAAW3E,GAClCw0D,EAAM30D,OAAOlD,SACjB,IAAIb,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACbgJ,EAAIhJ,GAAK6D,EAAI7D,GAAK04D,GAAK/0D,EAAI3D,GAAG6D,EAAI7D,IAEtC,OAAOgJ,OAEA5I,IAARyD,IACCA,EAAM,GAEV,IAAI80D,EAAO50D,OAAOlD,SAClB,OAAOgD,EAAM80D,GAAMh1D,EAAIE,GAG3B,SAAS+0D,WAAWphD,EAAQqhD,EAAYC,EAAax9C,GACjD,IAAItb,EAAGkE,EAAMsT,EAAOzX,OAChBxE,EAAOq1B,WAAW7V,aACtBxf,EAAKozB,cAAcrT,EAAQpX,GAC3B,IAA4B60D,EAAeC,EAAvCC,EAAiB,CAAC,EAAE,GACxB,IAAIj5D,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EACrB+4D,EAAiBF,GAAcA,EAAW74D,GAAM64D,EAAW74D,GAAKi5D,EAChED,EAAkBF,GAAeA,EAAY94D,GAAM84D,EAAY94D,GAAKi5D,EACpE19D,EAAK0zB,YAAYzX,EAAOxX,GAAG,GAAGwX,EAAOxX,GAAG,GAAGg5D,EAAe,GAAKxhD,EAAOxX,GAAG,GAAGg5D,EAAe,GAAKxhD,EAAOxX,GAAG,GAAG+4D,EAAc,GAAKvhD,EAAOxX,GAAG,GAAG+4D,EAAc,GAAKvhD,EAAOxX,GAAG,GAAGA,GAAE,GAEnL,OAAOzE,EAGX,SAAS29D,mBAAmBvtC,KAAKp0B,KAAK4hE,UAClC,IAAIh1D,IAAM5M,KAAK0Y,EACXmpD,cAAgB,qBAAqBz2D,KAAKwB,KAC1Ck1D,cAA0C,IAA3Bl1D,IAAInD,QAAQ,UAC3Bs4D,SAAW3tC,KAAKp0B,KAAKkW,GACrBE,UAAU4rD,cAAchb,QAAQib,OAChCC,aAAeN,SACnBM,aAAaC,YAAcD,aAAarrC,eACxCz2B,OAAOgiE,eAAeF,aAAc,QAAS,CACzC9hD,IAAK,WACD,OAAO8hD,aAAavyD,KAG5BykB,KAAKryB,KAAKsgE,cAAgB,EAAEjuC,KAAKryB,KAAKsyB,WAAWuC,UACjDxC,KAAKryB,KAAKugE,iBAAmB,EAC7B,IAAIC,QAAUnuC,KAAKp0B,KAAKk2C,GAAG9hB,KAAKryB,KAAKsyB,WAAWuC,UAC5C4rC,SAAWpuC,KAAKp0B,KAAKwiC,GAAGpO,KAAKryB,KAAKsyB,WAAWuC,UAC7C9b,MAAQsZ,KAAKp0B,KAAKsnC,GAAKlT,KAAKp0B,KAAKsnC,GAAK,EACtCnE,OAAS/O,KAAKp0B,KAAKyxB,GAAK2C,KAAKp0B,KAAKyxB,GAAK,EACvC3tB,KAAOswB,KAAKp0B,KAAKme,GACjBskD,OAAQC,QAASC,QAASC,SAAUC,OACpCC,QAAQC,UAAUC,SAASC,OAAOC,kBAAmBz1D,SAAU01D,SAAUC,YAAahuD,MAAOiuD,UAAWC,SAASjoD,KAAK8mD,YAAYoB,eAClIC,uBAAyB,GAQzBC,aAPJ,GAAGzjE,KAAK0jE,GAAI,CACR,IAAIj7D,EAAGkE,IAAM3M,KAAK0jE,GAAGl7D,OACrB,IAAIC,EAAI,EAAGA,EAAIkE,IAAKlE,GAAK,EACrB+6D,uBAAuB/6D,GAAKk7D,KAAK,uBAAyB3jE,KAAK0jE,GAAGj7D,GAAK,QAK/E,IAAIm7D,oBAAsBD,KAAK,oCAAsC/2D,IAAI,0BAA+B,GACpGi3D,QAAUjC,SAASjtC,GAAK30B,KAAK2V,EAAEnN,OAAS,EAExCtJ,QAAUP,KAAKqB,OAAyB,IAAjBrB,KAAKqB,KAAK+0C,GAEjC+uB,OAAS,SAAgBC,EAAKC,GAC9B,IAAIv7D,EAAEiN,EAAG/I,EAAMhO,KAAKqxB,GAAGxnB,OAAS7J,KAAKqxB,GAAGxnB,OAAS,EAC7Cy7D,EAAY3yD,iBAAiB,UAAW3E,GAC5Co3D,EAAO,EACP,IAAI7hB,EAAa74C,KAAK6C,MAAM2lB,KAAKkyC,GACjCt7D,EAAI,EACJiN,EAAI,EACJ,MAAMjN,EAAEy5C,EAAW,CAEf,IAAIxsC,EAAE,EAAEA,EAAE/I,EAAI+I,GAAG,EACbuuD,EAAUvuD,KAAOsuD,EAAU,EAAJA,EAAMx3D,OAAOlD,SAGxCb,GAAK,EAGT,IAAIy7D,EAAUryC,KAAKkyC,EACf/gD,EAAOkhD,EAAU76D,KAAK6C,MAAMg4D,GAC5BzyD,EAAMH,iBAAiB,UAAW3E,GACtC,GAAGA,EAAI,EAAE,CACL,IAAI+I,EAAE,EAAEA,EAAE/I,EAAI+I,GAAG,EACbjE,EAAIiE,GAAK/W,KAAKqxB,GAAGta,GAAKuuD,EAAUvuD,KAAOsuD,EAAU,EAAJA,EAAMx3D,OAAOlD,UAAU0Z,EAIxE,OAAOvR,EAEP,OAAO9S,KAAKqxB,GAAKi0C,EAAU,KAAOD,EAAU,EAAJA,EAAMx3D,OAAOlD,UAAU0Z,GAErE5R,KAAKzS,MAgBP,SAASwlE,eAAe9jE,EAAK+jE,GACzB,OAAO3B,OAAOpiE,EAAK+jE,GAAS,GAGhC,SAASC,gBAAgBhkE,EAAK+jE,GAC1B,OAAOzB,QAAQtiE,EAAK+jE,GAAS,GAnB9BlC,aAAaO,SACZA,OAASP,aAAaO,OAAOrxD,KAAK8wD,cAClCQ,QAAUD,QAGXP,aAAaS,UACZA,QAAUT,aAAaS,QAAQvxD,KAAK8wD,cACpCU,SAAWD,SAGZT,aAAaW,SACZA,OAASX,aAAaW,OAAOzxD,KAAK8wD,eAWnCvjE,KAAKk4B,iBACJsrC,YAAcxjE,KAAKk4B,eAAezlB,KAAKzS,OAGxCA,KAAK2lE,oBACJf,eAAiB5kE,KAAK2lE,kBAAkBlzD,KAAKzS,OAGjD,IAAIoD,KAAOqyB,KAAKryB,KAAKsyB,WAAW8iB,iBAAiB/lC,KAAKgjB,KAAKryB,KAAKsyB,WAAW8iB,kBAyJvEtlB,KAAM0yC,SAAU/yD,MAAO47B,KAAMo3B,UAAWC,UAAWC,cAvJvD,SAASC,OAAOC,EAAMC,GAClB,IAAIC,EAAO,CAACD,EAAM,GAAGD,EAAM,GAAGC,EAAM,GAAGD,EAAM,GAAGC,EAAM,GAAGD,EAAM,IAC3DG,EAAQ17D,KAAK6pB,MAAM4xC,EAAK,GAAGz7D,KAAKyC,KAAKg5D,EAAK,GAAGA,EAAK,GAAGA,EAAK,GAAGA,EAAK,KAAK73D,UACvE+3D,GAAO37D,KAAK6pB,MAAM4xC,EAAK,GAAGA,EAAK,IAAI73D,UACvC,MAAO,CAAC+3D,EAAID,EAAM,GAGtB,SAASE,QAAQ/0D,EAAG4wD,EAAMC,EAAMmE,EAAMC,GAClC,OAAOC,UAAUlG,WAAYhvD,EAAG4wD,EAAMC,EAAMmE,EAAMC,GAGtD,SAASE,OAAOn1D,EAAG4wD,EAAMC,EAAMmE,EAAMC,GACjC,OAAOC,UAAUnG,UAAW/uD,EAAG4wD,EAAMC,EAAMmE,EAAMC,GAGrD,SAASG,KAAKp1D,EAAG4wD,EAAMC,EAAMmE,EAAMC,GAC/B,OAAOC,UAAUjG,aAAcjvD,EAAG4wD,EAAMC,EAAMmE,EAAMC,GAGxD,SAASC,UAAUxiE,EAAIsN,EAAG4wD,EAAMC,EAAMmE,EAAMC,QAC5Bt8D,IAATq8D,GACCA,EAAOpE,EACPqE,EAAOpE,GAEP7wD,GAAKA,EAAI4wD,IAASC,EAAOD,GAE7B5wD,EAAIA,EAAI,EAAI,EAAIA,EAAI,EAAI,EAAIA,EAC5B,IAAIgkB,EAAOtxB,EAAGsN,GACd,GAAGwuD,sBAAsBwG,GAAO,CAC5B,IAAIz8D,EAAGkE,EAAMu4D,EAAK18D,OACdiJ,EAAMH,iBAAiB,UAAW3E,GACtC,IAAKlE,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EACtBgJ,EAAIhJ,IAAM08D,EAAK18D,GAAKy8D,EAAKz8D,IAAMyrB,EAAOgxC,EAAKz8D,GAE/C,OAAOgJ,EAEP,OAAQ0zD,EAAOD,GAAQhxC,EAAOgxC,EAItC,SAASK,WAAW1zC,GAChB,IAAIppB,EAAuBqmB,EAAM2B,EAA1B9jB,EAAM3M,KAAK2V,EAAEnN,OACpB,GAAIxI,KAAK2V,EAAEnN,QAAgC,kBAAfxI,KAAK2V,EAAE,GAM/B,GAFAmZ,GAAS,EACT+C,GAAQuC,KAAKryB,KAAKsyB,WAAWuC,UACzB/E,EAAO7xB,KAAK2V,EAAE,GAAGzF,EACjB4e,EAAQ,EACR2B,EAAUzwB,KAAK2V,EAAE,GAAGzF,MACjB,CACH,IAAIzH,EAAE,EAAEA,EAAEkE,EAAI,EAAElE,GAAG,EAAE,CACjB,GAAGopB,IAAS7xB,KAAK2V,EAAElN,GAAGyH,EAAE,CACpB4e,EAAQrmB,EAAI,EACZgoB,EAAUzwB,KAAK2V,EAAElN,GAAGyH,EACpB,MACE,GAAG2hB,EAAK7xB,KAAK2V,EAAElN,GAAGyH,GAAK2hB,EAAK7xB,KAAK2V,EAAElN,EAAE,GAAGyH,EAAE,CACzC2hB,EAAK7xB,KAAK2V,EAAElN,GAAGyH,EAAIlQ,KAAK2V,EAAElN,EAAE,GAAGyH,EAAI2hB,GAClC/C,EAAQrmB,EAAI,EACZgoB,EAAUzwB,KAAK2V,EAAElN,EAAE,GAAGyH,IAEtB4e,EAAQrmB,EAAI,EACZgoB,EAAUzwB,KAAK2V,EAAElN,GAAGyH,GAExB,QAGM,IAAX4e,IACCA,EAAQrmB,EAAI,EACZgoB,EAAUzwB,KAAK2V,EAAElN,GAAGyH,QA3B5B4e,EAAQ,EACR2B,EAAU,EA+Bd,IAAIzS,EAAK,GAGT,OAFAA,EAAG8Q,MAAQA,EACX9Q,EAAG6T,KAAOpB,EAAQ2D,KAAKryB,KAAKsyB,WAAWuC,UAChC5Y,EAGX,SAASvC,IAAImV,GACT,IAAI5S,EAAIvV,EAAGkE,EACX,IAAI3M,KAAK2V,EAAEnN,QAAgC,kBAAfxI,KAAK2V,EAAE,GAC/B,MAAM,IAAI5R,MAAM,yCAA2C6sB,GAE/DA,GAAO,EACP5S,EAAK,CACD6T,KAAM7xB,KAAK2V,EAAEib,GAAK1gB,EAAEkkB,KAAKryB,KAAKsyB,WAAWuC,UACzCplB,MAAO,IAEX,IAAIC,EAAMzR,KAAK2V,EAAEib,GAAKtP,eAAe,KAAOthB,KAAK2V,EAAEib,GAAKlhB,EAAI1P,KAAK2V,EAAEib,EAAM,GAAGnb,EAG5E,IADA9I,EAAM8E,EAAIjJ,OACNC,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACbuV,EAAGvV,GAAKgJ,EAAIhJ,GACZuV,EAAGxM,MAAM/I,GAAKgJ,EAAIhJ,GAEtB,OAAOuV,EAGX,SAASwnD,aAAaC,EAAQC,GAI1B,OAHKA,IACDA,EAAMtxC,KAAKryB,KAAKsyB,WAAWuC,WAExB6uC,EAASC,EAGpB,SAASC,aAAaz1D,EAAGw1D,GAOrB,OANKx1D,GAAW,IAANA,IACNA,EAAI2hB,MAEH6zC,IACDA,EAAMtxC,KAAKryB,KAAKsyB,WAAWuC,WAExB1mB,EAAIw1D,EAGf,SAASE,WAAWrqD,GAChB/O,OAAO8O,WAAWuqD,SAAWtqD,GAGjC,SAASmkC,mBACL,OAAOtrB,KAAKsrB,mBAGhB,SAASomB,UAAUxtC,EAAMnxB,GACrB,MAAoB,kBAAVqK,WACK3I,IAAR1B,EACIqK,MAAMs0D,UAAUxtC,GAEhB9mB,MAAMs0D,UAAUxtC,EAAMnxB,GAE1B,GAGX,SAASqmC,OAAOlV,EAAMnxB,GAClB,MAAoB,kBAAVqK,WACK3I,IAAR1B,EACIqK,MAAMg8B,OAAOlV,GAEb9mB,MAAMg8B,OAAOlV,EAAMnxB,GAEvB,GAGX,SAAS4+D,cAAcC,GACnBn0C,KAA2B,IAApBm0C,EAAwB,EAAI38D,KAAK6C,MAAM2lB,KAAOm0C,GAAmBA,EACxEx0D,MAAQ2wD,YAAYtwC,MAIxB,IAAI/C,MAAQsF,KAAKp0B,KAAK4wB,IAClBq1C,aAAe7xC,KAAKmjB,YAAanjB,KAAKmjB,UAAU/uC,QAChDsjB,OACA+5C,SAAWx8D,KAAK6C,MAAoB,IAAd7C,KAAKC,UAC3B+qB,WAAaD,KAAKC,WACtB,SAAS6xC,kBAAkBC,GAMvB,OAJA30D,MAAQ20D,EACJrE,cACA8D,WAAWC,UAEXlnE,KAAKynE,oBAAsBhyC,KAAKC,WAAWC,SAA6B,iBAAlB31B,KAAKoxB,SACpDve,OAEU,iBAAlB7S,KAAKoxB,WACJy0C,UAAY7lE,KAAK6lE,UACjBC,UAAY9lE,KAAK8lE,UACjBC,cAAgB/lE,KAAK+lE,eAEpBrB,YACDj2B,KAAOhZ,KAAKiyB,eAAejZ,KAC3Bi2B,UAAYjvC,KAAKiyB,eACjBid,SAAWlvC,KAAKryB,KAAK6kD,cACrBkc,QAAUO,UAAUP,QAAQ1xD,KAAKiyD,WACjCN,UAAYM,UAAUN,UAAU3xD,KAAKiyD,WACrCL,SAAWK,UAAUL,SAAS5xD,KAAKiyD,WACnCJ,OAASI,UAAUJ,OAAO7xD,KAAKiyD,WAC/BhoD,KAAOgoD,UAAUhoD,KAAOgoD,UAAUhoD,KAAKjK,KAAKiyD,WAAa,KACzDH,kBAAoBF,UAEnB5sD,YACDA,UAAYge,KAAKiyB,eAAe,wBAChC2b,cAAgB5rD,UACbA,YACCgtD,YAAchtD,UAAUgtD,cAOf,IAAbrB,UAAmB/a,UACnBA,QAAUqc,UAAU,4BAEnBpB,SACDA,OAASoB,UAAU,IAEvB4C,aAAe7xC,KAAKmjB,YAAanjB,KAAKmjB,UAAU/uC,QAC5Cy9D,YAAcn6C,SACdA,OAASsI,KAAKmjB,UAAU,GAAG8O,gBAE/Bx0B,KAAOlzB,KAAKoD,KAAK6xB,cAAcj1B,KAAKoD,KAAKsyB,WAAWuC,UAChDirC,gBACA0C,SAAWhB,eAAe1xC,OAE9B+xC,sBACAjlE,KAAKynE,kBAAoBhyC,KAAKC,WAAWC,QAIX,UAA1BmvC,aAAa1zC,WACb0zC,aAAeA,aAAa9zD,GAGzB8zD,cAEX,OAAOyC,kBAIX,OADAloD,GAAG2jD,mBAAqBA,mBACjB3jD,GAxpBa,GA0pBpBqoD,kBAAqB,WAErB,SAASC,EAAkBlyC,EAAKp0B,EAAKkS,GAC9BlS,EAAK0Y,IACJxG,EAAKyD,GAAI,EACTzD,EAAKwG,GAAI,EACTxG,EAAKyvD,mBAAqBlD,kBAAkBkD,mBAC5CzvD,EAAKqiB,gBAAgBrjB,KAAKgB,EAAKyvD,mBAAmBvtC,EAAKp0B,EAAKkS,GAAMd,KAAKc,KAI/E,SAAS2kB,EAAelH,GAQpB,OAPAA,GAAYhxB,KAAKy1B,KAAKC,WAAWuC,UACjCjH,GAAYhxB,KAAKmxB,WACdH,IAAahxB,KAAK4nE,eAAev1C,YAChCryB,KAAK4nE,eAAel2C,UAAY1xB,KAAK4nE,eAAev1C,UAAYrB,EAAWhxB,KAAK4nE,eAAel2C,UAAY,EAC3G1xB,KAAK4nE,eAAe/0D,MAAQ7S,KAAK+wB,iBAAiBC,EAAUhxB,KAAK4nE,gBACjE5nE,KAAK4nE,eAAev1C,UAAYrB,GAE7BhxB,KAAK4nE,eAAe/0D,MAI/B,SAASg1D,EAAe72C,GACpB,IAAI82C,GAAS,IACT/vC,EAAK/3B,KAAKk4B,eAAelH,GACzBgH,EAAKh4B,KAAKk4B,eAAelH,EAAW82C,GACpCC,EAAQ,EACZ,GAAGhwC,EAAGluB,OAAO,CACT,IAAIC,EACJ,IAAIA,EAAE,EAAEA,EAAEiuB,EAAGluB,OAAOC,GAAG,EACnBi+D,GAASr9D,KAAKuC,IAAI+qB,EAAGluB,GAAKiuB,EAAGjuB,GAAI,GAErCi+D,EAA2B,IAAnBr9D,KAAKyC,KAAK46D,QAElBA,EAAQ,EAEZ,OAAOA,EAGX,SAASpC,EAAkB30C,GACvB,QAAgB9mB,IAAblK,KAAKo2B,IACJ,OAAOp2B,KAAKo2B,IAEhB,IAIIwvC,EAGI97D,EAPJg+D,GAAS,KAET/vC,EAAK/3B,KAAKk4B,eAAelH,GACzBgH,EAAKh4B,KAAKk4B,eAAelH,EAAW82C,GAExC,GAAG/vC,EAAGluB,OAGF,IAFA+7D,EAAWjzD,iBAAiB,UAAWolB,EAAGluB,QAEtCC,EAAE,EAAEA,EAAEiuB,EAAGluB,OAAOC,GAAG,EAInB87D,EAAS97D,IAAMkuB,EAAGluB,GAAKiuB,EAAGjuB,IAAIg+D,OAGlClC,GAAY5tC,EAAKD,GAAI+vC,EAEzB,OAAOlC,EAGX,SAASoC,IACL,OAAOhoE,KAAKqxB,GAGhB,SAAS42C,EAAiBC,GACtBloE,KAAKkoE,cAAgBA,EAG5B,MAAO,CACNP,kBAAmBA,EACnBE,eAAgBA,EAChBlC,kBAAmBA,EACnBztC,eAAgBA,EAChB8vC,qBAAsBA,EACtBC,iBAAkBA,GA9EI,IAiFvB,WAEG,SAASjE,EAAQtiE,EAAK+jE,EAAS0C,GAC3B,IAAInoE,KAAKgX,IAAMhX,KAAK2xB,UAChB,OAAO3xB,KAAKqxB,GAEhB3vB,EAAOA,EAAOA,EAAK6tC,cAAgB,GACnC,IAMQ64B,EAAeC,EAefv+D,EAAGkE,EAAKs6D,EArBZ7tB,EAAez6C,KAAKoD,KAAK6xB,cACzBtD,EAAY3xB,KAAK2xB,UACjB42C,EAAe52C,EAAUA,EAAU9nB,OAAS,GAAG0H,EACnD,GAAGkpC,GAAc8tB,EACb,OAAOvoE,KAAKqxB,GAkBZ,GAfI82C,GAUIC,EAHA3C,EAGgB/6D,KAAK2C,IAAIk7D,EAAe9yC,KAAKryB,KAAKsyB,WAAWuC,UAAUwtC,GAFvD/6D,KAAK+C,IAAI,EAAE86D,EAAevoE,KAAKy1B,KAAKp0B,KAAKk2C,IAI7D8wB,EAAgBE,EAAeH,MAX3B3C,GAAYA,EAAW9zC,EAAU9nB,OAAS,KAC1C47D,EAAW9zC,EAAU9nB,OAAS,GAElCw+D,EAAgB12C,EAAUA,EAAU9nB,OAAS,EAAI47D,GAAUl0D,EAC3D62D,EAAgBG,EAAeF,GAUvB,aAAT3mE,EAAqB,CACpB,IAAI6hD,EAAa74C,KAAK6C,OAAOktC,EAAe4tB,GAAeD,GAC3D,GAAG7kB,EAAa,IAAM,EAClB,OAAOvjD,KAAKk4B,gBAAiBkwC,GAAiB3tB,EAAe4tB,GAAiBD,EAAiBC,GAAkBroE,KAAKoD,KAAKsyB,WAAWuC,UAAW,OAElJ,IAAY,WAATv2B,EAAkB,CACxB,IAAI8mE,EAAQxoE,KAAKk4B,eAAemwC,EAAgBroE,KAAKoD,KAAKsyB,WAAWuC,UAAW,GAC5EwwC,EAAOzoE,KAAKk4B,eAAeqwC,EAAevoE,KAAKoD,KAAKsyB,WAAWuC,UAAW,GAC1EywC,EAAU1oE,KAAKk4B,iBAAiBuiB,EAAe4tB,GAAiBD,EAAiBC,GAAiBroE,KAAKoD,KAAKsyB,WAAWuC,UAAW,GAClI0wC,EAAUj+D,KAAK6C,OAAOktC,EAAe4tB,GAAeD,GACxD,GAAGpoE,KAAKqxB,GAAGxnB,OAAO,CAGd,IAFAy+D,EAAM,IAAI3mE,MAAM6mE,EAAM3+D,QACtBmE,EAAMs6D,EAAIz+D,OACNC,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACbw+D,EAAIx+D,IAAM2+D,EAAK3+D,GAAG0+D,EAAM1+D,IAAI6+D,EAAUD,EAAQ5+D,GAElD,OAAOw+D,EAEX,OAAQG,EAAKD,GAAOG,EAAUD,EAC3B,GAAY,aAAThnE,EAAoB,CAC1B,IAAIknE,EAAY5oE,KAAKk4B,eAAeqwC,EAAevoE,KAAKoD,KAAKsyB,WAAWuC,UAAW,GAC/E4wC,EAAgB7oE,KAAKk4B,gBAAgBqwC,EAAe,MAASvoE,KAAKoD,KAAKsyB,WAAWuC,UAAW,GACjG,GAAGj4B,KAAKqxB,GAAGxnB,OAAO,CAGd,IAFAy+D,EAAM,IAAI3mE,MAAMinE,EAAU/+D,QAC1BmE,EAAMs6D,EAAIz+D,OACNC,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACbw+D,EAAIx+D,GAAK8+D,EAAU9+D,IAAM8+D,EAAU9+D,GAAG++D,EAAc/+D,MAAM2wC,EAAe8tB,GAAevoE,KAAKoD,KAAKsyB,WAAWuC,WAAW,KAE5H,OAAOqwC,EAEX,OAAOM,GAAyCnuB,EAAe8tB,GAAe,MAA1DK,EAAUC,IAElC,OAAO7oE,KAAKk4B,iBAAkBuiB,EAAe4tB,GAAiBD,EAAiBC,GAAkBroE,KAAKoD,KAAKsyB,WAAWuC,UAAW,GAIzI,SAAS6rC,EAAOpiE,EAAK+jE,EAAU0C,GAC3B,IAAInoE,KAAKgX,EACL,OAAOhX,KAAKqxB,GAEhB3vB,EAAOA,EAAOA,EAAK6tC,cAAgB,GACnC,IAMQ64B,EAAeG,EAefz+D,EAAGkE,EAAKs6D,EArBZ7tB,EAAez6C,KAAKoD,KAAK6xB,cACzBtD,EAAY3xB,KAAK2xB,UACjB02C,EAAgB12C,EAAU,GAAGpgB,EACjC,GAAGkpC,GAAc4tB,EACb,OAAOroE,KAAKqxB,GAkBZ,GAfI82C,GAUIC,EAHA3C,EAGgB/6D,KAAK2C,IAAIooB,KAAKryB,KAAKsyB,WAAWuC,UAAUwtC,GAFxC/6D,KAAK+C,IAAI,EAAEzN,KAAKy1B,KAAKp0B,KAAKwiC,GAAKwkC,GAInDE,EAAeF,EAAgBD,MAX3B3C,GAAYA,EAAW9zC,EAAU9nB,OAAS,KAC1C47D,EAAW9zC,EAAU9nB,OAAS,GAElC0+D,EAAe52C,EAAU8zC,GAAUl0D,EACnC62D,EAAgBG,EAAeF,GAUvB,aAAT3mE,EAAqB,CACpB,IAAI6hD,EAAa74C,KAAK6C,OAAO86D,EAAgB5tB,GAAc2tB,GAC3D,GAAG7kB,EAAa,IAAM,EAClB,OAAOvjD,KAAKk4B,iBAAkBmwC,EAAgB5tB,GAAc2tB,EAAiBC,GAAkBroE,KAAKoD,KAAKsyB,WAAWuC,UAAW,OAEhI,IAAY,WAATv2B,EAAkB,CACxB,IAAI8mE,EAAQxoE,KAAKk4B,eAAemwC,EAAgBroE,KAAKoD,KAAKsyB,WAAWuC,UAAW,GAC5EwwC,EAAOzoE,KAAKk4B,eAAeqwC,EAAevoE,KAAKoD,KAAKsyB,WAAWuC,UAAW,GAC1EywC,EAAU1oE,KAAKk4B,gBAAgBkwC,GAAiBC,EAAgB5tB,GAAc2tB,EAAiBC,GAAiBroE,KAAKoD,KAAKsyB,WAAWuC,UAAW,GAChJ0wC,EAAUj+D,KAAK6C,OAAO86D,EAAgB5tB,GAAc2tB,GAAe,EACvE,GAAGpoE,KAAKqxB,GAAGxnB,OAAO,CAGd,IAFAy+D,EAAM,IAAI3mE,MAAM6mE,EAAM3+D,QACtBmE,EAAMs6D,EAAIz+D,OACNC,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACbw+D,EAAIx+D,GAAK4+D,EAAQ5+D,IAAI2+D,EAAK3+D,GAAG0+D,EAAM1+D,IAAI6+D,EAE3C,OAAOL,EAEX,OAAOI,GAASD,EAAKD,GAAOG,EACzB,GAAY,aAATjnE,EAAoB,CAC1B,IAAIonE,EAAa9oE,KAAKk4B,eAAemwC,EAAgBroE,KAAKoD,KAAKsyB,WAAWuC,UAAW,GACjF8wC,EAAiB/oE,KAAKk4B,gBAAgBmwC,EAAgB,MAASroE,KAAKoD,KAAKsyB,WAAWuC,UAAW,GACnG,GAAGj4B,KAAKqxB,GAAGxnB,OAAO,CAGd,IAFAy+D,EAAM,IAAI3mE,MAAMmnE,EAAWj/D,QAC3BmE,EAAMs6D,EAAIz+D,OACNC,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACbw+D,EAAIx+D,GAAKg/D,EAAWh/D,IAAMg/D,EAAWh/D,GAAGi/D,EAAej/D,KAAKu+D,EAAgB5tB,GAAc,KAE9F,OAAO6tB,EAEX,OAAOQ,GAAcA,EAAWC,IAAiBV,EAAgB5tB,GAAc,MAEnF,OAAOz6C,KAAKk4B,gBAAiBkwC,GAAiBC,EAAgB5tB,GAAgB2tB,EAAiBC,GAAkBroE,KAAKoD,KAAKsyB,WAAWuC,UAAW,GAIzJ,SAASisC,EAAO/nD,EAAO6sD,GACnB,IAAKhpE,KAAKgX,EACN,OAAOhX,KAAKqxB,GAIhB,GAFAlV,EAAyB,IAAhBA,GAAS,IAClB6sD,EAAUt+D,KAAK6C,MAAMy7D,GAAW,GAC5BA,GAAW,EACX,OAAOhpE,KAAKqxB,GAEhB,IAKIxe,EAMAo2D,EAXAv5D,EAAc1P,KAAKoD,KAAK6xB,cAAgBj1B,KAAKoD,KAAKsyB,WAAWuC,UAC7DpH,EAAYnhB,EAAcyM,EAC1B+sD,EAAWx5D,EAAcyM,EACzBgtD,EAAkBH,EAAU,GAAKE,EAAWr4C,IAAcm4C,EAAU,GAAK,EACzEl/D,EAAI,EAAGiN,EAAI,EAGXlE,EADA7S,KAAKqxB,GAAGxnB,OACA8I,iBAAiB,UAAW3S,KAAKqxB,GAAGxnB,QAEpC,EAGZ,MAAOC,EAAIk/D,EAAS,CAEhB,GADAC,EAAcjpE,KAAKk4B,eAAerH,EAAY/mB,EAAIq/D,GAC/CnpE,KAAKqxB,GAAGxnB,OACP,IAAKkN,EAAI,EAAGA,EAAI/W,KAAKqxB,GAAGxnB,OAAQkN,GAAK,EACjClE,EAAMkE,IAAMkyD,EAAYlyD,QAG5BlE,GAASo2D,EAEbn/D,GAAK,EAET,GAAG9J,KAAKqxB,GAAGxnB,OACP,IAAKkN,EAAI,EAAGA,EAAI/W,KAAKqxB,GAAGxnB,OAAQkN,GAAK,EACjClE,EAAMkE,IAAMiyD,OAGhBn2D,GAASm2D,EAEb,OAAOn2D,EAeX,SAASu2D,EAAwBl2C,GAC7B3vB,QAAQwsB,KAAK,mCAGjB,SAASs5C,EAA8Bn2C,IAIvC,IAAIoF,EAAuB3B,yBAAyB2B,qBACpD3B,yBAAyB2B,qBAAuB,SAAS7C,EAAMp0B,EAAMgB,GACjE,IAAIkR,EAAO+kB,EAAqB7C,EAAMp0B,EAAMgB,GAO5C,OANGkR,EAAKC,kBAAkB3J,OACtB0J,EAAK2kB,eAAiBkxC,EAAwB32D,KAAKc,GAEnDA,EAAK2kB,eAAiBmxC,EAA8B52D,KAAKc,GAE7DA,EAAK00D,iBAAmBP,kBAAkBO,iBACnC10D,GAGX,IAAI+1D,EAAkB14C,gBAAgB8F,QAoCtC,SAAS6yC,EAAoBv4C,GAiBzB,OAfKhxB,KAAK4nE,iBACN5nE,KAAK4nE,eAAiB,CAClB4B,WAAY9uC,WAAW9gB,MAAM5Z,KAAKqxB,IAClCK,UAAW,EACXvJ,SAAU9b,sBAIlB2kB,GAAYhxB,KAAKy1B,KAAKC,WAAWuC,UACjCjH,GAAYhxB,KAAKmxB,WACdH,IAAahxB,KAAK4nE,eAAez/C,WAChCnoB,KAAK4nE,eAAel2C,UAAY1xB,KAAK4nE,eAAez/C,SAAW6I,EAAWhxB,KAAKm1B,SAASzD,UAAY,EACpG1xB,KAAK4nE,eAAez/C,SAAW6I,EAC/BhxB,KAAK85B,iBAAiB9I,EAAUhxB,KAAK4nE,eAAe4B,WAAYxpE,KAAK4nE,iBAElE5nE,KAAK4nE,eAAe4B,WApD/B54C,gBAAgB8F,QAAU,SAASjB,EAAKp0B,EAAKK,EAAM6zB,EAAMlzB,GACrD,IAAIkR,EAAO+1D,EAAgB7zC,EAAKp0B,EAAKK,EAAM6zB,EAAMlzB,GAI9CkR,EAAKyiB,GACJziB,EAAK2kB,eAAiBwvC,kBAAkBxvC,eAAezlB,KAAKc,GAE5DA,EAAK2kB,eAAiBwvC,kBAAkBM,qBAAqBv1D,KAAKc,GAEtEA,EAAK00D,iBAAmBP,kBAAkBO,iBAC1C10D,EAAKywD,QAAUA,EACfzwD,EAAKuwD,OAASA,EACdvwD,EAAK2wD,OAASA,EACd3wD,EAAKoyD,kBAAoB+B,kBAAkB/B,kBAAkBlzD,KAAKc,GAClEA,EAAKs0D,eAAiBH,kBAAkBG,eAAep1D,KAAKc,GAC5DA,EAAK2xD,QAAqB,IAAX7jE,EAAKuV,EAAUvV,EAAK2V,EAAEnN,OAAS,EAC9C0J,EAAKk2D,cAAgBpoE,EAAKqoE,GAC1B,IAAI72D,EAAQ,EAcZ,OAbY,IAATnR,IACCmR,EAAQF,iBAAiB,UAAsB,IAAXtR,EAAKuV,EAAWvV,EAAK2V,EAAE,GAAGjG,EAAElH,OAASxI,EAAK2V,EAAEnN,SAEpF0J,EAAKq0D,eAAiB,CAClBv1C,UAAWhmB,oBACXqlB,UAAW,EACX7e,MAAOA,GAEX60D,kBAAkBC,kBAAkBlyC,EAAKp0B,EAAKkS,GAC3CA,EAAKyD,GACJ3U,EAAUiR,mBAAmBC,GAG1BA,GAuBX,IAAIo2D,EAAmC9vC,qBAAqBqD,yBACxD0sC,EAA4C/vC,qBAAqBsD,kCAErE,SAAS0sC,KACTA,EAAiB1lE,UAAY,CACzBq1B,SAAU,SAASjmB,EAAM2f,GACjBlzB,KAAKgX,GACLhX,KAAK4T,WAET,IAAI2sB,EAAYvgC,KAAKgR,OACT9G,IAATgpB,IACCqN,EAAYvgC,KAAKk4B,eAAehF,EAAM,IAE1C,IAAIppB,EAAGkE,EAAMuyB,EAAU/a,QACnBgU,EAAW+G,EAAUhtB,GACrB+N,EAASif,EAAUvvB,EACnB8B,EAAM1E,iBAAiBJ,GAC3B,IAAIlE,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EAEjBgJ,EAAIhJ,GADI,MAATyJ,GAAyB,MAATA,EACN,CAACimB,EAAS1vB,GAAG,GAAKwX,EAAOxX,GAAG,GAAI0vB,EAAS1vB,GAAG,GAAKwX,EAAOxX,GAAG,IAE3D,CAAC0vB,EAAS1vB,GAAG,GAAI0vB,EAAS1vB,GAAG,IAI9C,OAAOgJ,GAEXwO,OAAQ,SAAS4R,GACb,OAAOlzB,KAAKw5B,SAAS,IAAKtG,IAE9ByvC,WAAY,SAASzvC,GACjB,OAAOlzB,KAAKw5B,SAAS,IAAKtG,IAE9B0vC,YAAa,SAAS1vC,GAClB,OAAOlzB,KAAKw5B,SAAS,IAAKtG,IAE9B42C,SAAU,WACN,OAAO9pE,KAAKgR,EAAE6F,GAElBkzD,YAAa,SAAS1lD,EAAM6O,GACxB,IAAIqN,EAAYvgC,KAAKgR,OACT9G,IAATgpB,IACCqN,EAAYvgC,KAAKk4B,eAAehF,EAAM,IAEtClzB,KAAKgqE,kBACLhqE,KAAKgqE,gBAAkBthD,IAAI1D,kBAAkBub,IAGjD,IAK2B9lB,EALvByK,EAAiBllB,KAAKgqE,gBACtBjlD,EAAUG,EAAeH,QACzBsB,EAAYnB,EAAeO,YAAcpB,EACzCva,EAAI,EAAGkE,EAAM+W,EAAQlb,OAErBogE,EAAoB,EACxB,MAAMngE,EAAIkE,EAAK,CACX,GAAGi8D,EAAoBllD,EAAQjb,GAAG0a,YAAc6B,EAAW,CACvD,IAAI6jD,EAAYpgE,EACZqgE,EAAY5pC,EAAU1pB,GAAK/M,IAAMkE,EAAM,EAAK,EAAIlE,EAAI,EACpDqoB,GAAe9L,EAAY4jD,GAAmBllD,EAAQjb,GAAG0a,YAC7D/J,EAAKiO,IAAInC,kBAAkBga,EAAUvvB,EAAEk5D,GAAY3pC,EAAUvvB,EAAEm5D,GAAW5pC,EAAUnpB,EAAE8yD,GAAY3pC,EAAUz2B,EAAEqgE,GAAWh4C,EAAapN,EAAQjb,IAC9I,MAEAmgE,GAAqBllD,EAAQjb,GAAG0a,YAEpC1a,GAAK,EAKT,OAHI2Q,IACAA,EAAK8lB,EAAU1pB,EAAI,CAAC0pB,EAAUvvB,EAAE,GAAG,GAAGuvB,EAAUvvB,EAAE,GAAG,IAAI,CAACuvB,EAAUvvB,EAAEuvB,EAAU/a,QAAQ,GAAG,GAAG+a,EAAUvvB,EAAEuvB,EAAU/a,QAAQ,GAAG,KAE5H/K,GAEX2vD,aAAc,SAAS/lD,EAAM6O,EAAMm3C,GAE/BhmD,EAAe,GAARA,EAAYrkB,KAAKgR,EAAE6F,EAAI,EAAI,KAAQwN,EAC1C,IAAItJ,EAAM/a,KAAK+pE,YAAY1lD,EAAM6O,GAC7BlY,EAAMhb,KAAK+pE,YAAY1lD,EAAO,KAAO6O,GACrCo3C,EAAUtvD,EAAI,GAAKD,EAAI,GACvBwvD,EAAUvvD,EAAI,GAAKD,EAAI,GACvByvD,EAAY9/D,KAAKyC,KAAKzC,KAAKuC,IAAIq9D,EAAQ,GAAK5/D,KAAKuC,IAAIs9D,EAAQ,IACjE,GAAkB,IAAdC,EACA,MAAO,CAAC,EAAE,GAEd,IAAIC,EAA4B,YAAfJ,EAA2B,CAACC,EAAQE,EAAWD,EAAQC,GAAa,EAAED,EAAQC,EAAWF,EAAQE,GAClH,OAAOC,GAEXC,cAAe,SAASrmD,EAAM6O,GAC1B,OAAOlzB,KAAKoqE,aAAa/lD,EAAM6O,EAAM,YAEzCy3C,aAAc,SAAStmD,EAAM6O,GACzB,OAAOlzB,KAAKoqE,aAAa/lD,EAAM6O,EAAM,WAEzC+0C,iBAAkBP,kBAAkBO,iBACpC/vC,eAAgBwvC,kBAAkBM,sBAEtC1lD,gBAAgB,CAACunD,GAAmBF,GACpCrnD,gBAAgB,CAACunD,GAAmBD,GACpCA,EAA0CzlE,UAAU+zB,eAAiBqxC,EACrEK,EAA0CzlE,UAAU6+D,mBAAqBlD,kBAAkBkD,mBAE3F,IAAI4H,EAAuB/wC,qBAAqBkD,aAChDlD,qBAAqBkD,aAAe,SAAStH,EAAKp0B,EAAKK,EAAMoR,EAAK+3D,GAC9D,IAAIt3D,EAAOq3D,EAAqBn1C,EAAKp0B,EAAKK,EAAMoR,EAAK+3D,GAWrD,OAVAt3D,EAAKk2D,cAAgBpoE,EAAKqoE,GAC1Bn2D,EAAKsiB,MAAO,EACA,IAATn0B,EACCgmE,kBAAkBC,kBAAkBlyC,EAAKp0B,EAAKoZ,GAAGlH,GAClC,IAAT7R,GACNgmE,kBAAkBC,kBAAkBlyC,EAAKp0B,EAAK8oB,GAAG5W,GAElDA,EAAKyD,GACJye,EAAKniB,mBAAmBC,GAErBA,IAlXf,GAqXC,WAEG,SAASo0D,IACL,GAAG3nE,KAAKqB,KAAKoQ,EAAEsI,EAGX,OAFA/Z,KAAK8qE,oBAAsBhL,kBAAkBkD,mBAAmBvwD,KAAKzS,KAA1C8/D,CAAgD9/D,KAAKy1B,KAAKz1B,KAAKqB,KAAKoQ,EAAEzR,MACjGA,KAAKi2B,UAAUj2B,KAAK+qE,mBAAmBt4D,KAAKzS,QACrC,EAIfmpC,aAAahlC,UAAU4mE,mBAAqB,SAAS18B,EAAcI,GAC/D,IAAIvd,EAAWlxB,KAAK8qE,oBAAoBr8B,GACxC,GAAGJ,EAAa98B,IAAM2f,EAAU,CAC5B,IAAImf,EAAU,GAId,OAHArwC,KAAKwqC,SAAS6F,EAAShC,GACvBgC,EAAQ9+B,EAAI2f,EAAShoB,WACrBmnC,EAAQ1kB,YAAa,EACd0kB,EAEX,OAAOhC,GAGXlF,aAAahlC,UAAUsmC,eAAiB,WAEpC,IAAIugC,EAAchrE,KAAKkuC,kBACnB+8B,EAAiBjrE,KAAK2nE,oBAE1B,OADA3nE,KAAKg2B,GAAKg1C,GAAeC,EAClBjrE,KAAKg2B,IAGhBmT,aAAahlC,UAAUwjE,kBAAoBA,EA9B/C,GAiCA,IAAIvf,yBAA4B,WAE5B,SAAS8iB,EAAgBrhD,EAAOshD,EAAMjD,GAClC,IACIp+D,EADAgJ,EAAM,GACH9E,EAAM6b,EAASA,EAAOhgB,OAAS,EACtC,IAAIC,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACM,MAAhB+f,EAAO/f,GAAGyN,GACTzE,EAAIP,KAAK64D,EAAsBvhD,EAAO/f,GAAGqhE,EAAKrhE,GAAGo+D,IAC5B,MAAhBr+C,EAAO/f,GAAGyN,GACfzE,EAAIP,KAAK84D,EAAqBxhD,EAAO/f,GAAGqhE,EAAKrhE,GAAGo+D,IAC3B,MAAhBr+C,EAAO/f,GAAGyN,GACfzE,EAAIP,KAAK+4D,EAAuBzhD,EAAO/f,GAAGqhE,EAAKrhE,GAAGo+D,IAC7B,MAAhBr+C,EAAO/f,GAAGyN,GACfzE,EAAIP,KAAKg5D,EAAqB1hD,EAAO/f,GAAGqhE,EAAKrhE,GAAGo+D,IAC3B,MAAhBr+C,EAAO/f,GAAGyN,KAEM,MAAhBsS,EAAO/f,GAAGyN,GACfzE,EAAIP,KAAKi5D,EAAwB3hD,EAAO/f,GAAGqhE,EAAKrhE,GAAGo+D,IAC9B,MAAhBr+C,EAAO/f,GAAGyN,GACfzE,EAAIP,KAAKk5D,EAAqB5hD,EAAO/f,GAAGqhE,EAAKrhE,GAAGo+D,IAC1B,MAAhBr+C,EAAO/f,GAAGyN,GAChBzE,EAAIP,KAAKm5D,EAAqB7hD,EAAO/f,GAAGqhE,EAAKrhE,GAAGo+D,IAC1B,MAAhBr+C,EAAO/f,GAAGyN,GAChBzE,EAAIP,KAAKo5D,EAAqB9hD,EAAO/f,GAAGqhE,EAAKrhE,GAAGo+D,IAC1B,MAAhBr+C,EAAO/f,GAAGyN,GAChBzE,EAAIP,KAAKq5D,EAAwB/hD,EAAO/f,GAAGqhE,EAAKrhE,GAAGo+D,IAC7B,MAAhBr+C,EAAO/f,GAAGyN,IAChBzE,EAAIP,KAAKs5D,EAAyBhiD,EAAO/f,GAAGqhE,EAAKrhE,GAAGo+D,KAG5D,OAAOp1D,EAGX,SAASg5D,EAAyBntC,EAAMwsC,EAAMjD,GAC3C,IAAI6D,EACAC,EAAoB,SAA4Bn5D,GAChD,IAAI/I,EAAI,EAAGkE,EAAM+9D,EAAWliE,OAC3B,MAAMC,EAAEkE,EAAI,CACR,GAAG+9D,EAAWjiE,GAAGmiE,QAAUp5D,GAASk5D,EAAWjiE,GAAGoiE,KAAOr5D,GAASk5D,EAAWjiE,GAAG2/D,gBAAkB52D,GAASk5D,EAAWjiE,GAAG4/D,KAAO72D,GAASk5D,EAAWjiE,GAAGmoB,MAAQpf,EAC5J,OAAOk5D,EAAWjiE,GAErBA,GAAG,EAEP,GAAoB,kBAAV+I,EACP,OAAOk5D,EAAWl5D,EAAM,IAehC,OAZAm5D,EAAkB9D,cAAgB,SAASj6D,GACvC,OAAW,IAARA,EACQ+9D,EAEA9D,EAAcj6D,EAAI,IAGjC89D,EAAab,EAAgBvsC,EAAMvU,GAAI+gD,EAAK/gD,GAAI4hD,EAAkB9D,eAClE8D,EAAkBG,cAAgBJ,EAAWliE,OAC7CmiE,EAAkBvC,cAAgB9qC,EAAMytC,IACxCJ,EAAkBC,MAAQttC,EAAMnf,GAEzBwsD,EAGV,SAASZ,EAAsBzsC,EAAMwsC,EAAMjD,GACvC,IAAI8D,EAAoB,SAA4Bn5D,GAChD,OAAOA,GACH,IAAK,qBACL,IAAK,WACL,KAAK,EACD,OAAOm5D,EAAkB3jB,QAI7B,QACI,OAAO2jB,EAAkBv0D,YAGrCu0D,EAAkB9D,cAAgB,SAASj6D,GACvC,OAAW,IAARA,EACQ+9D,EAEA9D,EAAcj6D,EAAI,IAGjC,IAAIo6C,EAAUyjB,EAAyBntC,EAAMwsC,EAAKa,EAAkB9D,eAChEmE,EAAqBC,EAA0B3tC,EAAMvU,GAAGuU,EAAMvU,GAAGvgB,OAAS,GAAGshE,EAAK/gD,GAAG+gD,EAAK/gD,GAAGvgB,OAAS,GAAGmiE,EAAkB9D,eAa/H,OAZA8D,EAAkB3jB,QAAUA,EAC5B2jB,EAAkBv0D,UAAY40D,EAC9B5qE,OAAOgiE,eAAeuI,EAAmB,QAAS,CAC9CvqD,IAAK,WACD,OAAOkd,EAAMnf,MAIrBwsD,EAAkBG,cAAgBxtC,EAAM4tC,GACxCP,EAAkBvC,cAAgB9qC,EAAM+qC,GACxCsC,EAAkBxsD,GAAKmf,EAAMnf,GAC7BwsD,EAAkBE,GAAKvtC,EAAMutC,GACtBF,EAGX,SAASX,EAAqB1sC,EAAMwsC,EAAKjD,GACrC,SAAS8D,EAAkB/9D,GACvB,MAAW,UAARA,GAA2B,UAARA,EACX+9D,EAAkBr6D,MACX,YAAR1D,GAA6B,YAARA,EACpB+9D,EAAkBxd,aADtB,EAiBX,OAbA/sD,OAAO+qE,iBAAiBR,EAAmB,CACvC,MAAS,CACLvqD,IAAKgrD,4BAA4BtB,EAAKt0D,IAE1C,QAAW,CACP4K,IAAKgrD,4BAA4BtB,EAAK/zD,IAE1C,MAAS,CAAEvE,MAAO8rB,EAAMnf,IACxB,GAAM,CAAE3M,MAAO8rB,EAAMutC,MAGzBf,EAAKt0D,EAAEoxD,iBAAiBC,GACxBiD,EAAK/zD,EAAE6wD,iBAAiBC,GACjB8D,EAGX,SAASV,EAAuB3sC,EAAMwsC,EAAKjD,GACvC,SAASwE,EAAez+D,GACpB,OAAW,IAARA,EACQoR,GAEA6oD,EAAcj6D,EAAI,GAGjC,SAAS0+D,EAAmB1+D,GACxB,OAAW,IAARA,EACQ2+D,EAEAF,EAAez+D,EAAI,GAGlC,SAAS4+D,EAAoB/iE,GACzBrI,OAAOgiE,eAAemJ,EAAQjuC,EAAMltB,EAAE3H,GAAG0V,GAAI,CACzCiC,IAAKgrD,4BAA4BtB,EAAK15D,EAAEqsB,UAAUh0B,GAAGuH,KAG7D,IAAIvH,EAAGkE,EAAM2wB,EAAMltB,EAAIktB,EAAMltB,EAAE5H,OAAS,EACpC+iE,EAAS,GACb,IAAK9iE,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EACtB+iE,EAAoB/iE,GACpBqhE,EAAK15D,EAAEqsB,UAAUh0B,GAAGuH,EAAE42D,iBAAiB0E,GAG3C,SAASX,EAAkB/9D,GACvB,MAAW,UAARA,GAA2B,UAARA,EACX+9D,EAAkBr6D,MACX,YAAR1D,GAA6B,YAARA,EACpB+9D,EAAkBxd,QACX,iBAARvgD,GAAkC,iBAARA,EACzB+9D,EAAkBxT,iBADtB,EA0BX,OAtBA/2D,OAAO+qE,iBAAiBR,EAAmB,CACvC,MAAS,CACLvqD,IAAKgrD,4BAA4BtB,EAAKt0D,IAE1C,QAAW,CACP4K,IAAKgrD,4BAA4BtB,EAAK/zD,IAE1C,YAAe,CACXqK,IAAKgrD,4BAA4BtB,EAAKj/C,IAE1C,KAAQ,CACJzK,IAAK,WACD,OAAOmrD,IAGf,MAAS,CAAE/5D,MAAO8rB,EAAMnf,IACxB,GAAM,CAAE3M,MAAO8rB,EAAMutC,MAGzBf,EAAKt0D,EAAEoxD,iBAAiByE,GACxBvB,EAAK/zD,EAAE6wD,iBAAiByE,GACxBvB,EAAKj/C,EAAE+7C,iBAAiByE,GACjBV,EAGX,SAAST,EAAqB5sC,EAAMwsC,EAAKjD,GACrC,SAASwE,EAAez+D,GACpB,OAAU,GAAPA,EACQ+9D,EAEA9D,IAAgBj6D,GAS/B,SAAS+9D,EAAkB/9D,GACvB,OAAGA,IAAQ0wB,EAAM7nB,EAAE4yD,IAAc,QAARz7D,GAAyB,QAARA,EAC/B+9D,EAAkBxjE,IAE1ByF,IAAQ0wB,EAAM5tB,EAAE24D,GACRsC,EAAkBzjE,MAE1B0F,IAAQ0wB,EAAMvnB,EAAEsyD,GACRsC,EAAkBp6D,YAD7B,EAoBJ,OAjCAo6D,EAAkBvC,cAAgB9qC,EAAM+qC,GAExCyB,EAAKp6D,EAAEk3D,iBAAiByE,GACxBvB,EAAKr0D,EAAEmxD,iBAAiByE,GACxBvB,EAAK/zD,EAAE6wD,iBAAiByE,GAaxBV,EAAkBvC,cAAgB9qC,EAAM+qC,GACxCsC,EAAkB9D,cAAgBA,EAElCzmE,OAAO+qE,iBAAiBR,EAAmB,CACvC,MAAS,CACLvqD,IAAKgrD,4BAA4BtB,EAAKp6D,IAE1C,IAAO,CACH0Q,IAAKgrD,4BAA4BtB,EAAKr0D,IAE1C,OAAU,CACN2K,IAAKgrD,4BAA4BtB,EAAK/zD,IAE1C,MAAS,CAAEvE,MAAO8rB,EAAMnf,MAE5BwsD,EAAkBE,GAAKvtC,EAAMutC,GACtBF,EAGX,SAASM,EAA0B3tC,EAAMwsC,EAAKjD,GAC1C,SAASwE,EAAez+D,GACpB,OAAU,GAAPA,EACQ+9D,EAEA9D,IAAgBj6D,GAc/B,SAAS+9D,EAAkBn5D,GACvB,OAAG8rB,EAAM/nB,EAAE8yD,KAAO72D,GAAmB,iBAAVA,EAChBm5D,EAAkBvH,YAE1B9lC,EAAMvnB,EAAEsyD,KAAO72D,GAAmB,YAAVA,EAChBm5D,EAAkBxd,QAE1B7vB,EAAMttB,EAAEq4D,KAAO72D,GAAmB,aAAVA,EAChBm5D,EAAkBl9D,SAE1B6vB,EAAM1tB,EAAEy4D,KAAO72D,GAAmB,aAAVA,GAAkC,yBAAVA,EACxCm5D,EAAkBxH,SAE1B7lC,EAAM5tB,EAAE24D,KAAO72D,GAAmB,UAAVA,EAChBm5D,EAAkBv1D,MAE1BkoB,EAAM5H,IAAM4H,EAAM5H,GAAG2yC,KAAO72D,GAAmB,SAAVA,EAC7Bm5D,EAAkB31D,KAE1BsoB,EAAM3H,IAAM2H,EAAM3H,GAAG0yC,KAAO72D,GAAmB,cAAVA,EAC7Bm5D,EAAkBc,cAD7B,EAgCJ,OA9DA3B,EAAK1zD,UAAUmsB,OAAOxsB,EAAE6wD,iBAAiByE,GACzCvB,EAAK1zD,UAAUmsB,OAAOvyB,EAAE42D,iBAAiByE,GACzCvB,EAAK1zD,UAAUmsB,OAAOhtB,EAAEqxD,iBAAiByE,GACzCvB,EAAK1zD,UAAUmsB,OAAO7yB,EAAEk3D,iBAAiByE,GACzCvB,EAAK1zD,UAAUmsB,OAAO3yB,EAAEg3D,iBAAiByE,GACtCvB,EAAK1zD,UAAUmsB,OAAO7M,KACrBo0C,EAAK1zD,UAAUmsB,OAAO7M,GAAGkxC,iBAAiByE,GAC1CvB,EAAK1zD,UAAUmsB,OAAO5M,GAAGixC,iBAAiByE,IAE9CvB,EAAK1zD,UAAUosB,GAAGokC,iBAAiByE,GA0BnCjrE,OAAO+qE,iBAAiBR,EAAmB,CACvC,QAAW,CACPvqD,IAAKgrD,4BAA4BtB,EAAK1zD,UAAUmsB,OAAOxsB,IAE3D,SAAY,CACRqK,IAAKgrD,4BAA4BtB,EAAK1zD,UAAUmsB,OAAOvyB,IAE3D,YAAe,CACXoQ,IAAKgrD,4BAA4BtB,EAAK1zD,UAAUmsB,OAAOhtB,IAE3D,MAAS,CACL6K,IAAKgrD,4BAA4BtB,EAAK1zD,UAAUmsB,OAAO7yB,IAE3D,SAAY,CACR0Q,IAAKgrD,4BAA4BtB,EAAK1zD,UAAUmsB,OAAO3yB,IAE3D,KAAQ,CACJwQ,IAAKgrD,4BAA4BtB,EAAK1zD,UAAUmsB,OAAO7M,KAE3D,SAAY,CACRtV,IAAKgrD,4BAA4BtB,EAAK1zD,UAAUmsB,OAAO5M,KAE3D,MAAS,CAAEnkB,MAAO8rB,EAAMnf,MAE5BwsD,EAAkBz0D,GAAK,KACvBy0D,EAAkBE,GAAKvtC,EAAMutC,GAC7BF,EAAkB9D,cAAgBA,EAC3B8D,EAGX,SAASR,EAAwB7sC,EAAMwsC,EAAKjD,GACxC,SAASwE,EAAez+D,GACpB,OAAU,GAAPA,EACQ+9D,EAEA9D,IAAgBj6D,GAG/B+9D,EAAkBvC,cAAgB9qC,EAAM+qC,GACxC,IAAIn2D,EAAsB,OAAf43D,EAAKr4C,GAAGvb,GAAc4zD,EAAKr4C,GAAGvf,KAAO43D,EAAKr4C,GAGrD,SAASk5C,EAAkBn5D,GACvB,OAAG8rB,EAAMttB,EAAEq4D,KAAO72D,EACPm5D,EAAkBl9D,SAE1B6vB,EAAM5tB,EAAE24D,KAAO72D,EACPm5D,EAAkB7/C,UAD7B,EAeJ,OArBA5Y,EAAKxC,EAAEk3D,iBAAiByE,GACxBn5D,EAAKlC,EAAE42D,iBAAiByE,GAUxBjrE,OAAO+qE,iBAAiBR,EAAmB,CACvC,KAAQ,CACJvqD,IAAKgrD,4BAA4Bl5D,EAAKxC,IAE1C,SAAY,CACR0Q,IAAKgrD,4BAA4Bl5D,EAAKlC,IAE1C,MAAS,CAAEwB,MAAO8rB,EAAMnf,MAE5BwsD,EAAkBE,GAAKvtC,EAAMutC,GACtBF,EAGX,SAASP,EAAqB9sC,EAAMwsC,EAAKjD,GACrC,SAASwE,EAAez+D,GACpB,OAAU,GAAPA,EACQ+9D,EAEA9D,IAAgBj6D,GAG/B,IAAIsF,EAAsB,OAAf43D,EAAKr4C,GAAGvb,GAAc4zD,EAAKr4C,GAAGvf,KAAO43D,EAAKr4C,GAYrD,SAASk5C,EAAkBn5D,GACvB,OAAG8rB,EAAMttB,EAAEq4D,KAAO72D,EACPm5D,EAAkBl9D,SAE1B6vB,EAAM1tB,EAAEy4D,KAAO72D,EACPm5D,EAAkBxH,SAE1B7lC,EAAMlkB,GAAGivD,KAAO72D,EACRm5D,EAAkB1qD,OAE1Bqd,EAAMvH,GAAGsyC,KAAO72D,GAAS,kCAAoCA,EACrDm5D,EAAkBe,YAE1BpuC,EAAM9C,GAAG6tC,KAAO72D,EACRm5D,EAAkBgB,gBAE1BruC,EAAMnD,IAAOmD,EAAMnD,GAAGkuC,KAAO72D,GAAS,kCAAoCA,EAG1E8rB,EAAMlD,IAAMkD,EAAMlD,GAAGiuC,KAAO72D,EACpBm5D,EAAkBiB,oBAD7B,EAFWjB,EAAkBkB,YAiCjC,OA7DAlB,EAAkBvC,cAAgB9qC,EAAM+qC,GACxCn2D,EAAK6jB,GAAG6wC,iBAAiByE,GACzBn5D,EAAKsoB,GAAGosC,iBAAiByE,GACzBn5D,EAAKkH,GAAGwtD,iBAAiByE,GACzBn5D,EAAKlC,EAAE42D,iBAAiByE,GACxBn5D,EAAKtC,EAAEg3D,iBAAiByE,GACrB/tC,EAAMnD,KACLjoB,EAAKioB,GAAGysC,iBAAiByE,GACzBn5D,EAAKkoB,GAAGwsC,iBAAiByE,IA4B7BjrE,OAAO+qE,iBAAiBR,EAAmB,CACvC,SAAY,CACRvqD,IAAKgrD,4BAA4Bl5D,EAAKlC,IAE1C,SAAY,CACRoQ,IAAKgrD,4BAA4Bl5D,EAAKtC,IAE1C,OAAU,CACNwQ,IAAKgrD,4BAA4Bl5D,EAAKkH,KAE1C,YAAe,CACXgH,IAAKgrD,4BAA4Bl5D,EAAK6jB,KAE1C,eAAkB,CACd3V,IAAKgrD,4BAA4Bl5D,EAAKsoB,KAE1C,YAAe,CACXpa,IAAKgrD,4BAA4Bl5D,EAAKioB,KAE1C,eAAkB,CACd/Z,IAAKgrD,4BAA4Bl5D,EAAKkoB,KAE1C,MAAS,CAAE5oB,MAAO8rB,EAAMnf,MAE5BwsD,EAAkBE,GAAKvtC,EAAMutC,GACtBF,EAGX,SAASL,EAAqBhtC,EAAMwsC,EAAKjD,GACrC,SAASwE,EAAez+D,GACpB,OAAU,GAAPA,EACQ+9D,EAEA9D,IAAgBj6D,GAG/B,IAAIsF,EAAsB,OAAf43D,EAAKr4C,GAAGvb,GAAc4zD,EAAKr4C,GAAGvf,KAAO43D,EAAKr4C,GAMrD,SAASk5C,EAAkBn5D,GACvB,OAAG8rB,EAAMttB,EAAEq4D,KAAO72D,EACPm5D,EAAkBl9D,SAE1B6vB,EAAM1tB,EAAEy4D,KAAO72D,EACPm5D,EAAkBjwC,UAE1B4C,EAAM5tB,EAAE24D,KAAO72D,GAAmB,SAAVA,GAA8B,0BAAVA,EACpCm5D,EAAkB7/C,UAD7B,EAkBJ,OA9BA6/C,EAAkBvC,cAAgB9qC,EAAM+qC,GACxCn2D,EAAKlC,EAAE42D,iBAAiByE,GACxBn5D,EAAKxC,EAAEk3D,iBAAiByE,GACxBn5D,EAAKtC,EAAEg3D,iBAAiByE,GAcxBjrE,OAAO+qE,iBAAiBR,EAAmB,CACvC,SAAY,CACRvqD,IAAKgrD,4BAA4Bl5D,EAAKlC,IAE1C,UAAa,CACToQ,IAAKgrD,4BAA4Bl5D,EAAKtC,IAE1C,KAAQ,CACJwQ,IAAKgrD,4BAA4Bl5D,EAAKxC,IAE1C,MAAS,CAAE8B,MAAO8rB,EAAMnf,MAE5BwsD,EAAkBE,GAAKvtC,EAAMutC,GACtBF,EAGX,SAASJ,EAAwBjtC,EAAMwsC,EAAKjD,GACxC,SAASwE,EAAez+D,GACpB,OAAU,GAAPA,EACQ+9D,EAEA9D,IAAgBj6D,GAG/B,IAAIsF,EAAO43D,EAIX,SAASa,EAAkBn5D,GACvB,GAAG8rB,EAAM1tB,EAAEy4D,KAAO72D,GAAS,oBAAsBA,EAC7C,OAAOm5D,EAAkBmB,OAWjC,OAhBAnB,EAAkBvC,cAAgB9qC,EAAM+qC,GACxCn2D,EAAKutB,GAAGmnC,iBAAiByE,GAQzBjrE,OAAO+qE,iBAAiBR,EAAmB,CACvC,OAAU,CACNvqD,IAAKgrD,4BAA4Bl5D,EAAKutB,KAE1C,MAAS,CAAEjuB,MAAO8rB,EAAMnf,MAE5BwsD,EAAkBE,GAAKvtC,EAAMutC,GACtBF,EAGX,SAASH,EAAyBltC,EAAMwsC,EAAKjD,GACzC,SAASwE,EAAez+D,GACpB,OAAU,GAAPA,EACQ+9D,EAEA9D,IAAgBj6D,GAG/B,IAAIsF,EAAO43D,EAKX,SAASa,EAAkBn5D,GACvB,OAAG8rB,EAAM9nB,EAAE6yD,KAAO72D,GAAS,WAAaA,EAC7Bm5D,EAAkB9oC,OACnBvE,EAAMvnB,EAAEsyD,KAAO72D,GAAS,WAAaA,EACpCm5D,EAAkBp6D,YADtB,EAeX,OAtBAo6D,EAAkBvC,cAAgB9qC,EAAM+qC,GACxCn2D,EAAKsD,EAAEoxD,iBAAiByE,GACxBn5D,EAAK6D,EAAE6wD,iBAAiByE,GAUxBjrE,OAAO+qE,iBAAiBR,EAAmB,CACvC,OAAU,CACNvqD,IAAKgrD,4BAA4Bl5D,EAAKsD,IAE1C,OAAU,CACN4K,IAAKgrD,4BAA4Bl5D,EAAK6D,IAE1C,MAAS,CAAEvE,MAAO8rB,EAAMnf,MAE5BwsD,EAAkBE,GAAKvtC,EAAMutC,GACtBF,EAGX,SAASN,EAAqB/sC,EAAMwsC,EAAKjD,GACrC,IAAI30D,EAAO43D,EAAKr4C,GAChB,SAAS45C,EAAez+D,GACpB,OAAU,GAAPA,EACQ+9D,EAEA9D,IAAgBj6D,GAK/B,SAAS+9D,EAAkB/9D,GACvB,GAAW,UAARA,GAA2B,UAARA,GAA2B,SAARA,GAA0B,SAARA,GAA0B,sBAARA,GAAuC,IAARA,EACxG,OAAO+9D,EAAkB3mE,KAyBjC,OA7BAkO,EAAK00D,iBAAiByE,GAOtBjrE,OAAO+qE,iBAAiBR,EAAmB,CACvC,KAAQ,CACJvqD,IAAK,WAID,OAHGlO,EAAKyD,GACJzD,EAAKK,WAEFL,IAGf,MAAS,CACLkO,IAAK,WAID,OAHGlO,EAAKyD,GACJzD,EAAKK,WAEFL,IAGf,MAAS,CAAEV,MAAO8rB,EAAMnf,IACxB,GAAM,CAAE3M,MAAO8rB,EAAM+qC,IACrB,cAAiB,CAAE72D,MAAO8rB,EAAM+qC,IAChC,GAAM,CAAE72D,MAAO8rB,EAAMutC,MAElBF,EAGX,OAAO,SAASniD,EAAOshD,EAAKjD,GACxB,IAAI6D,EACJ,SAASqB,EAAmBv6D,GACxB,GAAoB,kBAAVA,EACN,OAAOk5D,EAAWl5D,EAAM,GAExB,IAAI/I,EAAI,EAAGkE,EAAM+9D,EAAWliE,OAC5B,MAAMC,EAAEkE,EAAI,CACR,GAAG+9D,EAAWjiE,GAAGmiE,QAAUp5D,EACvB,OAAOk5D,EAAWjiE,GAEtBA,GAAG,GAOf,OAHAsjE,EAAmBlF,cAAgBA,EACnC6D,EAAab,EAAgBrhD,EAAQshD,EAAMiC,GAC3CA,EAAmBjB,cAAgBJ,EAAWliE,OACvCujE,GA5jBgB,GAgkB3B7kB,wBAA2B,WAC9B,OAAO,SAAS9yB,GACT,IAAI43C,EAAYC,EAChB,SAASC,KAeT,OAbA9rE,OAAOgiE,eAAe8J,EAAoB,aAAc,CACpD9rD,IAAK,WACDgU,EAAKwb,aAAar9B,WAClB,IAAI45D,EAAc/3C,EAAKwb,aAAa1H,YAAYh4B,EAOhD,OANGi8D,IAAgBH,IACf53C,EAAKwb,aAAa1H,YAAYh4B,EAAI87D,EAClCC,EAAc,IAAItrE,OAAOwrE,GAEzBF,EAAYz6D,MAAQ26D,GAA4B,IAAIxrE,OAAOwrE,IAExDF,KAGRC,GAlBe,GAqB1B5lB,yBAA4B,WAC5B,SAASwc,EAAQrxD,EAAKogB,GAClB,IAEI+gB,EAFAw5B,EAAa,IAAIx4D,OAWrB,GAVAw4D,EAAWh4D,QAKPw+B,EAAej0C,KAAKgoC,MAAMoX,eAAeC,MAI7CpL,EAAapd,cAAc42C,GACxBztE,KAAKgoC,MAAM4Q,WAAa54C,KAAKgoC,MAAM4Q,UAAU/uC,OAAO,CACnD,IAAIC,EAAGkE,EAAMhO,KAAKgoC,MAAM4Q,UAAU/uC,OAClC,IAAIC,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACb9J,KAAKgoC,MAAM4Q,UAAU9uC,GAAGs1C,eAAeC,MAAMxoB,cAAc42C,GAE/D,OAAOA,EAAW/yD,kBAAkB5H,EAAI,GAAGA,EAAI,GAAGA,EAAI,IAAI,GAE9D,OAAO26D,EAAW/yD,kBAAkB5H,EAAI,GAAGA,EAAI,GAAGA,EAAI,IAAI,GAE9D,SAASsxD,EAAUtxD,EAAKogB,GACpB,IAEI+gB,EAFAw5B,EAAa,IAAIx4D,OAWrB,GAVAw4D,EAAWh4D,QAKPw+B,EAAej0C,KAAKgoC,MAAMoX,eAAeC,MAI7CpL,EAAapd,cAAc42C,GACxBztE,KAAKgoC,MAAM4Q,WAAa54C,KAAKgoC,MAAM4Q,UAAU/uC,OAAO,CACnD,IAAIC,EAAGkE,EAAMhO,KAAKgoC,MAAM4Q,UAAU/uC,OAClC,IAAIC,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACb9J,KAAKgoC,MAAM4Q,UAAU9uC,GAAGs1C,eAAeC,MAAMxoB,cAAc42C,GAE/D,OAAOA,EAAWjzD,aAAa1H,GAEnC,OAAO26D,EAAWjzD,aAAa1H,GAEnC,SAASuxD,EAASvxD,GACd,IAAI26D,EAAa,IAAIx4D,OAGrB,GAFAw4D,EAAWh4D,QACXzV,KAAKgoC,MAAMoX,eAAeC,MAAMxoB,cAAc42C,GAC3CztE,KAAKgoC,MAAM4Q,WAAa54C,KAAKgoC,MAAM4Q,UAAU/uC,OAAO,CACnD,IAAIC,EAAGkE,EAAMhO,KAAKgoC,MAAM4Q,UAAU/uC,OAClC,IAAIC,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACb9J,KAAKgoC,MAAM4Q,UAAU9uC,GAAGs1C,eAAeC,MAAMxoB,cAAc42C,GAE/D,OAAOA,EAAWjzD,aAAa1H,GAEnC,OAAO26D,EAAWjzD,aAAa1H,GAGnC,SAAS46D,IACL,MAAO,CAAC,EAAE,EAAE,EAAE,GAIlB,OAAO,SAASj4C,GAEZ,IAAI42C,EAEJ,SAASsB,EAAuB/iC,GAC5B2iC,EAAmB7wD,KAAO,IAAIkxD,qBAAqBhjC,EAAanV,GAEpE,SAASo4C,EAA0BC,GAC/BP,EAAmBjK,OAASwK,EAGhC,SAASP,EAAmBpoE,GACxB,OAAOA,GACH,IAAK,0BACL,IAAK,WACL,KAAK,EACD,OAAOooE,EAAmBplB,eAC9B,KAAK,EACL,KAAK,EACL,IAAK,YACL,IAAK,YACL,IAAK,uBACD,OAAOkkB,EACX,KAAK,EACL,IAAK,qBACL,IAAK,UACL,IAAK,UACD,OAAOkB,EAAmBjK,QAGtCiK,EAAmBpJ,QAAUA,EAC7BoJ,EAAmBnJ,UAAYA,EAC/BmJ,EAAmBjJ,OAASH,EAC5BoJ,EAAmBlJ,SAAWA,EAC9BkJ,EAAmBG,YAAcA,EACjCH,EAAmBxsB,iBAAmBtrB,EAAKsrB,iBAAiBtuC,KAAKgjB,GACjE83C,EAAmBvlC,MAAQvS,EAC3B42C,EAAqB0B,6BAA6Bt4C,EAAK2pB,eAAeC,OACtE,IAAI2uB,EAAwBprD,cAAcypD,EAAoB,eAyC9D,OAxCA5qE,OAAO+qE,iBAAiBe,EAAmB,CACvCjG,UAAW,CACP7lD,IAAK,WACD,OAAOgU,EAAKmjB,UAAU/uC,SAG9BsjB,OAAQ,CACJ1L,IAAK,WACD,OAAOgU,EAAKmjB,UAAU,GAAG8O,iBAGjC8c,SAAU5hD,cAAcypD,EAAoB,YAC5C51D,MAAOmM,cAAcypD,EAAoB,SACzCv9D,SAAU8T,cAAcypD,EAAoB,YAC5C7d,QAAS5rC,cAAcypD,EAAoB,WAC3C5H,YAAauJ,EACbC,aAAcD,EACdv2D,UAAW,CACPgK,IAAK,WACD,OAAO4qD,IAGf9rE,OAAQ,CACJkhB,IAAK,WACD,OAAOgU,EAAK6qB,cAKxBitB,EAAmBW,UAAYz4C,EAAKp0B,KAAKk1B,GACzCg3C,EAAmBp9C,MAAQsF,EAAKp0B,KAAK4wB,IACrCs7C,EAAmB1iE,OAAS4qB,EAAKp0B,KAAKsoB,MACtC4jD,EAAmB/oC,OAA0B,IAAjB/O,EAAKp0B,KAAKkW,GAAWke,EAAKp0B,KAAKyP,EAAI,IAC/Dy8D,EAAmBpxD,MAAyB,IAAjBsZ,EAAKp0B,KAAKkW,GAAWke,EAAKp0B,KAAK6qB,EAAI,IAC9DqhD,EAAmB3J,QAAUnuC,EAAKp0B,KAAKk2C,GAAG9hB,EAAKryB,KAAKsyB,WAAWuC,UAC/Ds1C,EAAmB1J,SAAWpuC,EAAKp0B,KAAKwiC,GAAGpO,EAAKryB,KAAKsyB,WAAWuC,UAChEs1C,EAAmBtB,MAAQx2C,EAAKp0B,KAAKme,GAErC+tD,EAAmB3lB,sBAAwB+lB,EAC3CJ,EAAmBvlB,yBAA2B6lB,EACvCN,GA7IgB,GAiJ3BrlB,wBAA2B,WAC3B,OAAO,SAAS9kD,GACZ,SAASmqE,EAAmBpoE,GACxB,IAAI2E,EAAI,EAAGkE,EAAM5K,EAAKylB,OAAOhf,OAC7B,MAAQC,EAAIkE,EAAK,CACb,GAAI5K,EAAKylB,OAAO/e,GAAG0V,KAAOra,GAAQ/B,EAAKylB,OAAO/e,GAAGmoB,MAAQ9sB,EACrD,OAAO/B,EAAKL,SAAS+G,GAAG49C,eAE5B59C,GAAK,EAET,OAAO,KAYX,OATArI,OAAOgiE,eAAe8J,EAAoB,QAAS,CAAE16D,MAAOzP,EAAK/B,KAAKme,KACtE+tD,EAAmB51B,MAAQ41B,EAC3BA,EAAmBY,YAAc,EACjCZ,EAAmB/oC,OAASphC,EAAK/B,KAAKyP,GAAK1N,EAAKsyB,WAAWikB,SAAS7oC,EACpEy8D,EAAmBpxD,MAAQ/Y,EAAK/B,KAAK6qB,GAAK9oB,EAAKsyB,WAAWikB,SAASztB,EACnEqhD,EAAmBY,YAAc,EACjCZ,EAAmB7J,cAAgB,EAAItgE,EAAKsyB,WAAWuC,UACvDs1C,EAAmB5J,iBAAmB,EACtC4J,EAAmBa,UAAYhrE,EAAKylB,OAAOhf,OACpC0jE,GAtBe,GAyB1BQ,6BAAgC,WAChC,OAAO,SAASt2D,GACZ,SAAS42D,EAAclpE,GACnB,OAAOA,GACH,IAAK,QACL,IAAK,QACL,IAAK,aACL,KAAK,EACD,OAAOkpE,EAAc53D,MACzB,IAAK,WACL,IAAK,WACL,IAAK,gBACL,IAAK,gBACL,KAAK,GACD,OAAO43D,EAAc7J,SACzB,IAAK,gBACD,OAAO6J,EAAcC,UACzB,IAAK,gBACD,OAAOD,EAAcE,UACzB,IAAK,WACL,IAAK,WACL,IAAK,gBACL,KAAK,EACD,OAAOF,EAAcv/D,SACzB,IAAK,kBACD,OAAOu/D,EAAcG,UACzB,IAAK,kBACD,OAAOH,EAAcI,UACzB,IAAK,kBACD,OAAOJ,EAAcK,UACzB,IAAK,cACL,IAAK,cACL,IAAK,eACL,IAAK,mBACL,KAAK,EACD,OAAOL,EAAc5J,YACzB,IAAK,UACL,IAAK,UACL,KAAK,GACD,OAAO4J,EAAc7f,SAuBjC,GAnBA/sD,OAAOgiE,eAAe4K,EAAe,WAAY,CAC7C5sD,IAAKgrD,4BAA4Bh1D,EAAUxG,GAAKwG,EAAUwf,MAG9Dx1B,OAAOgiE,eAAe4K,EAAe,YAAa,CAC9C5sD,IAAKgrD,4BAA4Bh1D,EAAUwf,IAAMxf,EAAUxG,KAG/DxP,OAAOgiE,eAAe4K,EAAe,YAAa,CAC9C5sD,IAAKgrD,4BAA4Bh1D,EAAU0f,MAG/C11B,OAAOgiE,eAAe4K,EAAe,YAAa,CAC9C5sD,IAAKgrD,4BAA4Bh1D,EAAUyf,MAE/Cz1B,OAAOgiE,eAAe4K,EAAe,QAAS,CAC1C5sD,IAAKgrD,4BAA4Bh1D,EAAU1G,KAG5C0G,EAAUpG,EACT,IAAIs9D,EAAoBlC,4BAA4Bh1D,EAAUpG,GA4ClE,OA1CA5P,OAAOgiE,eAAe4K,EAAe,WAAY,CAC7C5sD,IAAK,WACD,OAAGhK,EAAUpG,EACFs9D,IAEA,CAACl3D,EAAU4f,GAAGrmB,EAAGyG,EAAU6f,GAAGtmB,EAAGyG,EAAU8f,GAAK9f,EAAU8f,GAAGvmB,EAAI,MAKpFvP,OAAOgiE,eAAe4K,EAAe,YAAa,CAC9C5sD,IAAKgrD,4BAA4Bh1D,EAAU4f,MAG/C51B,OAAOgiE,eAAe4K,EAAe,YAAa,CAC9C5sD,IAAKgrD,4BAA4Bh1D,EAAU6f,MAG/C71B,OAAOgiE,eAAe4K,EAAe,YAAa,CAC9C5sD,IAAKgrD,4BAA4Bh1D,EAAU8f,MAG/C91B,OAAOgiE,eAAe4K,EAAe,cAAe,CAChD5sD,IAAKgrD,4BAA4Bh1D,EAAUb,KAG/CnV,OAAOgiE,eAAe4K,EAAe,UAAW,CAC5C5sD,IAAKgrD,4BAA4Bh1D,EAAUL,KAG/C3V,OAAOgiE,eAAe4K,EAAe,OAAQ,CACzC5sD,IAAKgrD,4BAA4Bh1D,EAAUsf,MAG/Ct1B,OAAOgiE,eAAe4K,EAAe,WAAY,CAC7C5sD,IAAKgrD,4BAA4Bh1D,EAAUuf,MAG/Cv1B,OAAOgiE,eAAe4K,EAAe,cAAe,CAChD5sD,IAAKgrD,4BAA4Bh1D,EAAU2f,MAGxCi3C,GA3GoB,GA8G/BvgE,iBAAoB,WAEpB,SAASqrC,EAAoB/1C,GACzBpD,KAAK4uE,aAAar8D,KAAKnP,GAG3B,OAAO,WACH,SAASyrE,EAAqB1pE,GAC1B,IAAI2E,EAAI,EAAGkE,EAAMhO,KAAK4uE,aAAa/kE,OACnC,MAAMC,EAAEkE,EAAI,CACR,GAAGhO,KAAK4uE,aAAa9kE,GAAGzI,MAAQrB,KAAK4uE,aAAa9kE,GAAGzI,KAAKme,KAAOra,EAI7D,OAHGnF,KAAK4uE,aAAa9kE,GAAG4wC,cAAgB16C,KAAK4uE,aAAa9kE,GAAGzI,KAAK43C,IAC9Dj5C,KAAK4uE,aAAa9kE,GAAG4wC,aAAa16C,KAAKy6C,cAEpCz6C,KAAK4uE,aAAa9kE,GAAGm+C,cAEhCn+C,GAAG,GAWX,OAPA+kE,EAAqBD,aAAe,GACpCC,EAAqBp0B,aAAe,EAEpCo0B,EAAqB11B,oBAAsBA,EAIpC01B,GA3BQ,GA8BnB/mB,2BAA8B,WAC9B,IAAIzoC,EAAK,CACL0oC,uBAAwBA,GAG5B,SAASA,EAAuBtyB,EAAMyyC,GAClC,GAAGzyC,EAAKmzB,eAAe,CAEnB,IAEI9+C,EAFA+7C,EAAiB,GACjBipB,EAAcr5C,EAAKp0B,KAAK0vD,GACrB/iD,EAAMynB,EAAKmzB,eAAe/C,eAAeh8C,OAChD,IAAIC,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACb+7C,EAAetzC,KAAKw8D,EAAqBD,EAAYhlE,GAAG2rB,EAAKmzB,eAAe/C,eAAe/7C,GAAGo+D,EAAczyC,IAGhH,OAAO,SAAStwB,GACZ,IAAI2oE,EAAUr4C,EAAKp0B,KAAK0vD,IAAM,GAAIjnD,EAAI,EAAGkE,EAAM8/D,EAAQjkE,OACvD,MAAMC,EAAEkE,EAAK,CACT,GAAG7I,IAAS2oE,EAAQhkE,GAAG0V,IAAMra,IAAS2oE,EAAQhkE,GAAGoiE,IAAM/mE,IAAS2oE,EAAQhkE,GAAG4/D,GACvE,OAAO7jB,EAAe/7C,GAE1BA,GAAK,KAMrB,SAASilE,EAAqB1tE,EAAK0B,EAAUmlE,EAAezyC,GACxD,IACI3rB,EADA+7C,EAAiB,GACd73C,EAAM3M,EAAK0vD,GAAGlnD,OACrB,IAAIC,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EACQ,IAAlBzI,EAAK0vD,GAAGjnD,GAAGyN,GACVsuC,EAAetzC,KAAKw8D,EAAqB1tE,EAAK0vD,GAAGjnD,GAAG/G,EAAS8iD,eAAe/7C,GAAG/G,EAAS8iD,eAAe/7C,GAAGo+D,cAAezyC,IAEzHowB,EAAetzC,KAAKy8D,EAAqBjsE,EAAS8iD,eAAe/7C,GAAGzI,EAAK0vD,GAAGjnD,GAAGyN,GAAIke,EAAMi3C,IAIjG,SAASA,EAAez+D,GACpB,OAAW,IAARA,EACOghE,EAEA/G,EAAcj6D,EAAI,GAIhC,IAAIghE,EAAiB,SAAS9pE,GAC1B,IAAI2oE,EAAUzsE,EAAK0vD,GAAIjnD,EAAI,EAAGkE,EAAM8/D,EAAQjkE,OAC5C,MAAMC,EAAEkE,EAAK,CACT,GAAG7I,IAAS2oE,EAAQhkE,GAAG0V,IAAMra,IAAS2oE,EAAQhkE,GAAGoiE,IAAM/mE,IAAS2oE,EAAQhkE,GAAG4/D,GACvE,OAAqB,IAAlBoE,EAAQhkE,GAAGyN,GACHsuC,EAAe/7C,GAEf+7C,EAAe/7C,KAG9BA,GAAK,EAET,OAAO+7C,EAAe,MAkB1B,OAfAopB,EAAe/G,cAAgBwE,EAEhB,uBAAZrrE,EAAK6qE,IACJzqE,OAAOgiE,eAAewL,EAAgB,QAAS,CAC3CxtD,IAAK,WACD,OAAOokC,EAAe,QAIlCpkD,OAAOgiE,eAAewL,EAAgB,gBAAiB,CACnDxtD,IAAK,WACD,OAAOpgB,EAAKkrE,MAGpB0C,EAAe1uE,OAAS0uE,EAAeC,QAAsB,IAAZ7tE,EAAK8tE,GAC/CF,EAGX,SAASD,EAAqBpgE,EAASlN,EAAM+zB,EAAMyyC,GAC/C,IAAIkH,EAAqB3C,4BAA4B79D,EAAQyC,GAC7D,SAAS26D,IACL,OAAY,KAATtqE,EACQ+zB,EAAKryB,KAAK6kD,cAAcr5C,EAAQyC,EAAEL,GAEtCo+D,IAOX,OAJGxgE,EAAQyC,EAAE42D,kBACTr5D,EAAQyC,EAAE42D,iBAAiBC,GAGxB8D,EAGX,OAAO3sD,EA/FsB,GAkG7BuuD,qBAAwB,WAE3B,SAASyB,EAAc3yD,EAAMrb,GAC5BrB,KAAKsvE,MAAQ5yD,EACb1c,KAAKuvE,MAAQluE,EAEdI,OAAOgiE,eAAe4L,EAAclrE,UAAW,WAAY,CACpDsd,IAAK,WAID,OAHGzhB,KAAKsvE,MAAM/7D,KAAKyD,GACfhX,KAAKsvE,MAAM/7D,KAAKK,WAEb5T,KAAKsvE,MAAM/7D,QAG7B9R,OAAOgiE,eAAe4L,EAAclrE,UAAW,cAAe,CACvDsd,IAAK,WAID,OAHGzhB,KAAKsvE,MAAMzrC,GAAG7sB,GACbhX,KAAKsvE,MAAMzrC,GAAGjwB,WAEO,IAAlB5T,KAAKsvE,MAAMzrC,GAAG7yB,KAIhC,IAAIw+D,EAAc,SAAS5kC,EAAanV,GACvC,IAGI3rB,EADA2lE,EAAmBrhE,iBAAiBw8B,EAAY2J,SAAS1qC,QACtDmE,EAAM48B,EAAY2J,SAAS1qC,OAClC,IAAIC,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EACxB2lE,EAAiB3lE,GAAK,IAAIulE,EAAczkC,EAAY2J,SAASzqC,GAAI8gC,EAAYphB,gBAAgB1f,IAG9F,IAAI4lE,EAAe,SAASvqE,GAC3B2E,EAAI,EACD,MAAMA,EAAEkE,EAAI,CACR,GAAG48B,EAAYphB,gBAAgB1f,GAAG0V,KAAOra,EACrC,OAAOsqE,EAAiB3lE,GAE5BA,GAAK,IAGb,OAAO4lE,GAER,OAAOF,EA3CmB,GA8CvB/C,4BAA+B,WAE/B,IAAIkD,EAA6B,CAACt+C,GAAG,EAAGrgB,EAAE,EAAGukB,KAAM,GAC/Cq6C,EAA+B,CAACv+C,GAAG,CAAC,EAAE,EAAE,GAAIrgB,EAAE,CAAC,EAAE,EAAE,GAAIukB,KAAM,GAEjE,SAASs6C,EAAiBC,EAAiB7M,EAAUvhE,GACjDD,OAAOgiE,eAAeqM,EAAiB,WAAY,CAC/CruD,IAAK,WACD,OAAOwhD,EAAS0C,kBAAkB1C,EAAS7/D,KAAKq3C,iBAGxDq1B,EAAgB5K,QAAUjC,EAAStxC,UAAYsxC,EAAStxC,UAAU9nB,OAAS,EAC3EimE,EAAgBhzD,IAAM,SAASgc,GAC3B,GAAKg3C,EAAgB5K,QAEd,CACH,IAAIryD,EAAQ,GAERA,EADA,MAAOowD,EAAStxC,UAAUmH,EAAI,GACtBmqC,EAAStxC,UAAUmH,EAAI,GAAG/nB,EAC3B,MAAOkyD,EAAStxC,UAAUmH,EAAI,GAC7BmqC,EAAStxC,UAAUmH,EAAI,GAAGhiB,EAE1BmsD,EAAStxC,UAAUmH,EAAI,GAAG/nB,EAEtC,IAAIg/D,EAAqB,mBAATruE,EAA4B,IAAII,OAAO+Q,GAASpR,OAAOuuE,OAAO,GAAIn9D,GAElF,OADAk9D,EAAU78C,KAAO+vC,EAAStxC,UAAUmH,EAAI,GAAGvnB,EAAI0xD,EAASxtC,KAAKryB,KAAKsyB,WAAWuC,UACtE83C,EAZP,OAAO,GAefD,EAAgBtM,YAAcP,EAAS/qC,eACvC43C,EAAgBG,YAAchN,EAAS4E,eACvCiI,EAAgBlL,eAAiB3B,EAAS0C,kBAC1CmK,EAAgB5H,cAAgBjF,EAASiF,cAG7C,SAASgI,EAAgCjN,GACjCA,GAAc,OAAQA,IACtBA,EAAW0M,GAEf,IAAIp6C,EAAO,EAAI0tC,EAAS1tC,KACpBtnB,EAAMg1D,EAAS5xC,GAAKkE,EACpBu6C,EAAkB,IAAIhuE,OAAOmM,GAIjC,OAHA6hE,EAAgBj9D,MAAQ5E,EACxB4hE,EAAiBC,EAAiB7M,EAAU,kBAErC,WAUH,OATIA,EAASjsD,GACTisD,EAASrvD,WAEb3F,EAAMg1D,EAASjyD,EAAIukB,EAChBu6C,EAAgBj9D,QAAU5E,IACzB6hE,EAAkB,IAAIhuE,OAAOmM,GAC7B6hE,EAAgBj9D,MAAQ5E,EACxB4hE,EAAiBC,EAAiB7M,EAAU,mBAEzC6M,GAIf,SAASK,EAAkClN,GACnCA,GAAc,OAAQA,IACtBA,EAAW2M,GAEf,IAAIr6C,EAAO,EAAI0tC,EAAS1tC,KACpBvnB,EAAMi1D,EAAS5xC,GAAGxnB,OAClBimE,EAAkBn9D,iBAAiB,UAAW3E,GAC9CoiE,EAAWz9D,iBAAiB,UAAW3E,GAI3C,OAHA8hE,EAAgBj9D,MAAQu9D,EACxBP,EAAiBC,EAAiB7M,EAAU,oBAErC,WACCA,EAASjsD,GACTisD,EAASrvD,WAEb,IAAK,IAAI9J,EAAI,EAAGA,EAAIkE,EAAKlE,GAAK,EAC1BgmE,EAAgBhmE,GAAKsmE,EAAStmE,GAAKm5D,EAASjyD,EAAElH,GAAKyrB,EAEvD,OAAOu6C,GAKf,SAASO,IACL,OAAOV,EAGX,OAAO,SAAS1M,GACZ,OAAIA,EAE6B,mBAAtBA,EAAS7xC,SACT8+C,EAAgCjN,GAEhCkN,EAAkClN,GAJlCoN,GAxFe,GA4IlC,SAASC,aAAajvE,EAAKo0B,EAAMpzB,GAC7BrC,KAAKqR,EAAIuf,gBAAgB8F,QAAQjB,EAAKp0B,EAAK2P,EAAE,EAAE,EAAE3O,GAErD,SAASkuE,YAAYlvE,EAAKo0B,EAAMpzB,GAC5BrC,KAAKqR,EAAIuf,gBAAgB8F,QAAQjB,EAAKp0B,EAAK2P,EAAE,EAAE,EAAE3O,GAErD,SAASmuE,YAAYnvE,EAAKo0B,EAAMpzB,GAC5BrC,KAAKqR,EAAIuf,gBAAgB8F,QAAQjB,EAAKp0B,EAAK2P,EAAE,EAAE,EAAE3O,GAErD,SAASouE,YAAYpvE,EAAKo0B,EAAMpzB,GAC5BrC,KAAKqR,EAAIuf,gBAAgB8F,QAAQjB,EAAKp0B,EAAK2P,EAAE,EAAE,EAAE3O,GAErD,SAASquE,iBAAiBrvE,EAAKo0B,EAAMpzB,GACjCrC,KAAKqR,EAAIuf,gBAAgB8F,QAAQjB,EAAKp0B,EAAK2P,EAAE,EAAE,EAAE3O,GAErD,SAASsuE,gBAAgBtvE,EAAKo0B,EAAMpzB,GAChCrC,KAAKqR,EAAIuf,gBAAgB8F,QAAQjB,EAAKp0B,EAAK2P,EAAE,EAAE,EAAE3O,GAErD,SAASuuE,eAAevvE,EAAKo0B,EAAMpzB,GAC/BrC,KAAKqR,EAAIuf,gBAAgB8F,QAAQjB,EAAKp0B,EAAK2P,EAAE,EAAE,EAAE3O,GAErD,SAASwuE,gBACL7wE,KAAKqR,EAAI,GAEb,SAASw3C,kBACT,SAASA,eAAexnD,EAAKuN,GACzB,IAAIk/D,EAAUzsE,EAAK0vD,IAAM,GACzB/wD,KAAK6lD,eAAiB,GACtB,IAAI/7C,EACAgnE,EADE9iE,EAAM8/D,EAAQjkE,OAEpB,IAAIC,EAAE,EAAEA,EAAEkE,EAAIlE,IACVgnE,EAAa,IAAIC,YAAYjD,EAAQhkE,GAAG8E,GACxC5O,KAAK6lD,eAAetzC,KAAKu+D,GAIjC,SAASC,YAAY1vE,EAAKuN,GACtB5O,KAAK25B,KAAKt4B,EAAKuN,IAhFlB,WAEG,IAAIoiE,EAA8B,WAE9B,SAASC,EAAc9gD,EAAM+gD,GAIzB,OAHAlxE,KAAK6lE,UAAY11C,EAAM,EACvBnwB,KAAK8lE,UAAYoL,EACjBlxE,KAAKgR,EAAIhR,KAAK4T,WAAa5T,KAAKu1B,KACzBv1B,KAAKgR,EAGhB,OAAO,SAAoCykB,EAAKp0B,GAC5CrB,KAAKqxB,GAAK,EACVrxB,KAAKoD,KAAOqyB,EAAKryB,KACjBpD,KAAKy1B,KAAOA,EACZz1B,KAAKu1B,KAAO,IACZv1B,KAAKoxB,SAAW,eAChBpxB,KAAK8lE,UAAYzkE,EAAKmsC,WACtBxtC,KAAK+lE,cAAgB,IACrB/lE,KAAK4oE,UAAY,CAAC,EAAE,EAAE,GACtB5oE,KAAKgX,GAAI,EACThX,KAAK+Z,GAAI,EACT/Z,KAAK4T,SAAWksD,kBAAkBkD,mBAAmBvwD,KAAKzS,KAA1C8/D,CAAgDrqC,EAAKp0B,EAAKrB,MAC1EA,KAAKstC,QAAU2jC,EACfjxE,KAAK2lE,kBAAoB+B,kBAAkB/B,kBACxC3lE,KAAKg2B,GACJh2B,KAAKk4B,eAAiBwvC,kBAAkBxvC,eAAezlB,KAAKzS,MAE5DA,KAAKk4B,eAAiBwvC,kBAAkBM,qBAAqBv1D,KAAKzS,MAEtEA,KAAKioE,iBAAmBP,kBAAkBO,kBA5BjB,GAgChCkJ,EAAsBnoC,iBAAiBC,oBAC3CD,iBAAiBC,oBAAsB,SAASxT,EAAMp0B,EAAKyR,GACvD,OAAc,IAAXzR,EAAKkQ,EACG,IAAIy/D,EAA2Bv7C,EAAMp0B,EAAKyR,GAE1Cq+D,EAAoB17C,EAAKp0B,EAAKyR,KAvC9C,GAmFAwP,gBAAgB,CAACjP,0BAA2B09D,aAE5CA,YAAY5sE,UAAUyP,SAAWm9D,YAAY5sE,UAAUuP,yBAEvDq9D,YAAY5sE,UAAUw1B,KAAO,SAASt4B,EAAKuN,GACvC5O,KAAKqB,KAAOA,EACZrB,KAAK6lD,eAAiB,GACtB7lD,KAAK6T,6BAA6BjF,GAClC,IAAI9E,EACAsnE,EADGpjE,EAAMhO,KAAKqB,KAAK0vD,GAAGlnD,OACjBikE,EAAU9tE,KAAKqB,KAAK0vD,GAC7B,IAAIjnD,EAAE,EAAEA,EAAEkE,EAAIlE,GAAG,EAAE,CAEf,OADAsnE,EAAM,KACCtD,EAAQhkE,GAAGyN,IACd,KAAK,EACD65D,EAAM,IAAId,aAAaxC,EAAQhkE,GAAG8E,EAAQ5O,MAC1C,MACJ,KAAK,EACDoxE,EAAM,IAAIb,YAAYzC,EAAQhkE,GAAG8E,EAAQ5O,MACzC,MACJ,KAAK,EACDoxE,EAAM,IAAIZ,YAAY1C,EAAQhkE,GAAG8E,EAAQ5O,MACzC,MACJ,KAAK,EACDoxE,EAAM,IAAIX,YAAY3C,EAAQhkE,GAAG8E,EAAQ5O,MACzC,MACJ,KAAK,EACL,KAAK,EACDoxE,EAAM,IAAIR,eAAe9C,EAAQhkE,GAAG8E,EAAQ5O,MAC5C,MACJ,KAAK,GACDoxE,EAAM,IAAIV,iBAAiB5C,EAAQhkE,GAAG8E,EAAQ5O,MAC9C,MACJ,KAAK,GACDoxE,EAAM,IAAIT,gBAAgB7C,EAAQhkE,GAAG8E,EAAQ5O,MAC7C,MACJ,KAAK,EACDoxE,EAAM,IAAIvoB,eAAeilB,EAAQhkE,GAAG8E,EAAQ5O,MAC5C,MAEJ,QACIoxE,EAAM,IAAIP,cAAc/C,EAAQhkE,GAAG8E,EAAQ5O,MAC3C,MAELoxE,GACCpxE,KAAK6lD,eAAetzC,KAAK6+D,KAKrC,IAAI7uE,OAAS,GAETq3D,WAAY,EAEhB,SAASyX,gBAAiBjiD,GACtBhjB,aAAegjB,EAGnB,SAASosC,oBACc,IAAfC,WACAjC,iBAAiBgC,iBAAiB/6D,cAAeg7D,WAAY34D,UAE7D02D,iBAAiBgC,mBAIzB,SAAS8V,qBAAqB5iE,GAC1BpC,gBAAkBoC,EAGtB,SAASisD,cAAcC,GAInB,OAHmB,IAAfa,aACAb,EAAOn6D,cAAgBupB,KAAKC,MAAMxpB,gBAE/B+4D,iBAAiBmB,cAAcC,GAG1C,SAAS2W,WAAW1+D,GAChB,GAAqB,kBAAVA,EACP,OAAQA,GACJ,IAAK,OACDxE,qBAAuB,IACvB,MACJ,IAAK,SACDA,qBAAuB,GACvB,MACJ,IAAK,MACDA,qBAAuB,GACvB,WAEAmjE,MAAM3+D,IAAUA,EAAQ,IAChCxE,qBAAuBwE,GAGvBpE,cADAJ,sBAAwB,KAOhC,SAASojE,YACL,MAA4B,qBAAd/kE,UAGlB,SAASglE,cAAchwE,EAAMiwE,GACZ,gBAATjwE,IACA6K,kBAAoBolE,GAI5B,SAASC,WAAWzsE,GAChB,OAAQA,GACJ,IAAK,kBACD,OAAOyrB,gBACX,IAAK,uBACD,OAAOiJ,qBACX,IAAK,SACD,OAAO5kB,QA4BnB,SAAS48D,aACuB,aAAxB9oE,SAASu+B,aACT1gC,cAAckrE,yBACdtW,oBAIR,SAASuW,iBAAiBC,GAEtB,IADA,IAAIC,EAAOC,YAAYznD,MAAM,KACpB3gB,EAAI,EAAGA,EAAImoE,EAAKpoE,OAAQC,IAAK,CAClC,IAAIqoE,EAAOF,EAAKnoE,GAAG2gB,MAAM,KACzB,GAAI2nD,mBAAmBD,EAAK,KAAOH,EAC/B,OAAOI,mBAAmBD,EAAK,KApC3C5vE,OAAOE,KAAO+2D,iBAAiB/2D,KAC/BF,OAAO84D,MAAQ7B,iBAAiB6B,MAChC94D,OAAO8uE,gBAAkBA,gBACzB9uE,OAAOg5D,YAAc/B,iBAAiB+B,YACtCh5D,OAAOu4D,SAAWtB,iBAAiBsB,SACnCv4D,OAAOw4D,aAAevB,iBAAiBuB,aACvCx4D,OAAOI,KAAO62D,iBAAiB72D,KAC/BJ,OAAOi5D,iBAAmBA,iBAC1Bj5D,OAAO43D,kBAAoBX,iBAAiBW,kBAC5C53D,OAAOo4D,cAAgBA,cACvBp4D,OAAO+uE,qBAAuBA,qBAC9B/uE,OAAOu5D,OAAStC,iBAAiBsC,OAEjCv5D,OAAOG,YAAc82D,iBAAiB92D,YACtCH,OAAO0jC,QAAUuzB,iBAAiBvzB,QAClC1jC,OAAOgvE,WAAaA,WACpBhvE,OAAOkvE,UAAYA,UACnBlvE,OAAOmvE,cAAgBA,cACvBnvE,OAAOw5D,OAASvC,iBAAiBuC,OACjCx5D,OAAOy5D,SAAWxC,iBAAiBwC,SACnCz5D,OAAOg4D,wBAA0Bf,iBAAiBe,wBAClDh4D,OAAO8vE,aAAeT,WACtBrvE,OAAO+vE,QAAU,QAkBjB,IAAI7W,WAAa,mBACbh7D,cAAgB,sBAChBqC,SAAW,GACf,GAAI24D,WAAY,CACZ,IAAI8W,QAAUxpE,SAAS6yD,qBAAqB,UACxCzrC,MAAQoiD,QAAQ1oE,OAAS,EACzB2oE,SAAWD,QAAQpiD,QAAU,CAC7Bb,IAAK,IAEL4iD,YAAcM,SAASljD,IAAIhnB,QAAQ,aAAc,IACrDxF,SAAWivE,iBAAiB,YAEhC,IAAID,wBAA0BnrE,YAAYkrE,WAAY,KAEtD,OAAOtvE,W,2DCtscP,IAAIkwE,EAAc,EAAQ,QACtBhrE,EAAS,EAAQ,QACjBirE,EAAW,EAAQ,QACnBC,EAAW,EAAQ,QACnBC,EAAM,EAAQ,QACdC,EAAU,EAAQ,QAClBC,EAAoB,EAAQ,QAC5BC,EAAc,EAAQ,QACtBC,EAAQ,EAAQ,QAChBphC,EAAS,EAAQ,QACjBqhC,EAAsB,EAAQ,QAA8C7hE,EAC5E0R,EAA2B,EAAQ,QAAmD1R,EACtFqyD,EAAiB,EAAQ,QAAuCryD,EAChE3I,EAAO,EAAQ,QAA4BA,KAE3CyqE,EAAS,SACTC,EAAe1rE,EAAOyrE,GACtBE,EAAkBD,EAAahvE,UAG/BkvE,EAAiBR,EAAQjhC,EAAOwhC,KAAqBF,EAIrDI,EAAW,SAAUC,GACvB,IACInY,EAAOoY,EAAOC,EAAOC,EAASr3D,EAAQxS,EAAQsmB,EAAOwjD,EADrDvpD,EAAK2oD,EAAYQ,GAAU,GAE/B,GAAiB,iBAANnpD,GAAkBA,EAAGvgB,OAAS,EAGvC,GAFAugB,EAAK3hB,EAAK2hB,GACVgxC,EAAQhxC,EAAG3L,WAAW,GACR,KAAV28C,GAA0B,KAAVA,GAElB,GADAoY,EAAQppD,EAAG3L,WAAW,GACR,KAAV+0D,GAA0B,MAAVA,EAAe,OAAOI,SACrC,GAAc,KAAVxY,EAAc,CACvB,OAAQhxC,EAAG3L,WAAW,IACpB,KAAK,GAAI,KAAK,GAAIg1D,EAAQ,EAAGC,EAAU,GAAI,MAC3C,KAAK,GAAI,KAAK,IAAKD,EAAQ,EAAGC,EAAU,GAAI,MAC5C,QAAS,OAAQtpD,EAInB,IAFA/N,EAAS+N,EAAGhmB,MAAM,GAClByF,EAASwS,EAAOxS,OACXsmB,EAAQ,EAAGA,EAAQtmB,EAAQsmB,IAI9B,GAHAwjD,EAAOt3D,EAAOoC,WAAW0R,GAGrBwjD,EAAO,IAAMA,EAAOD,EAAS,OAAOE,IACxC,OAAO/W,SAASxgD,EAAQo3D,GAE5B,OAAQrpD,GAKZ,GAAIsoD,EAASQ,GAASC,EAAa,UAAYA,EAAa,QAAUA,EAAa,SAAU,CAS3F,IARA,IAcqBr2D,EAdjB+2D,EAAgB,SAAgBhhE,GAClC,IAAIuX,EAAK9lB,UAAUuF,OAAS,EAAI,EAAIgJ,EAChCjH,EAAQ5L,KACZ,OAAO4L,aAAiBioE,IAElBR,EAAiBL,GAAM,WAAcI,EAAgBU,QAAQzvE,KAAKuH,MAAainE,EAAQjnE,IAAUsnE,GACjGJ,EAAkB,IAAIK,EAAaG,EAASlpD,IAAMxe,EAAOioE,GAAiBP,EAASlpD,IAElF6S,EAAOw1C,EAAcQ,EAAoBE,GAAgB,6KAMhE1oD,MAAM,KAAM1T,EAAI,EAAQkmB,EAAKpzB,OAASkN,EAAGA,IACrC67D,EAAIO,EAAcr2D,EAAMmgB,EAAKlmB,MAAQ67D,EAAIiB,EAAe/2D,IAC1D2mD,EAAeoQ,EAAe/2D,EAAKgG,EAAyBqwD,EAAcr2D,IAG9E+2D,EAAc1vE,UAAYivE,EAC1BA,EAAgBpnE,YAAc6nE,EAC9BlB,EAASlrE,EAAQyrE,EAAQW,K,sBC5E3B,YA4BA,SAASE,EAAeC,EAAOC,GAG7B,IADA,IAAIC,EAAK,EACApqE,EAAIkqE,EAAMnqE,OAAS,EAAGC,GAAK,EAAGA,IAAK,CAC1C,IAAIqqE,EAAOH,EAAMlqE,GACJ,MAATqqE,EACFH,EAAMthE,OAAO5I,EAAG,GACE,OAATqqE,GACTH,EAAMthE,OAAO5I,EAAG,GAChBoqE,KACSA,IACTF,EAAMthE,OAAO5I,EAAG,GAChBoqE,KAKJ,GAAID,EACF,KAAOC,IAAMA,EACXF,EAAMzxC,QAAQ,MAIlB,OAAOyxC,EAmJT,SAASI,EAAS/uE,GACI,kBAATA,IAAmBA,GAAc,IAE5C,IAGIyE,EAHAvB,EAAQ,EACRC,GAAO,EACP6rE,GAAe,EAGnB,IAAKvqE,EAAIzE,EAAKwE,OAAS,EAAGC,GAAK,IAAKA,EAClC,GAA2B,KAAvBzE,EAAKoZ,WAAW3U,IAGhB,IAAKuqE,EAAc,CACjB9rE,EAAQuB,EAAI,EACZ,YAEgB,IAATtB,IAGX6rE,GAAe,EACf7rE,EAAMsB,EAAI,GAId,OAAa,IAATtB,EAAmB,GAChBnD,EAAKjB,MAAMmE,EAAOC,GA8D3B,SAASk9C,EAAQ4uB,EAAIljE,GACjB,GAAIkjE,EAAG5uB,OAAQ,OAAO4uB,EAAG5uB,OAAOt0C,GAEhC,IADA,IAAImjE,EAAM,GACDzqE,EAAI,EAAGA,EAAIwqE,EAAGzqE,OAAQC,IACvBsH,EAAEkjE,EAAGxqE,GAAIA,EAAGwqE,IAAKC,EAAIhiE,KAAK+hE,EAAGxqE,IAErC,OAAOyqE,EA3OXxwE,EAAQ0B,QAAU,WAIhB,IAHA,IAAI+uE,EAAe,GACfC,GAAmB,EAEd3qE,EAAIxF,UAAUuF,OAAS,EAAGC,IAAM,IAAM2qE,EAAkB3qE,IAAK,CACpE,IAAIzE,EAAQyE,GAAK,EAAKxF,UAAUwF,GAAKX,EAAQ7D,MAG7C,GAAoB,kBAATD,EACT,MAAM,IAAIqvE,UAAU,6CACVrvE,IAIZmvE,EAAenvE,EAAO,IAAMmvE,EAC5BC,EAAsC,MAAnBpvE,EAAKupC,OAAO,IAWjC,OAJA4lC,EAAeT,EAAeruB,EAAO8uB,EAAa/pD,MAAM,MAAM,SAASpZ,GACrE,QAASA,MACNojE,GAAkB/jB,KAAK,MAEnB+jB,EAAmB,IAAM,IAAMD,GAAiB,KAK3DzwE,EAAQ89D,UAAY,SAASx8D,GAC3B,IAAIsvE,EAAa5wE,EAAQ4wE,WAAWtvE,GAChCuvE,EAAqC,MAArB/lC,EAAOxpC,GAAO,GAclC,OAXAA,EAAO0uE,EAAeruB,EAAOrgD,EAAKolB,MAAM,MAAM,SAASpZ,GACrD,QAASA,MACNsjE,GAAYjkB,KAAK,KAEjBrrD,GAASsvE,IACZtvE,EAAO,KAELA,GAAQuvE,IACVvvE,GAAQ,MAGFsvE,EAAa,IAAM,IAAMtvE,GAInCtB,EAAQ4wE,WAAa,SAAStvE,GAC5B,MAA0B,MAAnBA,EAAKupC,OAAO,IAIrB7qC,EAAQ2sD,KAAO,WACb,IAAItlC,EAAQzpB,MAAMwC,UAAUC,MAAMC,KAAKC,UAAW,GAClD,OAAOP,EAAQ89D,UAAUnc,EAAOt6B,GAAO,SAAS/Z,EAAG8e,GACjD,GAAiB,kBAAN9e,EACT,MAAM,IAAIqjE,UAAU,0CAEtB,OAAOrjE,KACNq/C,KAAK,OAMV3sD,EAAQ8wE,SAAW,SAASC,EAAM/iD,GAIhC,SAAStpB,EAAKqK,GAEZ,IADA,IAAIvK,EAAQ,EACLA,EAAQuK,EAAIjJ,OAAQtB,IACzB,GAAmB,KAAfuK,EAAIvK,GAAe,MAIzB,IADA,IAAIC,EAAMsK,EAAIjJ,OAAS,EAChBrB,GAAO,EAAGA,IACf,GAAiB,KAAbsK,EAAItK,GAAa,MAGvB,OAAID,EAAQC,EAAY,GACjBsK,EAAI1O,MAAMmE,EAAOC,EAAMD,EAAQ,GAfxCusE,EAAO/wE,EAAQ0B,QAAQqvE,GAAMjmC,OAAO,GACpC9c,EAAKhuB,EAAQ0B,QAAQssB,GAAI8c,OAAO,GAsBhC,IALA,IAAIkmC,EAAYtsE,EAAKqsE,EAAKrqD,MAAM,MAC5BuqD,EAAUvsE,EAAKspB,EAAGtH,MAAM,MAExB5gB,EAASa,KAAKiD,IAAIonE,EAAUlrE,OAAQmrE,EAAQnrE,QAC5CorE,EAAkBprE,EACbC,EAAI,EAAGA,EAAID,EAAQC,IAC1B,GAAIirE,EAAUjrE,KAAOkrE,EAAQlrE,GAAI,CAC/BmrE,EAAkBnrE,EAClB,MAIJ,IAAIorE,EAAc,GAClB,IAASprE,EAAImrE,EAAiBnrE,EAAIirE,EAAUlrE,OAAQC,IAClDorE,EAAY3iE,KAAK,MAKnB,OAFA2iE,EAAcA,EAAYzkD,OAAOukD,EAAQ5wE,MAAM6wE,IAExCC,EAAYxkB,KAAK,MAG1B3sD,EAAQoxE,IAAM,IACdpxE,EAAQqxE,UAAY,IAEpBrxE,EAAQsxE,QAAU,SAAUhwE,GAE1B,GADoB,kBAATA,IAAmBA,GAAc,IACxB,IAAhBA,EAAKwE,OAAc,MAAO,IAK9B,IAJA,IAAI8pE,EAAOtuE,EAAKoZ,WAAW,GACvB62D,EAAmB,KAAT3B,EACVnrE,GAAO,EACP6rE,GAAe,EACVvqE,EAAIzE,EAAKwE,OAAS,EAAGC,GAAK,IAAKA,EAEtC,GADA6pE,EAAOtuE,EAAKoZ,WAAW3U,GACV,KAAT6pE,GACA,IAAKU,EAAc,CACjB7rE,EAAMsB,EACN,YAIJuqE,GAAe,EAInB,OAAa,IAAT7rE,EAAmB8sE,EAAU,IAAM,IACnCA,GAAmB,IAAR9sE,EAGN,IAEFnD,EAAKjB,MAAM,EAAGoE,IAiCvBzE,EAAQqwE,SAAW,SAAU/uE,EAAMkwE,GACjC,IAAInkE,EAAIgjE,EAAS/uE,GAIjB,OAHIkwE,GAAOnkE,EAAEy9B,QAAQ,EAAI0mC,EAAI1rE,UAAY0rE,IACvCnkE,EAAIA,EAAEy9B,OAAO,EAAGz9B,EAAEvH,OAAS0rE,EAAI1rE,SAE1BuH,GAGTrN,EAAQyxE,QAAU,SAAUnwE,GACN,kBAATA,IAAmBA,GAAc,IAQ5C,IAPA,IAAIowE,GAAY,EACZC,EAAY,EACZltE,GAAO,EACP6rE,GAAe,EAGfsB,EAAc,EACT7rE,EAAIzE,EAAKwE,OAAS,EAAGC,GAAK,IAAKA,EAAG,CACzC,IAAI6pE,EAAOtuE,EAAKoZ,WAAW3U,GAC3B,GAAa,KAAT6pE,GASS,IAATnrE,IAGF6rE,GAAe,EACf7rE,EAAMsB,EAAI,GAEC,KAAT6pE,GAEkB,IAAd8B,EACFA,EAAW3rE,EACY,IAAhB6rE,IACPA,EAAc,IACK,IAAdF,IAGTE,GAAe,QArBb,IAAKtB,EAAc,CACjBqB,EAAY5rE,EAAI,EAChB,OAuBR,OAAkB,IAAd2rE,IAA4B,IAATjtE,GAEH,IAAhBmtE,GAEgB,IAAhBA,GAAqBF,IAAajtE,EAAM,GAAKitE,IAAaC,EAAY,EACjE,GAEFrwE,EAAKjB,MAAMqxE,EAAUjtE,IAa9B,IAAIqmC,EAA6B,MAApB,KAAKA,QAAQ,GACpB,SAAUpvB,EAAKlX,EAAOyF,GAAO,OAAOyR,EAAIovB,OAAOtmC,EAAOyF,IACtD,SAAUyR,EAAKlX,EAAOyF,GAEpB,OADIzF,EAAQ,IAAGA,EAAQkX,EAAI5V,OAAStB,GAC7BkX,EAAIovB,OAAOtmC,EAAOyF,M","file":"js/chunk-625c1d3a.7ee69995.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('dir',{staticClass:\"bibelord\",class:{ active: _vm.active }},[_c('Lottie',_vm._b({staticClass:\"lottie\"},'Lottie',{ animationData: _vm.animationData, active: _vm.active, delay: 1100, intro: [0,30], render: 'canvas', /*loop: 10, loopFrames: [0,30],*/ outro: [1483, 1500], l0: _vm.f0, l1: _vm.f1},false))],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"lottie\",staticClass:\"lottie\",staticStyle:{\"width\":\"100%\",\"height\":\"100%\"},attrs:{\"xmlns\":\"http://www.w3.org/1999/xhtml\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"lottie\" ref=\"lottie\" style=\"width: 100%; height: 100%;\" xmlns=\"http://www.w3.org/1999/xhtml\"></div>\n</template>\n<script>\nimport lottie from 'lottie-web';\nimport { setTimeout } from 'timers';\n\nexport default {\n  data() {\n    return {\n      anim: null\n    }\n  },\n  props: {\n    active: Boolean,\n    animationData: Object,\n    intro: {\n      type: Array,\n      default: null\n    },\n    outro: {\n      type: Array,\n      default: null\n    },\n    loopFrames: {\n      type: Array,\n      default: null\n    },\n    delay: {\n      type: Number,\n      defalt: 0\n    },\n    render: {\n      type: String,\n      default: 'svg',\n    },\n    loop: {\n      type: Boolean | Number,\n      default: false\n    },\n    autoplay: {\n      type: Boolean,\n      default: false\n    },\n    l0: String,\n    l1: String,\n    l2: String,\n  },\n  mounted() {\n    this.anim = lottie.loadAnimation({\n      container: this.$refs.lottie,\n      ...this.$props\n    })\n  },\n  methods: {\n    play(){\n      this.anim.goToAndStop(0)\n      setTimeout(()=>{\n        if (this.intro) {\n          if (this.loopFrames) this.anim.playSegments([this.intro, this.loopFrames], true)\n          else this.anim.playSegments(this.intro, true)\n        } else {\n          this.anim.play()\n        }\n      }, this.delay)\n    },\n    stop(){\n      if (this.outro) {\n        this.anim.playSegments(this.outro, false)\n      }\n    }\n  },\n  watch: {\n    'active': function(active){\n      active ? this.play() : this.stop()\n    },\n    'l0': function(f){\n      this.anim.renderer.elements[0].updateDocumentData({t: f},0);\n    },\n    'l1': function(f){\n      this.anim.renderer.elements[1].updateDocumentData({t: f},0);\n    },\n    'l2': function(f){\n      this.anim.renderer.elements[2].updateDocumentData({t: f},0);\n    }\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Lottie.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Lottie.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Lottie.vue?vue&type=template&id=400e5a4a&\"\nimport script from \"./Lottie.vue?vue&type=script&lang=js&\"\nexport * from \"./Lottie.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <dir class=\"bibelord\" :class=\"{ active }\">\n    <Lottie class=\"lottie\" v-bind=\"{ animationData, active, delay: 1100, intro: [0,30], render: 'canvas', /*loop: 10, loopFrames: [0,30],*/ outro: [1483, 1500], l0: f0, l1: f1}\"/>\n  </dir>\n</template>\n<script>\nconst bibelord = require('@/assets/bibelord.json');\nimport Lottie from '@/components/Lottie';\n\nexport default {\n  components: {\n    Lottie\n  },\n  data() {\n    return {\n      comp: 'EFS_Bibelord',\n      f0: 'Uppsala',\n      f1: '13 maj 2019',\n      active: false,\n      animationData: bibelord\n    }\n  },\n  methods: {\n    play() {\n      this.active = true\n    },\n    stop() {\n      this.active = false\n    },\n    next() {\n      console.log(this)\n      return this\n    },\n    update(data) {\n      this.f0 = data.f0\n      this.f1 = data.f1\n      this.f2 = data.f2\n    }\n  },\n  created() {\n    window.play   = this.play\n    window.stop   = this.stop\n    window.next   = this.next\n    window.update = this.update\n    \n  },\n  sockets: {\n    data: function({event, data}) {\n      if (event == this.comp+'_play') this.play()\n      if (event == this.comp+'_stop') this.stop()\n      if (event == this.comp+'_next') this.next()\n      if (event == this.comp+'_update') this.update(data)\n    }\n  }\n}\n\n</script>\n\n<style lang=\"scss\" scoped>\n\n@font-face {\n  font-family: Campton Semibold;\n  src: url(../fonts/Campton/Rene.Bieder_Campton.SemiBold.otf);\n}\n@font-face {\n  font-family: Campton Book;\n  src: url(../fonts/Campton/Rene.Bieder_Campton.Book.otf);\n}\n\n.bibelord {\n  font-family: Campton Book;\n  font-size: 30px;\n  position: absolute;\n  // bottom: 5%;\n  // right: 5%;\n  // left: 5%;\n  // top: 5%;\n  overflow: hidden;\n  margin: 0;\n  padding: 0;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: row; \n}\n\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Bibelord.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Bibelord.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Bibelord.vue?vue&type=template&id=4624aa00&scoped=true&\"\nimport script from \"./Bibelord.vue?vue&type=script&lang=js&\"\nexport * from \"./Bibelord.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Bibelord.vue?vue&type=style&index=0&id=4624aa00&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4624aa00\",\n  null\n  \n)\n\nexport default component.exports","exports.nextTick = function nextTick(fn) {\n    var args = Array.prototype.slice.call(arguments);\n    args.shift();\n    setTimeout(function () {\n        fn.apply(null, args);\n    }, 0);\n};\n\nexports.platform = exports.arch = \nexports.execPath = exports.title = 'browser';\nexports.pid = 1;\nexports.browser = true;\nexports.env = {};\nexports.argv = [];\n\nexports.binding = function (name) {\n\tthrow new Error('No such module. (Possibly not yet loaded)')\n};\n\n(function () {\n    var cwd = '/';\n    var path;\n    exports.cwd = function () { return cwd };\n    exports.chdir = function (dir) {\n        if (!path) path = require('path');\n        cwd = path.resolve(dir, cwd);\n    };\n})();\n\nexports.exit = exports.kill = \nexports.umask = exports.dlopen = \nexports.uptime = exports.memoryUsage = \nexports.uvCounters = function() {};\nexports.features = {};\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Bibelord.vue?vue&type=style&index=0&id=4624aa00&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Bibelord.vue?vue&type=style&index=0&id=4624aa00&lang=scss&scoped=true&\"","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n","// a string of all valid unicode whitespaces\n// eslint-disable-next-line max-len\nmodule.exports = '\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u1680\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n","var requireObjectCoercible = require('../internals/require-object-coercible');\nvar whitespaces = require('../internals/whitespaces');\n\nvar whitespace = '[' + whitespaces + ']';\nvar ltrim = RegExp('^' + whitespace + whitespace + '*');\nvar rtrim = RegExp(whitespace + whitespace + '*$');\n\n// `String.prototype.{ trim, trimStart, trimEnd, trimLeft, trimRight }` methods implementation\nvar createMethod = function (TYPE) {\n  return function ($this) {\n    var string = String(requireObjectCoercible($this));\n    if (TYPE & 1) string = string.replace(ltrim, '');\n    if (TYPE & 2) string = string.replace(rtrim, '');\n    return string;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.{ trimLeft, trimStart }` methods\n  // https://tc39.github.io/ecma262/#sec-string.prototype.trimstart\n  start: createMethod(1),\n  // `String.prototype.{ trimRight, trimEnd }` methods\n  // https://tc39.github.io/ecma262/#sec-string.prototype.trimend\n  end: createMethod(2),\n  // `String.prototype.trim` method\n  // https://tc39.github.io/ecma262/#sec-string.prototype.trim\n  trim: createMethod(3)\n};\n","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 6–8\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n","var isObject = require('../internals/is-object');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\n\n// makes subclassing work correct for wrapped built-ins\nmodule.exports = function ($this, dummy, Wrapper) {\n  var NewTarget, NewTargetPrototype;\n  if (\n    // it can work only with native `setPrototypeOf`\n    setPrototypeOf &&\n    // we haven't completely correct pre-ES6 way for getting `new.target`, so use this\n    typeof (NewTarget = dummy.constructor) == 'function' &&\n    NewTarget !== Wrapper &&\n    isObject(NewTargetPrototype = NewTarget.prototype) &&\n    NewTargetPrototype !== Wrapper.prototype\n  ) setPrototypeOf($this, NewTargetPrototype);\n  return $this;\n};\n","(typeof navigator !== \"undefined\") && (function(root, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define(function() {\n            return factory(root);\n        });\n    } else if (typeof module === \"object\" && module.exports) {\n        module.exports = factory(root);\n    } else {\n        root.lottie = factory(root);\n        root.bodymovin = root.lottie;\n    }\n}((window || {}), function(window) {\n\t\"use strict\";\r\nvar svgNS = \"http://www.w3.org/2000/svg\";\r\n\r\nvar locationHref = '';\r\n\r\nvar initialDefaultFrame = -999999;\r\n\r\nvar subframeEnabled = true;\r\nvar expressionsPlugin;\r\nvar isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\r\nvar cachedColors = {};\r\nvar bm_rounder = Math.round;\r\nvar bm_rnd;\r\nvar bm_pow = Math.pow;\r\nvar bm_sqrt = Math.sqrt;\r\nvar bm_abs = Math.abs;\r\nvar bm_floor = Math.floor;\r\nvar bm_max = Math.max;\r\nvar bm_min = Math.min;\r\nvar blitter = 10;\r\n\r\nvar BMMath = {};\r\n(function(){\r\n    var propertyNames = [\"abs\", \"acos\", \"acosh\", \"asin\", \"asinh\", \"atan\", \"atanh\", \"atan2\", \"ceil\", \"cbrt\", \"expm1\", \"clz32\", \"cos\", \"cosh\", \"exp\", \"floor\", \"fround\", \"hypot\", \"imul\", \"log\", \"log1p\", \"log2\", \"log10\", \"max\", \"min\", \"pow\", \"random\", \"round\", \"sign\", \"sin\", \"sinh\", \"sqrt\", \"tan\", \"tanh\", \"trunc\", \"E\", \"LN10\", \"LN2\", \"LOG10E\", \"LOG2E\", \"PI\", \"SQRT1_2\", \"SQRT2\"];\r\n    var i, len = propertyNames.length;\r\n    for(i=0;i<len;i+=1){\r\n        BMMath[propertyNames[i]] = Math[propertyNames[i]];\r\n    }\r\n}());\r\n\r\nfunction ProjectInterface(){return {};}\r\n\r\nBMMath.random = Math.random;\r\nBMMath.abs = function(val){\r\n    var tOfVal = typeof val;\r\n    if(tOfVal === 'object' && val.length){\r\n        var absArr = createSizedArray(val.length);\r\n        var i, len = val.length;\r\n        for(i=0;i<len;i+=1){\r\n            absArr[i] = Math.abs(val[i]);\r\n        }\r\n        return absArr;\r\n    }\r\n    return Math.abs(val);\r\n\r\n};\r\nvar defaultCurveSegments = 150;\r\nvar degToRads = Math.PI/180;\r\nvar roundCorner = 0.5519;\r\n\r\nfunction roundValues(flag){\r\n    if(flag){\r\n        bm_rnd = Math.round;\r\n    }else{\r\n        bm_rnd = function(val){\r\n            return val;\r\n        };\r\n    }\r\n}\r\nroundValues(false);\r\n\r\nfunction styleDiv(element){\r\n    element.style.position = 'absolute';\r\n    element.style.top = 0;\r\n    element.style.left = 0;\r\n    element.style.display = 'block';\r\n    element.style.transformOrigin = element.style.webkitTransformOrigin = '0 0';\r\n    element.style.backfaceVisibility  = element.style.webkitBackfaceVisibility = 'visible';\r\n    element.style.transformStyle = element.style.webkitTransformStyle = element.style.mozTransformStyle = \"preserve-3d\";\r\n}\r\n\r\nfunction BMEnterFrameEvent(type, currentTime, totalTime, frameMultiplier){\r\n    this.type = type;\r\n    this.currentTime = currentTime;\r\n    this.totalTime = totalTime;\r\n    this.direction = frameMultiplier < 0 ? -1 : 1;\r\n}\r\n\r\nfunction BMCompleteEvent(type, frameMultiplier){\r\n    this.type = type;\r\n    this.direction = frameMultiplier < 0 ? -1 : 1;\r\n}\r\n\r\nfunction BMCompleteLoopEvent(type, totalLoops, currentLoop, frameMultiplier){\r\n    this.type = type;\r\n    this.currentLoop = currentLoop;\r\n    this.totalLoops = totalLoops;\r\n    this.direction = frameMultiplier < 0 ? -1 : 1;\r\n}\r\n\r\nfunction BMSegmentStartEvent(type, firstFrame, totalFrames){\r\n    this.type = type;\r\n    this.firstFrame = firstFrame;\r\n    this.totalFrames = totalFrames;\r\n}\r\n\r\nfunction BMDestroyEvent(type, target){\r\n    this.type = type;\r\n    this.target = target;\r\n}\r\n\r\nfunction BMRenderFrameErrorEvent(nativeError, currentTime) {\r\n    this.type = 'renderFrameError';\r\n    this.nativeError = nativeError;\r\n    this.currentTime = currentTime;\r\n}\r\n\r\nfunction BMConfigErrorEvent(nativeError) {\r\n    this.type = 'configError';\r\n    this.nativeError = nativeError;\r\n}\r\n\r\nfunction BMAnimationConfigErrorEvent(type, nativeError) {\r\n    this.type = type;\r\n    this.nativeError = nativeError;\r\n    this.currentTime = currentTime;\r\n}\r\n\r\nvar createElementID = (function(){\r\n    var _count = 0;\r\n    return function createID() {\r\n        return '__lottie_element_' + ++_count\r\n    }\r\n}())\r\n\r\nfunction HSVtoRGB(h, s, v) {\r\n    var r, g, b, i, f, p, q, t;\r\n    i = Math.floor(h * 6);\r\n    f = h * 6 - i;\r\n    p = v * (1 - s);\r\n    q = v * (1 - f * s);\r\n    t = v * (1 - (1 - f) * s);\r\n    switch (i % 6) {\r\n        case 0: r = v; g = t; b = p; break;\r\n        case 1: r = q; g = v; b = p; break;\r\n        case 2: r = p; g = v; b = t; break;\r\n        case 3: r = p; g = q; b = v; break;\r\n        case 4: r = t; g = p; b = v; break;\r\n        case 5: r = v; g = p; b = q; break;\r\n    }\r\n    return [ r,\r\n        g,\r\n         b ];\r\n}\r\n\r\nfunction RGBtoHSV(r, g, b) {\r\n    var max = Math.max(r, g, b), min = Math.min(r, g, b),\r\n        d = max - min,\r\n        h,\r\n        s = (max === 0 ? 0 : d / max),\r\n        v = max / 255;\r\n\r\n    switch (max) {\r\n        case min: h = 0; break;\r\n        case r: h = (g - b) + d * (g < b ? 6: 0); h /= 6 * d; break;\r\n        case g: h = (b - r) + d * 2; h /= 6 * d; break;\r\n        case b: h = (r - g) + d * 4; h /= 6 * d; break;\r\n    }\r\n\r\n    return [\r\n         h,\r\n         s,\r\n         v\r\n    ];\r\n}\r\n\r\nfunction addSaturationToRGB(color,offset){\r\n    var hsv = RGBtoHSV(color[0]*255,color[1]*255,color[2]*255);\r\n    hsv[1] += offset;\r\n    if (hsv[1] > 1) {\r\n        hsv[1] = 1;\r\n    }\r\n    else if (hsv[1] <= 0) {\r\n        hsv[1] = 0;\r\n    }\r\n    return HSVtoRGB(hsv[0],hsv[1],hsv[2]);\r\n}\r\n\r\nfunction addBrightnessToRGB(color,offset){\r\n    var hsv = RGBtoHSV(color[0]*255,color[1]*255,color[2]*255);\r\n    hsv[2] += offset;\r\n    if (hsv[2] > 1) {\r\n        hsv[2] = 1;\r\n    }\r\n    else if (hsv[2] < 0) {\r\n        hsv[2] = 0;\r\n    }\r\n    return HSVtoRGB(hsv[0],hsv[1],hsv[2]);\r\n}\r\n\r\nfunction addHueToRGB(color,offset) {\r\n    var hsv = RGBtoHSV(color[0]*255,color[1]*255,color[2]*255);\r\n    hsv[0] += offset/360;\r\n    if (hsv[0] > 1) {\r\n        hsv[0] -= 1;\r\n    }\r\n    else if (hsv[0] < 0) {\r\n        hsv[0] += 1;\r\n    }\r\n    return HSVtoRGB(hsv[0],hsv[1],hsv[2]);\r\n}\r\n\r\nvar rgbToHex = (function(){\r\n    var colorMap = [];\r\n    var i;\r\n    var hex;\r\n    for(i=0;i<256;i+=1){\r\n        hex = i.toString(16);\r\n        colorMap[i] = hex.length == 1 ? '0' + hex : hex;\r\n    }\r\n\r\n    return function(r, g, b) {\r\n        if(r<0){\r\n            r = 0;\r\n        }\r\n        if(g<0){\r\n            g = 0;\r\n        }\r\n        if(b<0){\r\n            b = 0;\r\n        }\r\n        return '#' + colorMap[r] + colorMap[g] + colorMap[b];\r\n    };\r\n}());\r\nfunction BaseEvent(){}\r\nBaseEvent.prototype = {\r\n\ttriggerEvent: function (eventName, args) {\r\n\t    if (this._cbs[eventName]) {\r\n\t        var len = this._cbs[eventName].length;\r\n\t        for (var i = 0; i < len; i++){\r\n\t            this._cbs[eventName][i](args);\r\n\t        }\r\n\t    }\r\n\t},\r\n\taddEventListener: function (eventName, callback) {\r\n\t    if (!this._cbs[eventName]){\r\n\t        this._cbs[eventName] = [];\r\n\t    }\r\n\t    this._cbs[eventName].push(callback);\r\n\r\n\t\treturn function() {\r\n\t\t\tthis.removeEventListener(eventName, callback);\r\n\t\t}.bind(this);\r\n\t},\r\n\tremoveEventListener: function (eventName,callback){\r\n\t    if (!callback){\r\n\t        this._cbs[eventName] = null;\r\n\t    }else if(this._cbs[eventName]){\r\n\t        var i = 0, len = this._cbs[eventName].length;\r\n\t        while(i<len){\r\n\t            if(this._cbs[eventName][i] === callback){\r\n\t                this._cbs[eventName].splice(i,1);\r\n\t                i -=1;\r\n\t                len -= 1;\r\n\t            }\r\n\t            i += 1;\r\n\t        }\r\n\t        if(!this._cbs[eventName].length){\r\n\t            this._cbs[eventName] = null;\r\n\t        }\r\n\t    }\r\n\t}\r\n};\r\nvar createTypedArray = (function(){\r\n\tfunction createRegularArray(type, len){\r\n\t\tvar i = 0, arr = [], value;\r\n\t\tswitch(type) {\r\n\t\t\tcase 'int16':\r\n\t\t\tcase 'uint8c':\r\n\t\t\t\tvalue = 1;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tvalue = 1.1;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tfor(i = 0; i < len; i += 1) {\r\n\t\t\tarr.push(value);\r\n\t\t}\r\n\t\treturn arr;\r\n\t}\r\n\tfunction createTypedArray(type, len){\r\n\t\tif(type === 'float32') {\r\n\t\t\treturn new Float32Array(len);\r\n\t\t} else if(type === 'int16') {\r\n\t\t\treturn new Int16Array(len);\r\n\t\t} else if(type === 'uint8c') {\r\n\t\t\treturn new Uint8ClampedArray(len);\r\n\t\t}\r\n\t}\r\n\tif(typeof Uint8ClampedArray === 'function' && typeof Float32Array === 'function') {\r\n\t\treturn createTypedArray;\r\n\t} else {\r\n\t\treturn createRegularArray;\r\n\t}\r\n}());\r\n\r\nfunction createSizedArray(len) {\r\n\treturn Array.apply(null,{length:len});\r\n}\r\nfunction createNS(type) {\r\n\t//return {appendChild:function(){},setAttribute:function(){},style:{}}\r\n\treturn document.createElementNS(svgNS, type);\r\n}\r\nfunction createTag(type) {\r\n\t//return {appendChild:function(){},setAttribute:function(){},style:{}}\r\n\treturn document.createElement(type);\r\n}\r\nfunction DynamicPropertyContainer(){};\r\nDynamicPropertyContainer.prototype = {\r\n\taddDynamicProperty: function(prop) {\r\n\t\tif(this.dynamicProperties.indexOf(prop) === -1) {\r\n\t        this.dynamicProperties.push(prop);\r\n\t        this.container.addDynamicProperty(this);\r\n\t    \tthis._isAnimated = true;\r\n\t    }\r\n\t},\r\n\titerateDynamicProperties: function(){\r\n\t    this._mdf = false;\r\n\t    var i, len = this.dynamicProperties.length;\r\n\t    for(i=0;i<len;i+=1){\r\n\t        this.dynamicProperties[i].getValue();\r\n\t        if(this.dynamicProperties[i]._mdf) {\r\n\t            this._mdf = true;\r\n\t        }\r\n\t    }\r\n\t},\r\n\tinitDynamicPropertyContainer: function(container){\r\n\t    this.container = container;\r\n\t    this.dynamicProperties = [];\r\n\t    this._mdf = false;\r\n\t    this._isAnimated = false;\r\n\t}\r\n}\r\nvar getBlendMode = (function() {\r\n\r\n\tvar blendModeEnums = {\r\n        0:'source-over',\r\n        1:'multiply',\r\n        2:'screen',\r\n        3:'overlay',\r\n        4:'darken',\r\n        5:'lighten',\r\n        6:'color-dodge',\r\n        7:'color-burn',\r\n        8:'hard-light',\r\n        9:'soft-light',\r\n        10:'difference',\r\n        11:'exclusion',\r\n        12:'hue',\r\n        13:'saturation',\r\n        14:'color',\r\n        15:'luminosity'\r\n    }\r\n\r\n\treturn function(mode) {\r\n\t\treturn blendModeEnums[mode] || '';\r\n\t}\r\n}())\r\n/*!\r\n Transformation Matrix v2.0\r\n (c) Epistemex 2014-2015\r\n www.epistemex.com\r\n By Ken Fyrstenberg\r\n Contributions by leeoniya.\r\n License: MIT, header required.\r\n */\r\n\r\n/**\r\n * 2D transformation matrix object initialized with identity matrix.\r\n *\r\n * The matrix can synchronize a canvas context by supplying the context\r\n * as an argument, or later apply current absolute transform to an\r\n * existing context.\r\n *\r\n * All values are handled as floating point values.\r\n *\r\n * @param {CanvasRenderingContext2D} [context] - Optional context to sync with Matrix\r\n * @prop {number} a - scale x\r\n * @prop {number} b - shear y\r\n * @prop {number} c - shear x\r\n * @prop {number} d - scale y\r\n * @prop {number} e - translate x\r\n * @prop {number} f - translate y\r\n * @prop {CanvasRenderingContext2D|null} [context=null] - set or get current canvas context\r\n * @constructor\r\n */\r\n\r\nvar Matrix = (function(){\r\n\r\n    var _cos = Math.cos;\r\n    var _sin = Math.sin;\r\n    var _tan = Math.tan;\r\n    var _rnd = Math.round;\r\n\r\n    function reset(){\r\n        this.props[0] = 1;\r\n        this.props[1] = 0;\r\n        this.props[2] = 0;\r\n        this.props[3] = 0;\r\n        this.props[4] = 0;\r\n        this.props[5] = 1;\r\n        this.props[6] = 0;\r\n        this.props[7] = 0;\r\n        this.props[8] = 0;\r\n        this.props[9] = 0;\r\n        this.props[10] = 1;\r\n        this.props[11] = 0;\r\n        this.props[12] = 0;\r\n        this.props[13] = 0;\r\n        this.props[14] = 0;\r\n        this.props[15] = 1;\r\n        return this;\r\n    }\r\n\r\n    function rotate(angle) {\r\n        if(angle === 0){\r\n            return this;\r\n        }\r\n        var mCos = _cos(angle);\r\n        var mSin = _sin(angle);\r\n        return this._t(mCos, -mSin,  0, 0, mSin,  mCos, 0, 0, 0,  0,  1, 0, 0, 0, 0, 1);\r\n    }\r\n\r\n    function rotateX(angle){\r\n        if(angle === 0){\r\n            return this;\r\n        }\r\n        var mCos = _cos(angle);\r\n        var mSin = _sin(angle);\r\n        return this._t(1, 0, 0, 0, 0, mCos, -mSin, 0, 0, mSin,  mCos, 0, 0, 0, 0, 1);\r\n    }\r\n\r\n    function rotateY(angle){\r\n        if(angle === 0){\r\n            return this;\r\n        }\r\n        var mCos = _cos(angle);\r\n        var mSin = _sin(angle);\r\n        return this._t(mCos,  0,  mSin, 0, 0, 1, 0, 0, -mSin,  0,  mCos, 0, 0, 0, 0, 1);\r\n    }\r\n\r\n    function rotateZ(angle){\r\n        if(angle === 0){\r\n            return this;\r\n        }\r\n        var mCos = _cos(angle);\r\n        var mSin = _sin(angle);\r\n        return this._t(mCos, -mSin,  0, 0, mSin,  mCos, 0, 0, 0,  0,  1, 0, 0, 0, 0, 1);\r\n    }\r\n\r\n    function shear(sx,sy){\r\n        return this._t(1, sy, sx, 1, 0, 0);\r\n    }\r\n\r\n    function skew(ax, ay){\r\n        return this.shear(_tan(ax), _tan(ay));\r\n    }\r\n\r\n    function skewFromAxis(ax, angle){\r\n        var mCos = _cos(angle);\r\n        var mSin = _sin(angle);\r\n        return this._t(mCos, mSin,  0, 0, -mSin,  mCos, 0, 0, 0,  0,  1, 0, 0, 0, 0, 1)\r\n            ._t(1, 0,  0, 0, _tan(ax),  1, 0, 0, 0,  0,  1, 0, 0, 0, 0, 1)\r\n            ._t(mCos, -mSin,  0, 0, mSin,  mCos, 0, 0, 0,  0,  1, 0, 0, 0, 0, 1);\r\n        //return this._t(mCos, mSin, -mSin, mCos, 0, 0)._t(1, 0, _tan(ax), 1, 0, 0)._t(mCos, -mSin, mSin, mCos, 0, 0);\r\n    }\r\n\r\n    function scale(sx, sy, sz) {\r\n        if(!sz && sz !== 0) {\r\n            sz = 1;\r\n        }\r\n        if(sx === 1 && sy === 1 && sz === 1){\r\n            return this;\r\n        }\r\n        return this._t(sx, 0, 0, 0, 0, sy, 0, 0, 0, 0, sz, 0, 0, 0, 0, 1);\r\n    }\r\n\r\n    function setTransform(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p) {\r\n        this.props[0] = a;\r\n        this.props[1] = b;\r\n        this.props[2] = c;\r\n        this.props[3] = d;\r\n        this.props[4] = e;\r\n        this.props[5] = f;\r\n        this.props[6] = g;\r\n        this.props[7] = h;\r\n        this.props[8] = i;\r\n        this.props[9] = j;\r\n        this.props[10] = k;\r\n        this.props[11] = l;\r\n        this.props[12] = m;\r\n        this.props[13] = n;\r\n        this.props[14] = o;\r\n        this.props[15] = p;\r\n        return this;\r\n    }\r\n\r\n    function translate(tx, ty, tz) {\r\n        tz = tz || 0;\r\n        if(tx !== 0 || ty !== 0 || tz !== 0){\r\n            return this._t(1,0,0,0,0,1,0,0,0,0,1,0,tx,ty,tz,1);\r\n        }\r\n        return this;\r\n    }\r\n\r\n    function transform(a2, b2, c2, d2, e2, f2, g2, h2, i2, j2, k2, l2, m2, n2, o2, p2) {\r\n\r\n        var _p = this.props;\r\n\r\n        if(a2 === 1 && b2 === 0 && c2 === 0 && d2 === 0 && e2 === 0 && f2 === 1 && g2 === 0 && h2 === 0 && i2 === 0 && j2 === 0 && k2 === 1 && l2 === 0){\r\n            //NOTE: commenting this condition because TurboFan deoptimizes code when present\r\n            //if(m2 !== 0 || n2 !== 0 || o2 !== 0){\r\n                _p[12] = _p[12] * a2 + _p[15] * m2;\r\n                _p[13] = _p[13] * f2 + _p[15] * n2;\r\n                _p[14] = _p[14] * k2 + _p[15] * o2;\r\n                _p[15] = _p[15] * p2;\r\n            //}\r\n            this._identityCalculated = false;\r\n            return this;\r\n        }\r\n\r\n        var a1 = _p[0];\r\n        var b1 = _p[1];\r\n        var c1 = _p[2];\r\n        var d1 = _p[3];\r\n        var e1 = _p[4];\r\n        var f1 = _p[5];\r\n        var g1 = _p[6];\r\n        var h1 = _p[7];\r\n        var i1 = _p[8];\r\n        var j1 = _p[9];\r\n        var k1 = _p[10];\r\n        var l1 = _p[11];\r\n        var m1 = _p[12];\r\n        var n1 = _p[13];\r\n        var o1 = _p[14];\r\n        var p1 = _p[15];\r\n\r\n        /* matrix order (canvas compatible):\r\n         * ace\r\n         * bdf\r\n         * 001\r\n         */\r\n        _p[0] = a1 * a2 + b1 * e2 + c1 * i2 + d1 * m2;\r\n        _p[1] = a1 * b2 + b1 * f2 + c1 * j2 + d1 * n2 ;\r\n        _p[2] = a1 * c2 + b1 * g2 + c1 * k2 + d1 * o2 ;\r\n        _p[3] = a1 * d2 + b1 * h2 + c1 * l2 + d1 * p2 ;\r\n\r\n        _p[4] = e1 * a2 + f1 * e2 + g1 * i2 + h1 * m2 ;\r\n        _p[5] = e1 * b2 + f1 * f2 + g1 * j2 + h1 * n2 ;\r\n        _p[6] = e1 * c2 + f1 * g2 + g1 * k2 + h1 * o2 ;\r\n        _p[7] = e1 * d2 + f1 * h2 + g1 * l2 + h1 * p2 ;\r\n\r\n        _p[8] = i1 * a2 + j1 * e2 + k1 * i2 + l1 * m2 ;\r\n        _p[9] = i1 * b2 + j1 * f2 + k1 * j2 + l1 * n2 ;\r\n        _p[10] = i1 * c2 + j1 * g2 + k1 * k2 + l1 * o2 ;\r\n        _p[11] = i1 * d2 + j1 * h2 + k1 * l2 + l1 * p2 ;\r\n\r\n        _p[12] = m1 * a2 + n1 * e2 + o1 * i2 + p1 * m2 ;\r\n        _p[13] = m1 * b2 + n1 * f2 + o1 * j2 + p1 * n2 ;\r\n        _p[14] = m1 * c2 + n1 * g2 + o1 * k2 + p1 * o2 ;\r\n        _p[15] = m1 * d2 + n1 * h2 + o1 * l2 + p1 * p2 ;\r\n\r\n        this._identityCalculated = false;\r\n        return this;\r\n    }\r\n\r\n    function isIdentity() {\r\n        if(!this._identityCalculated){\r\n            this._identity = !(this.props[0] !== 1 || this.props[1] !== 0 || this.props[2] !== 0 || this.props[3] !== 0 || this.props[4] !== 0 || this.props[5] !== 1 || this.props[6] !== 0 || this.props[7] !== 0 || this.props[8] !== 0 || this.props[9] !== 0 || this.props[10] !== 1 || this.props[11] !== 0 || this.props[12] !== 0 || this.props[13] !== 0 || this.props[14] !== 0 || this.props[15] !== 1);\r\n            this._identityCalculated = true;\r\n        }\r\n        return this._identity;\r\n    }\r\n\r\n    function equals(matr){\r\n        var i = 0;\r\n        while (i < 16) {\r\n            if(matr.props[i] !== this.props[i]) {\r\n                return false;\r\n            }\r\n            i+=1;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    function clone(matr){\r\n        var i;\r\n        for(i=0;i<16;i+=1){\r\n            matr.props[i] = this.props[i];\r\n        }\r\n    }\r\n\r\n    function cloneFromProps(props){\r\n        var i;\r\n        for(i=0;i<16;i+=1){\r\n            this.props[i] = props[i];\r\n        }\r\n    }\r\n\r\n    function applyToPoint(x, y, z) {\r\n\r\n        return {\r\n            x: x * this.props[0] + y * this.props[4] + z * this.props[8] + this.props[12],\r\n            y: x * this.props[1] + y * this.props[5] + z * this.props[9] + this.props[13],\r\n            z: x * this.props[2] + y * this.props[6] + z * this.props[10] + this.props[14]\r\n        };\r\n        /*return {\r\n         x: x * me.a + y * me.c + me.e,\r\n         y: x * me.b + y * me.d + me.f\r\n         };*/\r\n    }\r\n    function applyToX(x, y, z) {\r\n        return x * this.props[0] + y * this.props[4] + z * this.props[8] + this.props[12];\r\n    }\r\n    function applyToY(x, y, z) {\r\n        return x * this.props[1] + y * this.props[5] + z * this.props[9] + this.props[13];\r\n    }\r\n    function applyToZ(x, y, z) {\r\n        return x * this.props[2] + y * this.props[6] + z * this.props[10] + this.props[14];\r\n    }\r\n\r\n    function getInverseMatrix() {\r\n        var determinant = this.props[0] * this.props[5] - this.props[1] * this.props[4];\r\n        var a = this.props[5]/determinant;\r\n        var b = - this.props[1]/determinant;\r\n        var c = - this.props[4]/determinant;\r\n        var d = this.props[0]/determinant;\r\n        var e = (this.props[4] * this.props[13] - this.props[5] * this.props[12])/determinant;\r\n        var f = - (this.props[0] * this.props[13] - this.props[1] * this.props[12])/determinant;\r\n        var inverseMatrix = new Matrix();\r\n        inverseMatrix.props[0] = a;\r\n        inverseMatrix.props[1] = b;\r\n        inverseMatrix.props[4] = c;\r\n        inverseMatrix.props[5] = d;\r\n        inverseMatrix.props[12] = e;\r\n        inverseMatrix.props[13] = f;\r\n        return inverseMatrix;\r\n    }\r\n\r\n    function inversePoint(pt) {\r\n        var inverseMatrix = this.getInverseMatrix();\r\n        return inverseMatrix.applyToPointArray(pt[0], pt[1], pt[2] || 0)\r\n    }\r\n\r\n    function inversePoints(pts){\r\n        var i, len = pts.length, retPts = [];\r\n        for(i=0;i<len;i+=1){\r\n            retPts[i] = inversePoint(pts[i]);\r\n        }\r\n        return retPts;\r\n    }\r\n\r\n    function applyToTriplePoints(pt1, pt2, pt3) {\r\n        var arr = createTypedArray('float32', 6);\r\n        if(this.isIdentity()) {\r\n            arr[0] = pt1[0];\r\n            arr[1] = pt1[1];\r\n            arr[2] = pt2[0];\r\n            arr[3] = pt2[1];\r\n            arr[4] = pt3[0];\r\n            arr[5] = pt3[1];\r\n        } else {\r\n            var p0 = this.props[0], p1 = this.props[1], p4 = this.props[4], p5 = this.props[5], p12 = this.props[12], p13 = this.props[13];\r\n            arr[0] = pt1[0] * p0 + pt1[1] * p4 + p12;\r\n            arr[1] = pt1[0] * p1 + pt1[1] * p5 + p13;\r\n            arr[2] = pt2[0] * p0 + pt2[1] * p4 + p12;\r\n            arr[3] = pt2[0] * p1 + pt2[1] * p5 + p13;\r\n            arr[4] = pt3[0] * p0 + pt3[1] * p4 + p12;\r\n            arr[5] = pt3[0] * p1 + pt3[1] * p5 + p13;\r\n        }\r\n        return arr;\r\n    }\r\n\r\n    function applyToPointArray(x,y,z){\r\n        var arr;\r\n        if(this.isIdentity()) {\r\n            arr = [x,y,z];\r\n        } else {\r\n            arr = [x * this.props[0] + y * this.props[4] + z * this.props[8] + this.props[12],x * this.props[1] + y * this.props[5] + z * this.props[9] + this.props[13],x * this.props[2] + y * this.props[6] + z * this.props[10] + this.props[14]];\r\n        }\r\n        return arr;\r\n    }\r\n\r\n    function applyToPointStringified(x, y) {\r\n        if(this.isIdentity()) {\r\n            return x + ',' + y;\r\n        }\r\n        var _p = this.props;\r\n        return Math.round((x * _p[0] + y * _p[4] + _p[12]) * 100) / 100+','+ Math.round((x * _p[1] + y * _p[5] + _p[13]) * 100) / 100;\r\n    }\r\n\r\n    function toCSS() {\r\n        //Doesn't make much sense to add this optimization. If it is an identity matrix, it's very likely this will get called only once since it won't be keyframed.\r\n        /*if(this.isIdentity()) {\r\n            return '';\r\n        }*/\r\n        var i = 0;\r\n        var props = this.props;\r\n        var cssValue = 'matrix3d(';\r\n        var v = 10000;\r\n        while(i<16){\r\n            cssValue += _rnd(props[i]*v)/v;\r\n            cssValue += i === 15 ? ')':',';\r\n            i += 1;\r\n        }\r\n        return cssValue;\r\n    }\r\n\r\n    function roundMatrixProperty(val) {\r\n        var v = 10000;\r\n        if((val < 0.000001 && val > 0) || (val > -0.000001 && val < 0)) {\r\n            return _rnd(val * v) / v;\r\n        }\r\n        return val;\r\n    }\r\n\r\n    function to2dCSS() {\r\n        //Doesn't make much sense to add this optimization. If it is an identity matrix, it's very likely this will get called only once since it won't be keyframed.\r\n        /*if(this.isIdentity()) {\r\n            return '';\r\n        }*/\r\n        var props = this.props;\r\n        var _a = roundMatrixProperty(props[0]);\r\n        var _b = roundMatrixProperty(props[1]);\r\n        var _c = roundMatrixProperty(props[4]);\r\n        var _d = roundMatrixProperty(props[5]);\r\n        var _e = roundMatrixProperty(props[12]);\r\n        var _f = roundMatrixProperty(props[13]);\r\n        return \"matrix(\" + _a + ',' + _b + ',' + _c + ',' + _d + ',' + _e + ',' + _f + \")\";\r\n    }\r\n\r\n    return function(){\r\n        this.reset = reset;\r\n        this.rotate = rotate;\r\n        this.rotateX = rotateX;\r\n        this.rotateY = rotateY;\r\n        this.rotateZ = rotateZ;\r\n        this.skew = skew;\r\n        this.skewFromAxis = skewFromAxis;\r\n        this.shear = shear;\r\n        this.scale = scale;\r\n        this.setTransform = setTransform;\r\n        this.translate = translate;\r\n        this.transform = transform;\r\n        this.applyToPoint = applyToPoint;\r\n        this.applyToX = applyToX;\r\n        this.applyToY = applyToY;\r\n        this.applyToZ = applyToZ;\r\n        this.applyToPointArray = applyToPointArray;\r\n        this.applyToTriplePoints = applyToTriplePoints;\r\n        this.applyToPointStringified = applyToPointStringified;\r\n        this.toCSS = toCSS;\r\n        this.to2dCSS = to2dCSS;\r\n        this.clone = clone;\r\n        this.cloneFromProps = cloneFromProps;\r\n        this.equals = equals;\r\n        this.inversePoints = inversePoints;\r\n        this.inversePoint = inversePoint;\r\n        this.getInverseMatrix = getInverseMatrix;\r\n        this._t = this.transform;\r\n        this.isIdentity = isIdentity;\r\n        this._identity = true;\r\n        this._identityCalculated = false;\r\n\r\n        this.props = createTypedArray('float32', 16);\r\n        this.reset();\r\n    };\r\n}());\r\n\r\n/*\r\n Copyright 2014 David Bau.\r\n\r\n Permission is hereby granted, free of charge, to any person obtaining\r\n a copy of this software and associated documentation files (the\r\n \"Software\"), to deal in the Software without restriction, including\r\n without limitation the rights to use, copy, modify, merge, publish,\r\n distribute, sublicense, and/or sell copies of the Software, and to\r\n permit persons to whom the Software is furnished to do so, subject to\r\n the following conditions:\r\n\r\n The above copyright notice and this permission notice shall be\r\n included in all copies or substantial portions of the Software.\r\n\r\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\r\n IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\r\n CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\r\n TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\r\n SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\r\n */\r\n\r\n(function (pool, math) {\r\n//\r\n// The following constants are related to IEEE 754 limits.\r\n//\r\n    var global = this,\r\n        width = 256,        // each RC4 output is 0 <= x < 256\r\n        chunks = 6,         // at least six RC4 outputs for each double\r\n        digits = 52,        // there are 52 significant digits in a double\r\n        rngname = 'random', // rngname: name for Math.random and Math.seedrandom\r\n        startdenom = math.pow(width, chunks),\r\n        significance = math.pow(2, digits),\r\n        overflow = significance * 2,\r\n        mask = width - 1,\r\n        nodecrypto;         // node.js crypto module, initialized at the bottom.\r\n\r\n//\r\n// seedrandom()\r\n// This is the seedrandom function described above.\r\n//\r\n    function seedrandom(seed, options, callback) {\r\n        var key = [];\r\n        options = (options === true) ? { entropy: true } : (options || {});\r\n\r\n        // Flatten the seed string or build one from local entropy if needed.\r\n        var shortseed = mixkey(flatten(\r\n            options.entropy ? [seed, tostring(pool)] :\r\n                (seed === null) ? autoseed() : seed, 3), key);\r\n\r\n        // Use the seed to initialize an ARC4 generator.\r\n        var arc4 = new ARC4(key);\r\n\r\n        // This function returns a random double in [0, 1) that contains\r\n        // randomness in every bit of the mantissa of the IEEE 754 value.\r\n        var prng = function() {\r\n            var n = arc4.g(chunks),             // Start with a numerator n < 2 ^ 48\r\n                d = startdenom,                 //   and denominator d = 2 ^ 48.\r\n                x = 0;                          //   and no 'extra last byte'.\r\n            while (n < significance) {          // Fill up all significant digits by\r\n                n = (n + x) * width;              //   shifting numerator and\r\n                d *= width;                       //   denominator and generating a\r\n                x = arc4.g(1);                    //   new least-significant-byte.\r\n            }\r\n            while (n >= overflow) {             // To avoid rounding up, before adding\r\n                n /= 2;                           //   last byte, shift everything\r\n                d /= 2;                           //   right using integer math until\r\n                x >>>= 1;                         //   we have exactly the desired bits.\r\n            }\r\n            return (n + x) / d;                 // Form the number within [0, 1).\r\n        };\r\n\r\n        prng.int32 = function() { return arc4.g(4) | 0; };\r\n        prng.quick = function() { return arc4.g(4) / 0x100000000; };\r\n        prng.double = prng;\r\n\r\n        // Mix the randomness into accumulated entropy.\r\n        mixkey(tostring(arc4.S), pool);\r\n\r\n        // Calling convention: what to return as a function of prng, seed, is_math.\r\n        return (options.pass || callback ||\r\n        function(prng, seed, is_math_call, state) {\r\n            if (state) {\r\n                // Load the arc4 state from the given state if it has an S array.\r\n                if (state.S) { copy(state, arc4); }\r\n                // Only provide the .state method if requested via options.state.\r\n                prng.state = function() { return copy(arc4, {}); };\r\n            }\r\n\r\n            // If called as a method of Math (Math.seedrandom()), mutate\r\n            // Math.random because that is how seedrandom.js has worked since v1.0.\r\n            if (is_math_call) { math[rngname] = prng; return seed; }\r\n\r\n            // Otherwise, it is a newer calling convention, so return the\r\n            // prng directly.\r\n            else return prng;\r\n        })(\r\n            prng,\r\n            shortseed,\r\n            'global' in options ? options.global : (this == math),\r\n            options.state);\r\n    }\r\n    math['seed' + rngname] = seedrandom;\r\n\r\n//\r\n// ARC4\r\n//\r\n// An ARC4 implementation.  The constructor takes a key in the form of\r\n// an array of at most (width) integers that should be 0 <= x < (width).\r\n//\r\n// The g(count) method returns a pseudorandom integer that concatenates\r\n// the next (count) outputs from ARC4.  Its return value is a number x\r\n// that is in the range 0 <= x < (width ^ count).\r\n//\r\n    function ARC4(key) {\r\n        var t, keylen = key.length,\r\n            me = this, i = 0, j = me.i = me.j = 0, s = me.S = [];\r\n\r\n        // The empty key [] is treated as [0].\r\n        if (!keylen) { key = [keylen++]; }\r\n\r\n        // Set up S using the standard key scheduling algorithm.\r\n        while (i < width) {\r\n            s[i] = i++;\r\n        }\r\n        for (i = 0; i < width; i++) {\r\n            s[i] = s[j = mask & (j + key[i % keylen] + (t = s[i]))];\r\n            s[j] = t;\r\n        }\r\n\r\n        // The \"g\" method returns the next (count) outputs as one number.\r\n        me.g = function(count) {\r\n            // Using instance members instead of closure state nearly doubles speed.\r\n            var t, r = 0,\r\n                i = me.i, j = me.j, s = me.S;\r\n            while (count--) {\r\n                t = s[i = mask & (i + 1)];\r\n                r = r * width + s[mask & ((s[i] = s[j = mask & (j + t)]) + (s[j] = t))];\r\n            }\r\n            me.i = i; me.j = j;\r\n            return r;\r\n            // For robust unpredictability, the function call below automatically\r\n            // discards an initial batch of values.  This is called RC4-drop[256].\r\n            // See http://google.com/search?q=rsa+fluhrer+response&btnI\r\n        };\r\n    }\r\n\r\n//\r\n// copy()\r\n// Copies internal state of ARC4 to or from a plain object.\r\n//\r\n    function copy(f, t) {\r\n        t.i = f.i;\r\n        t.j = f.j;\r\n        t.S = f.S.slice();\r\n        return t;\r\n    }\r\n\r\n//\r\n// flatten()\r\n// Converts an object tree to nested arrays of strings.\r\n//\r\n    function flatten(obj, depth) {\r\n        var result = [], typ = (typeof obj), prop;\r\n        if (depth && typ == 'object') {\r\n            for (prop in obj) {\r\n                try { result.push(flatten(obj[prop], depth - 1)); } catch (e) {}\r\n            }\r\n        }\r\n        return (result.length ? result : typ == 'string' ? obj : obj + '\\0');\r\n    }\r\n\r\n//\r\n// mixkey()\r\n// Mixes a string seed into a key that is an array of integers, and\r\n// returns a shortened string seed that is equivalent to the result key.\r\n//\r\n    function mixkey(seed, key) {\r\n        var stringseed = seed + '', smear, j = 0;\r\n        while (j < stringseed.length) {\r\n            key[mask & j] =\r\n                mask & ((smear ^= key[mask & j] * 19) + stringseed.charCodeAt(j++));\r\n        }\r\n        return tostring(key);\r\n    }\r\n\r\n//\r\n// autoseed()\r\n// Returns an object for autoseeding, using window.crypto and Node crypto\r\n// module if available.\r\n//\r\n    function autoseed() {\r\n        try {\r\n            if (nodecrypto) { return tostring(nodecrypto.randomBytes(width)); }\r\n            var out = new Uint8Array(width);\r\n            (global.crypto || global.msCrypto).getRandomValues(out);\r\n            return tostring(out);\r\n        } catch (e) {\r\n            var browser = global.navigator,\r\n                plugins = browser && browser.plugins;\r\n            return [+new Date(), global, plugins, global.screen, tostring(pool)];\r\n        }\r\n    }\r\n\r\n//\r\n// tostring()\r\n// Converts an array of charcodes to a string\r\n//\r\n    function tostring(a) {\r\n        return String.fromCharCode.apply(0, a);\r\n    }\r\n\r\n//\r\n// When seedrandom.js is loaded, we immediately mix a few bits\r\n// from the built-in RNG into the entropy pool.  Because we do\r\n// not want to interfere with deterministic PRNG state later,\r\n// seedrandom will not call math.random on its own again after\r\n// initialization.\r\n//\r\n    mixkey(math.random(), pool);\r\n\r\n//\r\n// Nodejs and AMD support: export the implementation as a module using\r\n// either convention.\r\n//\r\n\r\n// End anonymous scope, and pass initial values.\r\n})(\r\n    [],     // pool: entropy pool starts empty\r\n    BMMath    // math: package containing random, pow, and seedrandom\r\n);\r\nvar BezierFactory = (function(){\r\n    /**\r\n     * BezierEasing - use bezier curve for transition easing function\r\n     * by Gaëtan Renaudeau 2014 - 2015 – MIT License\r\n     *\r\n     * Credits: is based on Firefox's nsSMILKeySpline.cpp\r\n     * Usage:\r\n     * var spline = BezierEasing([ 0.25, 0.1, 0.25, 1.0 ])\r\n     * spline.get(x) => returns the easing value | x must be in [0, 1] range\r\n     *\r\n     */\r\n\r\n        var ob = {};\r\n    ob.getBezierEasing = getBezierEasing;\r\n    var beziers = {};\r\n\r\n    function getBezierEasing(a,b,c,d,nm){\r\n        var str = nm || ('bez_' + a+'_'+b+'_'+c+'_'+d).replace(/\\./g, 'p');\r\n        if(beziers[str]){\r\n            return beziers[str];\r\n        }\r\n        var bezEasing = new BezierEasing([a,b,c,d]);\r\n        beziers[str] = bezEasing;\r\n        return bezEasing;\r\n    }\r\n\r\n// These values are established by empiricism with tests (tradeoff: performance VS precision)\r\n    var NEWTON_ITERATIONS = 4;\r\n    var NEWTON_MIN_SLOPE = 0.001;\r\n    var SUBDIVISION_PRECISION = 0.0000001;\r\n    var SUBDIVISION_MAX_ITERATIONS = 10;\r\n\r\n    var kSplineTableSize = 11;\r\n    var kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\r\n\r\n    var float32ArraySupported = typeof Float32Array === \"function\";\r\n\r\n    function A (aA1, aA2) { return 1.0 - 3.0 * aA2 + 3.0 * aA1; }\r\n    function B (aA1, aA2) { return 3.0 * aA2 - 6.0 * aA1; }\r\n    function C (aA1)      { return 3.0 * aA1; }\r\n\r\n// Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\r\n    function calcBezier (aT, aA1, aA2) {\r\n        return ((A(aA1, aA2)*aT + B(aA1, aA2))*aT + C(aA1))*aT;\r\n    }\r\n\r\n// Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\r\n    function getSlope (aT, aA1, aA2) {\r\n        return 3.0 * A(aA1, aA2)*aT*aT + 2.0 * B(aA1, aA2) * aT + C(aA1);\r\n    }\r\n\r\n    function binarySubdivide (aX, aA, aB, mX1, mX2) {\r\n        var currentX, currentT, i = 0;\r\n        do {\r\n            currentT = aA + (aB - aA) / 2.0;\r\n            currentX = calcBezier(currentT, mX1, mX2) - aX;\r\n            if (currentX > 0.0) {\r\n                aB = currentT;\r\n            } else {\r\n                aA = currentT;\r\n            }\r\n        } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\r\n        return currentT;\r\n    }\r\n\r\n    function newtonRaphsonIterate (aX, aGuessT, mX1, mX2) {\r\n        for (var i = 0; i < NEWTON_ITERATIONS; ++i) {\r\n            var currentSlope = getSlope(aGuessT, mX1, mX2);\r\n            if (currentSlope === 0.0) return aGuessT;\r\n            var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\r\n            aGuessT -= currentX / currentSlope;\r\n        }\r\n        return aGuessT;\r\n    }\r\n\r\n    /**\r\n     * points is an array of [ mX1, mY1, mX2, mY2 ]\r\n     */\r\n    function BezierEasing (points) {\r\n        this._p = points;\r\n        this._mSampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);\r\n        this._precomputed = false;\r\n\r\n        this.get = this.get.bind(this);\r\n    }\r\n\r\n    BezierEasing.prototype = {\r\n\r\n        get: function (x) {\r\n            var mX1 = this._p[0],\r\n                mY1 = this._p[1],\r\n                mX2 = this._p[2],\r\n                mY2 = this._p[3];\r\n            if (!this._precomputed) this._precompute();\r\n            if (mX1 === mY1 && mX2 === mY2) return x; // linear\r\n            // Because JavaScript number are imprecise, we should guarantee the extremes are right.\r\n            if (x === 0) return 0;\r\n            if (x === 1) return 1;\r\n            return calcBezier(this._getTForX(x), mY1, mY2);\r\n        },\r\n\r\n        // Private part\r\n\r\n        _precompute: function () {\r\n            var mX1 = this._p[0],\r\n                mY1 = this._p[1],\r\n                mX2 = this._p[2],\r\n                mY2 = this._p[3];\r\n            this._precomputed = true;\r\n            if (mX1 !== mY1 || mX2 !== mY2)\r\n                this._calcSampleValues();\r\n        },\r\n\r\n        _calcSampleValues: function () {\r\n            var mX1 = this._p[0],\r\n                mX2 = this._p[2];\r\n            for (var i = 0; i < kSplineTableSize; ++i) {\r\n                this._mSampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * getTForX chose the fastest heuristic to determine the percentage value precisely from a given X projection.\r\n         */\r\n        _getTForX: function (aX) {\r\n            var mX1 = this._p[0],\r\n                mX2 = this._p[2],\r\n                mSampleValues = this._mSampleValues;\r\n\r\n            var intervalStart = 0.0;\r\n            var currentSample = 1;\r\n            var lastSample = kSplineTableSize - 1;\r\n\r\n            for (; currentSample !== lastSample && mSampleValues[currentSample] <= aX; ++currentSample) {\r\n                intervalStart += kSampleStepSize;\r\n            }\r\n            --currentSample;\r\n\r\n            // Interpolate to provide an initial guess for t\r\n            var dist = (aX - mSampleValues[currentSample]) / (mSampleValues[currentSample+1] - mSampleValues[currentSample]);\r\n            var guessForT = intervalStart + dist * kSampleStepSize;\r\n\r\n            var initialSlope = getSlope(guessForT, mX1, mX2);\r\n            if (initialSlope >= NEWTON_MIN_SLOPE) {\r\n                return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\r\n            } else if (initialSlope === 0.0) {\r\n                return guessForT;\r\n            } else {\r\n                return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\r\n            }\r\n        }\r\n    };\r\n\r\n    return ob;\r\n\r\n}());\r\n(function () {\r\n    var lastTime = 0;\r\n    var vendors = ['ms', 'moz', 'webkit', 'o'];\r\n    for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\r\n        window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\r\n        window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] || window[vendors[x] + 'CancelRequestAnimationFrame'];\r\n    }\r\n    if(!window.requestAnimationFrame)\r\n        window.requestAnimationFrame = function (callback, element) {\r\n            var currTime = new Date().getTime();\r\n            var timeToCall = Math.max(0, 16 - (currTime - lastTime));\r\n            var id = setTimeout(function () {\r\n                    callback(currTime + timeToCall);\r\n                },\r\n                timeToCall);\r\n            lastTime = currTime + timeToCall;\r\n            return id;\r\n        };\r\n    if(!window.cancelAnimationFrame)\r\n        window.cancelAnimationFrame = function (id) {\r\n            clearTimeout(id);\r\n        };\r\n}());\r\n\r\nfunction extendPrototype(sources,destination){\r\n    var i, len = sources.length, sourcePrototype;\r\n    for (i = 0;i < len;i += 1) {\r\n        sourcePrototype = sources[i].prototype;\r\n        for (var attr in sourcePrototype) {\r\n            if (sourcePrototype.hasOwnProperty(attr)) destination.prototype[attr] = sourcePrototype[attr];\r\n        }\r\n    }\r\n}\r\n\r\nfunction getDescriptor(object, prop) {\r\n    return Object.getOwnPropertyDescriptor(object, prop);\r\n}\r\n\r\nfunction createProxyFunction(prototype) {\r\n\tfunction ProxyFunction(){}\r\n\tProxyFunction.prototype = prototype;\r\n\treturn ProxyFunction;\r\n}\r\nfunction bezFunction(){\r\n\r\n    var easingFunctions = [];\r\n    var math = Math;\r\n\r\n    function pointOnLine2D(x1,y1, x2,y2, x3,y3){\r\n        var det1 = (x1*y2) + (y1*x3) + (x2*y3) - (x3*y2) - (y3*x1) - (x2*y1);\r\n        return det1 > -0.001 && det1 < 0.001;\r\n    }\r\n\r\n    function pointOnLine3D(x1,y1,z1, x2,y2,z2, x3,y3,z3){\r\n        if(z1 === 0 && z2 === 0 && z3 === 0) {\r\n            return pointOnLine2D(x1,y1, x2,y2, x3,y3);\r\n        }\r\n        var dist1 = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2) + Math.pow(z2 - z1, 2));\r\n        var dist2 = Math.sqrt(Math.pow(x3 - x1, 2) + Math.pow(y3 - y1, 2) + Math.pow(z3 - z1, 2));\r\n        var dist3 = Math.sqrt(Math.pow(x3 - x2, 2) + Math.pow(y3 - y2, 2) + Math.pow(z3 - z2, 2));\r\n        var diffDist;\r\n        if(dist1 > dist2){\r\n            if(dist1 > dist3){\r\n                diffDist = dist1 - dist2 - dist3;\r\n            } else {\r\n                diffDist = dist3 - dist2 - dist1;\r\n            }\r\n        } else if(dist3 > dist2){\r\n            diffDist = dist3 - dist2 - dist1;\r\n        } else {\r\n            diffDist = dist2 - dist1 - dist3;\r\n        }\r\n        return diffDist > -0.0001 && diffDist < 0.0001;\r\n    }\r\n\r\n    var getBezierLength = (function(){\r\n\r\n        return function(pt1,pt2,pt3,pt4){\r\n            var curveSegments = defaultCurveSegments;\r\n            var k;\r\n            var i, len;\r\n            var ptCoord,perc,addedLength = 0;\r\n            var ptDistance;\r\n            var point = [],lastPoint = [];\r\n            var lengthData = bezier_length_pool.newElement();\r\n            len = pt3.length;\r\n            for(k=0;k<curveSegments;k+=1){\r\n                perc = k/(curveSegments-1);\r\n                ptDistance = 0;\r\n                for(i=0;i<len;i+=1){\r\n                    ptCoord = bm_pow(1-perc,3)*pt1[i]+3*bm_pow(1-perc,2)*perc*pt3[i]+3*(1-perc)*bm_pow(perc,2)*pt4[i]+bm_pow(perc,3)*pt2[i];\r\n                    point[i] = ptCoord;\r\n                    if(lastPoint[i] !== null){\r\n                        ptDistance += bm_pow(point[i] - lastPoint[i],2);\r\n                    }\r\n                    lastPoint[i] = point[i];\r\n                }\r\n                if(ptDistance){\r\n                    ptDistance = bm_sqrt(ptDistance);\r\n                    addedLength += ptDistance;\r\n                }\r\n                lengthData.percents[k] = perc;\r\n                lengthData.lengths[k] = addedLength;\r\n            }\r\n            lengthData.addedLength = addedLength;\r\n            return lengthData;\r\n        };\r\n    }());\r\n\r\n    function getSegmentsLength(shapeData) {\r\n        var segmentsLength = segments_length_pool.newElement();\r\n        var closed = shapeData.c;\r\n        var pathV = shapeData.v;\r\n        var pathO = shapeData.o;\r\n        var pathI = shapeData.i;\r\n        var i, len = shapeData._length;\r\n        var lengths = segmentsLength.lengths;\r\n        var totalLength = 0;\r\n        for(i=0;i<len-1;i+=1){\r\n            lengths[i] = getBezierLength(pathV[i],pathV[i+1],pathO[i],pathI[i+1]);\r\n            totalLength += lengths[i].addedLength;\r\n        }\r\n        if(closed && len){\r\n            lengths[i] = getBezierLength(pathV[i],pathV[0],pathO[i],pathI[0]);\r\n            totalLength += lengths[i].addedLength;\r\n        }\r\n        segmentsLength.totalLength = totalLength;\r\n        return segmentsLength;\r\n    }\r\n\r\n    function BezierData(length){\r\n        this.segmentLength = 0;\r\n        this.points = new Array(length);\r\n    }\r\n\r\n    function PointData(partial,point){\r\n        this.partialLength = partial;\r\n        this.point = point;\r\n    }\r\n\r\n    var buildBezierData = (function(){\r\n\r\n        var storedData = {};\r\n\r\n        return function (pt1, pt2, pt3, pt4){\r\n            var bezierName = (pt1[0]+'_'+pt1[1]+'_'+pt2[0]+'_'+pt2[1]+'_'+pt3[0]+'_'+pt3[1]+'_'+pt4[0]+'_'+pt4[1]).replace(/\\./g, 'p');\r\n            if(!storedData[bezierName]){\r\n                var curveSegments = defaultCurveSegments;\r\n                var k, i, len;\r\n                var ptCoord,perc,addedLength = 0;\r\n                var ptDistance;\r\n                var point,lastPoint = null;\r\n                if (pt1.length === 2 && (pt1[0] != pt2[0] || pt1[1] != pt2[1]) && pointOnLine2D(pt1[0],pt1[1],pt2[0],pt2[1],pt1[0]+pt3[0],pt1[1]+pt3[1]) && pointOnLine2D(pt1[0],pt1[1],pt2[0],pt2[1],pt2[0]+pt4[0],pt2[1]+pt4[1])){\r\n                    curveSegments = 2;\r\n                }\r\n                var bezierData = new BezierData(curveSegments);\r\n                len = pt3.length;\r\n                for (k = 0; k < curveSegments; k += 1) {\r\n                    point = createSizedArray(len);\r\n                    perc = k / (curveSegments - 1);\r\n                    ptDistance = 0;\r\n                    for (i = 0; i < len; i += 1){\r\n                        ptCoord = bm_pow(1-perc,3)*pt1[i]+3*bm_pow(1-perc,2)*perc*(pt1[i] + pt3[i])+3*(1-perc)*bm_pow(perc,2)*(pt2[i] + pt4[i])+bm_pow(perc,3)*pt2[i];\r\n                        point[i] = ptCoord;\r\n                        if(lastPoint !== null){\r\n                            ptDistance += bm_pow(point[i] - lastPoint[i],2);\r\n                        }\r\n                    }\r\n                    ptDistance = bm_sqrt(ptDistance);\r\n                    addedLength += ptDistance;\r\n                    bezierData.points[k] = new PointData(ptDistance, point);\r\n                    lastPoint = point;\r\n                }\r\n                bezierData.segmentLength = addedLength;\r\n                storedData[bezierName] = bezierData;\r\n            }\r\n            return storedData[bezierName];\r\n        };\r\n    }());\r\n\r\n    function getDistancePerc(perc,bezierData){\r\n        var percents = bezierData.percents;\r\n        var lengths = bezierData.lengths;\r\n        var len = percents.length;\r\n        var initPos = bm_floor((len-1)*perc);\r\n        var lengthPos = perc*bezierData.addedLength;\r\n        var lPerc = 0;\r\n        if(initPos === len - 1 || initPos === 0 || lengthPos === lengths[initPos]){\r\n            return percents[initPos];\r\n        }else{\r\n            var dir = lengths[initPos] > lengthPos ? -1 : 1;\r\n            var flag = true;\r\n            while(flag){\r\n                if(lengths[initPos] <= lengthPos && lengths[initPos+1] > lengthPos){\r\n                    lPerc = (lengthPos - lengths[initPos]) / (lengths[initPos+1] - lengths[initPos]);\r\n                    flag = false;\r\n                }else{\r\n                    initPos += dir;\r\n                }\r\n                if(initPos < 0 || initPos >= len - 1){\r\n                    //FIX for TypedArrays that don't store floating point values with enough accuracy\r\n                    if(initPos === len - 1) {\r\n                        return percents[initPos];\r\n                    }\r\n                    flag = false;\r\n                }\r\n            }\r\n            return percents[initPos] + (percents[initPos+1] - percents[initPos])*lPerc;\r\n        }\r\n    }\r\n\r\n    function getPointInSegment(pt1, pt2, pt3, pt4, percent, bezierData) {\r\n        var t1 = getDistancePerc(percent,bezierData);\r\n        var u0 = 1;\r\n        var u1 = 1 - t1;\r\n        var ptX = Math.round((u1*u1*u1* pt1[0] + (t1*u1*u1 + u1*t1*u1 + u1*u1*t1)* pt3[0] + (t1*t1*u1 + u1*t1*t1 + t1*u1*t1)*pt4[0] + t1*t1*t1* pt2[0])* 1000) / 1000;\r\n        var ptY = Math.round((u1*u1*u1* pt1[1] + (t1*u1*u1 + u1*t1*u1 + u1*u1*t1)* pt3[1] + (t1*t1*u1 + u1*t1*t1 + t1*u1*t1)*pt4[1] + t1*t1*t1* pt2[1])* 1000) / 1000;\r\n        return [ptX, ptY];\r\n    }\r\n\r\n    function getSegmentArray() {\r\n\r\n    }\r\n\r\n    var bezier_segment_points = createTypedArray('float32', 8);\r\n\r\n    function getNewSegment(pt1,pt2,pt3,pt4,startPerc,endPerc, bezierData){\r\n\r\n        startPerc = startPerc < 0 ? 0 : startPerc > 1 ? 1 : startPerc;\r\n        var t0 = getDistancePerc(startPerc,bezierData);\r\n        endPerc = endPerc > 1 ? 1 : endPerc;\r\n        var t1 = getDistancePerc(endPerc,bezierData);\r\n        var i, len = pt1.length;\r\n        var u0 = 1 - t0;\r\n        var u1 = 1 - t1;\r\n        var u0u0u0 = u0*u0*u0;\r\n        var t0u0u0_3 = t0*u0*u0*3;\r\n        var t0t0u0_3 = t0*t0*u0*3;\r\n        var t0t0t0 = t0*t0*t0;\r\n        //\r\n        var u0u0u1 = u0*u0*u1;\r\n        var t0u0u1_3 = t0*u0*u1 + u0*t0*u1 + u0*u0*t1;\r\n        var t0t0u1_3 = t0*t0*u1 + u0*t0*t1 + t0*u0*t1;\r\n        var t0t0t1 = t0*t0*t1;\r\n        //\r\n        var u0u1u1 = u0*u1*u1;\r\n        var t0u1u1_3 = t0*u1*u1 + u0*t1*u1 + u0*u1*t1;\r\n        var t0t1u1_3 = t0*t1*u1 + u0*t1*t1 + t0*u1*t1;\r\n        var t0t1t1 = t0*t1*t1;\r\n        //\r\n        var u1u1u1 = u1*u1*u1;\r\n        var t1u1u1_3 = t1*u1*u1 + u1*t1*u1 + u1*u1*t1;\r\n        var t1t1u1_3 = t1*t1*u1 + u1*t1*t1 + t1*u1*t1;\r\n        var t1t1t1 = t1*t1*t1;\r\n        for(i=0;i<len;i+=1){\r\n            bezier_segment_points[i * 4] = Math.round((u0u0u0 * pt1[i] + t0u0u0_3 * pt3[i] + t0t0u0_3 * pt4[i] + t0t0t0 * pt2[i]) * 1000) / 1000;\r\n            bezier_segment_points[i * 4 + 1] = Math.round((u0u0u1 * pt1[i] + t0u0u1_3 * pt3[i] + t0t0u1_3 * pt4[i] + t0t0t1 * pt2[i]) * 1000) / 1000;\r\n            bezier_segment_points[i * 4 + 2] = Math.round((u0u1u1 * pt1[i] + t0u1u1_3 * pt3[i] + t0t1u1_3 * pt4[i] + t0t1t1 * pt2[i]) * 1000) / 1000;\r\n            bezier_segment_points[i * 4 + 3] = Math.round((u1u1u1 * pt1[i] + t1u1u1_3 * pt3[i] + t1t1u1_3 * pt4[i] + t1t1t1 * pt2[i]) * 1000) / 1000;\r\n        }\r\n\r\n        return bezier_segment_points;\r\n    }\r\n\r\n    return {\r\n        getSegmentsLength : getSegmentsLength,\r\n        getNewSegment : getNewSegment,\r\n        getPointInSegment : getPointInSegment,\r\n        buildBezierData : buildBezierData,\r\n        pointOnLine2D : pointOnLine2D,\r\n        pointOnLine3D : pointOnLine3D\r\n    };\r\n}\r\n\r\nvar bez = bezFunction();\r\nfunction dataFunctionManager(){\r\n\r\n    //var tCanvasHelper = createTag('canvas').getContext('2d');\r\n\r\n    function completeLayers(layers, comps, fontManager){\r\n        var layerData;\r\n        var animArray, lastFrame;\r\n        var i, len = layers.length;\r\n        var j, jLen, k, kLen;\r\n        for(i=0;i<len;i+=1){\r\n            layerData = layers[i];\r\n            if(!('ks' in layerData) || layerData.completed){\r\n                continue;\r\n            }\r\n            layerData.completed = true;\r\n            if(layerData.tt){\r\n                layers[i-1].td = layerData.tt;\r\n            }\r\n            animArray = [];\r\n            lastFrame = -1;\r\n            if(layerData.hasMask){\r\n                var maskProps = layerData.masksProperties;\r\n                jLen = maskProps.length;\r\n                for(j=0;j<jLen;j+=1){\r\n                    if(maskProps[j].pt.k.i){\r\n                        convertPathsToAbsoluteValues(maskProps[j].pt.k);\r\n                    }else{\r\n                        kLen = maskProps[j].pt.k.length;\r\n                        for(k=0;k<kLen;k+=1){\r\n                            if(maskProps[j].pt.k[k].s){\r\n                                convertPathsToAbsoluteValues(maskProps[j].pt.k[k].s[0]);\r\n                            }\r\n                            if(maskProps[j].pt.k[k].e){\r\n                                convertPathsToAbsoluteValues(maskProps[j].pt.k[k].e[0]);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if(layerData.ty===0){\r\n                layerData.layers = findCompLayers(layerData.refId, comps);\r\n                completeLayers(layerData.layers,comps, fontManager);\r\n            }else if(layerData.ty === 4){\r\n                completeShapes(layerData.shapes);\r\n            }else if(layerData.ty == 5){\r\n                completeText(layerData, fontManager);\r\n            }\r\n        }\r\n    }\r\n\r\n    function findCompLayers(id,comps){\r\n        var i = 0, len = comps.length;\r\n        while(i<len){\r\n            if(comps[i].id === id){\r\n                if(!comps[i].layers.__used) {\r\n                    comps[i].layers.__used = true;\r\n                    return comps[i].layers;\r\n                }\r\n                return JSON.parse(JSON.stringify(comps[i].layers));\r\n            }\r\n            i += 1;\r\n        }\r\n    }\r\n\r\n    function completeShapes(arr){\r\n        var i, len = arr.length;\r\n        var j, jLen;\r\n        var hasPaths = false;\r\n        for(i=len-1;i>=0;i-=1){\r\n            if(arr[i].ty == 'sh'){\r\n                if(arr[i].ks.k.i){\r\n                    convertPathsToAbsoluteValues(arr[i].ks.k);\r\n                }else{\r\n                    jLen = arr[i].ks.k.length;\r\n                    for(j=0;j<jLen;j+=1){\r\n                        if(arr[i].ks.k[j].s){\r\n                            convertPathsToAbsoluteValues(arr[i].ks.k[j].s[0]);\r\n                        }\r\n                        if(arr[i].ks.k[j].e){\r\n                            convertPathsToAbsoluteValues(arr[i].ks.k[j].e[0]);\r\n                        }\r\n                    }\r\n                }\r\n                hasPaths = true;\r\n            }else if(arr[i].ty == 'gr'){\r\n                completeShapes(arr[i].it);\r\n            }\r\n        }\r\n        /*if(hasPaths){\r\n            //mx: distance\r\n            //ss: sensitivity\r\n            //dc: decay\r\n            arr.splice(arr.length-1,0,{\r\n                \"ty\": \"ms\",\r\n                \"mx\":20,\r\n                \"ss\":10,\r\n                 \"dc\":0.001,\r\n                \"maxDist\":200\r\n            });\r\n        }*/\r\n    }\r\n\r\n    function convertPathsToAbsoluteValues(path){\r\n        var i, len = path.i.length;\r\n        for(i=0;i<len;i+=1){\r\n            path.i[i][0] += path.v[i][0];\r\n            path.i[i][1] += path.v[i][1];\r\n            path.o[i][0] += path.v[i][0];\r\n            path.o[i][1] += path.v[i][1];\r\n        }\r\n    }\r\n\r\n    function checkVersion(minimum,animVersionString){\r\n        var animVersion = animVersionString ? animVersionString.split('.') : [100,100,100];\r\n        if(minimum[0]>animVersion[0]){\r\n            return true;\r\n        } else if(animVersion[0] > minimum[0]){\r\n            return false;\r\n        }\r\n        if(minimum[1]>animVersion[1]){\r\n            return true;\r\n        } else if(animVersion[1] > minimum[1]){\r\n            return false;\r\n        }\r\n        if(minimum[2]>animVersion[2]){\r\n            return true;\r\n        } else if(animVersion[2] > minimum[2]){\r\n            return false;\r\n        }\r\n    }\r\n\r\n    var checkText = (function(){\r\n        var minimumVersion = [4,4,14];\r\n\r\n        function updateTextLayer(textLayer){\r\n            var documentData = textLayer.t.d;\r\n            textLayer.t.d = {\r\n                k: [\r\n                    {\r\n                        s:documentData,\r\n                        t:0\r\n                    }\r\n                ]\r\n            };\r\n        }\r\n\r\n        function iterateLayers(layers){\r\n            var i, len = layers.length;\r\n            for(i=0;i<len;i+=1){\r\n                if(layers[i].ty === 5){\r\n                    updateTextLayer(layers[i]);\r\n                }\r\n            }\r\n        }\r\n\r\n        return function (animationData){\r\n            if(checkVersion(minimumVersion,animationData.v)){\r\n                iterateLayers(animationData.layers);\r\n                if(animationData.assets){\r\n                    var i, len = animationData.assets.length;\r\n                    for(i=0;i<len;i+=1){\r\n                        if(animationData.assets[i].layers){\r\n                            iterateLayers(animationData.assets[i].layers);\r\n\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    }());\r\n\r\n    var checkChars = (function() {\r\n        var minimumVersion = [4,7,99];\r\n        return function (animationData){\r\n            if(animationData.chars && !checkVersion(minimumVersion,animationData.v)){\r\n                var i, len = animationData.chars.length, j, jLen, k, kLen;\r\n                var pathData, paths;\r\n                for(i = 0; i < len; i += 1) {\r\n                    if(animationData.chars[i].data && animationData.chars[i].data.shapes) {\r\n                        paths = animationData.chars[i].data.shapes[0].it;\r\n                        jLen = paths.length;\r\n\r\n                        for(j = 0; j < jLen; j += 1) {\r\n                            pathData = paths[j].ks.k;\r\n                            if(!pathData.__converted) {\r\n                                convertPathsToAbsoluteValues(paths[j].ks.k);\r\n                                pathData.__converted = true;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    }());\r\n\r\n    var checkColors = (function(){\r\n        var minimumVersion = [4,1,9];\r\n\r\n        function iterateShapes(shapes){\r\n            var i, len = shapes.length;\r\n            var j, jLen;\r\n            for(i=0;i<len;i+=1){\r\n                if(shapes[i].ty === 'gr'){\r\n                    iterateShapes(shapes[i].it);\r\n                }else if(shapes[i].ty === 'fl' || shapes[i].ty === 'st'){\r\n                    if(shapes[i].c.k && shapes[i].c.k[0].i){\r\n                        jLen = shapes[i].c.k.length;\r\n                        for(j=0;j<jLen;j+=1){\r\n                            if(shapes[i].c.k[j].s){\r\n                                shapes[i].c.k[j].s[0] /= 255;\r\n                                shapes[i].c.k[j].s[1] /= 255;\r\n                                shapes[i].c.k[j].s[2] /= 255;\r\n                                shapes[i].c.k[j].s[3] /= 255;\r\n                            }\r\n                            if(shapes[i].c.k[j].e){\r\n                                shapes[i].c.k[j].e[0] /= 255;\r\n                                shapes[i].c.k[j].e[1] /= 255;\r\n                                shapes[i].c.k[j].e[2] /= 255;\r\n                                shapes[i].c.k[j].e[3] /= 255;\r\n                            }\r\n                        }\r\n                    } else {\r\n                        shapes[i].c.k[0] /= 255;\r\n                        shapes[i].c.k[1] /= 255;\r\n                        shapes[i].c.k[2] /= 255;\r\n                        shapes[i].c.k[3] /= 255;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        function iterateLayers(layers){\r\n            var i, len = layers.length;\r\n            for(i=0;i<len;i+=1){\r\n                if(layers[i].ty === 4){\r\n                    iterateShapes(layers[i].shapes);\r\n                }\r\n            }\r\n        }\r\n\r\n        return function (animationData){\r\n            if(checkVersion(minimumVersion,animationData.v)){\r\n                iterateLayers(animationData.layers);\r\n                if(animationData.assets){\r\n                    var i, len = animationData.assets.length;\r\n                    for(i=0;i<len;i+=1){\r\n                        if(animationData.assets[i].layers){\r\n                            iterateLayers(animationData.assets[i].layers);\r\n\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    }());\r\n\r\n    var checkShapes = (function(){\r\n        var minimumVersion = [4,4,18];\r\n\r\n\r\n\r\n        function completeShapes(arr){\r\n            var i, len = arr.length;\r\n            var j, jLen;\r\n            var hasPaths = false;\r\n            for(i=len-1;i>=0;i-=1){\r\n                if(arr[i].ty == 'sh'){\r\n                    if(arr[i].ks.k.i){\r\n                        arr[i].ks.k.c = arr[i].closed;\r\n                    }else{\r\n                        jLen = arr[i].ks.k.length;\r\n                        for(j=0;j<jLen;j+=1){\r\n                            if(arr[i].ks.k[j].s){\r\n                                arr[i].ks.k[j].s[0].c = arr[i].closed;\r\n                            }\r\n                            if(arr[i].ks.k[j].e){\r\n                                arr[i].ks.k[j].e[0].c = arr[i].closed;\r\n                            }\r\n                        }\r\n                    }\r\n                    hasPaths = true;\r\n                }else if(arr[i].ty == 'gr'){\r\n                    completeShapes(arr[i].it);\r\n                }\r\n            }\r\n        }\r\n\r\n        function iterateLayers(layers){\r\n            var layerData;\r\n            var i, len = layers.length;\r\n            var j, jLen, k, kLen;\r\n            for(i=0;i<len;i+=1){\r\n                layerData = layers[i];\r\n                if(layerData.hasMask){\r\n                    var maskProps = layerData.masksProperties;\r\n                    jLen = maskProps.length;\r\n                    for(j=0;j<jLen;j+=1){\r\n                        if(maskProps[j].pt.k.i){\r\n                            maskProps[j].pt.k.c = maskProps[j].cl;\r\n                        }else{\r\n                            kLen = maskProps[j].pt.k.length;\r\n                            for(k=0;k<kLen;k+=1){\r\n                                if(maskProps[j].pt.k[k].s){\r\n                                    maskProps[j].pt.k[k].s[0].c = maskProps[j].cl;\r\n                                }\r\n                                if(maskProps[j].pt.k[k].e){\r\n                                    maskProps[j].pt.k[k].e[0].c = maskProps[j].cl;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                if(layerData.ty === 4){\r\n                    completeShapes(layerData.shapes);\r\n                }\r\n            }\r\n        }\r\n\r\n        return function (animationData){\r\n            if(checkVersion(minimumVersion,animationData.v)){\r\n                iterateLayers(animationData.layers);\r\n                if(animationData.assets){\r\n                    var i, len = animationData.assets.length;\r\n                    for(i=0;i<len;i+=1){\r\n                        if(animationData.assets[i].layers){\r\n                            iterateLayers(animationData.assets[i].layers);\r\n\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    }());\r\n\r\n    function completeData(animationData, fontManager){\r\n        if(animationData.__complete){\r\n            return;\r\n        }\r\n        checkColors(animationData);\r\n        checkText(animationData);\r\n        checkChars(animationData);\r\n        checkShapes(animationData);\r\n        completeLayers(animationData.layers, animationData.assets, fontManager);\r\n        animationData.__complete = true;\r\n        //blitAnimation(animationData, animationData.assets, fontManager);\r\n    }\r\n\r\n    function completeText(data, fontManager){\r\n        if(data.t.a.length === 0 && !('m' in data.t.p)){\r\n            data.singleShape = true;\r\n        }\r\n    }\r\n\r\n    var moduleOb = {};\r\n    moduleOb.completeData = completeData;\r\n    moduleOb.checkColors = checkColors;\r\n    moduleOb.checkChars = checkChars;\r\n    moduleOb.checkShapes = checkShapes;\r\n    moduleOb.completeLayers = completeLayers;\r\n\r\n    return moduleOb;\r\n}\r\n\r\nvar dataManager = dataFunctionManager();\r\n\r\nvar FontManager = (function(){\r\n\r\n    var maxWaitingTime = 5000;\r\n    var emptyChar = {\r\n        w: 0,\r\n        size:0,\r\n        shapes:[]\r\n    };\r\n    var combinedCharacters = [];\r\n    //Hindi characters\r\n    combinedCharacters = combinedCharacters.concat([2304, 2305, 2306, 2307, 2362, 2363, 2364, 2364, 2366\r\n    , 2367, 2368, 2369, 2370, 2371, 2372, 2373, 2374, 2375, 2376, 2377, 2378, 2379\r\n    , 2380, 2381, 2382, 2383, 2387, 2388, 2389, 2390, 2391, 2402, 2403]);\r\n\r\n    function setUpNode(font, family){\r\n        var parentNode = createTag('span');\r\n        parentNode.style.fontFamily    = family;\r\n        var node = createTag('span');\r\n        // Characters that vary significantly among different fonts\r\n        node.innerHTML = 'giItT1WQy@!-/#';\r\n        // Visible - so we can measure it - but not on the screen\r\n        parentNode.style.position      = 'absolute';\r\n        parentNode.style.left          = '-10000px';\r\n        parentNode.style.top           = '-10000px';\r\n        // Large font size makes even subtle changes obvious\r\n        parentNode.style.fontSize      = '300px';\r\n        // Reset any font properties\r\n        parentNode.style.fontVariant   = 'normal';\r\n        parentNode.style.fontStyle     = 'normal';\r\n        parentNode.style.fontWeight    = 'normal';\r\n        parentNode.style.letterSpacing = '0';\r\n        parentNode.appendChild(node);\r\n        document.body.appendChild(parentNode);\r\n\r\n        // Remember width with no applied web font\r\n        var width = node.offsetWidth;\r\n        node.style.fontFamily = font + ', '+family;\r\n        return {node:node, w:width, parent:parentNode};\r\n    }\r\n\r\n    function checkLoadedFonts() {\r\n        var i, len = this.fonts.length;\r\n        var node, w;\r\n        var loadedCount = len;\r\n        for(i=0;i<len; i+= 1){\r\n            if(this.fonts[i].loaded){\r\n                loadedCount -= 1;\r\n                continue;\r\n            }\r\n            if(this.fonts[i].fOrigin === 'n' || this.fonts[i].origin === 0){\r\n                this.fonts[i].loaded = true;\r\n            } else{\r\n                node = this.fonts[i].monoCase.node;\r\n                w = this.fonts[i].monoCase.w;\r\n                if(node.offsetWidth !== w){\r\n                    loadedCount -= 1;\r\n                    this.fonts[i].loaded = true;\r\n                }else{\r\n                    node = this.fonts[i].sansCase.node;\r\n                    w = this.fonts[i].sansCase.w;\r\n                    if(node.offsetWidth !== w){\r\n                        loadedCount -= 1;\r\n                        this.fonts[i].loaded = true;\r\n                    }\r\n                }\r\n                if(this.fonts[i].loaded){\r\n                    this.fonts[i].sansCase.parent.parentNode.removeChild(this.fonts[i].sansCase.parent);\r\n                    this.fonts[i].monoCase.parent.parentNode.removeChild(this.fonts[i].monoCase.parent);\r\n                }\r\n            }\r\n        }\r\n\r\n        if(loadedCount !== 0 && Date.now() - this.initTime < maxWaitingTime){\r\n            setTimeout(this.checkLoadedFonts.bind(this),20);\r\n        }else{\r\n            setTimeout(function(){this.isLoaded = true;}.bind(this),0);\r\n\r\n        }\r\n    }\r\n\r\n    function createHelper(def, fontData){\r\n        var tHelper = createNS('text');\r\n        tHelper.style.fontSize = '100px';\r\n        //tHelper.style.fontFamily = fontData.fFamily;\r\n        tHelper.setAttribute('font-family', fontData.fFamily);\r\n        tHelper.setAttribute('font-style', fontData.fStyle);\r\n        tHelper.setAttribute('font-weight', fontData.fWeight);\r\n        tHelper.textContent = '1';\r\n        if(fontData.fClass){\r\n            tHelper.style.fontFamily = 'inherit';\r\n            tHelper.setAttribute('class', fontData.fClass);\r\n        } else {\r\n            tHelper.style.fontFamily = fontData.fFamily;\r\n        }\r\n        def.appendChild(tHelper);\r\n        var tCanvasHelper = createTag('canvas').getContext('2d');\r\n        tCanvasHelper.font = fontData.fWeight + ' ' + fontData.fStyle + ' 100px '+ fontData.fFamily;\r\n        //tCanvasHelper.font = ' 100px '+ fontData.fFamily;\r\n        return tHelper;\r\n    }\r\n\r\n    function addFonts(fontData, defs){\r\n        if(!fontData){\r\n            this.isLoaded = true;\r\n            return;\r\n        }\r\n        if(this.chars){\r\n            this.isLoaded = true;\r\n            this.fonts = fontData.list;\r\n            return;\r\n        }\r\n\r\n\r\n        var fontArr = fontData.list;\r\n        var i, len = fontArr.length;\r\n        var _pendingFonts = len;\r\n        for(i=0; i<len; i+= 1){\r\n            var shouldLoadFont = true;\r\n            var loadedSelector;\r\n            var j;\r\n            fontArr[i].loaded = false;\r\n            fontArr[i].monoCase = setUpNode(fontArr[i].fFamily,'monospace');\r\n            fontArr[i].sansCase = setUpNode(fontArr[i].fFamily,'sans-serif');\r\n            if(!fontArr[i].fPath) {\r\n                fontArr[i].loaded = true;\r\n                _pendingFonts -= 1;\r\n            }else if(fontArr[i].fOrigin === 'p' || fontArr[i].origin === 3){\r\n                loadedSelector = document.querySelectorAll('style[f-forigin=\"p\"][f-family=\"'+ fontArr[i].fFamily +'\"], style[f-origin=\"3\"][f-family=\"'+ fontArr[i].fFamily +'\"]');\r\n\r\n                if (loadedSelector.length > 0) {\r\n                    shouldLoadFont = false;\r\n                }\r\n\r\n                if (shouldLoadFont) {\r\n                    var s = createTag('style');\r\n                    s.setAttribute('f-forigin', fontArr[i].fOrigin);\r\n                    s.setAttribute('f-origin', fontArr[i].origin);\r\n                    s.setAttribute('f-family', fontArr[i].fFamily);\r\n                    s.type = \"text/css\";\r\n                    s.innerHTML = \"@font-face {\" + \"font-family: \"+fontArr[i].fFamily+\"; font-style: normal; src: url('\"+fontArr[i].fPath+\"');}\";\r\n                    defs.appendChild(s);\r\n                }\r\n            } else if(fontArr[i].fOrigin === 'g' || fontArr[i].origin === 1){\r\n                loadedSelector = document.querySelectorAll('link[f-forigin=\"g\"], link[f-origin=\"1\"]');\r\n\r\n                for (j = 0; j < loadedSelector.length; j++) {\r\n                    if (loadedSelector[j].href.indexOf(fontArr[i].fPath) !== -1) {\r\n                        // Font is already loaded\r\n                        shouldLoadFont = false;\r\n                    }\r\n                }\r\n\r\n                if (shouldLoadFont) {\r\n                    var l = createTag('link');\r\n                    l.setAttribute('f-forigin', fontArr[i].fOrigin);\r\n                    l.setAttribute('f-origin', fontArr[i].origin);\r\n                    l.type = \"text/css\";\r\n                    l.rel = \"stylesheet\";\r\n                    l.href = fontArr[i].fPath;\r\n                    document.body.appendChild(l);\r\n                }\r\n            } else if(fontArr[i].fOrigin === 't' || fontArr[i].origin === 2){\r\n                loadedSelector = document.querySelectorAll('script[f-forigin=\"t\"], script[f-origin=\"2\"]');\r\n\r\n                for (j = 0; j < loadedSelector.length; j++) {\r\n                    if (fontArr[i].fPath === loadedSelector[j].src) {\r\n                        // Font is already loaded\r\n                        shouldLoadFont = false;\r\n                    }\r\n                }\r\n\r\n                if (shouldLoadFont) {\r\n                    var sc = createTag('link');\r\n                    sc.setAttribute('f-forigin', fontArr[i].fOrigin);\r\n                    sc.setAttribute('f-origin', fontArr[i].origin);\r\n                    sc.setAttribute('rel','stylesheet');\r\n                    sc.setAttribute('href',fontArr[i].fPath);\r\n                    defs.appendChild(sc);\r\n                }\r\n            }\r\n            fontArr[i].helper = createHelper(defs,fontArr[i]);\r\n            fontArr[i].cache = {};\r\n            this.fonts.push(fontArr[i]);\r\n        }\r\n        if (_pendingFonts === 0) {\r\n            this.isLoaded = true;\r\n        } else {\r\n            //On some cases even if the font is loaded, it won't load correctly when measuring text on canvas.\r\n            //Adding this timeout seems to fix it\r\n           setTimeout(this.checkLoadedFonts.bind(this), 100);\r\n        }\r\n    }\r\n\r\n    function addChars(chars){\r\n        if(!chars){\r\n            return;\r\n        }\r\n        if(!this.chars){\r\n            this.chars = [];\r\n        }\r\n        var i, len = chars.length;\r\n        var j, jLen = this.chars.length, found;\r\n        for(i=0;i<len;i+=1){\r\n            j = 0;\r\n            found = false;\r\n            while(j<jLen){\r\n                if(this.chars[j].style === chars[i].style && this.chars[j].fFamily === chars[i].fFamily && this.chars[j].ch === chars[i].ch){\r\n                    found = true;\r\n                }\r\n                j += 1;\r\n            }\r\n            if(!found){\r\n                this.chars.push(chars[i]);\r\n                jLen += 1;\r\n            }\r\n        }\r\n    }\r\n\r\n    function getCharData(char, style, font){\r\n        var i = 0, len = this.chars.length;\r\n        while( i < len) {\r\n            if(this.chars[i].ch === char && this.chars[i].style === style && this.chars[i].fFamily === font){\r\n\r\n                return this.chars[i];\r\n            }\r\n            i+= 1;\r\n        }\r\n        if((typeof char === 'string' && char.charCodeAt(0) !== 13 || !char) && console && console.warn) {\r\n            console.warn('Missing character from exported characters list: ', char, style, font);\r\n        }\r\n        return emptyChar;\r\n    }\r\n\r\n    function measureText(char, fontName, size) {\r\n        var fontData = this.getFontByName(fontName);\r\n        var index = char.charCodeAt(0);\r\n        if(!fontData.cache[index + 1]) {\r\n            var tHelper = fontData.helper;\r\n            //Canvas version\r\n            //fontData.cache[index] = tHelper.measureText(char).width / 100;\r\n            //SVG version\r\n            //console.log(tHelper.getBBox().width)\r\n            if (char === ' ') {\r\n                tHelper.textContent = '|' + char + '|';\r\n                var doubleSize = tHelper.getComputedTextLength();\r\n                tHelper.textContent = '||';\r\n                var singleSize = tHelper.getComputedTextLength();\r\n                fontData.cache[index + 1] = (doubleSize - singleSize)/100;\r\n            } else {\r\n                tHelper.textContent = char;\r\n                fontData.cache[index + 1] = (tHelper.getComputedTextLength())/100;\r\n            }\r\n        }\r\n        return fontData.cache[index + 1] * size;\r\n    }\r\n\r\n    function getFontByName(name){\r\n        var i = 0, len = this.fonts.length;\r\n        while(i<len){\r\n            if(this.fonts[i].fName === name) {\r\n                return this.fonts[i];\r\n            }\r\n            i += 1;\r\n        }\r\n        return this.fonts[0];\r\n    }\r\n\r\n    function getCombinedCharacterCodes() {\r\n        return combinedCharacters;\r\n    }\r\n\r\n    function loaded() {\r\n        return this.isLoaded;\r\n    }\r\n\r\n    var Font = function(){\r\n        this.fonts = [];\r\n        this.chars = null;\r\n        this.typekitLoaded = 0;\r\n        this.isLoaded = false;\r\n        this.initTime = Date.now();\r\n    };\r\n    //TODO: for now I'm adding these methods to the Class and not the prototype. Think of a better way to implement it. \r\n    Font.getCombinedCharacterCodes = getCombinedCharacterCodes;\r\n\r\n    Font.prototype.addChars = addChars;\r\n    Font.prototype.addFonts = addFonts;\r\n    Font.prototype.getCharData = getCharData;\r\n    Font.prototype.getFontByName = getFontByName;\r\n    Font.prototype.measureText = measureText;\r\n    Font.prototype.checkLoadedFonts = checkLoadedFonts;\r\n    Font.prototype.loaded = loaded;\r\n\r\n    return Font;\r\n\r\n}());\r\nvar PropertyFactory = (function(){\r\n\r\n    var initFrame = initialDefaultFrame;\r\n    var math_abs = Math.abs;\r\n\r\n    function interpolateValue(frameNum, caching) {\r\n        var offsetTime = this.offsetTime;\r\n        var newValue;\r\n        if (this.propType === 'multidimensional') {\r\n            newValue = createTypedArray('float32', this.pv.length);\r\n        }\r\n        var iterationIndex = caching.lastIndex;\r\n        var i = iterationIndex;\r\n        var len = this.keyframes.length - 1, flag = true;\r\n        var keyData, nextKeyData;\r\n\r\n        while (flag) {\r\n            keyData = this.keyframes[i];\r\n            nextKeyData = this.keyframes[i + 1];\r\n            if (i === len - 1 && frameNum >= nextKeyData.t - offsetTime){\r\n                if(keyData.h){\r\n                    keyData = nextKeyData;\r\n                }\r\n                iterationIndex = 0;\r\n                break;\r\n            }\r\n            if ((nextKeyData.t - offsetTime) > frameNum){\r\n                iterationIndex = i;\r\n                break;\r\n            }\r\n            if (i < len - 1){\r\n                i += 1;\r\n            } else {\r\n                iterationIndex = 0;\r\n                flag = false;\r\n            }\r\n        }\r\n\r\n        var k, kLen, perc, jLen, j, fnc;\r\n        var nextKeyTime = nextKeyData.t - offsetTime;\r\n        var keyTime = keyData.t - offsetTime;\r\n        var endValue;\r\n        if (keyData.to) {\r\n            if (!keyData.bezierData) {\r\n                keyData.bezierData = bez.buildBezierData(keyData.s, nextKeyData.s || keyData.e, keyData.to, keyData.ti);\r\n            }\r\n            var bezierData = keyData.bezierData;\r\n            if (frameNum >= nextKeyTime || frameNum < keyTime) {\r\n                var ind = frameNum >= nextKeyTime ? bezierData.points.length - 1 : 0;\r\n                kLen = bezierData.points[ind].point.length;\r\n                for (k = 0; k < kLen; k += 1) {\r\n                    newValue[k] = bezierData.points[ind].point[k];\r\n                }\r\n                // caching._lastKeyframeIndex = -1;\r\n            } else {\r\n                if (keyData.__fnct) {\r\n                    fnc = keyData.__fnct;\r\n                } else {\r\n                    fnc = BezierFactory.getBezierEasing(keyData.o.x, keyData.o.y, keyData.i.x, keyData.i.y, keyData.n).get;\r\n                    keyData.__fnct = fnc;\r\n                }\r\n                perc = fnc((frameNum - keyTime) / (nextKeyTime - keyTime));\r\n                var distanceInLine = bezierData.segmentLength*perc;\r\n\r\n                var segmentPerc;\r\n                var addedLength =  (caching.lastFrame < frameNum && caching._lastKeyframeIndex === i) ? caching._lastAddedLength : 0;\r\n                j =  (caching.lastFrame < frameNum && caching._lastKeyframeIndex === i) ? caching._lastPoint : 0;\r\n                flag = true;\r\n                jLen = bezierData.points.length;\r\n                while (flag) {\r\n                    addedLength += bezierData.points[j].partialLength;\r\n                    if (distanceInLine === 0 || perc === 0 || j === bezierData.points.length - 1) {\r\n                        kLen = bezierData.points[j].point.length;\r\n                        for (k = 0; k < kLen; k += 1) {\r\n                            newValue[k] = bezierData.points[j].point[k];\r\n                        }\r\n                        break;\r\n                    } else if (distanceInLine >= addedLength && distanceInLine < addedLength + bezierData.points[j + 1].partialLength) {\r\n                        segmentPerc = (distanceInLine - addedLength) / bezierData.points[j + 1].partialLength;\r\n                        kLen = bezierData.points[j].point.length;\r\n                        for (k = 0; k < kLen; k += 1) {\r\n                            newValue[k] = bezierData.points[j].point[k] + (bezierData.points[j + 1].point[k] - bezierData.points[j].point[k]) * segmentPerc;\r\n                        }\r\n                        break;\r\n                    }\r\n                    if (j < jLen - 1){\r\n                        j += 1;\r\n                    } else {\r\n                        flag = false;\r\n                    }\r\n                }\r\n                caching._lastPoint = j;\r\n                caching._lastAddedLength = addedLength - bezierData.points[j].partialLength;\r\n                caching._lastKeyframeIndex = i;\r\n            }\r\n        } else {\r\n            var outX, outY, inX, inY, keyValue;\r\n            len = keyData.s.length;\r\n            endValue = nextKeyData.s || keyData.e;\r\n            if (this.sh && keyData.h !== 1) {\r\n                if (frameNum >= nextKeyTime) {\r\n                    newValue[0] = endValue[0];\r\n                    newValue[1] = endValue[1];\r\n                    newValue[2] = endValue[2];\r\n                } else if (frameNum <= keyTime) {\r\n                    newValue[0] = keyData.s[0];\r\n                    newValue[1] = keyData.s[1];\r\n                    newValue[2] = keyData.s[2];\r\n                } else {\r\n                    var quatStart = createQuaternion(keyData.s);\r\n                    var quatEnd = createQuaternion(endValue);\r\n                    var time = (frameNum - keyTime) / (nextKeyTime - keyTime);\r\n                    quaternionToEuler(newValue, slerp(quatStart, quatEnd, time));\r\n                }\r\n                \r\n            } else {\r\n                for(i = 0; i < len; i += 1) {\r\n                    if (keyData.h !== 1) {\r\n                        if (frameNum >= nextKeyTime) {\r\n                            perc = 1;\r\n                        } else if(frameNum < keyTime) {\r\n                            perc = 0;\r\n                        } else {\r\n                            if(keyData.o.x.constructor === Array) {\r\n                                if (!keyData.__fnct) {\r\n                                    keyData.__fnct = [];\r\n                                }\r\n                                if (!keyData.__fnct[i]) {\r\n                                    outX = (typeof keyData.o.x[i] === 'undefined') ? keyData.o.x[0] : keyData.o.x[i];\r\n                                    outY = (typeof keyData.o.y[i] === 'undefined') ? keyData.o.y[0] : keyData.o.y[i];\r\n                                    inX = (typeof keyData.i.x[i] === 'undefined') ? keyData.i.x[0] : keyData.i.x[i];\r\n                                    inY = (typeof keyData.i.y[i] === 'undefined') ? keyData.i.y[0] : keyData.i.y[i];\r\n                                    fnc = BezierFactory.getBezierEasing(outX, outY, inX, inY).get;\r\n                                    keyData.__fnct[i] = fnc;\r\n                                } else {\r\n                                    fnc = keyData.__fnct[i];\r\n                                }\r\n                            } else {\r\n                                if (!keyData.__fnct) {\r\n                                    outX = keyData.o.x;\r\n                                    outY = keyData.o.y;\r\n                                    inX = keyData.i.x;\r\n                                    inY = keyData.i.y;\r\n                                    fnc = BezierFactory.getBezierEasing(outX, outY, inX, inY).get;\r\n                                    keyData.__fnct = fnc;\r\n                                } else {\r\n                                    fnc = keyData.__fnct;\r\n                                }\r\n                            }\r\n                            perc = fnc((frameNum - keyTime) / (nextKeyTime - keyTime ));\r\n                        }\r\n                    }\r\n\r\n                    endValue = nextKeyData.s || keyData.e;\r\n                    keyValue = keyData.h === 1 ? keyData.s[i] : keyData.s[i] + (endValue[i] - keyData.s[i]) * perc;\r\n\r\n                    if (this.propType === 'multidimensional') {\r\n                        newValue[i] = keyValue;\r\n                    } else {\r\n                        newValue = keyValue;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        caching.lastIndex = iterationIndex;\r\n        return newValue;\r\n    }\r\n\r\n    //based on @Toji's https://github.com/toji/gl-matrix/\r\n    function slerp(a, b, t) {\r\n        var out = [];\r\n        var ax = a[0], ay = a[1], az = a[2], aw = a[3],\r\n        bx = b[0], by = b[1], bz = b[2], bw = b[3]\r\n\r\n        var omega, cosom, sinom, scale0, scale1;\r\n\r\n        cosom = ax * bx + ay * by + az * bz + aw * bw;\r\n        if (cosom < 0.0) {\r\n            cosom = -cosom;\r\n            bx = -bx;\r\n            by = -by;\r\n            bz = -bz;\r\n            bw = -bw;\r\n        }\r\n        if ((1.0 - cosom) > 0.000001) {\r\n            omega = Math.acos(cosom);\r\n            sinom = Math.sin(omega);\r\n            scale0 = Math.sin((1.0 - t) * omega) / sinom;\r\n            scale1 = Math.sin(t * omega) / sinom;\r\n        } else {\r\n            scale0 = 1.0 - t;\r\n            scale1 = t;\r\n        }\r\n        out[0] = scale0 * ax + scale1 * bx;\r\n        out[1] = scale0 * ay + scale1 * by;\r\n        out[2] = scale0 * az + scale1 * bz;\r\n        out[3] = scale0 * aw + scale1 * bw;\r\n\r\n        return out;\r\n    }\r\n\r\n    function quaternionToEuler(out, quat) {\r\n        var qx = quat[0];\r\n        var qy = quat[1];\r\n        var qz = quat[2];\r\n        var qw = quat[3];\r\n        var heading = Math.atan2(2*qy*qw-2*qx*qz , 1 - 2*qy*qy - 2*qz*qz)\r\n        var attitude = Math.asin(2*qx*qy + 2*qz*qw) \r\n        var bank = Math.atan2(2*qx*qw-2*qy*qz , 1 - 2*qx*qx - 2*qz*qz);\r\n        out[0] = heading/degToRads;\r\n        out[1] = attitude/degToRads;\r\n        out[2] = bank/degToRads;\r\n    }\r\n\r\n    function createQuaternion(values) {\r\n        var heading = values[0] * degToRads;\r\n        var attitude = values[1] * degToRads;\r\n        var bank = values[2] * degToRads;\r\n        var c1 = Math.cos(heading / 2);\r\n        var c2 = Math.cos(attitude / 2);\r\n        var c3 = Math.cos(bank / 2);\r\n        var s1 = Math.sin(heading / 2);\r\n        var s2 = Math.sin(attitude / 2);\r\n        var s3 = Math.sin(bank / 2);\r\n        var w = c1 * c2 * c3 - s1 * s2 * s3;\r\n        var x = s1 * s2 * c3 + c1 * c2 * s3;\r\n        var y = s1 * c2 * c3 + c1 * s2 * s3;\r\n        var z = c1 * s2 * c3 - s1 * c2 * s3;\r\n\r\n        return [x,y,z,w];\r\n    }\r\n\r\n    function getValueAtCurrentTime(){\r\n        var frameNum = this.comp.renderedFrame - this.offsetTime;\r\n        var initTime = this.keyframes[0].t - this.offsetTime;\r\n        var endTime = this.keyframes[this.keyframes.length- 1].t-this.offsetTime;\r\n        if(!(frameNum === this._caching.lastFrame || (this._caching.lastFrame !== initFrame && ((this._caching.lastFrame >= endTime && frameNum >= endTime) || (this._caching.lastFrame < initTime && frameNum < initTime))))){\r\n            if(this._caching.lastFrame >= frameNum) {\r\n                this._caching._lastKeyframeIndex = -1;\r\n                this._caching.lastIndex = 0;\r\n            }\r\n\r\n            var renderResult = this.interpolateValue(frameNum, this._caching);\r\n            this.pv = renderResult;\r\n        }\r\n        this._caching.lastFrame = frameNum;\r\n        return this.pv;\r\n    }\r\n\r\n    function setVValue(val) {\r\n        var multipliedValue;\r\n        if(this.propType === 'unidimensional') {\r\n            multipliedValue = val * this.mult;\r\n            if(math_abs(this.v - multipliedValue) > 0.00001) {\r\n                this.v = multipliedValue;\r\n                this._mdf = true;\r\n            }\r\n        } else {\r\n            var i = 0, len = this.v.length;\r\n            while (i < len) {\r\n                multipliedValue = val[i] * this.mult;\r\n                if (math_abs(this.v[i] - multipliedValue) > 0.00001) {\r\n                    this.v[i] = multipliedValue;\r\n                    this._mdf = true;\r\n                }\r\n                i += 1;\r\n            }\r\n        }\r\n    }\r\n\r\n    function processEffectsSequence() {\r\n        if (this.elem.globalData.frameId === this.frameId || !this.effectsSequence.length) {\r\n            return;\r\n        }\r\n        if(this.lock) {\r\n            this.setVValue(this.pv);\r\n            return;\r\n        }\r\n        this.lock = true;\r\n        this._mdf = this._isFirstFrame;\r\n        var multipliedValue;\r\n        var i, len = this.effectsSequence.length;\r\n        var finalValue = this.kf ? this.pv : this.data.k;\r\n        for(i = 0; i < len; i += 1) {\r\n            finalValue = this.effectsSequence[i](finalValue);\r\n        }\r\n        this.setVValue(finalValue);\r\n        this._isFirstFrame = false;\r\n        this.lock = false;\r\n        this.frameId = this.elem.globalData.frameId;\r\n    }\r\n\r\n    function addEffect(effectFunction) {\r\n        this.effectsSequence.push(effectFunction);\r\n        this.container.addDynamicProperty(this);\r\n    }\r\n\r\n    function ValueProperty(elem, data, mult, container){\r\n        this.propType = 'unidimensional';\r\n        this.mult = mult || 1;\r\n        this.data = data;\r\n        this.v = mult ? data.k * mult : data.k;\r\n        this.pv = data.k;\r\n        this._mdf = false;\r\n        this.elem = elem;\r\n        this.container = container;\r\n        this.comp = elem.comp;\r\n        this.k = false;\r\n        this.kf = false;\r\n        this.vel = 0;\r\n        this.effectsSequence = [];\r\n        this._isFirstFrame = true;\r\n        this.getValue = processEffectsSequence;\r\n        this.setVValue = setVValue;\r\n        this.addEffect = addEffect;\r\n    }\r\n\r\n    function MultiDimensionalProperty(elem, data, mult, container) {\r\n        this.propType = 'multidimensional';\r\n        this.mult = mult || 1;\r\n        this.data = data;\r\n        this._mdf = false;\r\n        this.elem = elem;\r\n        this.container = container;\r\n        this.comp = elem.comp;\r\n        this.k = false;\r\n        this.kf = false;\r\n        this.frameId = -1;\r\n        var i, len = data.k.length;\r\n        this.v = createTypedArray('float32', len);\r\n        this.pv = createTypedArray('float32', len);\r\n        var arr = createTypedArray('float32', len);\r\n        this.vel = createTypedArray('float32', len);\r\n        for (i = 0; i < len; i += 1) {\r\n            this.v[i] = data.k[i] * this.mult;\r\n            this.pv[i] = data.k[i];\r\n        }\r\n        this._isFirstFrame = true;\r\n        this.effectsSequence = [];\r\n        this.getValue = processEffectsSequence;\r\n        this.setVValue = setVValue;\r\n        this.addEffect = addEffect;\r\n    }\r\n\r\n    function KeyframedValueProperty(elem, data, mult, container) {\r\n        this.propType = 'unidimensional';\r\n        this.keyframes = data.k;\r\n        this.offsetTime = elem.data.st;\r\n        this.frameId = -1;\r\n        this._caching = {lastFrame: initFrame, lastIndex: 0, value: 0, _lastKeyframeIndex: -1};\r\n        this.k = true;\r\n        this.kf = true;\r\n        this.data = data;\r\n        this.mult = mult || 1;\r\n        this.elem = elem;\r\n        this.container = container;\r\n        this.comp = elem.comp;\r\n        this.v = initFrame;\r\n        this.pv = initFrame;\r\n        this._isFirstFrame = true;\r\n        this.getValue = processEffectsSequence;\r\n        this.setVValue = setVValue;\r\n        this.interpolateValue = interpolateValue;\r\n        this.effectsSequence = [getValueAtCurrentTime.bind(this)];\r\n        this.addEffect = addEffect;\r\n    }\r\n\r\n    function KeyframedMultidimensionalProperty(elem, data, mult, container){\r\n        this.propType = 'multidimensional';\r\n        var i, len = data.k.length;\r\n        var s, e,to,ti;\r\n        for (i = 0; i < len - 1; i += 1) {\r\n            if (data.k[i].to && data.k[i].s && data.k[i + 1] && data.k[i + 1].s) {\r\n                s = data.k[i].s;\r\n                e = data.k[i + 1].s;\r\n                to = data.k[i].to;\r\n                ti = data.k[i].ti;\r\n                if((s.length === 2 && !(s[0] === e[0] && s[1] === e[1]) && bez.pointOnLine2D(s[0],s[1],e[0],e[1],s[0] + to[0],s[1] + to[1]) && bez.pointOnLine2D(s[0],s[1],e[0],e[1],e[0] + ti[0],e[1] + ti[1])) || (s.length === 3 && !(s[0] === e[0] && s[1] === e[1] && s[2] === e[2]) && bez.pointOnLine3D(s[0],s[1],s[2],e[0],e[1],e[2],s[0] + to[0],s[1] + to[1],s[2] + to[2]) && bez.pointOnLine3D(s[0],s[1],s[2],e[0],e[1],e[2],e[0] + ti[0],e[1] + ti[1],e[2] + ti[2]))){\r\n                    data.k[i].to = null;\r\n                    data.k[i].ti = null;\r\n                }\r\n                if(s[0] === e[0] && s[1] === e[1] && to[0] === 0 && to[1] === 0 && ti[0] === 0 && ti[1] === 0) {\r\n                    if(s.length === 2 || (s[2] === e[2] && to[2] === 0 && ti[2] === 0)) {\r\n                        data.k[i].to = null;\r\n                        data.k[i].ti = null;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.effectsSequence = [getValueAtCurrentTime.bind(this)];\r\n        this.keyframes = data.k;\r\n        this.offsetTime = elem.data.st;\r\n        this.k = true;\r\n        this.kf = true;\r\n        this._isFirstFrame = true;\r\n        this.mult = mult || 1;\r\n        this.elem = elem;\r\n        this.container = container;\r\n        this.comp = elem.comp;\r\n        this.getValue = processEffectsSequence;\r\n        this.setVValue = setVValue;\r\n        this.interpolateValue = interpolateValue;\r\n        this.frameId = -1;\r\n        var arrLen = data.k[0].s.length;\r\n        this.v = createTypedArray('float32', arrLen);\r\n        this.pv = createTypedArray('float32', arrLen);\r\n        for (i = 0; i < arrLen; i += 1) {\r\n            this.v[i] = initFrame;\r\n            this.pv[i] = initFrame;\r\n        }\r\n        this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray('float32', arrLen)};\r\n        this.addEffect = addEffect;\r\n    }\r\n\r\n    function getProp(elem,data,type, mult, container) {\r\n        var p;\r\n        if(!data.k.length){\r\n            p = new ValueProperty(elem,data, mult, container);\r\n        }else if(typeof(data.k[0]) === 'number'){\r\n            p = new MultiDimensionalProperty(elem,data, mult, container);\r\n        }else{\r\n            switch(type){\r\n                case 0:\r\n                    p = new KeyframedValueProperty(elem,data,mult, container);\r\n                    break;\r\n                case 1:\r\n                    p = new KeyframedMultidimensionalProperty(elem,data,mult, container);\r\n                    break;\r\n            }\r\n        }\r\n        if(p.effectsSequence.length){\r\n            container.addDynamicProperty(p);\r\n        }\r\n        return p;\r\n    }\r\n\r\n    var ob = {\r\n        getProp: getProp\r\n    };\r\n    return ob;\r\n}());\r\nvar TransformPropertyFactory = (function() {\r\n\r\n    var defaultVector = [0,0]\r\n\r\n    function applyToMatrix(mat) {\r\n        var _mdf = this._mdf;\r\n        this.iterateDynamicProperties();\r\n        this._mdf = this._mdf || _mdf;\r\n        if (this.a) {\r\n            mat.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]);\r\n        }\r\n        if (this.s) {\r\n            mat.scale(this.s.v[0], this.s.v[1], this.s.v[2]);\r\n        }\r\n        if (this.sk) {\r\n            mat.skewFromAxis(-this.sk.v, this.sa.v);\r\n        }\r\n        if (this.r) {\r\n            mat.rotate(-this.r.v);\r\n        } else {\r\n            mat.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]);\r\n        }\r\n        if (this.data.p.s) {\r\n            if (this.data.p.z) {\r\n                mat.translate(this.px.v, this.py.v, -this.pz.v);\r\n            } else {\r\n                mat.translate(this.px.v, this.py.v, 0);\r\n            }\r\n        } else {\r\n            mat.translate(this.p.v[0], this.p.v[1], -this.p.v[2]);\r\n        }\r\n    }\r\n    function processKeys(forceRender){\r\n        if (this.elem.globalData.frameId === this.frameId) {\r\n            return;\r\n        }\r\n        if(this._isDirty) {\r\n            this.precalculateMatrix();\r\n            this._isDirty = false;\r\n        }\r\n\r\n        this.iterateDynamicProperties();\r\n\r\n        if (this._mdf || forceRender) {\r\n            this.v.cloneFromProps(this.pre.props);\r\n            if (this.appliedTransformations < 1) {\r\n                this.v.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]);\r\n            }\r\n            if(this.appliedTransformations < 2) {\r\n                this.v.scale(this.s.v[0], this.s.v[1], this.s.v[2]);\r\n            }\r\n            if (this.sk && this.appliedTransformations < 3) {\r\n                this.v.skewFromAxis(-this.sk.v, this.sa.v);\r\n            }\r\n            if (this.r && this.appliedTransformations < 4) {\r\n                this.v.rotate(-this.r.v);\r\n            } else if (!this.r && this.appliedTransformations < 4){\r\n                this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]);\r\n            }\r\n            if (this.autoOriented) {\r\n                var v1,v2, frameRate = this.elem.globalData.frameRate;\r\n                if(this.p && this.p.keyframes && this.p.getValueAtTime) {\r\n                    if (this.p._caching.lastFrame+this.p.offsetTime <= this.p.keyframes[0].t) {\r\n                        v1 = this.p.getValueAtTime((this.p.keyframes[0].t + 0.01) / frameRate,0);\r\n                        v2 = this.p.getValueAtTime(this.p.keyframes[0].t / frameRate, 0);\r\n                    } else if(this.p._caching.lastFrame+this.p.offsetTime >= this.p.keyframes[this.p.keyframes.length - 1].t) {\r\n                        v1 = this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length - 1].t / frameRate), 0);\r\n                        v2 = this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length - 1].t - 0.05) / frameRate, 0);\r\n                    } else {\r\n                        v1 = this.p.pv;\r\n                        v2 = this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime - 0.01) / frameRate, this.p.offsetTime);\r\n                    }\r\n                } else if(this.px && this.px.keyframes && this.py.keyframes && this.px.getValueAtTime && this.py.getValueAtTime) {\r\n                    v1 = [];\r\n                    v2 = [];\r\n                    var px = this.px, py = this.py, frameRate;\r\n                    if (px._caching.lastFrame+px.offsetTime <= px.keyframes[0].t) {\r\n                        v1[0] = px.getValueAtTime((px.keyframes[0].t + 0.01) / frameRate,0);\r\n                        v1[1] = py.getValueAtTime((py.keyframes[0].t + 0.01) / frameRate,0);\r\n                        v2[0] = px.getValueAtTime((px.keyframes[0].t) / frameRate,0);\r\n                        v2[1] = py.getValueAtTime((py.keyframes[0].t) / frameRate,0);\r\n                    } else if(px._caching.lastFrame+px.offsetTime >= px.keyframes[px.keyframes.length - 1].t) {\r\n                        v1[0] = px.getValueAtTime((px.keyframes[px.keyframes.length - 1].t / frameRate),0);\r\n                        v1[1] = py.getValueAtTime((py.keyframes[py.keyframes.length - 1].t / frameRate),0);\r\n                        v2[0] = px.getValueAtTime((px.keyframes[px.keyframes.length - 1].t - 0.01) / frameRate,0);\r\n                        v2[1] = py.getValueAtTime((py.keyframes[py.keyframes.length - 1].t - 0.01) / frameRate,0);\r\n                    } else {\r\n                        v1 = [px.pv, py.pv];\r\n                        v2[0] = px.getValueAtTime((px._caching.lastFrame+px.offsetTime - 0.01) / frameRate,px.offsetTime);\r\n                        v2[1] = py.getValueAtTime((py._caching.lastFrame+py.offsetTime - 0.01) / frameRate,py.offsetTime);\r\n                    }\r\n                } else {\r\n                    v1 = v2 = defaultVector\r\n                }\r\n                this.v.rotate(-Math.atan2(v1[1] - v2[1], v1[0] - v2[0]));\r\n            }\r\n            if(this.data.p && this.data.p.s){\r\n                if(this.data.p.z) {\r\n                    this.v.translate(this.px.v, this.py.v, -this.pz.v);\r\n                } else {\r\n                    this.v.translate(this.px.v, this.py.v, 0);\r\n                }\r\n            }else{\r\n                this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2]);\r\n            }\r\n        }\r\n        this.frameId = this.elem.globalData.frameId;\r\n    }\r\n\r\n    function precalculateMatrix() {\r\n        if(!this.a.k) {\r\n            this.pre.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]);\r\n            this.appliedTransformations = 1;\r\n        } else {\r\n            return;\r\n        }\r\n        if(!this.s.effectsSequence.length) {\r\n            this.pre.scale(this.s.v[0], this.s.v[1], this.s.v[2]);\r\n            this.appliedTransformations = 2;\r\n        } else {\r\n            return;\r\n        }\r\n        if(this.sk) {\r\n            if(!this.sk.effectsSequence.length && !this.sa.effectsSequence.length) {\r\n                this.pre.skewFromAxis(-this.sk.v, this.sa.v);\r\n            this.appliedTransformations = 3;\r\n            } else {\r\n                return;\r\n            }\r\n        }\r\n        if (this.r) {\r\n            if(!this.r.effectsSequence.length) {\r\n                this.pre.rotate(-this.r.v);\r\n                this.appliedTransformations = 4;\r\n            } else {\r\n                return;\r\n            }\r\n        } else if(!this.rz.effectsSequence.length && !this.ry.effectsSequence.length && !this.rx.effectsSequence.length && !this.or.effectsSequence.length) {\r\n            this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]);\r\n            this.appliedTransformations = 4;\r\n        }\r\n    }\r\n\r\n    function autoOrient(){\r\n        //\r\n        //var prevP = this.getValueAtTime();\r\n    }\r\n\r\n    function addDynamicProperty(prop) {\r\n        this._addDynamicProperty(prop);\r\n        this.elem.addDynamicProperty(prop);\r\n        this._isDirty = true;\r\n    }\r\n\r\n    function TransformProperty(elem,data,container){\r\n        this.elem = elem;\r\n        this.frameId = -1;\r\n        this.propType = 'transform';\r\n        this.data = data;\r\n        this.v = new Matrix();\r\n        //Precalculated matrix with non animated properties\r\n        this.pre = new Matrix();\r\n        this.appliedTransformations = 0;\r\n        this.initDynamicPropertyContainer(container || elem);\r\n        if(data.p && data.p.s){\r\n            this.px = PropertyFactory.getProp(elem,data.p.x,0,0,this);\r\n            this.py = PropertyFactory.getProp(elem,data.p.y,0,0,this);\r\n            if(data.p.z){\r\n                this.pz = PropertyFactory.getProp(elem,data.p.z,0,0,this);\r\n            }\r\n        }else{\r\n            this.p = PropertyFactory.getProp(elem,data.p || {k:[0,0,0]},1,0,this);\r\n        }\r\n        if(data.rx) {\r\n            this.rx = PropertyFactory.getProp(elem, data.rx, 0, degToRads, this);\r\n            this.ry = PropertyFactory.getProp(elem, data.ry, 0, degToRads, this);\r\n            this.rz = PropertyFactory.getProp(elem, data.rz, 0, degToRads, this);\r\n            if(data.or.k[0].ti) {\r\n                var i, len = data.or.k.length;\r\n                for(i=0;i<len;i+=1) {\r\n                    data.or.k[i].to = data.or.k[i].ti = null;\r\n                }\r\n            }\r\n            this.or = PropertyFactory.getProp(elem, data.or, 1, degToRads, this);\r\n            //sh Indicates it needs to be capped between -180 and 180\r\n            this.or.sh = true;\r\n        } else {\r\n            this.r = PropertyFactory.getProp(elem, data.r || {k: 0}, 0, degToRads, this);\r\n        }\r\n        if(data.sk){\r\n            this.sk = PropertyFactory.getProp(elem, data.sk, 0, degToRads, this);\r\n            this.sa = PropertyFactory.getProp(elem, data.sa, 0, degToRads, this);\r\n        }\r\n        this.a = PropertyFactory.getProp(elem,data.a || {k:[0,0,0]},1,0,this);\r\n        this.s = PropertyFactory.getProp(elem,data.s || {k:[100,100,100]},1,0.01,this);\r\n        // Opacity is not part of the transform properties, that's why it won't use this.dynamicProperties. That way transforms won't get updated if opacity changes.\r\n        if(data.o){\r\n            this.o = PropertyFactory.getProp(elem,data.o,0,0.01,elem);\r\n        } else {\r\n            this.o = {_mdf:false,v:1};\r\n        }\r\n        this._isDirty = true;\r\n        if(!this.dynamicProperties.length){\r\n            this.getValue(true);\r\n        }\r\n    }\r\n\r\n    TransformProperty.prototype = {\r\n        applyToMatrix: applyToMatrix,\r\n        getValue: processKeys,\r\n        precalculateMatrix: precalculateMatrix,\r\n        autoOrient: autoOrient\r\n    }\r\n\r\n    extendPrototype([DynamicPropertyContainer], TransformProperty);\r\n    TransformProperty.prototype.addDynamicProperty = addDynamicProperty;\r\n    TransformProperty.prototype._addDynamicProperty = DynamicPropertyContainer.prototype.addDynamicProperty;\r\n\r\n    function getTransformProperty(elem,data,container){\r\n        return new TransformProperty(elem,data,container);\r\n    }\r\n\r\n    return {\r\n        getTransformProperty: getTransformProperty\r\n    };\r\n\r\n}());\r\nfunction ShapePath(){\r\n\tthis.c = false;\r\n\tthis._length = 0;\r\n\tthis._maxLength = 8;\r\n\tthis.v = createSizedArray(this._maxLength);\r\n\tthis.o = createSizedArray(this._maxLength);\r\n\tthis.i = createSizedArray(this._maxLength);\r\n}\r\n\r\nShapePath.prototype.setPathData = function(closed, len) {\r\n\tthis.c = closed;\r\n\tthis.setLength(len);\r\n\tvar i = 0;\r\n\twhile(i < len){\r\n\t\tthis.v[i] = point_pool.newElement();\r\n\t\tthis.o[i] = point_pool.newElement();\r\n\t\tthis.i[i] = point_pool.newElement();\r\n\t\ti += 1;\r\n\t}\r\n};\r\n\r\nShapePath.prototype.setLength = function(len) {\r\n\twhile(this._maxLength < len) {\r\n\t\tthis.doubleArrayLength();\r\n\t}\r\n\tthis._length = len;\r\n};\r\n\r\nShapePath.prototype.doubleArrayLength = function() {\r\n\tthis.v = this.v.concat(createSizedArray(this._maxLength));\r\n\tthis.i = this.i.concat(createSizedArray(this._maxLength));\r\n\tthis.o = this.o.concat(createSizedArray(this._maxLength));\r\n\tthis._maxLength *= 2;\r\n};\r\n\r\nShapePath.prototype.setXYAt = function(x, y, type, pos, replace) {\r\n\tvar arr;\r\n\tthis._length = Math.max(this._length, pos + 1);\r\n\tif(this._length >= this._maxLength) {\r\n\t\tthis.doubleArrayLength();\r\n\t}\r\n\tswitch(type){\r\n\t\tcase 'v':\r\n\t\t\tarr = this.v;\r\n\t\t\tbreak;\r\n\t\tcase 'i':\r\n\t\t\tarr = this.i;\r\n\t\t\tbreak;\r\n\t\tcase 'o':\r\n\t\t\tarr = this.o;\r\n\t\t\tbreak;\r\n\t}\r\n\tif(!arr[pos] || (arr[pos] && !replace)){\r\n\t\tarr[pos] = point_pool.newElement();\r\n\t}\r\n\tarr[pos][0] = x;\r\n\tarr[pos][1] = y;\r\n};\r\n\r\nShapePath.prototype.setTripleAt = function(vX,vY,oX,oY,iX,iY,pos, replace) {\r\n\tthis.setXYAt(vX,vY,'v',pos, replace);\r\n\tthis.setXYAt(oX,oY,'o',pos, replace);\r\n\tthis.setXYAt(iX,iY,'i',pos, replace);\r\n};\r\n\r\nShapePath.prototype.reverse = function() {\r\n\tvar newPath = new ShapePath();\r\n\tnewPath.setPathData(this.c, this._length);\r\n\tvar vertices = this.v, outPoints = this.o, inPoints = this.i;\r\n\tvar init = 0;\r\n\tif (this.c) {\r\n\t\tnewPath.setTripleAt(vertices[0][0], vertices[0][1], inPoints[0][0], inPoints[0][1], outPoints[0][0], outPoints[0][1], 0, false);\r\n        init = 1;\r\n    }\r\n    var cnt = this._length - 1;\r\n    var len = this._length;\r\n\r\n    var i;\r\n    for (i = init; i < len; i += 1) {\r\n    \tnewPath.setTripleAt(vertices[cnt][0], vertices[cnt][1], inPoints[cnt][0], inPoints[cnt][1], outPoints[cnt][0], outPoints[cnt][1], i, false);\r\n        cnt -= 1;\r\n    }\r\n    return newPath;\r\n};\r\nvar ShapePropertyFactory = (function(){\r\n\r\n    var initFrame = -999999;\r\n\r\n    function interpolateShape(frameNum, previousValue, caching) {\r\n        var iterationIndex = caching.lastIndex;\r\n        var keyPropS,keyPropE,isHold, j, k, jLen, kLen, perc, vertexValue;\r\n        var kf = this.keyframes;\r\n        if(frameNum < kf[0].t-this.offsetTime){\r\n            keyPropS = kf[0].s[0];\r\n            isHold = true;\r\n            iterationIndex = 0;\r\n        }else if(frameNum >= kf[kf.length - 1].t-this.offsetTime){\r\n            keyPropS = kf[kf.length - 1].s ? kf[kf.length - 1].s[0] : kf[kf.length - 2].e[0];\r\n            /*if(kf[kf.length - 1].s){\r\n                keyPropS = kf[kf.length - 1].s[0];\r\n            }else{\r\n                keyPropS = kf[kf.length - 2].e[0];\r\n            }*/\r\n            isHold = true;\r\n        }else{\r\n            var i = iterationIndex;\r\n            var len = kf.length- 1,flag = true,keyData,nextKeyData;\r\n            while(flag){\r\n                keyData = kf[i];\r\n                nextKeyData = kf[i+1];\r\n                if((nextKeyData.t - this.offsetTime) > frameNum){\r\n                    break;\r\n                }\r\n                if(i < len - 1){\r\n                    i += 1;\r\n                }else{\r\n                    flag = false;\r\n                }\r\n            }\r\n            isHold = keyData.h === 1;\r\n            iterationIndex = i;\r\n            if(!isHold){\r\n                if(frameNum >= nextKeyData.t-this.offsetTime){\r\n                    perc = 1;\r\n                }else if(frameNum < keyData.t-this.offsetTime){\r\n                    perc = 0;\r\n                }else{\r\n                    var fnc;\r\n                    if(keyData.__fnct){\r\n                        fnc = keyData.__fnct;\r\n                    }else{\r\n                        fnc = BezierFactory.getBezierEasing(keyData.o.x,keyData.o.y,keyData.i.x,keyData.i.y).get;\r\n                        keyData.__fnct = fnc;\r\n                    }\r\n                    perc = fnc((frameNum-(keyData.t-this.offsetTime))/((nextKeyData.t-this.offsetTime)-(keyData.t-this.offsetTime)));\r\n                }\r\n                keyPropE = nextKeyData.s ? nextKeyData.s[0] : keyData.e[0];\r\n            }\r\n            keyPropS = keyData.s[0];\r\n        }\r\n        jLen = previousValue._length;\r\n        kLen = keyPropS.i[0].length;\r\n        caching.lastIndex = iterationIndex;\r\n\r\n        for(j=0;j<jLen;j+=1){\r\n            for(k=0;k<kLen;k+=1){\r\n                vertexValue = isHold ? keyPropS.i[j][k] :  keyPropS.i[j][k]+(keyPropE.i[j][k]-keyPropS.i[j][k])*perc;\r\n                previousValue.i[j][k] = vertexValue;\r\n                vertexValue = isHold ? keyPropS.o[j][k] :  keyPropS.o[j][k]+(keyPropE.o[j][k]-keyPropS.o[j][k])*perc;\r\n                previousValue.o[j][k] = vertexValue;\r\n                vertexValue = isHold ? keyPropS.v[j][k] :  keyPropS.v[j][k]+(keyPropE.v[j][k]-keyPropS.v[j][k])*perc;\r\n                previousValue.v[j][k] = vertexValue;\r\n            }\r\n        }\r\n    }\r\n\r\n    function interpolateShapeCurrentTime(){\r\n        var frameNum = this.comp.renderedFrame - this.offsetTime;\r\n        var initTime = this.keyframes[0].t - this.offsetTime;\r\n        var endTime = this.keyframes[this.keyframes.length - 1].t - this.offsetTime;\r\n        var lastFrame = this._caching.lastFrame;\r\n        if(!(lastFrame !== initFrame && ((lastFrame < initTime && frameNum < initTime) || (lastFrame > endTime && frameNum > endTime)))){\r\n            ////\r\n            this._caching.lastIndex = lastFrame < frameNum ? this._caching.lastIndex : 0;\r\n            this.interpolateShape(frameNum, this.pv, this._caching);\r\n            ////\r\n        }\r\n        this._caching.lastFrame = frameNum;\r\n        return this.pv;\r\n    }\r\n\r\n    function resetShape(){\r\n        this.paths = this.localShapeCollection;\r\n    }\r\n\r\n    function shapesEqual(shape1, shape2) {\r\n        if(shape1._length !== shape2._length || shape1.c !== shape2.c){\r\n            return false;\r\n        }\r\n        var i, len = shape1._length;\r\n        for(i = 0; i < len; i += 1) {\r\n            if(shape1.v[i][0] !== shape2.v[i][0] \r\n            || shape1.v[i][1] !== shape2.v[i][1] \r\n            || shape1.o[i][0] !== shape2.o[i][0] \r\n            || shape1.o[i][1] !== shape2.o[i][1] \r\n            || shape1.i[i][0] !== shape2.i[i][0] \r\n            || shape1.i[i][1] !== shape2.i[i][1]) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    function setVValue(newPath) {\r\n        if(!shapesEqual(this.v, newPath)) {\r\n            this.v = shape_pool.clone(newPath);\r\n            this.localShapeCollection.releaseShapes();\r\n            this.localShapeCollection.addShape(this.v);\r\n            this._mdf = true;\r\n            this.paths = this.localShapeCollection;\r\n        }\r\n    }\r\n\r\n    function processEffectsSequence() {\r\n        if (this.elem.globalData.frameId === this.frameId) {\r\n            return;\r\n        } else if (!this.effectsSequence.length) {\r\n            this._mdf = false;\r\n            return;\r\n        }\r\n        if (this.lock) {\r\n            this.setVValue(this.pv);\r\n            return;\r\n        }\r\n        this.lock = true;\r\n        this._mdf = false;\r\n        var finalValue = this.kf ? this.pv : this.data.ks ? this.data.ks.k : this.data.pt.k;\r\n        var i, len = this.effectsSequence.length;\r\n        for(i = 0; i < len; i += 1) {\r\n            finalValue = this.effectsSequence[i](finalValue);\r\n        }\r\n        this.setVValue(finalValue);\r\n        this.lock = false;\r\n        this.frameId = this.elem.globalData.frameId;\r\n    };\r\n\r\n    function ShapeProperty(elem, data, type){\r\n        this.propType = 'shape';\r\n        this.comp = elem.comp;\r\n        this.container = elem;\r\n        this.elem = elem;\r\n        this.data = data;\r\n        this.k = false;\r\n        this.kf = false;\r\n        this._mdf = false;\r\n        var pathData = type === 3 ? data.pt.k : data.ks.k;\r\n        this.v = shape_pool.clone(pathData);\r\n        this.pv = shape_pool.clone(this.v);\r\n        this.localShapeCollection = shapeCollection_pool.newShapeCollection();\r\n        this.paths = this.localShapeCollection;\r\n        this.paths.addShape(this.v);\r\n        this.reset = resetShape;\r\n        this.effectsSequence = [];\r\n    }\r\n\r\n    function addEffect(effectFunction) {\r\n        this.effectsSequence.push(effectFunction);\r\n        this.container.addDynamicProperty(this);\r\n    }\r\n\r\n    ShapeProperty.prototype.interpolateShape = interpolateShape;\r\n    ShapeProperty.prototype.getValue = processEffectsSequence;\r\n    ShapeProperty.prototype.setVValue = setVValue;\r\n    ShapeProperty.prototype.addEffect = addEffect;\r\n\r\n    function KeyframedShapeProperty(elem,data,type){\r\n        this.propType = 'shape';\r\n        this.comp = elem.comp;\r\n        this.elem = elem;\r\n        this.container = elem;\r\n        this.offsetTime = elem.data.st;\r\n        this.keyframes = type === 3 ? data.pt.k : data.ks.k;\r\n        this.k = true;\r\n        this.kf = true;\r\n        var i, len = this.keyframes[0].s[0].i.length;\r\n        var jLen = this.keyframes[0].s[0].i[0].length;\r\n        this.v = shape_pool.newElement();\r\n        this.v.setPathData(this.keyframes[0].s[0].c, len);\r\n        this.pv = shape_pool.clone(this.v);\r\n        this.localShapeCollection = shapeCollection_pool.newShapeCollection();\r\n        this.paths = this.localShapeCollection;\r\n        this.paths.addShape(this.v);\r\n        this.lastFrame = initFrame;\r\n        this.reset = resetShape;\r\n        this._caching = {lastFrame: initFrame, lastIndex: 0};\r\n        this.effectsSequence = [interpolateShapeCurrentTime.bind(this)];\r\n    }\r\n    KeyframedShapeProperty.prototype.getValue = processEffectsSequence;\r\n    KeyframedShapeProperty.prototype.interpolateShape = interpolateShape;\r\n    KeyframedShapeProperty.prototype.setVValue = setVValue;\r\n    KeyframedShapeProperty.prototype.addEffect = addEffect;\r\n\r\n    var EllShapeProperty = (function(){\r\n\r\n        var cPoint = roundCorner;\r\n\r\n        function EllShapeProperty(elem,data) {\r\n            /*this.v = {\r\n                v: createSizedArray(4),\r\n                i: createSizedArray(4),\r\n                o: createSizedArray(4),\r\n                c: true\r\n            };*/\r\n            this.v = shape_pool.newElement();\r\n            this.v.setPathData(true, 4);\r\n            this.localShapeCollection = shapeCollection_pool.newShapeCollection();\r\n            this.paths = this.localShapeCollection;\r\n            this.localShapeCollection.addShape(this.v);\r\n            this.d = data.d;\r\n            this.elem = elem;\r\n            this.comp = elem.comp;\r\n            this.frameId = -1;\r\n            this.initDynamicPropertyContainer(elem);\r\n            this.p = PropertyFactory.getProp(elem,data.p,1,0,this);\r\n            this.s = PropertyFactory.getProp(elem,data.s,1,0,this);\r\n            if(this.dynamicProperties.length){\r\n                this.k = true;\r\n            }else{\r\n                this.k = false;\r\n                this.convertEllToPath();\r\n            }\r\n        };\r\n\r\n        EllShapeProperty.prototype = {\r\n            reset: resetShape,\r\n            getValue: function (){\r\n                if(this.elem.globalData.frameId === this.frameId){\r\n                    return;\r\n                }\r\n                this.frameId = this.elem.globalData.frameId;\r\n                this.iterateDynamicProperties();\r\n\r\n                if(this._mdf){\r\n                    this.convertEllToPath();\r\n                }\r\n            },\r\n            convertEllToPath: function() {\r\n                var p0 = this.p.v[0], p1 = this.p.v[1], s0 = this.s.v[0]/2, s1 = this.s.v[1]/2;\r\n                var _cw = this.d !== 3;\r\n                var _v = this.v;\r\n                _v.v[0][0] = p0;\r\n                _v.v[0][1] = p1 - s1;\r\n                _v.v[1][0] = _cw ? p0 + s0 : p0 - s0;\r\n                _v.v[1][1] = p1;\r\n                _v.v[2][0] = p0;\r\n                _v.v[2][1] = p1 + s1;\r\n                _v.v[3][0] = _cw ? p0 - s0 : p0 + s0;\r\n                _v.v[3][1] = p1;\r\n                _v.i[0][0] = _cw ? p0 - s0 * cPoint : p0 + s0 * cPoint;\r\n                _v.i[0][1] = p1 - s1;\r\n                _v.i[1][0] = _cw ? p0 + s0 : p0 - s0;\r\n                _v.i[1][1] = p1 - s1 * cPoint;\r\n                _v.i[2][0] = _cw ? p0 + s0 * cPoint : p0 - s0 * cPoint;\r\n                _v.i[2][1] = p1 + s1;\r\n                _v.i[3][0] = _cw ? p0 - s0 : p0 + s0;\r\n                _v.i[3][1] = p1 + s1 * cPoint;\r\n                _v.o[0][0] = _cw ? p0 + s0 * cPoint : p0 - s0 * cPoint;\r\n                _v.o[0][1] = p1 - s1;\r\n                _v.o[1][0] = _cw ? p0 + s0 : p0 - s0;\r\n                _v.o[1][1] = p1 + s1 * cPoint;\r\n                _v.o[2][0] = _cw ? p0 - s0 * cPoint : p0 + s0 * cPoint;\r\n                _v.o[2][1] = p1 + s1;\r\n                _v.o[3][0] = _cw ? p0 - s0 : p0 + s0;\r\n                _v.o[3][1] = p1 - s1 * cPoint;\r\n            }\r\n        }\r\n\r\n        extendPrototype([DynamicPropertyContainer], EllShapeProperty);\r\n\r\n        return EllShapeProperty;\r\n    }());\r\n\r\n    var StarShapeProperty = (function() {\r\n\r\n        function StarShapeProperty(elem,data) {\r\n            this.v = shape_pool.newElement();\r\n            this.v.setPathData(true, 0);\r\n            this.elem = elem;\r\n            this.comp = elem.comp;\r\n            this.data = data;\r\n            this.frameId = -1;\r\n            this.d = data.d;\r\n            this.initDynamicPropertyContainer(elem);\r\n            if(data.sy === 1){\r\n                this.ir = PropertyFactory.getProp(elem,data.ir,0,0,this);\r\n                this.is = PropertyFactory.getProp(elem,data.is,0,0.01,this);\r\n                this.convertToPath = this.convertStarToPath;\r\n            } else {\r\n                this.convertToPath = this.convertPolygonToPath;\r\n            }\r\n            this.pt = PropertyFactory.getProp(elem,data.pt,0,0,this);\r\n            this.p = PropertyFactory.getProp(elem,data.p,1,0,this);\r\n            this.r = PropertyFactory.getProp(elem,data.r,0,degToRads,this);\r\n            this.or = PropertyFactory.getProp(elem,data.or,0,0,this);\r\n            this.os = PropertyFactory.getProp(elem,data.os,0,0.01,this);\r\n            this.localShapeCollection = shapeCollection_pool.newShapeCollection();\r\n            this.localShapeCollection.addShape(this.v);\r\n            this.paths = this.localShapeCollection;\r\n            if(this.dynamicProperties.length){\r\n                this.k = true;\r\n            }else{\r\n                this.k = false;\r\n                this.convertToPath();\r\n            }\r\n        };\r\n\r\n        StarShapeProperty.prototype = {\r\n            reset: resetShape,\r\n            getValue: function() {\r\n                if(this.elem.globalData.frameId === this.frameId){\r\n                    return;\r\n                }\r\n                this.frameId = this.elem.globalData.frameId;\r\n                this.iterateDynamicProperties();\r\n                if(this._mdf){\r\n                    this.convertToPath();\r\n                }\r\n            },\r\n            convertStarToPath: function() {\r\n                var numPts = Math.floor(this.pt.v)*2;\r\n                var angle = Math.PI*2/numPts;\r\n                /*this.v.v.length = numPts;\r\n                this.v.i.length = numPts;\r\n                this.v.o.length = numPts;*/\r\n                var longFlag = true;\r\n                var longRad = this.or.v;\r\n                var shortRad = this.ir.v;\r\n                var longRound = this.os.v;\r\n                var shortRound = this.is.v;\r\n                var longPerimSegment = 2*Math.PI*longRad/(numPts*2);\r\n                var shortPerimSegment = 2*Math.PI*shortRad/(numPts*2);\r\n                var i, rad,roundness,perimSegment, currentAng = -Math.PI/ 2;\r\n                currentAng += this.r.v;\r\n                var dir = this.data.d === 3 ? -1 : 1;\r\n                this.v._length = 0;\r\n                for(i=0;i<numPts;i+=1){\r\n                    rad = longFlag ? longRad : shortRad;\r\n                    roundness = longFlag ? longRound : shortRound;\r\n                    perimSegment = longFlag ? longPerimSegment : shortPerimSegment;\r\n                    var x = rad * Math.cos(currentAng);\r\n                    var y = rad * Math.sin(currentAng);\r\n                    var ox = x === 0 && y === 0 ? 0 : y/Math.sqrt(x*x + y*y);\r\n                    var oy = x === 0 && y === 0 ? 0 : -x/Math.sqrt(x*x + y*y);\r\n                    x +=  + this.p.v[0];\r\n                    y +=  + this.p.v[1];\r\n                    this.v.setTripleAt(x,y,x-ox*perimSegment*roundness*dir,y-oy*perimSegment*roundness*dir,x+ox*perimSegment*roundness*dir,y+oy*perimSegment*roundness*dir, i, true);\r\n\r\n                    /*this.v.v[i] = [x,y];\r\n                    this.v.i[i] = [x+ox*perimSegment*roundness*dir,y+oy*perimSegment*roundness*dir];\r\n                    this.v.o[i] = [x-ox*perimSegment*roundness*dir,y-oy*perimSegment*roundness*dir];\r\n                    this.v._length = numPts;*/\r\n                    longFlag = !longFlag;\r\n                    currentAng += angle*dir;\r\n                }\r\n            },\r\n            convertPolygonToPath: function() {\r\n                var numPts = Math.floor(this.pt.v);\r\n                var angle = Math.PI*2/numPts;\r\n                var rad = this.or.v;\r\n                var roundness = this.os.v;\r\n                var perimSegment = 2*Math.PI*rad/(numPts*4);\r\n                var i, currentAng = -Math.PI/ 2;\r\n                var dir = this.data.d === 3 ? -1 : 1;\r\n                currentAng += this.r.v;\r\n                this.v._length = 0;\r\n                for(i=0;i<numPts;i+=1){\r\n                    var x = rad * Math.cos(currentAng);\r\n                    var y = rad * Math.sin(currentAng);\r\n                    var ox = x === 0 && y === 0 ? 0 : y/Math.sqrt(x*x + y*y);\r\n                    var oy = x === 0 && y === 0 ? 0 : -x/Math.sqrt(x*x + y*y);\r\n                    x +=  + this.p.v[0];\r\n                    y +=  + this.p.v[1];\r\n                    this.v.setTripleAt(x,y,x-ox*perimSegment*roundness*dir,y-oy*perimSegment*roundness*dir,x+ox*perimSegment*roundness*dir,y+oy*perimSegment*roundness*dir, i, true);\r\n                    currentAng += angle*dir;\r\n                }\r\n                this.paths.length = 0;\r\n                this.paths[0] = this.v;\r\n            }\r\n\r\n        }\r\n        extendPrototype([DynamicPropertyContainer], StarShapeProperty);\r\n\r\n        return StarShapeProperty;\r\n    }());\r\n\r\n    var RectShapeProperty = (function() {\r\n\r\n         function RectShapeProperty(elem,data) {\r\n            this.v = shape_pool.newElement();\r\n            this.v.c = true;\r\n            this.localShapeCollection = shapeCollection_pool.newShapeCollection();\r\n            this.localShapeCollection.addShape(this.v);\r\n            this.paths = this.localShapeCollection;\r\n            this.elem = elem;\r\n            this.comp = elem.comp;\r\n            this.frameId = -1;\r\n            this.d = data.d;\r\n            this.initDynamicPropertyContainer(elem);\r\n            this.p = PropertyFactory.getProp(elem,data.p,1,0,this);\r\n            this.s = PropertyFactory.getProp(elem,data.s,1,0,this);\r\n            this.r = PropertyFactory.getProp(elem,data.r,0,0,this);\r\n            if(this.dynamicProperties.length){\r\n                this.k = true;\r\n            }else{\r\n                this.k = false;\r\n                this.convertRectToPath();\r\n            }\r\n        };\r\n\r\n        RectShapeProperty.prototype = {\r\n            convertRectToPath: function (){\r\n                var p0 = this.p.v[0], p1 = this.p.v[1], v0 = this.s.v[0]/2, v1 = this.s.v[1]/2;\r\n                var round = bm_min(v0,v1,this.r.v);\r\n                var cPoint = round*(1-roundCorner);\r\n                this.v._length = 0;\r\n\r\n                if(this.d === 2 || this.d === 1) {\r\n                    this.v.setTripleAt(p0+v0, p1-v1+round,p0+v0, p1-v1+round,p0+v0,p1-v1+cPoint,0, true);\r\n                    this.v.setTripleAt(p0+v0, p1+v1-round,p0+v0, p1+v1-cPoint,p0+v0, p1+v1-round,1, true);\r\n                    if(round!== 0){\r\n                        this.v.setTripleAt(p0+v0-round, p1+v1,p0+v0-round,p1+v1,p0+v0-cPoint,p1+v1,2, true);\r\n                        this.v.setTripleAt(p0-v0+round,p1+v1,p0-v0+cPoint,p1+v1,p0-v0+round,p1+v1,3, true);\r\n                        this.v.setTripleAt(p0-v0,p1+v1-round,p0-v0,p1+v1-round,p0-v0,p1+v1-cPoint,4, true);\r\n                        this.v.setTripleAt(p0-v0,p1-v1+round,p0-v0,p1-v1+cPoint,p0-v0,p1-v1+round,5, true);\r\n                        this.v.setTripleAt(p0-v0+round,p1-v1,p0-v0+round,p1-v1,p0-v0+cPoint,p1-v1,6, true);\r\n                        this.v.setTripleAt(p0+v0-round,p1-v1,p0+v0-cPoint,p1-v1,p0+v0-round,p1-v1,7, true);\r\n                    } else {\r\n                        this.v.setTripleAt(p0-v0,p1+v1,p0-v0+cPoint,p1+v1,p0-v0,p1+v1,2);\r\n                        this.v.setTripleAt(p0-v0,p1-v1,p0-v0,p1-v1+cPoint,p0-v0,p1-v1,3);\r\n                    }\r\n                }else{\r\n                    this.v.setTripleAt(p0+v0,p1-v1+round,p0+v0,p1-v1+cPoint,p0+v0,p1-v1+round,0, true);\r\n                    if(round!== 0){\r\n                        this.v.setTripleAt(p0+v0-round,p1-v1,p0+v0-round,p1-v1,p0+v0-cPoint,p1-v1,1, true);\r\n                        this.v.setTripleAt(p0-v0+round,p1-v1,p0-v0+cPoint,p1-v1,p0-v0+round,p1-v1,2, true);\r\n                        this.v.setTripleAt(p0-v0,p1-v1+round,p0-v0,p1-v1+round,p0-v0,p1-v1+cPoint,3, true);\r\n                        this.v.setTripleAt(p0-v0,p1+v1-round,p0-v0,p1+v1-cPoint,p0-v0,p1+v1-round,4, true);\r\n                        this.v.setTripleAt(p0-v0+round,p1+v1,p0-v0+round,p1+v1,p0-v0+cPoint,p1+v1,5, true);\r\n                        this.v.setTripleAt(p0+v0-round,p1+v1,p0+v0-cPoint,p1+v1,p0+v0-round,p1+v1,6, true);\r\n                        this.v.setTripleAt(p0+v0,p1+v1-round,p0+v0,p1+v1-round,p0+v0,p1+v1-cPoint,7, true);\r\n                    } else {\r\n                        this.v.setTripleAt(p0-v0,p1-v1,p0-v0+cPoint,p1-v1,p0-v0,p1-v1,1, true);\r\n                        this.v.setTripleAt(p0-v0,p1+v1,p0-v0,p1+v1-cPoint,p0-v0,p1+v1,2, true);\r\n                        this.v.setTripleAt(p0+v0,p1+v1,p0+v0-cPoint,p1+v1,p0+v0,p1+v1,3, true);\r\n\r\n                    }\r\n                }\r\n            },\r\n            getValue: function(frameNum){\r\n                if(this.elem.globalData.frameId === this.frameId){\r\n                    return;\r\n                }\r\n                this.frameId = this.elem.globalData.frameId;\r\n                this.iterateDynamicProperties();\r\n                if(this._mdf){\r\n                    this.convertRectToPath();\r\n                }\r\n\r\n            },\r\n            reset: resetShape\r\n        }\r\n        extendPrototype([DynamicPropertyContainer], RectShapeProperty);\r\n\r\n        return RectShapeProperty;\r\n    }());\r\n\r\n    function getShapeProp(elem,data,type){\r\n        var prop;\r\n        if(type === 3 || type === 4){\r\n            var dataProp = type === 3 ? data.pt : data.ks;\r\n            var keys = dataProp.k;\r\n            if(keys.length){\r\n                prop = new KeyframedShapeProperty(elem, data, type);\r\n            }else{\r\n                prop = new ShapeProperty(elem, data, type);\r\n            }\r\n        }else if(type === 5){\r\n            prop = new RectShapeProperty(elem, data);\r\n        }else if(type === 6){\r\n            prop = new EllShapeProperty(elem, data);\r\n        }else if(type === 7){\r\n            prop = new StarShapeProperty(elem, data);\r\n        }\r\n        if(prop.k){\r\n            elem.addDynamicProperty(prop);\r\n        }\r\n        return prop;\r\n    }\r\n\r\n    function getConstructorFunction() {\r\n        return ShapeProperty;\r\n    }\r\n\r\n    function getKeyframedConstructorFunction() {\r\n        return KeyframedShapeProperty;\r\n    }\r\n\r\n    var ob = {};\r\n    ob.getShapeProp = getShapeProp;\r\n    ob.getConstructorFunction = getConstructorFunction;\r\n    ob.getKeyframedConstructorFunction = getKeyframedConstructorFunction;\r\n    return ob;\r\n}());\r\nvar ShapeModifiers = (function(){\r\n    var ob = {};\r\n    var modifiers = {};\r\n    ob.registerModifier = registerModifier;\r\n    ob.getModifier = getModifier;\r\n\r\n    function registerModifier(nm,factory){\r\n        if(!modifiers[nm]){\r\n            modifiers[nm] = factory;\r\n        }\r\n    }\r\n\r\n    function getModifier(nm,elem, data){\r\n        return new modifiers[nm](elem, data);\r\n    }\r\n\r\n    return ob;\r\n}());\r\n\r\nfunction ShapeModifier(){}\r\nShapeModifier.prototype.initModifierProperties = function(){};\r\nShapeModifier.prototype.addShapeToModifier = function(){};\r\nShapeModifier.prototype.addShape = function(data){\r\n    if (!this.closed) {\r\n        // Adding shape to dynamic properties. It covers the case where a shape has no effects applied, to reset it's _mdf state on every tick.\r\n        data.sh.container.addDynamicProperty(data.sh);\r\n        var shapeData = {shape:data.sh, data: data, localShapeCollection:shapeCollection_pool.newShapeCollection()};\r\n        this.shapes.push(shapeData);\r\n        this.addShapeToModifier(shapeData);\r\n        if (this._isAnimated) {\r\n            data.setAsAnimated();\r\n        }\r\n    }\r\n};\r\nShapeModifier.prototype.init = function(elem,data){\r\n    this.shapes = [];\r\n    this.elem = elem;\r\n    this.initDynamicPropertyContainer(elem);\r\n    this.initModifierProperties(elem,data);\r\n    this.frameId = initialDefaultFrame;\r\n    this.closed = false;\r\n    this.k = false;\r\n    if(this.dynamicProperties.length){\r\n        this.k = true;\r\n    }else{\r\n        this.getValue(true);\r\n    }\r\n};\r\nShapeModifier.prototype.processKeys = function(){\r\n    if(this.elem.globalData.frameId === this.frameId){\r\n        return;\r\n    }\r\n    this.frameId = this.elem.globalData.frameId;\r\n    this.iterateDynamicProperties();\r\n};\r\n\r\nextendPrototype([DynamicPropertyContainer], ShapeModifier);\r\nfunction TrimModifier(){\r\n}\r\nextendPrototype([ShapeModifier], TrimModifier);\r\nTrimModifier.prototype.initModifierProperties = function(elem, data) {\r\n    this.s = PropertyFactory.getProp(elem, data.s, 0, 0.01, this);\r\n    this.e = PropertyFactory.getProp(elem, data.e, 0, 0.01, this);\r\n    this.o = PropertyFactory.getProp(elem, data.o, 0, 0, this);\r\n    this.sValue = 0;\r\n    this.eValue = 0;\r\n    this.getValue = this.processKeys;\r\n    this.m = data.m;\r\n    this._isAnimated = !!this.s.effectsSequence.length || !!this.e.effectsSequence.length || !!this.o.effectsSequence.length;\r\n};\r\n\r\nTrimModifier.prototype.addShapeToModifier = function(shapeData){\r\n    shapeData.pathsData = [];\r\n};\r\n\r\nTrimModifier.prototype.calculateShapeEdges = function(s, e, shapeLength, addedLength, totalModifierLength) {\r\n    var segments = [];\r\n    if (e <= 1) {\r\n        segments.push({\r\n            s: s,\r\n            e: e\r\n        });\r\n    } else if (s >= 1) {\r\n        segments.push({\r\n            s: s - 1,\r\n            e: e - 1\r\n        });\r\n    } else {\r\n        segments.push({\r\n            s: s,\r\n            e: 1\r\n        });\r\n        segments.push({\r\n            s: 0,\r\n            e: e - 1\r\n        });\r\n    }\r\n    var shapeSegments = [];\r\n    var i, len = segments.length, segmentOb;\r\n    for (i = 0; i < len; i += 1) {\r\n        segmentOb = segments[i];\r\n        if (segmentOb.e * totalModifierLength < addedLength || segmentOb.s * totalModifierLength > addedLength + shapeLength) {\r\n            \r\n        } else {\r\n            var shapeS, shapeE;\r\n            if (segmentOb.s * totalModifierLength <= addedLength) {\r\n                shapeS = 0;\r\n            } else {\r\n                shapeS = (segmentOb.s * totalModifierLength - addedLength) / shapeLength;\r\n            }\r\n            if(segmentOb.e * totalModifierLength >= addedLength + shapeLength) {\r\n                shapeE = 1;\r\n            } else {\r\n                shapeE = ((segmentOb.e * totalModifierLength - addedLength) / shapeLength);\r\n            }\r\n            shapeSegments.push([shapeS, shapeE]);\r\n        }\r\n    }\r\n    if (!shapeSegments.length) {\r\n        shapeSegments.push([0, 0]);\r\n    }\r\n    return shapeSegments;\r\n};\r\n\r\nTrimModifier.prototype.releasePathsData = function(pathsData) {\r\n    var i, len = pathsData.length;\r\n    for (i = 0; i < len; i += 1) {\r\n        segments_length_pool.release(pathsData[i]);\r\n    }\r\n    pathsData.length = 0;\r\n    return pathsData;\r\n};\r\n\r\nTrimModifier.prototype.processShapes = function(_isFirstFrame) {\r\n    var s, e;\r\n    if (this._mdf || _isFirstFrame) {\r\n        var o = (this.o.v % 360) / 360;\r\n        if (o < 0) {\r\n            o += 1;\r\n        }\r\n        s = (this.s.v > 1 ? 1 : this.s.v < 0 ? 0 : this.s.v) + o;\r\n        e = (this.e.v > 1 ? 1 : this.e.v < 0 ? 0 : this.e.v) + o;\r\n        if (s === e) {\r\n\r\n        }\r\n        if (s > e) {\r\n            var _s = s;\r\n            s = e;\r\n            e = _s;\r\n        }\r\n        s = Math.round(s * 10000) * 0.0001;\r\n        e = Math.round(e * 10000) * 0.0001;\r\n        this.sValue = s;\r\n        this.eValue = e;\r\n    } else {\r\n        s = this.sValue;\r\n        e = this.eValue;\r\n    }\r\n    var shapePaths;\r\n    var i, len = this.shapes.length, j, jLen;\r\n    var pathsData, pathData, totalShapeLength, totalModifierLength = 0;\r\n\r\n    if (e === s) {\r\n        for (i = 0; i < len; i += 1) {\r\n            this.shapes[i].localShapeCollection.releaseShapes();\r\n            this.shapes[i].shape._mdf = true;\r\n            this.shapes[i].shape.paths = this.shapes[i].localShapeCollection;\r\n        }\r\n    } else if (!((e === 1 && s === 0) || (e===0 && s === 1))){\r\n        var segments = [], shapeData, localShapeCollection;\r\n        for (i = 0; i < len; i += 1) {\r\n            shapeData = this.shapes[i];\r\n            // if shape hasn't changed and trim properties haven't changed, cached previous path can be used\r\n            if (!shapeData.shape._mdf && !this._mdf && !_isFirstFrame && this.m !== 2) {\r\n                shapeData.shape.paths = shapeData.localShapeCollection;\r\n            } else {\r\n                shapePaths = shapeData.shape.paths;\r\n                jLen = shapePaths._length;\r\n                totalShapeLength = 0;\r\n                if (!shapeData.shape._mdf && shapeData.pathsData.length) {\r\n                    totalShapeLength = shapeData.totalShapeLength;\r\n                } else {\r\n                    pathsData = this.releasePathsData(shapeData.pathsData);\r\n                    for (j = 0; j < jLen; j += 1) {\r\n                        pathData = bez.getSegmentsLength(shapePaths.shapes[j]);\r\n                        pathsData.push(pathData);\r\n                        totalShapeLength += pathData.totalLength;\r\n                    }\r\n                    shapeData.totalShapeLength = totalShapeLength;\r\n                    shapeData.pathsData = pathsData;\r\n                }\r\n\r\n                totalModifierLength += totalShapeLength;\r\n                shapeData.shape._mdf = true;\r\n            }\r\n        }\r\n        var shapeS = s, shapeE = e, addedLength = 0, edges;\r\n        for (i = len - 1; i >= 0; i -= 1) {\r\n            shapeData = this.shapes[i];\r\n            if (shapeData.shape._mdf) {\r\n                localShapeCollection = shapeData.localShapeCollection;\r\n                localShapeCollection.releaseShapes();\r\n                //if m === 2 means paths are trimmed individually so edges need to be found for this specific shape relative to whoel group\r\n                if (this.m === 2 && len > 1) {\r\n                    edges = this.calculateShapeEdges(s, e, shapeData.totalShapeLength, addedLength, totalModifierLength);\r\n                    addedLength += shapeData.totalShapeLength;\r\n                } else {\r\n                    edges = [[shapeS, shapeE]];\r\n                }\r\n                jLen = edges.length;\r\n                for (j = 0; j < jLen; j += 1) {\r\n                    shapeS = edges[j][0];\r\n                    shapeE = edges[j][1];\r\n                    segments.length = 0;\r\n                    if (shapeE <= 1) {\r\n                        segments.push({\r\n                            s:shapeData.totalShapeLength * shapeS,\r\n                            e:shapeData.totalShapeLength * shapeE\r\n                        });\r\n                    } else if (shapeS >= 1) {\r\n                        segments.push({\r\n                            s:shapeData.totalShapeLength * (shapeS - 1),\r\n                            e:shapeData.totalShapeLength * (shapeE - 1)\r\n                        });\r\n                    } else {\r\n                        segments.push({\r\n                            s:shapeData.totalShapeLength * shapeS,\r\n                            e:shapeData.totalShapeLength\r\n                        });\r\n                        segments.push({\r\n                            s:0,\r\n                            e:shapeData.totalShapeLength * (shapeE - 1)\r\n                        });\r\n                    }\r\n                    var newShapesData = this.addShapes(shapeData,segments[0]);\r\n                    if (segments[0].s !== segments[0].e) {\r\n                        if (segments.length > 1) {\r\n                            var lastShapeInCollection = shapeData.shape.paths.shapes[shapeData.shape.paths._length - 1];\r\n                            if (lastShapeInCollection.c) {\r\n                                var lastShape = newShapesData.pop();\r\n                                this.addPaths(newShapesData, localShapeCollection);\r\n                                newShapesData = this.addShapes(shapeData, segments[1], lastShape);\r\n                            } else {\r\n                                this.addPaths(newShapesData, localShapeCollection);\r\n                                newShapesData = this.addShapes(shapeData, segments[1]);\r\n                            }\r\n                        } \r\n                        this.addPaths(newShapesData, localShapeCollection);\r\n                    }\r\n                    \r\n                }\r\n                shapeData.shape.paths = localShapeCollection;\r\n            }\r\n        }\r\n    } else if (this._mdf) {\r\n        for (i = 0; i < len; i += 1) {\r\n            //Releasign Trim Cached paths data when no trim applied in case shapes are modified inbetween.\r\n            //Don't remove this even if it's losing cached info.\r\n            this.shapes[i].pathsData.length = 0;\r\n            this.shapes[i].shape._mdf = true;\r\n        }\r\n    }\r\n};\r\n\r\nTrimModifier.prototype.addPaths = function(newPaths, localShapeCollection) {\r\n    var i, len = newPaths.length;\r\n    for (i = 0; i < len; i += 1) {\r\n        localShapeCollection.addShape(newPaths[i]);\r\n    }\r\n};\r\n\r\nTrimModifier.prototype.addSegment = function(pt1, pt2, pt3, pt4, shapePath, pos, newShape) {\r\n    shapePath.setXYAt(pt2[0], pt2[1], 'o', pos);\r\n    shapePath.setXYAt(pt3[0], pt3[1], 'i', pos + 1);\r\n    if(newShape){\r\n        shapePath.setXYAt(pt1[0], pt1[1], 'v', pos);\r\n    }\r\n    shapePath.setXYAt(pt4[0], pt4[1], 'v', pos + 1);\r\n};\r\n\r\nTrimModifier.prototype.addSegmentFromArray = function(points, shapePath, pos, newShape) {\r\n    shapePath.setXYAt(points[1], points[5], 'o', pos);\r\n    shapePath.setXYAt(points[2], points[6], 'i', pos + 1);\r\n    if(newShape){\r\n        shapePath.setXYAt(points[0], points[4], 'v', pos);\r\n    }\r\n    shapePath.setXYAt(points[3], points[7], 'v', pos + 1);\r\n};\r\n\r\nTrimModifier.prototype.addShapes = function(shapeData, shapeSegment, shapePath) {\r\n    var pathsData = shapeData.pathsData;\r\n    var shapePaths = shapeData.shape.paths.shapes;\r\n    var i, len = shapeData.shape.paths._length, j, jLen;\r\n    var addedLength = 0;\r\n    var currentLengthData,segmentCount;\r\n    var lengths;\r\n    var segment;\r\n    var shapes = [];\r\n    var initPos;\r\n    var newShape = true;\r\n    if (!shapePath) {\r\n        shapePath = shape_pool.newElement();\r\n        segmentCount = 0;\r\n        initPos = 0;\r\n    } else {\r\n        segmentCount = shapePath._length;\r\n        initPos = shapePath._length;\r\n    }\r\n    shapes.push(shapePath);\r\n    for (i = 0; i < len; i += 1) {\r\n        lengths = pathsData[i].lengths;\r\n        shapePath.c = shapePaths[i].c;\r\n        jLen = shapePaths[i].c ? lengths.length : lengths.length + 1;\r\n        for (j = 1; j < jLen; j +=1) {\r\n            currentLengthData = lengths[j-1];\r\n            if (addedLength + currentLengthData.addedLength < shapeSegment.s) {\r\n                addedLength += currentLengthData.addedLength;\r\n                shapePath.c = false;\r\n            } else if(addedLength > shapeSegment.e) {\r\n                shapePath.c = false;\r\n                break;\r\n            } else {\r\n                if (shapeSegment.s <= addedLength && shapeSegment.e >= addedLength + currentLengthData.addedLength) {\r\n                    this.addSegment(shapePaths[i].v[j - 1], shapePaths[i].o[j - 1], shapePaths[i].i[j], shapePaths[i].v[j], shapePath, segmentCount, newShape);\r\n                    newShape = false;\r\n                } else {\r\n                    segment = bez.getNewSegment(shapePaths[i].v[j - 1], shapePaths[i].v[j], shapePaths[i].o[j - 1], shapePaths[i].i[j], (shapeSegment.s - addedLength)/currentLengthData.addedLength,(shapeSegment.e - addedLength)/currentLengthData.addedLength, lengths[j-1]);\r\n                    this.addSegmentFromArray(segment, shapePath, segmentCount, newShape);\r\n                    // this.addSegment(segment.pt1, segment.pt3, segment.pt4, segment.pt2, shapePath, segmentCount, newShape);\r\n                    newShape = false;\r\n                    shapePath.c = false;\r\n                }\r\n                addedLength += currentLengthData.addedLength;\r\n                segmentCount += 1;\r\n            }\r\n        }\r\n        if (shapePaths[i].c && lengths.length) {\r\n            currentLengthData = lengths[j - 1];\r\n            if (addedLength <= shapeSegment.e) {\r\n                var segmentLength = lengths[j - 1].addedLength;\r\n                if (shapeSegment.s <= addedLength && shapeSegment.e >= addedLength + segmentLength) {\r\n                    this.addSegment(shapePaths[i].v[j - 1], shapePaths[i].o[j - 1], shapePaths[i].i[0], shapePaths[i].v[0], shapePath, segmentCount, newShape);\r\n                    newShape = false;\r\n                } else {\r\n                    segment = bez.getNewSegment(shapePaths[i].v[j - 1], shapePaths[i].v[0], shapePaths[i].o[j - 1], shapePaths[i].i[0], (shapeSegment.s - addedLength) / segmentLength, (shapeSegment.e - addedLength) / segmentLength, lengths[j - 1]);\r\n                    this.addSegmentFromArray(segment, shapePath, segmentCount, newShape);\r\n                    // this.addSegment(segment.pt1, segment.pt3, segment.pt4, segment.pt2, shapePath, segmentCount, newShape);\r\n                    newShape = false;\r\n                    shapePath.c = false;\r\n                }\r\n            } else {\r\n                shapePath.c = false;\r\n            }\r\n            addedLength += currentLengthData.addedLength;\r\n            segmentCount += 1;\r\n        }\r\n        if (shapePath._length) {\r\n            shapePath.setXYAt(shapePath.v[initPos][0], shapePath.v[initPos][1], 'i', initPos);\r\n            shapePath.setXYAt(shapePath.v[shapePath._length - 1][0], shapePath.v[shapePath._length - 1][1],'o', shapePath._length - 1);\r\n        }\r\n        if (addedLength > shapeSegment.e) {\r\n            break;\r\n        }\r\n        if (i < len - 1) {\r\n            shapePath = shape_pool.newElement();\r\n            newShape = true;\r\n            shapes.push(shapePath);\r\n            segmentCount = 0;\r\n        }\r\n    }\r\n    return shapes;\r\n};\r\n\r\n\r\nShapeModifiers.registerModifier('tm', TrimModifier);\r\nfunction RoundCornersModifier(){}\r\nextendPrototype([ShapeModifier],RoundCornersModifier);\r\nRoundCornersModifier.prototype.initModifierProperties = function(elem,data){\r\n    this.getValue = this.processKeys;\r\n    this.rd = PropertyFactory.getProp(elem,data.r,0,null,this);\r\n    this._isAnimated = !!this.rd.effectsSequence.length;\r\n};\r\n\r\nRoundCornersModifier.prototype.processPath = function(path, round){\r\n    var cloned_path = shape_pool.newElement();\r\n    cloned_path.c = path.c;\r\n    var i, len = path._length;\r\n    var currentV,currentI,currentO,closerV, newV,newO,newI,distance,newPosPerc,index = 0;\r\n    var vX,vY,oX,oY,iX,iY;\r\n    for(i=0;i<len;i+=1){\r\n        currentV = path.v[i];\r\n        currentO = path.o[i];\r\n        currentI = path.i[i];\r\n        if(currentV[0]===currentO[0] && currentV[1]===currentO[1] && currentV[0]===currentI[0] && currentV[1]===currentI[1]){\r\n            if((i===0 || i === len - 1) && !path.c){\r\n                cloned_path.setTripleAt(currentV[0],currentV[1],currentO[0],currentO[1],currentI[0],currentI[1],index);\r\n                /*cloned_path.v[index] = currentV;\r\n                cloned_path.o[index] = currentO;\r\n                cloned_path.i[index] = currentI;*/\r\n                index += 1;\r\n            } else {\r\n                if(i===0){\r\n                    closerV = path.v[len-1];\r\n                } else {\r\n                    closerV = path.v[i-1];\r\n                }\r\n                distance = Math.sqrt(Math.pow(currentV[0]-closerV[0],2)+Math.pow(currentV[1]-closerV[1],2));\r\n                newPosPerc = distance ? Math.min(distance/2,round)/distance : 0;\r\n                vX = iX = currentV[0]+(closerV[0]-currentV[0])*newPosPerc;\r\n                vY = iY = currentV[1]-(currentV[1]-closerV[1])*newPosPerc;\r\n                oX = vX-(vX-currentV[0])*roundCorner;\r\n                oY = vY-(vY-currentV[1])*roundCorner;\r\n                cloned_path.setTripleAt(vX,vY,oX,oY,iX,iY,index);\r\n                index += 1;\r\n\r\n                if(i === len - 1){\r\n                    closerV = path.v[0];\r\n                } else {\r\n                    closerV = path.v[i+1];\r\n                }\r\n                distance = Math.sqrt(Math.pow(currentV[0]-closerV[0],2)+Math.pow(currentV[1]-closerV[1],2));\r\n                newPosPerc = distance ? Math.min(distance/2,round)/distance : 0;\r\n                vX = oX = currentV[0]+(closerV[0]-currentV[0])*newPosPerc;\r\n                vY = oY = currentV[1]+(closerV[1]-currentV[1])*newPosPerc;\r\n                iX = vX-(vX-currentV[0])*roundCorner;\r\n                iY = vY-(vY-currentV[1])*roundCorner;\r\n                cloned_path.setTripleAt(vX,vY,oX,oY,iX,iY,index);\r\n                index += 1;\r\n            }\r\n        } else {\r\n            cloned_path.setTripleAt(path.v[i][0],path.v[i][1],path.o[i][0],path.o[i][1],path.i[i][0],path.i[i][1],index);\r\n            index += 1;\r\n        }\r\n    }\r\n    return cloned_path;\r\n};\r\n\r\nRoundCornersModifier.prototype.processShapes = function(_isFirstFrame){\r\n    var shapePaths;\r\n    var i, len = this.shapes.length;\r\n    var j, jLen;\r\n    var rd = this.rd.v;\r\n\r\n    if(rd !== 0){\r\n        var shapeData, newPaths, localShapeCollection;\r\n        for(i=0;i<len;i+=1){\r\n            shapeData = this.shapes[i];\r\n            newPaths = shapeData.shape.paths;\r\n            localShapeCollection = shapeData.localShapeCollection;\r\n            if(!(!shapeData.shape._mdf && !this._mdf && !_isFirstFrame)){\r\n                localShapeCollection.releaseShapes();\r\n                shapeData.shape._mdf = true;\r\n                shapePaths = shapeData.shape.paths.shapes;\r\n                jLen = shapeData.shape.paths._length;\r\n                for(j=0;j<jLen;j+=1){\r\n                    localShapeCollection.addShape(this.processPath(shapePaths[j],rd));\r\n                }\r\n            }\r\n            shapeData.shape.paths = shapeData.localShapeCollection;\r\n        }\r\n\r\n    }\r\n    if(!this.dynamicProperties.length){\r\n        this._mdf = false;\r\n    }\r\n};\r\n\r\nShapeModifiers.registerModifier('rd',RoundCornersModifier);\r\nfunction RepeaterModifier(){}\r\nextendPrototype([ShapeModifier], RepeaterModifier);\r\n\r\nRepeaterModifier.prototype.initModifierProperties = function(elem,data){\r\n    this.getValue = this.processKeys;\r\n    this.c = PropertyFactory.getProp(elem,data.c,0,null,this);\r\n    this.o = PropertyFactory.getProp(elem,data.o,0,null,this);\r\n    this.tr = TransformPropertyFactory.getTransformProperty(elem,data.tr,this);\r\n    this.so = PropertyFactory.getProp(elem,data.tr.so,0,0.01,this);\r\n    this.eo = PropertyFactory.getProp(elem,data.tr.eo,0,0.01,this);\r\n    this.data = data;\r\n    if(!this.dynamicProperties.length){\r\n        this.getValue(true);\r\n    }\r\n    this._isAnimated = !!this.dynamicProperties.length;\r\n    this.pMatrix = new Matrix();\r\n    this.rMatrix = new Matrix();\r\n    this.sMatrix = new Matrix();\r\n    this.tMatrix = new Matrix();\r\n    this.matrix = new Matrix();\r\n};\r\n\r\nRepeaterModifier.prototype.applyTransforms = function(pMatrix, rMatrix, sMatrix, transform, perc, inv){\r\n    var dir = inv ? -1 : 1;\r\n    var scaleX = transform.s.v[0] + (1 - transform.s.v[0]) * (1 - perc);\r\n    var scaleY = transform.s.v[1] + (1 - transform.s.v[1]) * (1 - perc);\r\n    pMatrix.translate(transform.p.v[0] * dir * perc, transform.p.v[1] * dir * perc, transform.p.v[2]);\r\n    rMatrix.translate(-transform.a.v[0], -transform.a.v[1], transform.a.v[2]);\r\n    rMatrix.rotate(-transform.r.v * dir * perc);\r\n    rMatrix.translate(transform.a.v[0], transform.a.v[1], transform.a.v[2]);\r\n    sMatrix.translate(-transform.a.v[0], -transform.a.v[1], transform.a.v[2]);\r\n    sMatrix.scale(inv ? 1/scaleX : scaleX, inv ? 1/scaleY : scaleY);\r\n    sMatrix.translate(transform.a.v[0], transform.a.v[1], transform.a.v[2]);\r\n};\r\n\r\nRepeaterModifier.prototype.init = function(elem, arr, pos, elemsData) {\r\n    this.elem = elem;\r\n    this.arr = arr;\r\n    this.pos = pos;\r\n    this.elemsData = elemsData;\r\n    this._currentCopies = 0;\r\n    this._elements = [];\r\n    this._groups = [];\r\n    this.frameId = -1;\r\n    this.initDynamicPropertyContainer(elem);\r\n    this.initModifierProperties(elem,arr[pos]);\r\n    var cont = 0;\r\n    while(pos>0){\r\n        pos -= 1;\r\n        //this._elements.unshift(arr.splice(pos,1)[0]);\r\n        this._elements.unshift(arr[pos]);\r\n        cont += 1;\r\n    }\r\n    if(this.dynamicProperties.length){\r\n        this.k = true;\r\n    }else{\r\n        this.getValue(true);\r\n    }\r\n};\r\n\r\nRepeaterModifier.prototype.resetElements = function(elements){\r\n    var i, len = elements.length;\r\n    for(i = 0; i < len; i += 1) {\r\n        elements[i]._processed = false;\r\n        if(elements[i].ty === 'gr'){\r\n            this.resetElements(elements[i].it);\r\n        }\r\n    }\r\n};\r\n\r\nRepeaterModifier.prototype.cloneElements = function(elements){\r\n    var i, len = elements.length;\r\n    var newElements = JSON.parse(JSON.stringify(elements));\r\n    this.resetElements(newElements);\r\n    return newElements;\r\n};\r\n\r\nRepeaterModifier.prototype.changeGroupRender = function(elements, renderFlag) {\r\n    var i, len = elements.length;\r\n    for(i = 0; i < len; i += 1) {\r\n        elements[i]._render = renderFlag;\r\n        if(elements[i].ty === 'gr') {\r\n            this.changeGroupRender(elements[i].it, renderFlag);\r\n        }\r\n    }\r\n};\r\n\r\nRepeaterModifier.prototype.processShapes = function(_isFirstFrame) {\r\n    var items, itemsTransform, i, dir, cont;\r\n    if(this._mdf || _isFirstFrame){\r\n        var copies = Math.ceil(this.c.v);\r\n        if(this._groups.length < copies){\r\n            while(this._groups.length < copies){\r\n                var group = {\r\n                    it:this.cloneElements(this._elements),\r\n                    ty:'gr'\r\n                };\r\n                group.it.push({\"a\":{\"a\":0,\"ix\":1,\"k\":[0,0]},\"nm\":\"Transform\",\"o\":{\"a\":0,\"ix\":7,\"k\":100},\"p\":{\"a\":0,\"ix\":2,\"k\":[0,0]},\"r\":{\"a\":1,\"ix\":6,\"k\":[{s:0,e:0,t:0},{s:0,e:0,t:1}]},\"s\":{\"a\":0,\"ix\":3,\"k\":[100,100]},\"sa\":{\"a\":0,\"ix\":5,\"k\":0},\"sk\":{\"a\":0,\"ix\":4,\"k\":0},\"ty\":\"tr\"});\r\n                \r\n                this.arr.splice(0,0,group);\r\n                this._groups.splice(0,0,group);\r\n                this._currentCopies += 1;\r\n            }\r\n            this.elem.reloadShapes();\r\n        }\r\n        cont = 0;\r\n        var renderFlag;\r\n        for(i = 0; i  <= this._groups.length - 1; i += 1){\r\n            renderFlag = cont < copies;\r\n            this._groups[i]._render = renderFlag;\r\n            this.changeGroupRender(this._groups[i].it, renderFlag);\r\n            cont += 1;\r\n        }\r\n        \r\n        this._currentCopies = copies;\r\n        ////\r\n\r\n        var offset = this.o.v;\r\n        var offsetModulo = offset%1;\r\n        var roundOffset = offset > 0 ? Math.floor(offset) : Math.ceil(offset);\r\n        var k;\r\n        var tMat = this.tr.v.props;\r\n        var pProps = this.pMatrix.props;\r\n        var rProps = this.rMatrix.props;\r\n        var sProps = this.sMatrix.props;\r\n        this.pMatrix.reset();\r\n        this.rMatrix.reset();\r\n        this.sMatrix.reset();\r\n        this.tMatrix.reset();\r\n        this.matrix.reset();\r\n        var iteration = 0;\r\n\r\n        if(offset > 0) {\r\n            while(iteration<roundOffset){\r\n                this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, false);\r\n                iteration += 1;\r\n            }\r\n            if(offsetModulo){\r\n                this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, offsetModulo, false);\r\n                iteration += offsetModulo;\r\n            }\r\n        } else if(offset < 0) {\r\n            while(iteration>roundOffset){\r\n                this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, true);\r\n                iteration -= 1;\r\n            }\r\n            if(offsetModulo){\r\n                this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, - offsetModulo, true);\r\n                iteration -= offsetModulo;\r\n            }\r\n        }\r\n        i = this.data.m === 1 ? 0 : this._currentCopies - 1;\r\n        dir = this.data.m === 1 ? 1 : -1;\r\n        cont = this._currentCopies;\r\n        var j, jLen;\r\n        while(cont){\r\n            items = this.elemsData[i].it;\r\n            itemsTransform = items[items.length - 1].transform.mProps.v.props;\r\n            jLen = itemsTransform.length;\r\n            items[items.length - 1].transform.mProps._mdf = true;\r\n            items[items.length - 1].transform.op._mdf = true;\r\n            items[items.length - 1].transform.op.v = this.so.v + (this.eo.v - this.so.v) * (i / (this._currentCopies - 1));\r\n            if(iteration !== 0){\r\n                if((i !== 0 && dir === 1) || (i !== this._currentCopies - 1 && dir === -1)){\r\n                    this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, false);\r\n                }\r\n                this.matrix.transform(rProps[0],rProps[1],rProps[2],rProps[3],rProps[4],rProps[5],rProps[6],rProps[7],rProps[8],rProps[9],rProps[10],rProps[11],rProps[12],rProps[13],rProps[14],rProps[15]);\r\n                this.matrix.transform(sProps[0],sProps[1],sProps[2],sProps[3],sProps[4],sProps[5],sProps[6],sProps[7],sProps[8],sProps[9],sProps[10],sProps[11],sProps[12],sProps[13],sProps[14],sProps[15]);\r\n                this.matrix.transform(pProps[0],pProps[1],pProps[2],pProps[3],pProps[4],pProps[5],pProps[6],pProps[7],pProps[8],pProps[9],pProps[10],pProps[11],pProps[12],pProps[13],pProps[14],pProps[15]);\r\n                \r\n                for(j=0;j<jLen;j+=1) {\r\n                    itemsTransform[j] = this.matrix.props[j];\r\n                }\r\n                this.matrix.reset();\r\n            } else {\r\n                this.matrix.reset();\r\n                for(j=0;j<jLen;j+=1) {\r\n                    itemsTransform[j] = this.matrix.props[j];\r\n                }\r\n            }\r\n            iteration += 1;\r\n            cont -= 1;\r\n            i += dir;\r\n        }\r\n    } else {\r\n        cont = this._currentCopies;\r\n        i = 0;\r\n        dir = 1;\r\n        while(cont){\r\n            items = this.elemsData[i].it;\r\n            itemsTransform = items[items.length - 1].transform.mProps.v.props;\r\n            items[items.length - 1].transform.mProps._mdf = false;\r\n            items[items.length - 1].transform.op._mdf = false;\r\n            cont -= 1;\r\n            i += dir;\r\n        }\r\n    }\r\n};\r\n\r\nRepeaterModifier.prototype.addShape = function(){};\r\n\r\nShapeModifiers.registerModifier('rp',RepeaterModifier);\r\nfunction ShapeCollection(){\r\n\tthis._length = 0;\r\n\tthis._maxLength = 4;\r\n\tthis.shapes = createSizedArray(this._maxLength);\r\n}\r\n\r\nShapeCollection.prototype.addShape = function(shapeData){\r\n\tif(this._length === this._maxLength){\r\n\t\tthis.shapes = this.shapes.concat(createSizedArray(this._maxLength));\r\n\t\tthis._maxLength *= 2;\r\n\t}\r\n\tthis.shapes[this._length] = shapeData;\r\n\tthis._length += 1;\r\n};\r\n\r\nShapeCollection.prototype.releaseShapes = function(){\r\n\tvar i;\r\n\tfor(i = 0; i < this._length; i += 1) {\r\n\t\tshape_pool.release(this.shapes[i]);\r\n\t}\r\n\tthis._length = 0;\r\n};\r\nfunction DashProperty(elem, data, renderer, container) {\r\n    this.elem = elem;\r\n    this.frameId = -1;\r\n    this.dataProps = createSizedArray(data.length);\r\n    this.renderer = renderer;\r\n    this.k = false;\r\n    this.dashStr = '';\r\n    this.dashArray = createTypedArray('float32',  data.length ? data.length - 1 : 0);\r\n    this.dashoffset = createTypedArray('float32',  1);\r\n    this.initDynamicPropertyContainer(container);\r\n    var i, len = data.length || 0, prop;\r\n    for(i = 0; i < len; i += 1) {\r\n        prop = PropertyFactory.getProp(elem,data[i].v,0, 0, this);\r\n        this.k = prop.k || this.k;\r\n        this.dataProps[i] = {n:data[i].n,p:prop};\r\n    }\r\n    if(!this.k){\r\n        this.getValue(true);\r\n    }\r\n    this._isAnimated = this.k;\r\n}\r\n\r\nDashProperty.prototype.getValue = function(forceRender) {\r\n    if(this.elem.globalData.frameId === this.frameId && !forceRender){\r\n        return;\r\n    }\r\n    this.frameId = this.elem.globalData.frameId;\r\n    this.iterateDynamicProperties();\r\n    this._mdf = this._mdf || forceRender;\r\n    if (this._mdf) {\r\n        var i = 0, len = this.dataProps.length;\r\n        if(this.renderer === 'svg') {\r\n            this.dashStr = '';\r\n        }\r\n        for(i=0;i<len;i+=1){\r\n            if(this.dataProps[i].n != 'o'){\r\n                if(this.renderer === 'svg') {\r\n                    this.dashStr += ' ' + this.dataProps[i].p.v;\r\n                }else{\r\n                    this.dashArray[i] = this.dataProps[i].p.v;\r\n                }\r\n            }else{\r\n                this.dashoffset[0] = this.dataProps[i].p.v;\r\n            }\r\n        }\r\n    }\r\n};\r\nextendPrototype([DynamicPropertyContainer], DashProperty);\r\nfunction GradientProperty(elem,data,container){\r\n    this.data = data;\r\n    this.c = createTypedArray('uint8c', data.p*4);\r\n    var cLength = data.k.k[0].s ? (data.k.k[0].s.length - data.p*4) : data.k.k.length - data.p*4;\r\n    this.o = createTypedArray('float32', cLength);\r\n    this._cmdf = false;\r\n    this._omdf = false;\r\n    this._collapsable = this.checkCollapsable();\r\n    this._hasOpacity = cLength;\r\n    this.initDynamicPropertyContainer(container);\r\n    this.prop = PropertyFactory.getProp(elem,data.k,1,null,this);\r\n    this.k = this.prop.k;\r\n    this.getValue(true);\r\n}\r\n\r\nGradientProperty.prototype.comparePoints = function(values, points) {\r\n    var i = 0, len = this.o.length/2, diff;\r\n    while(i < len) {\r\n        diff = Math.abs(values[i*4] - values[points*4 + i*2]);\r\n        if(diff > 0.01){\r\n            return false;\r\n        }\r\n        i += 1;\r\n    }\r\n    return true;\r\n};\r\n\r\nGradientProperty.prototype.checkCollapsable = function() {\r\n    if (this.o.length/2 !== this.c.length/4) {\r\n        return false;\r\n    }\r\n    if (this.data.k.k[0].s) {\r\n        var i = 0, len = this.data.k.k.length;\r\n        while (i < len) {\r\n            if (!this.comparePoints(this.data.k.k[i].s, this.data.p)) {\r\n                return false;\r\n            }\r\n            i += 1;\r\n        }\r\n    } else if(!this.comparePoints(this.data.k.k, this.data.p)) {\r\n        return false;\r\n    }\r\n    return true;\r\n};\r\n\r\nGradientProperty.prototype.getValue = function(forceRender){\r\n    this.prop.getValue();\r\n    this._mdf = false;\r\n    this._cmdf = false;\r\n    this._omdf = false;\r\n    if(this.prop._mdf || forceRender){\r\n        var i, len = this.data.p*4;\r\n        var mult, val;\r\n        for(i=0;i<len;i+=1){\r\n            mult = i%4 === 0 ? 100 : 255;\r\n            val = Math.round(this.prop.v[i]*mult);\r\n            if(this.c[i] !== val){\r\n                this.c[i] = val;\r\n                this._cmdf = !forceRender;\r\n            }\r\n        }\r\n        if(this.o.length){\r\n            len = this.prop.v.length;\r\n            for(i=this.data.p*4;i<len;i+=1){\r\n                mult = i%2 === 0 ? 100 : 1;\r\n                val = i%2 === 0 ?  Math.round(this.prop.v[i]*100):this.prop.v[i];\r\n                if(this.o[i-this.data.p*4] !== val){\r\n                    this.o[i-this.data.p*4] = val;\r\n                    this._omdf = !forceRender;\r\n                }\r\n            }\r\n        }\r\n        this._mdf = !forceRender;\r\n    }\r\n};\r\n\r\nextendPrototype([DynamicPropertyContainer], GradientProperty);\r\nvar buildShapeString = function(pathNodes, length, closed, mat) {\r\n\tif(length === 0) {\r\n            return '';\r\n        }\r\n        var _o = pathNodes.o;\r\n        var _i = pathNodes.i;\r\n        var _v = pathNodes.v;\r\n        var i, shapeString = \" M\" + mat.applyToPointStringified(_v[0][0], _v[0][1]);\r\n        for(i = 1; i < length; i += 1) {\r\n            shapeString += \" C\" + mat.applyToPointStringified(_o[i - 1][0], _o[i - 1][1]) + \" \" + mat.applyToPointStringified(_i[i][0], _i[i][1]) + \" \" + mat.applyToPointStringified(_v[i][0], _v[i][1]);\r\n        }\r\n        if (closed && length) {\r\n            shapeString += \" C\" + mat.applyToPointStringified(_o[i - 1][0], _o[i - 1][1]) + \" \" + mat.applyToPointStringified(_i[0][0], _i[0][1]) + \" \" + mat.applyToPointStringified(_v[0][0], _v[0][1]);\r\n            shapeString += 'z';\r\n        }\r\n        return shapeString;\r\n}\r\nvar ImagePreloader = (function(){\r\n\r\n    var proxyImage = (function(){\r\n        var canvas = createTag('canvas');\r\n        canvas.width = 1;\r\n        canvas.height = 1;\r\n        var ctx = canvas.getContext('2d');\r\n        ctx.fillStyle = 'rgba(0,0,0,0)';\r\n        ctx.fillRect(0, 0, 1, 1);\r\n        return canvas;\r\n    }())\r\n\r\n    function imageLoaded(){\r\n        this.loadedAssets += 1;\r\n        if(this.loadedAssets === this.totalImages){\r\n            if(this.imagesLoadedCb) {\r\n                this.imagesLoadedCb(null);\r\n            }\r\n        }\r\n    }\r\n\r\n    function getAssetsPath(assetData, assetsPath, original_path) {\r\n        var path = '';\r\n        if (assetData.e) {\r\n            path = assetData.p;\r\n        } else if(assetsPath) {\r\n            var imagePath = assetData.p;\r\n            if (imagePath.indexOf('images/') !== -1) {\r\n                imagePath = imagePath.split('/')[1];\r\n            }\r\n            path = assetsPath + imagePath;\r\n        } else {\r\n            path = original_path;\r\n            path += assetData.u ? assetData.u : '';\r\n            path += assetData.p;\r\n        }\r\n        return path;\r\n    }\r\n\r\n    function createImageData(assetData) {\r\n        var path = getAssetsPath(assetData, this.assetsPath, this.path);\r\n        var img = createTag('img');\r\n        img.crossOrigin = 'anonymous';\r\n        img.addEventListener('load', this._imageLoaded.bind(this), false);\r\n        img.addEventListener('error', function() {\r\n            ob.img = proxyImage;\r\n            this._imageLoaded();\r\n        }.bind(this), false);\r\n        img.src = path;\r\n        var ob = {\r\n            img: img,\r\n            assetData: assetData\r\n        }\r\n        return ob;\r\n    }\r\n\r\n    function loadAssets(assets, cb){\r\n        this.imagesLoadedCb = cb;\r\n        var i, len = assets.length;\r\n        for (i = 0; i < len; i += 1) {\r\n            if(!assets[i].layers){\r\n                this.totalImages += 1;\r\n                this.images.push(this._createImageData(assets[i]));\r\n            }\r\n        }\r\n    }\r\n\r\n    function setPath(path){\r\n        this.path = path || '';\r\n    }\r\n\r\n    function setAssetsPath(path){\r\n        this.assetsPath = path || '';\r\n    }\r\n\r\n    function getImage(assetData) {\r\n        var i = 0, len = this.images.length;\r\n        while (i < len) {\r\n            if (this.images[i].assetData === assetData) {\r\n                return this.images[i].img;\r\n            }\r\n            i += 1;\r\n        }\r\n    }\r\n\r\n    function destroy() {\r\n        this.imagesLoadedCb = null;\r\n        this.images.length = 0;\r\n    }\r\n\r\n    function loaded() {\r\n        return this.totalImages === this.loadedAssets;\r\n    }\r\n\r\n    return function ImagePreloader(){\r\n        this.loadAssets = loadAssets;\r\n        this.setAssetsPath = setAssetsPath;\r\n        this.setPath = setPath;\r\n        this.loaded = loaded;\r\n        this.destroy = destroy;\r\n        this.getImage = getImage;\r\n        this._createImageData = createImageData;\r\n        this._imageLoaded = imageLoaded;\r\n        this.assetsPath = '';\r\n        this.path = '';\r\n        this.totalImages = 0;\r\n        this.loadedAssets = 0;\r\n        this.imagesLoadedCb = null;\r\n        this.images = [];\r\n    };\r\n}());\r\nvar featureSupport = (function(){\r\n\tvar ob = {\r\n\t\tmaskType: true\r\n\t};\r\n\tif (/MSIE 10/i.test(navigator.userAgent) || /MSIE 9/i.test(navigator.userAgent) || /rv:11.0/i.test(navigator.userAgent) || /Edge\\/\\d./i.test(navigator.userAgent)) {\r\n\t   ob.maskType = false;\r\n\t}\r\n\treturn ob;\r\n}());\r\nvar filtersFactory = (function(){\r\n\tvar ob = {};\r\n\tob.createFilter = createFilter;\r\n\tob.createAlphaToLuminanceFilter = createAlphaToLuminanceFilter;\r\n\r\n\tfunction createFilter(filId){\r\n        \tvar fil = createNS('filter');\r\n        \tfil.setAttribute('id',filId);\r\n                fil.setAttribute('filterUnits','objectBoundingBox');\r\n                fil.setAttribute('x','0%');\r\n                fil.setAttribute('y','0%');\r\n                fil.setAttribute('width','100%');\r\n                fil.setAttribute('height','100%');\r\n                return fil;\r\n\t}\r\n\r\n\tfunction createAlphaToLuminanceFilter(){\r\n                var feColorMatrix = createNS('feColorMatrix');\r\n                feColorMatrix.setAttribute('type','matrix');\r\n                feColorMatrix.setAttribute('color-interpolation-filters','sRGB');\r\n                feColorMatrix.setAttribute('values','0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1');\r\n                return feColorMatrix;\r\n\t}\r\n\r\n\treturn ob;\r\n}());\r\nvar assetLoader = (function(){\r\n\r\n\tfunction formatResponse(xhr) {\r\n\t\tif(xhr.response && typeof xhr.response === 'object') {\r\n\t\t\treturn xhr.response;\r\n\t\t} else if(xhr.response && typeof xhr.response === 'string') {\r\n\t\t\treturn JSON.parse(xhr.response);\r\n\t\t} else if(xhr.responseText) {\r\n\t\t\treturn JSON.parse(xhr.responseText);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction loadAsset(path, callback, errorCallback) {\r\n\t\tvar response;\r\n\t\tvar xhr = new XMLHttpRequest();\r\n\t\txhr.open('GET', path, true);\r\n\t\t// set responseType after calling open or IE will break.\r\n\t\ttry {\r\n\t\t    // This crashes on Android WebView prior to KitKat\r\n\t\t    xhr.responseType = \"json\";\r\n\t\t} catch (err) {}\r\n\t    xhr.send();\r\n\t    xhr.onreadystatechange = function () {\r\n\t        if (xhr.readyState == 4) {\r\n\t            if(xhr.status == 200){\r\n\t            \tresponse = formatResponse(xhr);\r\n\t            \tcallback(response);\r\n\t            }else{\r\n\t                try{\r\n\t            \t\tresponse = formatResponse(xhr);\r\n\t            \t\tcallback(response);\r\n\t                }catch(err){\r\n\t                \tif(errorCallback) {\r\n\t                \t\terrorCallback(err);\r\n\t                \t}\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t}\r\n\treturn {\r\n\t\tload: loadAsset\r\n\t}\r\n}())\r\n\r\nfunction TextAnimatorProperty(textData, renderType, elem){\r\n    this._isFirstFrame = true;\r\n\tthis._hasMaskedPath = false;\r\n\tthis._frameId = -1;\r\n\tthis._textData = textData;\r\n\tthis._renderType = renderType;\r\n    this._elem = elem;\r\n\tthis._animatorsData = createSizedArray(this._textData.a.length);\r\n\tthis._pathData = {};\r\n\tthis._moreOptions = {\r\n\t\talignment: {}\r\n\t};\r\n\tthis.renderedLetters = [];\r\n    this.lettersChangedFlag = false;\r\n    this.initDynamicPropertyContainer(elem);\r\n\r\n}\r\n\r\nTextAnimatorProperty.prototype.searchProperties = function(){\r\n    var i, len = this._textData.a.length, animatorProps;\r\n    var getProp = PropertyFactory.getProp;\r\n    for(i=0;i<len;i+=1){\r\n        animatorProps = this._textData.a[i];\r\n        this._animatorsData[i] = new TextAnimatorDataProperty(this._elem, animatorProps, this);\r\n    }\r\n    if(this._textData.p && 'm' in this._textData.p){\r\n        this._pathData = {\r\n            f: getProp(this._elem,this._textData.p.f,0,0,this),\r\n            l: getProp(this._elem,this._textData.p.l,0,0,this),\r\n            r: this._textData.p.r,\r\n            m: this._elem.maskManager.getMaskProperty(this._textData.p.m)\r\n        };\r\n        this._hasMaskedPath = true;\r\n    } else {\r\n        this._hasMaskedPath = false;\r\n    }\r\n    this._moreOptions.alignment = getProp(this._elem,this._textData.m.a,1,0,this);\r\n};\r\n\r\nTextAnimatorProperty.prototype.getMeasures = function(documentData, lettersChangedFlag){\r\n    this.lettersChangedFlag = lettersChangedFlag;\r\n    if(!this._mdf && !this._isFirstFrame && !lettersChangedFlag && (!this._hasMaskedPath || !this._pathData.m._mdf)) {\r\n        return;\r\n    }\r\n    this._isFirstFrame = false;\r\n    var alignment = this._moreOptions.alignment.v;\r\n    var animators = this._animatorsData;\r\n    var textData = this._textData;\r\n    var matrixHelper = this.mHelper;\r\n    var renderType = this._renderType;\r\n    var renderedLettersCount = this.renderedLetters.length;\r\n    var data = this.data;\r\n    var xPos,yPos;\r\n    var i, len;\r\n    var letters = documentData.l, pathInfo, currentLength, currentPoint, segmentLength, flag, pointInd, segmentInd, prevPoint, points, segments, partialLength, totalLength, perc, tanAngle, mask;\r\n    if(this._hasMaskedPath) {\r\n        mask = this._pathData.m;\r\n        if(!this._pathData.n || this._pathData._mdf){\r\n            var paths = mask.v;\r\n            if(this._pathData.r){\r\n                paths = paths.reverse();\r\n            }\r\n            // TODO: release bezier data cached from previous pathInfo: this._pathData.pi\r\n            pathInfo = {\r\n                tLength: 0,\r\n                segments: []\r\n            };\r\n            len = paths._length - 1;\r\n            var bezierData;\r\n            totalLength = 0;\r\n            for (i = 0; i < len; i += 1) {\r\n                bezierData = bez.buildBezierData(paths.v[i]\r\n                    , paths.v[i + 1]\r\n                    , [paths.o[i][0] - paths.v[i][0], paths.o[i][1] - paths.v[i][1]]\r\n                    , [paths.i[i + 1][0] - paths.v[i + 1][0], paths.i[i + 1][1] - paths.v[i + 1][1]]);\r\n                pathInfo.tLength += bezierData.segmentLength;\r\n                pathInfo.segments.push(bezierData);\r\n                totalLength += bezierData.segmentLength;\r\n            }\r\n            i = len;\r\n            if (mask.v.c) {\r\n                bezierData = bez.buildBezierData(paths.v[i]\r\n                    , paths.v[0]\r\n                    , [paths.o[i][0] - paths.v[i][0], paths.o[i][1] - paths.v[i][1]]\r\n                    , [paths.i[0][0] - paths.v[0][0], paths.i[0][1] - paths.v[0][1]]);\r\n                pathInfo.tLength += bezierData.segmentLength;\r\n                pathInfo.segments.push(bezierData);\r\n                totalLength += bezierData.segmentLength;\r\n            }\r\n            this._pathData.pi = pathInfo;\r\n        }\r\n        pathInfo = this._pathData.pi;\r\n\r\n        currentLength = this._pathData.f.v;\r\n        segmentInd = 0;\r\n        pointInd = 1;\r\n        segmentLength = 0;\r\n        flag = true;\r\n        segments = pathInfo.segments;\r\n        if (currentLength < 0 && mask.v.c) {\r\n            if (pathInfo.tLength < Math.abs(currentLength)) {\r\n                currentLength = -Math.abs(currentLength) % pathInfo.tLength;\r\n            }\r\n            segmentInd = segments.length - 1;\r\n            points = segments[segmentInd].points;\r\n            pointInd = points.length - 1;\r\n            while (currentLength < 0) {\r\n                currentLength += points[pointInd].partialLength;\r\n                pointInd -= 1;\r\n                if (pointInd < 0) {\r\n                    segmentInd -= 1;\r\n                    points = segments[segmentInd].points;\r\n                    pointInd = points.length - 1;\r\n                }\r\n            }\r\n\r\n        }\r\n        points = segments[segmentInd].points;\r\n        prevPoint = points[pointInd - 1];\r\n        currentPoint = points[pointInd];\r\n        partialLength = currentPoint.partialLength;\r\n    }\r\n\r\n\r\n    len = letters.length;\r\n    xPos = 0;\r\n    yPos = 0;\r\n    var yOff = documentData.finalSize * 1.2 * 0.714;\r\n    var firstLine = true;\r\n    var animatorProps, animatorSelector;\r\n    var j, jLen;\r\n    var letterValue;\r\n\r\n    jLen = animators.length;\r\n    var lastLetter;\r\n\r\n    var mult, ind = -1, offf, xPathPos, yPathPos;\r\n    var initPathPos = currentLength,initSegmentInd = segmentInd, initPointInd = pointInd, currentLine = -1;\r\n    var elemOpacity;\r\n    var sc,sw,fc,k;\r\n    var lineLength = 0;\r\n    var letterSw, letterSc, letterFc, letterM = '', letterP = this.defaultPropsArray, letterO;\r\n\r\n    //\r\n    if(documentData.j === 2 || documentData.j === 1) {\r\n        var animatorJustifyOffset = 0;\r\n        var animatorFirstCharOffset = 0;\r\n        var justifyOffsetMult = documentData.j === 2 ? -0.5 : -1;\r\n        var lastIndex = 0;\r\n        var isNewLine = true;\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n            if (letters[i].n) {\r\n                if(animatorJustifyOffset) {\r\n                    animatorJustifyOffset += animatorFirstCharOffset;\r\n                }\r\n                while (lastIndex < i) {\r\n                    letters[lastIndex].animatorJustifyOffset = animatorJustifyOffset;\r\n                    lastIndex += 1;\r\n                }\r\n                animatorJustifyOffset = 0;\r\n                isNewLine = true;\r\n            } else {\r\n                for (j = 0; j < jLen; j += 1) {\r\n                    animatorProps = animators[j].a;\r\n                    if (animatorProps.t.propType) {\r\n                        if (isNewLine && documentData.j === 2) {\r\n                            animatorFirstCharOffset += animatorProps.t.v * justifyOffsetMult;\r\n                        }\r\n                        animatorSelector = animators[j].s;\r\n                        mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\r\n                        if (mult.length) {\r\n                            animatorJustifyOffset += animatorProps.t.v*mult[0] * justifyOffsetMult;\r\n                        } else {\r\n                            animatorJustifyOffset += animatorProps.t.v*mult * justifyOffsetMult;\r\n                        }\r\n                    }\r\n                }\r\n                isNewLine = false;\r\n            }\r\n        }\r\n        if(animatorJustifyOffset) {\r\n            animatorJustifyOffset += animatorFirstCharOffset;\r\n        }\r\n        while(lastIndex < i) {\r\n            letters[lastIndex].animatorJustifyOffset = animatorJustifyOffset;\r\n            lastIndex += 1;\r\n        }\r\n    }\r\n    //\r\n\r\n    for( i = 0; i < len; i += 1) {\r\n\r\n        matrixHelper.reset();\r\n        elemOpacity = 1;\r\n        if(letters[i].n) {\r\n            xPos = 0;\r\n            yPos += documentData.yOffset;\r\n            yPos += firstLine ? 1 : 0;\r\n            currentLength = initPathPos ;\r\n            firstLine = false;\r\n            lineLength = 0;\r\n            if(this._hasMaskedPath) {\r\n                segmentInd = initSegmentInd;\r\n                pointInd = initPointInd;\r\n                points = segments[segmentInd].points;\r\n                prevPoint = points[pointInd - 1];\r\n                currentPoint = points[pointInd];\r\n                partialLength = currentPoint.partialLength;\r\n                segmentLength = 0;\r\n            }\r\n            letterO = letterSw = letterFc = letterM = '';\r\n            letterP = this.defaultPropsArray;\r\n        }else{\r\n            if(this._hasMaskedPath) {\r\n                if(currentLine !== letters[i].line){\r\n                    switch(documentData.j){\r\n                        case 1:\r\n                            currentLength += totalLength - documentData.lineWidths[letters[i].line];\r\n                            break;\r\n                        case 2:\r\n                            currentLength += (totalLength - documentData.lineWidths[letters[i].line])/2;\r\n                            break;\r\n                    }\r\n                    currentLine = letters[i].line;\r\n                }\r\n                if (ind !== letters[i].ind) {\r\n                    if (letters[ind]) {\r\n                        currentLength += letters[ind].extra;\r\n                    }\r\n                    currentLength += letters[i].an / 2;\r\n                    ind = letters[i].ind;\r\n                }\r\n                currentLength += alignment[0] * letters[i].an / 200;\r\n                var animatorOffset = 0;\r\n                for (j = 0; j < jLen; j += 1) {\r\n                    animatorProps = animators[j].a;\r\n                    if (animatorProps.p.propType) {\r\n                        animatorSelector = animators[j].s;\r\n                        mult = animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);\r\n                        if(mult.length){\r\n                            animatorOffset += animatorProps.p.v[0] * mult[0];\r\n                        } else{\r\n                            animatorOffset += animatorProps.p.v[0] * mult;\r\n                        }\r\n\r\n                    }\r\n                    if (animatorProps.a.propType) {\r\n                        animatorSelector = animators[j].s;\r\n                        mult = animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);\r\n                        if(mult.length){\r\n                            animatorOffset += animatorProps.a.v[0] * mult[0];\r\n                        } else{\r\n                            animatorOffset += animatorProps.a.v[0] * mult;\r\n                        }\r\n\r\n                    }\r\n                }\r\n                flag = true;\r\n                while (flag) {\r\n                    if (segmentLength + partialLength >= currentLength + animatorOffset || !points) {\r\n                        perc = (currentLength + animatorOffset - segmentLength) / currentPoint.partialLength;\r\n                        xPathPos = prevPoint.point[0] + (currentPoint.point[0] - prevPoint.point[0]) * perc;\r\n                        yPathPos = prevPoint.point[1] + (currentPoint.point[1] - prevPoint.point[1]) * perc;\r\n                        matrixHelper.translate(-alignment[0]*letters[i].an/200, -(alignment[1] * yOff / 100));\r\n                        flag = false;\r\n                    } else if (points) {\r\n                        segmentLength += currentPoint.partialLength;\r\n                        pointInd += 1;\r\n                        if (pointInd >= points.length) {\r\n                            pointInd = 0;\r\n                            segmentInd += 1;\r\n                            if (!segments[segmentInd]) {\r\n                                if (mask.v.c) {\r\n                                    pointInd = 0;\r\n                                    segmentInd = 0;\r\n                                    points = segments[segmentInd].points;\r\n                                } else {\r\n                                    segmentLength -= currentPoint.partialLength;\r\n                                    points = null;\r\n                                }\r\n                            } else {\r\n                                points = segments[segmentInd].points;\r\n                            }\r\n                        }\r\n                        if (points) {\r\n                            prevPoint = currentPoint;\r\n                            currentPoint = points[pointInd];\r\n                            partialLength = currentPoint.partialLength;\r\n                        }\r\n                    }\r\n                }\r\n                offf = letters[i].an / 2 - letters[i].add;\r\n                matrixHelper.translate(-offf, 0, 0);\r\n            } else {\r\n                offf = letters[i].an/2 - letters[i].add;\r\n                matrixHelper.translate(-offf,0,0);\r\n\r\n                // Grouping alignment\r\n                matrixHelper.translate(-alignment[0]*letters[i].an/200, -alignment[1]*yOff/100, 0);\r\n            }\r\n\r\n            lineLength += letters[i].l/2;\r\n            for(j=0;j<jLen;j+=1){\r\n                animatorProps = animators[j].a;\r\n                if (animatorProps.t.propType) {\r\n                    animatorSelector = animators[j].s;\r\n                    mult = animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);\r\n                    //This condition is to prevent applying tracking to first character in each line. Might be better to use a boolean \"isNewLine\"\r\n                    if(xPos !== 0 || documentData.j !== 0) {\r\n                        if(this._hasMaskedPath) {\r\n                            if(mult.length) {\r\n                                currentLength += animatorProps.t.v*mult[0];\r\n                            } else {\r\n                                currentLength += animatorProps.t.v*mult;\r\n                            }\r\n                        }else{\r\n                            if(mult.length) {\r\n                                xPos += animatorProps.t.v*mult[0];\r\n                            } else {\r\n                                xPos += animatorProps.t.v*mult;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            lineLength += letters[i].l/2;\r\n            if(documentData.strokeWidthAnim) {\r\n                sw = documentData.sw || 0;\r\n            }\r\n            if(documentData.strokeColorAnim) {\r\n                if(documentData.sc){\r\n                    sc = [documentData.sc[0], documentData.sc[1], documentData.sc[2]];\r\n                }else{\r\n                    sc = [0,0,0];\r\n                }\r\n            }\r\n            if(documentData.fillColorAnim && documentData.fc) {\r\n                fc = [documentData.fc[0], documentData.fc[1], documentData.fc[2]];\r\n            }\r\n            for(j=0;j<jLen;j+=1){\r\n                animatorProps = animators[j].a;\r\n                if (animatorProps.a.propType) {\r\n                    animatorSelector = animators[j].s;\r\n                    mult = animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);\r\n\r\n                    if(mult.length){\r\n                        matrixHelper.translate(-animatorProps.a.v[0]*mult[0], -animatorProps.a.v[1]*mult[1], animatorProps.a.v[2]*mult[2]);\r\n                    } else {\r\n                        matrixHelper.translate(-animatorProps.a.v[0]*mult, -animatorProps.a.v[1]*mult, animatorProps.a.v[2]*mult);\r\n                    }\r\n                }\r\n            }\r\n            for(j=0;j<jLen;j+=1){\r\n                animatorProps = animators[j].a;\r\n                if (animatorProps.s.propType) {\r\n                    animatorSelector = animators[j].s;\r\n                    mult = animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);\r\n                    if(mult.length){\r\n                        matrixHelper.scale(1+((animatorProps.s.v[0]-1)*mult[0]),1+((animatorProps.s.v[1]-1)*mult[1]),1);\r\n                    } else {\r\n                        matrixHelper.scale(1+((animatorProps.s.v[0]-1)*mult),1+((animatorProps.s.v[1]-1)*mult),1);\r\n                    }\r\n                }\r\n            }\r\n            for(j=0;j<jLen;j+=1) {\r\n                animatorProps = animators[j].a;\r\n                animatorSelector = animators[j].s;\r\n                mult = animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);\r\n                if (animatorProps.sk.propType) {\r\n                    if(mult.length) {\r\n                        matrixHelper.skewFromAxis(-animatorProps.sk.v * mult[0], animatorProps.sa.v * mult[1]);\r\n                    } else {\r\n                        matrixHelper.skewFromAxis(-animatorProps.sk.v * mult, animatorProps.sa.v * mult);\r\n                    }\r\n                }\r\n                if (animatorProps.r.propType) {\r\n                    if(mult.length) {\r\n                        matrixHelper.rotateZ(-animatorProps.r.v * mult[2]);\r\n                    } else {\r\n                        matrixHelper.rotateZ(-animatorProps.r.v * mult);\r\n                    }\r\n                }\r\n                if (animatorProps.ry.propType) {\r\n\r\n                    if(mult.length) {\r\n                        matrixHelper.rotateY(animatorProps.ry.v*mult[1]);\r\n                    }else{\r\n                        matrixHelper.rotateY(animatorProps.ry.v*mult);\r\n                    }\r\n                }\r\n                if (animatorProps.rx.propType) {\r\n                    if(mult.length) {\r\n                        matrixHelper.rotateX(animatorProps.rx.v*mult[0]);\r\n                    } else {\r\n                        matrixHelper.rotateX(animatorProps.rx.v*mult);\r\n                    }\r\n                }\r\n                if (animatorProps.o.propType) {\r\n                    if(mult.length) {\r\n                        elemOpacity += ((animatorProps.o.v)*mult[0] - elemOpacity)*mult[0];\r\n                    } else {\r\n                        elemOpacity += ((animatorProps.o.v)*mult - elemOpacity)*mult;\r\n                    }\r\n                }\r\n                if (documentData.strokeWidthAnim && animatorProps.sw.propType) {\r\n                    if(mult.length) {\r\n                        sw += animatorProps.sw.v*mult[0];\r\n                    } else {\r\n                        sw += animatorProps.sw.v*mult;\r\n                    }\r\n                }\r\n                if (documentData.strokeColorAnim && animatorProps.sc.propType) {\r\n                    for(k=0;k<3;k+=1){\r\n                        if(mult.length) {\r\n                            sc[k] = sc[k] + (animatorProps.sc.v[k] - sc[k])*mult[0];\r\n                        } else {\r\n                            sc[k] = sc[k] + (animatorProps.sc.v[k] - sc[k])*mult;\r\n                        }\r\n                    }\r\n                }\r\n                if (documentData.fillColorAnim && documentData.fc) {\r\n                    if(animatorProps.fc.propType){\r\n                        for(k=0;k<3;k+=1){\r\n                            if(mult.length) {\r\n                                fc[k] = fc[k] + (animatorProps.fc.v[k] - fc[k])*mult[0];\r\n                            } else {\r\n                                fc[k] = fc[k] + (animatorProps.fc.v[k] - fc[k])*mult;\r\n                            }\r\n                        }\r\n                    }\r\n                    if(animatorProps.fh.propType){\r\n                        if(mult.length) {\r\n                            fc = addHueToRGB(fc,animatorProps.fh.v*mult[0]);\r\n                        } else {\r\n                            fc = addHueToRGB(fc,animatorProps.fh.v*mult);\r\n                        }\r\n                    }\r\n                    if(animatorProps.fs.propType){\r\n                        if(mult.length) {\r\n                            fc = addSaturationToRGB(fc,animatorProps.fs.v*mult[0]);\r\n                        } else {\r\n                            fc = addSaturationToRGB(fc,animatorProps.fs.v*mult);\r\n                        }\r\n                    }\r\n                    if(animatorProps.fb.propType){\r\n                        if(mult.length) {\r\n                            fc = addBrightnessToRGB(fc,animatorProps.fb.v*mult[0]);\r\n                        } else {\r\n                            fc = addBrightnessToRGB(fc,animatorProps.fb.v*mult);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            for(j=0;j<jLen;j+=1){\r\n                animatorProps = animators[j].a;\r\n\r\n                if (animatorProps.p.propType) {\r\n                    animatorSelector = animators[j].s;\r\n                    mult = animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);\r\n                    if(this._hasMaskedPath) {\r\n                        if(mult.length) {\r\n                            matrixHelper.translate(0, animatorProps.p.v[1] * mult[0], -animatorProps.p.v[2] * mult[1]);\r\n                        } else {\r\n                            matrixHelper.translate(0, animatorProps.p.v[1] * mult, -animatorProps.p.v[2] * mult);\r\n                        }\r\n                    }else{\r\n                        if(mult.length) {\r\n                            matrixHelper.translate(animatorProps.p.v[0] * mult[0], animatorProps.p.v[1] * mult[1], -animatorProps.p.v[2] * mult[2]);\r\n                        } else {\r\n                            matrixHelper.translate(animatorProps.p.v[0] * mult, animatorProps.p.v[1] * mult, -animatorProps.p.v[2] * mult);\r\n                        \r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if(documentData.strokeWidthAnim){\r\n                letterSw = sw < 0 ? 0 : sw;\r\n            }\r\n            if(documentData.strokeColorAnim){\r\n                letterSc = 'rgb('+Math.round(sc[0]*255)+','+Math.round(sc[1]*255)+','+Math.round(sc[2]*255)+')';\r\n            }\r\n            if(documentData.fillColorAnim && documentData.fc){\r\n                letterFc = 'rgb('+Math.round(fc[0]*255)+','+Math.round(fc[1]*255)+','+Math.round(fc[2]*255)+')';\r\n            }\r\n\r\n            if(this._hasMaskedPath) {\r\n                matrixHelper.translate(0,-documentData.ls);\r\n\r\n                matrixHelper.translate(0, alignment[1]*yOff/100 + yPos,0);\r\n                if (textData.p.p) {\r\n                    tanAngle = (currentPoint.point[1] - prevPoint.point[1]) / (currentPoint.point[0] - prevPoint.point[0]);\r\n                    var rot = Math.atan(tanAngle) * 180 / Math.PI;\r\n                    if (currentPoint.point[0] < prevPoint.point[0]) {\r\n                        rot += 180;\r\n                    }\r\n                    matrixHelper.rotate(-rot * Math.PI / 180);\r\n                }\r\n                matrixHelper.translate(xPathPos, yPathPos, 0);\r\n                currentLength -= alignment[0]*letters[i].an/200;\r\n                if(letters[i+1] && ind !== letters[i+1].ind){\r\n                    currentLength += letters[i].an / 2;\r\n                    currentLength += documentData.tr/1000*documentData.finalSize;\r\n                }\r\n            }else{\r\n\r\n                matrixHelper.translate(xPos,yPos,0);\r\n\r\n                if(documentData.ps){\r\n                    //matrixHelper.translate(documentData.ps[0],documentData.ps[1],0);\r\n                    matrixHelper.translate(documentData.ps[0],documentData.ps[1] + documentData.ascent,0);\r\n                }\r\n                switch(documentData.j){\r\n                    case 1:\r\n                        matrixHelper.translate(letters[i].animatorJustifyOffset + documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[letters[i].line]),0,0);\r\n                        break;\r\n                    case 2:\r\n                        matrixHelper.translate(letters[i].animatorJustifyOffset + documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[letters[i].line])/2,0,0);\r\n                        break;\r\n                }\r\n                matrixHelper.translate(0,-documentData.ls);\r\n                matrixHelper.translate(offf,0,0);\r\n                matrixHelper.translate(alignment[0]*letters[i].an/200,alignment[1]*yOff/100,0);\r\n                xPos += letters[i].l + documentData.tr/1000*documentData.finalSize;\r\n            }\r\n            if(renderType === 'html'){\r\n                letterM = matrixHelper.toCSS();\r\n            }else if(renderType === 'svg'){\r\n                letterM = matrixHelper.to2dCSS();\r\n            }else{\r\n                letterP = [matrixHelper.props[0],matrixHelper.props[1],matrixHelper.props[2],matrixHelper.props[3],matrixHelper.props[4],matrixHelper.props[5],matrixHelper.props[6],matrixHelper.props[7],matrixHelper.props[8],matrixHelper.props[9],matrixHelper.props[10],matrixHelper.props[11],matrixHelper.props[12],matrixHelper.props[13],matrixHelper.props[14],matrixHelper.props[15]];\r\n            }\r\n            letterO = elemOpacity;\r\n        }\r\n\r\n        if(renderedLettersCount <= i) {\r\n            letterValue = new LetterProps(letterO,letterSw,letterSc,letterFc,letterM,letterP);\r\n            this.renderedLetters.push(letterValue);\r\n            renderedLettersCount += 1;\r\n            this.lettersChangedFlag = true;\r\n        } else {\r\n            letterValue = this.renderedLetters[i];\r\n            this.lettersChangedFlag = letterValue.update(letterO, letterSw, letterSc, letterFc, letterM, letterP) || this.lettersChangedFlag;\r\n        }\r\n    }\r\n};\r\n\r\nTextAnimatorProperty.prototype.getValue = function(){\r\n\tif(this._elem.globalData.frameId === this._frameId){\r\n        return;\r\n    }\r\n    this._frameId = this._elem.globalData.frameId;\r\n    this.iterateDynamicProperties();\r\n};\r\n\r\nTextAnimatorProperty.prototype.mHelper = new Matrix();\r\nTextAnimatorProperty.prototype.defaultPropsArray = [];\r\nextendPrototype([DynamicPropertyContainer], TextAnimatorProperty);\r\nfunction TextAnimatorDataProperty(elem, animatorProps, container) {\r\n\tvar defaultData = {propType:false};\r\n\tvar getProp = PropertyFactory.getProp;\r\n\tvar textAnimator_animatables = animatorProps.a;\r\n\tthis.a = {\r\n\t\tr: textAnimator_animatables.r ? getProp(elem, textAnimator_animatables.r, 0, degToRads, container) : defaultData,\r\n\t\trx: textAnimator_animatables.rx ? getProp(elem, textAnimator_animatables.rx, 0, degToRads, container) : defaultData,\r\n\t\try: textAnimator_animatables.ry ? getProp(elem, textAnimator_animatables.ry, 0, degToRads, container) : defaultData,\r\n\t\tsk: textAnimator_animatables.sk ? getProp(elem, textAnimator_animatables.sk, 0, degToRads, container) : defaultData,\r\n\t\tsa: textAnimator_animatables.sa ? getProp(elem, textAnimator_animatables.sa, 0, degToRads, container) : defaultData,\r\n\t\ts: textAnimator_animatables.s ? getProp(elem, textAnimator_animatables.s, 1, 0.01, container) : defaultData,\r\n\t\ta: textAnimator_animatables.a ? getProp(elem, textAnimator_animatables.a, 1, 0, container) : defaultData,\r\n\t\to: textAnimator_animatables.o ? getProp(elem, textAnimator_animatables.o, 0, 0.01, container) : defaultData,\r\n\t\tp: textAnimator_animatables.p ? getProp(elem,textAnimator_animatables.p, 1, 0, container) : defaultData,\r\n\t\tsw: textAnimator_animatables.sw ? getProp(elem, textAnimator_animatables.sw, 0, 0, container) : defaultData,\r\n\t\tsc: textAnimator_animatables.sc ? getProp(elem, textAnimator_animatables.sc, 1, 0, container) : defaultData,\r\n\t\tfc: textAnimator_animatables.fc ? getProp(elem, textAnimator_animatables.fc, 1, 0, container) : defaultData,\r\n\t\tfh: textAnimator_animatables.fh ? getProp(elem, textAnimator_animatables.fh, 0, 0, container) : defaultData,\r\n\t\tfs: textAnimator_animatables.fs ? getProp(elem, textAnimator_animatables.fs, 0, 0.01, container) : defaultData,\r\n\t\tfb: textAnimator_animatables.fb ? getProp(elem, textAnimator_animatables.fb, 0, 0.01, container) : defaultData,\r\n\t\tt: textAnimator_animatables.t ? getProp(elem, textAnimator_animatables.t, 0, 0, container) : defaultData\r\n\t};\r\n\r\n\tthis.s = TextSelectorProp.getTextSelectorProp(elem,animatorProps.s, container);\r\n    this.s.t = animatorProps.s.t;\r\n}\r\nfunction LetterProps(o, sw, sc, fc, m, p){\r\n    this.o = o;\r\n    this.sw = sw;\r\n    this.sc = sc;\r\n    this.fc = fc;\r\n    this.m = m;\r\n    this.p = p;\r\n    this._mdf = {\r\n    \to: true,\r\n    \tsw: !!sw,\r\n    \tsc: !!sc,\r\n    \tfc: !!fc,\r\n    \tm: true,\r\n    \tp: true\r\n    };\r\n}\r\n\r\nLetterProps.prototype.update = function(o, sw, sc, fc, m, p) {\r\n\tthis._mdf.o = false;\r\n\tthis._mdf.sw = false;\r\n\tthis._mdf.sc = false;\r\n\tthis._mdf.fc = false;\r\n\tthis._mdf.m = false;\r\n\tthis._mdf.p = false;\r\n\tvar updated = false;\r\n\r\n\tif(this.o !== o) {\r\n\t\tthis.o = o;\r\n\t\tthis._mdf.o = true;\r\n\t\tupdated = true;\r\n\t}\r\n\tif(this.sw !== sw) {\r\n\t\tthis.sw = sw;\r\n\t\tthis._mdf.sw = true;\r\n\t\tupdated = true;\r\n\t}\r\n\tif(this.sc !== sc) {\r\n\t\tthis.sc = sc;\r\n\t\tthis._mdf.sc = true;\r\n\t\tupdated = true;\r\n\t}\r\n\tif(this.fc !== fc) {\r\n\t\tthis.fc = fc;\r\n\t\tthis._mdf.fc = true;\r\n\t\tupdated = true;\r\n\t}\r\n\tif(this.m !== m) {\r\n\t\tthis.m = m;\r\n\t\tthis._mdf.m = true;\r\n\t\tupdated = true;\r\n\t}\r\n\tif(p.length && (this.p[0] !== p[0] || this.p[1] !== p[1] || this.p[4] !== p[4] || this.p[5] !== p[5] || this.p[12] !== p[12] || this.p[13] !== p[13])) {\r\n\t\tthis.p = p;\r\n\t\tthis._mdf.p = true;\r\n\t\tupdated = true;\r\n\t}\r\n\treturn updated;\r\n};\r\nfunction TextProperty(elem, data){\r\n\tthis._frameId = initialDefaultFrame;\r\n\tthis.pv = '';\r\n\tthis.v = '';\r\n\tthis.kf = false;\r\n\tthis._isFirstFrame = true;\r\n\tthis._mdf = false;\r\n    this.data = data;\r\n\tthis.elem = elem;\r\n    this.comp = this.elem.comp;\r\n\tthis.keysIndex = 0;\r\n    this.canResize = false;\r\n    this.minimumFontSize = 1;\r\n    this.effectsSequence = [];\r\n\tthis.currentData = {\r\n\t\tascent: 0,\r\n        boxWidth: this.defaultBoxWidth,\r\n        f: '',\r\n        fStyle: '',\r\n        fWeight: '',\r\n        fc: '',\r\n        j: '',\r\n        justifyOffset: '',\r\n        l: [],\r\n        lh: 0,\r\n        lineWidths: [],\r\n        ls: '',\r\n        of: '',\r\n        s: '',\r\n        sc: '',\r\n        sw: 0,\r\n        t: 0,\r\n        tr: 0,\r\n        sz:0,\r\n        ps:null,\r\n        fillColorAnim: false,\r\n        strokeColorAnim: false,\r\n        strokeWidthAnim: false,\r\n        yOffset: 0,\r\n        finalSize:0,\r\n        finalText:[],\r\n        finalLineHeight: 0,\r\n        __complete: false\r\n\r\n\t};\r\n    this.copyData(this.currentData, this.data.d.k[0].s);\r\n\r\n    if(!this.searchProperty()) {\r\n        this.completeTextData(this.currentData);\r\n    }\r\n}\r\n\r\nTextProperty.prototype.defaultBoxWidth = [0,0];\r\n\r\nTextProperty.prototype.copyData = function(obj, data) {\r\n    for(var s in data) {\r\n        if(data.hasOwnProperty(s)) {\r\n            obj[s] = data[s];\r\n        }\r\n    }\r\n    return obj;\r\n}\r\n\r\nTextProperty.prototype.setCurrentData = function(data){\r\n    if(!data.__complete) {\r\n        this.completeTextData(data);\r\n    }\r\n    this.currentData = data;\r\n    this.currentData.boxWidth = this.currentData.boxWidth || this.defaultBoxWidth;\r\n    this._mdf = true;\r\n};\r\n\r\nTextProperty.prototype.searchProperty = function() {\r\n    return this.searchKeyframes();\r\n};\r\n\r\nTextProperty.prototype.searchKeyframes = function() {\r\n    this.kf = this.data.d.k.length > 1;\r\n    if(this.kf) {\r\n        this.addEffect(this.getKeyframeValue.bind(this));\r\n    }\r\n    return this.kf;\r\n}\r\n\r\nTextProperty.prototype.addEffect = function(effectFunction) {\r\n\tthis.effectsSequence.push(effectFunction);\r\n    this.elem.addDynamicProperty(this);\r\n};\r\n\r\nTextProperty.prototype.getValue = function(_finalValue) {\r\n    if((this.elem.globalData.frameId === this.frameId || !this.effectsSequence.length) && !_finalValue) {\r\n        return;\r\n    }\r\n    this.currentData.t = this.data.d.k[this.keysIndex].s.t;\r\n    var currentValue = this.currentData;\r\n    var currentIndex = this.keysIndex;\r\n    if(this.lock) {\r\n        this.setCurrentData(this.currentData);\r\n        return;\r\n    }\r\n    this.lock = true;\r\n    this._mdf = false;\r\n    var multipliedValue;\r\n    var i, len = this.effectsSequence.length;\r\n    var finalValue = _finalValue || this.data.d.k[this.keysIndex].s;\r\n    for(i = 0; i < len; i += 1) {\r\n        //Checking if index changed to prevent creating a new object every time the expression updates.\r\n        if(currentIndex !== this.keysIndex) {\r\n            finalValue = this.effectsSequence[i](finalValue, finalValue.t);\r\n        } else {\r\n            finalValue = this.effectsSequence[i](this.currentData, finalValue.t);\r\n        }\r\n    }\r\n    if(currentValue !== finalValue) {\r\n        this.setCurrentData(finalValue);\r\n    }\r\n    this.pv = this.v = this.currentData;\r\n    this.lock = false;\r\n    this.frameId = this.elem.globalData.frameId;\r\n}\r\n\r\nTextProperty.prototype.getKeyframeValue = function() {\r\n    var textKeys = this.data.d.k, textDocumentData;\r\n    var frameNum = this.elem.comp.renderedFrame;\r\n    var i = 0, len = textKeys.length;\r\n    while(i <= len - 1) {\r\n        textDocumentData = textKeys[i].s;\r\n        if(i === len - 1 || textKeys[i+1].t > frameNum){\r\n            break;\r\n        }\r\n        i += 1;\r\n    }\r\n    if(this.keysIndex !== i) {\r\n        this.keysIndex = i;\r\n    }\r\n    return this.data.d.k[this.keysIndex].s;\r\n};\r\n\r\nTextProperty.prototype.buildFinalText = function(text) {\r\n    var combinedCharacters = FontManager.getCombinedCharacterCodes();\r\n    var charactersArray = [];\r\n    var i = 0, len = text.length;\r\n    var charCode;\r\n    while (i < len) {\r\n        charCode = text.charCodeAt(i);\r\n        if (combinedCharacters.indexOf(charCode) !== -1) {\r\n            charactersArray[charactersArray.length - 1] += text.charAt(i);\r\n        } else {\r\n            if (charCode >= 0xD800 && charCode <= 0xDBFF) {\r\n                charCode = text.charCodeAt(i + 1);\r\n                if (charCode >= 0xDC00 && charCode <= 0xDFFF) {\r\n                    charactersArray.push(text.substr(i, 2));\r\n                    ++i;\r\n                } else {\r\n                    charactersArray.push(text.charAt(i));\r\n                }\r\n            } else {\r\n                charactersArray.push(text.charAt(i));\r\n            }\r\n        }\r\n        i += 1;\r\n    }\r\n    return charactersArray;\r\n}\r\n\r\nTextProperty.prototype.completeTextData = function(documentData) {\r\n    documentData.__complete = true;\r\n    var fontManager = this.elem.globalData.fontManager;\r\n    var data = this.data;\r\n    var letters = [];\r\n    var i, len;\r\n    var newLineFlag, index = 0, val;\r\n    var anchorGrouping = data.m.g;\r\n    var currentSize = 0, currentPos = 0, currentLine = 0, lineWidths = [];\r\n    var lineWidth = 0;\r\n    var maxLineWidth = 0;\r\n    var j, jLen;\r\n    var fontData = fontManager.getFontByName(documentData.f);\r\n    var charData, cLength = 0;\r\n    var styles = fontData.fStyle ? fontData.fStyle.split(' ') : [];\r\n\r\n    var fWeight = 'normal', fStyle = 'normal';\r\n    len = styles.length;\r\n    var styleName;\r\n    for(i=0;i<len;i+=1){\r\n        styleName = styles[i].toLowerCase();\r\n        switch(styleName) {\r\n            case 'italic':\r\n            fStyle = 'italic';\r\n            break;\r\n            case 'bold':\r\n            fWeight = '700';\r\n            break;\r\n            case 'black':\r\n            fWeight = '900';\r\n            break;\r\n            case 'medium':\r\n            fWeight = '500';\r\n            break;\r\n            case 'regular':\r\n            case 'normal':\r\n            fWeight = '400';\r\n            break;\r\n            case 'light':\r\n            case 'thin':\r\n            fWeight = '200';\r\n            break;\r\n        }\r\n    }\r\n    documentData.fWeight = fontData.fWeight || fWeight;\r\n    documentData.fStyle = fStyle;\r\n    documentData.finalSize = documentData.s;\r\n    documentData.finalText = this.buildFinalText(documentData.t);\r\n    len = documentData.finalText.length;\r\n    documentData.finalLineHeight = documentData.lh;\r\n    var trackingOffset = documentData.tr/1000*documentData.finalSize;\r\n    var charCode;\r\n    if(documentData.sz){\r\n        var flag = true;\r\n        var boxWidth = documentData.sz[0];\r\n        var boxHeight = documentData.sz[1];\r\n        var currentHeight, finalText;\r\n        while(flag) {\r\n            finalText = this.buildFinalText(documentData.t);\r\n            currentHeight = 0;\r\n            lineWidth = 0;\r\n            len = finalText.length;\r\n            trackingOffset = documentData.tr/1000*documentData.finalSize;\r\n            var lastSpaceIndex = -1;\r\n            for(i=0;i<len;i+=1){\r\n                charCode = finalText[i].charCodeAt(0);\r\n                newLineFlag = false;\r\n                if(finalText[i] === ' '){\r\n                    lastSpaceIndex = i;\r\n                }else if(charCode === 13 || charCode === 3){\r\n                    lineWidth = 0;\r\n                    newLineFlag = true;\r\n                    currentHeight += documentData.finalLineHeight || documentData.finalSize*1.2;\r\n                }\r\n                if(fontManager.chars){\r\n                    charData = fontManager.getCharData(finalText[i], fontData.fStyle, fontData.fFamily);\r\n                    cLength = newLineFlag ? 0 : charData.w*documentData.finalSize/100;\r\n                }else{\r\n                    //tCanvasHelper.font = documentData.s + 'px '+ fontData.fFamily;\r\n                    cLength = fontManager.measureText(finalText[i], documentData.f, documentData.finalSize);\r\n                }\r\n                if(lineWidth + cLength > boxWidth && finalText[i] !== ' '){\r\n                    if(lastSpaceIndex === -1){\r\n                        len += 1;\r\n                    } else {\r\n                        i = lastSpaceIndex;\r\n                    }\r\n                    currentHeight += documentData.finalLineHeight || documentData.finalSize*1.2;\r\n                    finalText.splice(i, lastSpaceIndex === i ? 1 : 0,\"\\r\");\r\n                    //finalText = finalText.substr(0,i) + \"\\r\" + finalText.substr(i === lastSpaceIndex ? i + 1 : i);\r\n                    lastSpaceIndex = -1;\r\n                    lineWidth = 0;\r\n                }else {\r\n                    lineWidth += cLength;\r\n                    lineWidth += trackingOffset;\r\n                }\r\n            }\r\n            currentHeight += fontData.ascent*documentData.finalSize/100;\r\n            if(this.canResize && documentData.finalSize > this.minimumFontSize && boxHeight < currentHeight) {\r\n                documentData.finalSize -= 1;\r\n                documentData.finalLineHeight = documentData.finalSize * documentData.lh / documentData.s;\r\n            } else {\r\n                documentData.finalText = finalText;\r\n                len = documentData.finalText.length;\r\n                flag = false;\r\n            }\r\n        }\r\n\r\n    }\r\n    lineWidth = - trackingOffset;\r\n    cLength = 0;\r\n    var uncollapsedSpaces = 0;\r\n    var currentChar;\r\n    for (i = 0;i < len ;i += 1) {\r\n        newLineFlag = false;\r\n        currentChar = documentData.finalText[i];\r\n        charCode = currentChar.charCodeAt(0);\r\n        if (currentChar === ' '){\r\n            val = '\\u00A0';\r\n        } else if (charCode === 13 || charCode === 3) {\r\n            uncollapsedSpaces = 0;\r\n            lineWidths.push(lineWidth);\r\n            maxLineWidth = lineWidth > maxLineWidth ? lineWidth : maxLineWidth;\r\n            lineWidth = - 2 * trackingOffset;\r\n            val = '';\r\n            newLineFlag = true;\r\n            currentLine += 1;\r\n        }else{\r\n            val = documentData.finalText[i];\r\n        }\r\n        if(fontManager.chars){\r\n            charData = fontManager.getCharData(currentChar, fontData.fStyle, fontManager.getFontByName(documentData.f).fFamily);\r\n            cLength = newLineFlag ? 0 : charData.w*documentData.finalSize/100;\r\n        }else{\r\n            //var charWidth = fontManager.measureText(val, documentData.f, documentData.finalSize);\r\n            //tCanvasHelper.font = documentData.finalSize + 'px '+ fontManager.getFontByName(documentData.f).fFamily;\r\n            cLength = fontManager.measureText(val, documentData.f, documentData.finalSize);\r\n        }\r\n\r\n        //\r\n        if(currentChar === ' '){\r\n            uncollapsedSpaces += cLength + trackingOffset;\r\n        } else {\r\n            lineWidth += cLength + trackingOffset + uncollapsedSpaces;\r\n            uncollapsedSpaces = 0;\r\n        }\r\n        letters.push({l:cLength,an:cLength,add:currentSize,n:newLineFlag, anIndexes:[], val: val, line: currentLine, animatorJustifyOffset: 0});\r\n        if(anchorGrouping == 2){\r\n            currentSize += cLength;\r\n            if(val === '' || val === '\\u00A0' || i === len - 1){\r\n                if(val === '' || val === '\\u00A0'){\r\n                    currentSize -= cLength;\r\n                }\r\n                while(currentPos<=i){\r\n                    letters[currentPos].an = currentSize;\r\n                    letters[currentPos].ind = index;\r\n                    letters[currentPos].extra = cLength;\r\n                    currentPos += 1;\r\n                }\r\n                index += 1;\r\n                currentSize = 0;\r\n            }\r\n        }else if(anchorGrouping == 3){\r\n            currentSize += cLength;\r\n            if(val === '' || i === len - 1){\r\n                if(val === ''){\r\n                    currentSize -= cLength;\r\n                }\r\n                while(currentPos<=i){\r\n                    letters[currentPos].an = currentSize;\r\n                    letters[currentPos].ind = index;\r\n                    letters[currentPos].extra = cLength;\r\n                    currentPos += 1;\r\n                }\r\n                currentSize = 0;\r\n                index += 1;\r\n            }\r\n        }else{\r\n            letters[index].ind = index;\r\n            letters[index].extra = 0;\r\n            index += 1;\r\n        }\r\n    }\r\n    documentData.l = letters;\r\n    maxLineWidth = lineWidth > maxLineWidth ? lineWidth : maxLineWidth;\r\n    lineWidths.push(lineWidth);\r\n    if(documentData.sz){\r\n        documentData.boxWidth = documentData.sz[0];\r\n        documentData.justifyOffset = 0;\r\n    }else{\r\n        documentData.boxWidth = maxLineWidth;\r\n        switch(documentData.j){\r\n            case 1:\r\n                documentData.justifyOffset = - documentData.boxWidth;\r\n                break;\r\n            case 2:\r\n                documentData.justifyOffset = - documentData.boxWidth/2;\r\n                break;\r\n            default:\r\n                documentData.justifyOffset = 0;\r\n        }\r\n    }\r\n    documentData.lineWidths = lineWidths;\r\n\r\n    var animators = data.a, animatorData, letterData;\r\n    jLen = animators.length;\r\n    var based, ind, indexes = [];\r\n    for(j=0;j<jLen;j+=1){\r\n        animatorData = animators[j];\r\n        if(animatorData.a.sc){\r\n            documentData.strokeColorAnim = true;\r\n        }\r\n        if(animatorData.a.sw){\r\n            documentData.strokeWidthAnim = true;\r\n        }\r\n        if(animatorData.a.fc || animatorData.a.fh || animatorData.a.fs || animatorData.a.fb){\r\n            documentData.fillColorAnim = true;\r\n        }\r\n        ind = 0;\r\n        based = animatorData.s.b;\r\n        for(i=0;i<len;i+=1){\r\n            letterData = letters[i];\r\n            letterData.anIndexes[j] = ind;\r\n            if((based == 1 && letterData.val !== '') || (based == 2 && letterData.val !== '' && letterData.val !== '\\u00A0') || (based == 3 && (letterData.n || letterData.val == '\\u00A0' || i == len - 1)) || (based == 4 && (letterData.n || i == len - 1))){\r\n                if(animatorData.s.rn === 1){\r\n                    indexes.push(ind);\r\n                }\r\n                ind += 1;\r\n            }\r\n        }\r\n        data.a[j].s.totalChars = ind;\r\n        var currentInd = -1, newInd;\r\n        if(animatorData.s.rn === 1){\r\n            for(i = 0; i < len; i += 1){\r\n                letterData = letters[i];\r\n                if(currentInd != letterData.anIndexes[j]){\r\n                    currentInd = letterData.anIndexes[j];\r\n                    newInd = indexes.splice(Math.floor(Math.random()*indexes.length),1)[0];\r\n                }\r\n                letterData.anIndexes[j] = newInd;\r\n            }\r\n        }\r\n    }\r\n    documentData.yOffset = documentData.finalLineHeight || documentData.finalSize*1.2;\r\n    documentData.ls = documentData.ls || 0;\r\n    documentData.ascent = fontData.ascent*documentData.finalSize/100;\r\n};\r\n\r\nTextProperty.prototype.updateDocumentData = function(newData, index) {\r\n\tindex = index === undefined ? this.keysIndex : index;\r\n    var dData = this.copyData({}, this.data.d.k[index].s);\r\n    dData = this.copyData(dData, newData);\r\n    this.data.d.k[index].s = dData;\r\n    this.recalculate(index);\r\n    this.elem.addDynamicProperty(this);\r\n};\r\n\r\nTextProperty.prototype.recalculate = function(index) {\r\n    var dData = this.data.d.k[index].s;\r\n    dData.__complete = false;\r\n    this.keysIndex = 0;\r\n    this._isFirstFrame = true;\r\n    this.getValue(dData);\r\n}\r\n\r\nTextProperty.prototype.canResizeFont = function(_canResize) {\r\n    this.canResize = _canResize;\r\n    this.recalculate(this.keysIndex);\r\n    this.elem.addDynamicProperty(this);\r\n};\r\n\r\nTextProperty.prototype.setMinimumFontSize = function(_fontValue) {\r\n    this.minimumFontSize = Math.floor(_fontValue) || 1;\r\n    this.recalculate(this.keysIndex);\r\n    this.elem.addDynamicProperty(this);\r\n};\r\n\r\nvar TextSelectorProp = (function(){\r\n    var max = Math.max;\r\n    var min = Math.min;\r\n    var floor = Math.floor;\r\n\r\n    function TextSelectorProp(elem,data){\r\n        this._currentTextLength = -1;\r\n        this.k = false;\r\n        this.data = data;\r\n        this.elem = elem;\r\n        this.comp = elem.comp;\r\n        this.finalS = 0;\r\n        this.finalE = 0;\r\n        this.initDynamicPropertyContainer(elem);\r\n        this.s = PropertyFactory.getProp(elem,data.s || {k:0},0,0,this);\r\n        if('e' in data){\r\n            this.e = PropertyFactory.getProp(elem,data.e,0,0,this);\r\n        }else{\r\n            this.e = {v:100};\r\n        }\r\n        this.o = PropertyFactory.getProp(elem,data.o || {k:0},0,0,this);\r\n        this.xe = PropertyFactory.getProp(elem,data.xe || {k:0},0,0,this);\r\n        this.ne = PropertyFactory.getProp(elem,data.ne || {k:0},0,0,this);\r\n        this.a = PropertyFactory.getProp(elem,data.a,0,0.01,this);\r\n        if(!this.dynamicProperties.length){\r\n            this.getValue();\r\n        }\r\n    }\r\n\r\n    TextSelectorProp.prototype = {\r\n        getMult: function(ind) {\r\n            if(this._currentTextLength !== this.elem.textProperty.currentData.l.length) {\r\n                this.getValue();\r\n            }\r\n            //var easer = bez.getEasingCurve(this.ne.v/100,0,1-this.xe.v/100,1);\r\n            var x1 = 0;\r\n            var y1 = 0;\r\n            var x2 = 1;\r\n            var y2 = 1;\r\n            if(this.ne.v > 0) {\r\n                x1 = this.ne.v / 100.0;\r\n            }\r\n            else {\r\n                y1 = -this.ne.v / 100.0;\r\n            }\r\n            if(this.xe.v > 0) {\r\n                x2 = 1.0 - this.xe.v / 100.0;\r\n            }\r\n            else {\r\n                y2 = 1.0 + this.xe.v / 100.0;\r\n            }\r\n            var easer = BezierFactory.getBezierEasing(x1, y1, x2, y2).get;\r\n\r\n            var mult = 0;\r\n            var s = this.finalS;\r\n            var e = this.finalE;\r\n            var type = this.data.sh;\r\n            if (type === 2){\r\n                if (e === s) {\r\n                    mult = ind >= e ? 1 : 0;\r\n                } else {\r\n                    mult = max(0, min(0.5 / (e - s) + (ind - s) / (e - s), 1));\r\n                }\r\n                mult = easer(mult);\r\n            } else if(type === 3) {\r\n                if (e === s) {\r\n                    mult = ind >= e ? 0 : 1;\r\n                }else{\r\n                    mult = 1 - max(0, min(0.5 / (e - s) + (ind - s) / (e - s),1));\r\n                }\r\n\r\n                mult = easer(mult);\r\n            } else if (type === 4) {\r\n                if (e === s) {\r\n                    mult = 0;\r\n                } else {\r\n                    mult = max(0, min(0.5 / (e - s) + (ind - s) / (e - s), 1));\r\n                    if (mult < 0.5) {\r\n                        mult *= 2;\r\n                    } else {\r\n                        mult = 1 - 2 * (mult - 0.5);\r\n                    }\r\n                }\r\n                mult = easer(mult);\r\n            } else if (type === 5) {\r\n                if (e === s){\r\n                    mult = 0;\r\n                } else {\r\n                    var tot = e - s;\r\n                    /*ind += 0.5;\r\n                    mult = -4/(tot*tot)*(ind*ind)+(4/tot)*ind;*/\r\n                    ind = min(max(0, ind + 0.5 - s), e - s);\r\n                    var x = -tot/2+ind;\r\n                    var a = tot/2;\r\n                    mult = Math.sqrt(1 - (x * x) / (a * a));\r\n                }\r\n                mult = easer(mult);\r\n            } else if (type === 6) {\r\n                if (e === s){\r\n                    mult = 0;\r\n                } else {\r\n                    ind = min(max(0, ind + 0.5 - s), e - s);\r\n                    mult = (1 + (Math.cos((Math.PI + Math.PI * 2 * (ind) / (e - s))))) / 2;\r\n                }\r\n                mult = easer(mult);\r\n            } else {\r\n                if (ind >= floor(s)) {\r\n                    if (ind - s < 0) {\r\n                        mult = max(0, min(min(e, 1) - (s - ind), 1));\r\n                    } else {\r\n                        mult = max(0, min(e - ind, 1));\r\n                    }\r\n                }\r\n                mult = easer(mult);\r\n            }\r\n            return mult*this.a.v;\r\n        },\r\n        getValue: function(newCharsFlag) {\r\n            this.iterateDynamicProperties();\r\n            this._mdf = newCharsFlag || this._mdf;\r\n            this._currentTextLength = this.elem.textProperty.currentData.l.length || 0;\r\n            if(newCharsFlag && this.data.r === 2) {\r\n                this.e.v = this._currentTextLength;\r\n            }\r\n            var divisor = this.data.r === 2 ? 1 : 100 / this.data.totalChars;\r\n            var o = this.o.v/divisor;\r\n            var s = this.s.v/divisor + o;\r\n            var e = (this.e.v/divisor) + o;\r\n            if(s>e){\r\n                var _s = s;\r\n                s = e;\r\n                e = _s;\r\n            }\r\n            this.finalS = s;\r\n            this.finalE = e;\r\n        }\r\n    }\r\n    extendPrototype([DynamicPropertyContainer], TextSelectorProp);\r\n\r\n    function getTextSelectorProp(elem, data,arr) {\r\n        return new TextSelectorProp(elem, data, arr);\r\n    }\r\n\r\n    return {\r\n        getTextSelectorProp: getTextSelectorProp\r\n    };\r\n}());\r\n\r\n    \r\nvar pool_factory = (function() {\r\n\treturn function(initialLength, _create, _release, _clone) {\r\n\r\n\t\tvar _length = 0;\r\n\t\tvar _maxLength = initialLength;\r\n\t\tvar pool = createSizedArray(_maxLength);\r\n\r\n\t\tvar ob = {\r\n\t\t\tnewElement: newElement,\r\n\t\t\trelease: release\r\n\t\t};\r\n\r\n\t\tfunction newElement(){\r\n\t\t\tvar element;\r\n\t\t\tif(_length){\r\n\t\t\t\t_length -= 1;\r\n\t\t\t\telement = pool[_length];\r\n\t\t\t} else {\r\n\t\t\t\telement = _create();\r\n\t\t\t}\r\n\t\t\treturn element;\r\n\t\t}\r\n\r\n\t\tfunction release(element) {\r\n\t\t\tif(_length === _maxLength) {\r\n\t\t\t\tpool = pooling.double(pool);\r\n\t\t\t\t_maxLength = _maxLength*2;\r\n\t\t\t}\r\n\t\t\tif (_release) {\r\n\t\t\t\t_release(element);\r\n\t\t\t}\r\n\t\t\tpool[_length] = element;\r\n\t\t\t_length += 1;\r\n\t\t}\r\n\r\n\t\tfunction clone() {\r\n\t\t\tvar clonedElement = newElement();\r\n\t\t\treturn _clone(clonedElement);\r\n\t\t}\r\n\r\n\t\treturn ob;\r\n\t};\r\n}());\r\n\r\nvar pooling = (function(){\r\n\r\n\tfunction double(arr){\r\n\t\treturn arr.concat(createSizedArray(arr.length));\r\n\t}\r\n\r\n\treturn {\r\n\t\tdouble: double\r\n\t};\r\n}());\r\nvar point_pool = (function(){\r\n\r\n\tfunction create() {\r\n\t\treturn createTypedArray('float32', 2);\r\n\t}\r\n\treturn pool_factory(8, create);\r\n}());\r\nvar shape_pool = (function(){\r\n\r\n\tfunction create() {\r\n\t\treturn new ShapePath();\r\n\t}\r\n\r\n\tfunction release(shapePath) {\r\n\t\tvar len = shapePath._length, i;\r\n\t\tfor(i = 0; i < len; i += 1) {\r\n\t\t\tpoint_pool.release(shapePath.v[i]);\r\n\t\t\tpoint_pool.release(shapePath.i[i]);\r\n\t\t\tpoint_pool.release(shapePath.o[i]);\r\n\t\t\tshapePath.v[i] = null;\r\n\t\t\tshapePath.i[i] = null;\r\n\t\t\tshapePath.o[i] = null;\r\n\t\t}\r\n\t\tshapePath._length = 0;\r\n\t\tshapePath.c = false;\r\n\t}\r\n\r\n\tfunction clone(shape) {\r\n\t\tvar cloned = factory.newElement();\r\n\t\tvar i, len = shape._length === undefined ? shape.v.length : shape._length;\r\n\t\tcloned.setLength(len);\r\n\t\tcloned.c = shape.c;\r\n\t\tvar pt;\r\n\t\t\r\n\t\tfor(i = 0; i < len; i += 1) {\r\n\t\t\tcloned.setTripleAt(shape.v[i][0],shape.v[i][1],shape.o[i][0],shape.o[i][1],shape.i[i][0],shape.i[i][1], i);\r\n\t\t}\r\n\t\treturn cloned;\r\n\t}\r\n\r\n\tvar factory = pool_factory(4, create, release);\r\n\tfactory.clone = clone;\r\n\r\n\treturn factory;\r\n}());\r\nvar shapeCollection_pool = (function(){\r\n\tvar ob = {\r\n\t\tnewShapeCollection: newShapeCollection,\r\n\t\trelease: release\r\n\t};\r\n\r\n\tvar _length = 0;\r\n\tvar _maxLength = 4;\r\n\tvar pool = createSizedArray(_maxLength);\r\n\r\n\tfunction newShapeCollection(){\r\n\t\tvar shapeCollection;\r\n\t\tif(_length){\r\n\t\t\t_length -= 1;\r\n\t\t\tshapeCollection = pool[_length];\r\n\t\t} else {\r\n\t\t\tshapeCollection = new ShapeCollection();\r\n\t\t}\r\n\t\treturn shapeCollection;\r\n\t}\r\n\r\n\tfunction release(shapeCollection) {\r\n\t\tvar i, len = shapeCollection._length;\r\n\t\tfor(i = 0; i < len; i += 1) {\r\n\t\t\tshape_pool.release(shapeCollection.shapes[i]);\r\n\t\t}\r\n\t\tshapeCollection._length = 0;\r\n\r\n\t\tif(_length === _maxLength) {\r\n\t\t\tpool = pooling.double(pool);\r\n\t\t\t_maxLength = _maxLength*2;\r\n\t\t}\r\n\t\tpool[_length] = shapeCollection;\r\n\t\t_length += 1;\r\n\t}\r\n\r\n\treturn ob;\r\n}());\r\nvar segments_length_pool = (function(){\r\n\r\n\tfunction create() {\r\n\t\treturn {\r\n\t\t\tlengths: [],\r\n\t\t\ttotalLength: 0\r\n\t\t};\r\n\t}\r\n\r\n\tfunction release(element) {\r\n\t\tvar i, len = element.lengths.length;\r\n\t\tfor(i=0;i<len;i+=1) {\r\n\t\t\tbezier_length_pool.release(element.lengths[i]);\r\n\t\t}\r\n\t\telement.lengths.length = 0;\r\n\t}\r\n\r\n\treturn pool_factory(8, create, release);\r\n}());\r\nvar bezier_length_pool = (function(){\r\n\r\n\tfunction create() {\r\n\t\treturn {\r\n            addedLength: 0,\r\n            percents: createTypedArray('float32', defaultCurveSegments),\r\n            lengths: createTypedArray('float32', defaultCurveSegments),\r\n        };\r\n\t}\r\n\treturn pool_factory(8, create);\r\n}());\r\nfunction BaseRenderer(){}\r\nBaseRenderer.prototype.checkLayers = function(num){\r\n    var i, len = this.layers.length, data;\r\n    this.completeLayers = true;\r\n    for (i = len - 1; i >= 0; i--) {\r\n        if (!this.elements[i]) {\r\n            data = this.layers[i];\r\n            if(data.ip - data.st <= (num - this.layers[i].st) && data.op - data.st > (num - this.layers[i].st))\r\n            {\r\n                this.buildItem(i);\r\n            }\r\n        }\r\n        this.completeLayers = this.elements[i] ? this.completeLayers:false;\r\n    }\r\n    this.checkPendingElements();\r\n};\r\n\r\nBaseRenderer.prototype.createItem = function(layer){\r\n    switch(layer.ty){\r\n        case 2:\r\n            return this.createImage(layer);\r\n        case 0:\r\n            return this.createComp(layer);\r\n        case 1:\r\n            return this.createSolid(layer);\r\n        case 3:\r\n            return this.createNull(layer);\r\n        case 4:\r\n            return this.createShape(layer);\r\n        case 5:\r\n            return this.createText(layer);\r\n        case 13:\r\n            return this.createCamera(layer);\r\n    }\r\n    return this.createNull(layer);\r\n};\r\n\r\nBaseRenderer.prototype.createCamera = function(){\r\n    throw new Error('You\\'re using a 3d camera. Try the html renderer.');\r\n};\r\n\r\nBaseRenderer.prototype.buildAllItems = function(){\r\n    var i, len = this.layers.length;\r\n    for(i=0;i<len;i+=1){\r\n        this.buildItem(i);\r\n    }\r\n    this.checkPendingElements();\r\n};\r\n\r\nBaseRenderer.prototype.includeLayers = function(newLayers){\r\n    this.completeLayers = false;\r\n    var i, len = newLayers.length;\r\n    var j, jLen = this.layers.length;\r\n    for(i=0;i<len;i+=1){\r\n        j = 0;\r\n        while(j<jLen){\r\n            if(this.layers[j].id == newLayers[i].id){\r\n                this.layers[j] = newLayers[i];\r\n                break;\r\n            }\r\n            j += 1;\r\n        }\r\n    }\r\n};\r\n\r\nBaseRenderer.prototype.setProjectInterface = function(pInterface){\r\n    this.globalData.projectInterface = pInterface;\r\n};\r\n\r\nBaseRenderer.prototype.initItems = function(){\r\n    if(!this.globalData.progressiveLoad){\r\n        this.buildAllItems();\r\n    }\r\n};\r\nBaseRenderer.prototype.buildElementParenting = function(element, parentName, hierarchy) {\r\n    var elements = this.elements;\r\n    var layers = this.layers;\r\n    var i=0, len = layers.length;\r\n    while (i < len) {\r\n        if (layers[i].ind == parentName) {\r\n            if (!elements[i] || elements[i] === true) {\r\n                this.buildItem(i);\r\n                this.addPendingElement(element);\r\n            } else {\r\n                hierarchy.push(elements[i]);\r\n                elements[i].setAsParent();\r\n                if(layers[i].parent !== undefined) {\r\n                    this.buildElementParenting(element, layers[i].parent, hierarchy);\r\n                } else {\r\n                    element.setHierarchy(hierarchy);\r\n                }\r\n            }\r\n        }\r\n        i += 1;\r\n    }\r\n};\r\n\r\nBaseRenderer.prototype.addPendingElement = function(element){\r\n    this.pendingElements.push(element);\r\n};\r\n\r\nBaseRenderer.prototype.searchExtraCompositions = function(assets){\r\n    var i, len = assets.length;\r\n    for(i=0;i<len;i+=1){\r\n        if(assets[i].xt){\r\n            var comp = this.createComp(assets[i]);\r\n            comp.initExpressions();\r\n            this.globalData.projectInterface.registerComposition(comp);\r\n        }\r\n    }\r\n};\r\n\r\nBaseRenderer.prototype.setupGlobalData = function(animData, fontsContainer) {\r\n    this.globalData.fontManager = new FontManager();\r\n    this.globalData.fontManager.addChars(animData.chars);\r\n    this.globalData.fontManager.addFonts(animData.fonts, fontsContainer);\r\n    this.globalData.getAssetData = this.animationItem.getAssetData.bind(this.animationItem);\r\n    this.globalData.getAssetsPath = this.animationItem.getAssetsPath.bind(this.animationItem);\r\n    this.globalData.imageLoader = this.animationItem.imagePreloader;\r\n    this.globalData.frameId = 0;\r\n    this.globalData.frameRate = animData.fr;\r\n    this.globalData.nm = animData.nm;\r\n    this.globalData.compSize = {\r\n        w: animData.w,\r\n        h: animData.h\r\n    }\r\n}\r\nfunction SVGRenderer(animationItem, config){\r\n    this.animationItem = animationItem;\r\n    this.layers = null;\r\n    this.renderedFrame = -1;\r\n    this.svgElement = createNS('svg');\r\n    var ariaLabel = '';\r\n    if (config && config.title) {\r\n        var titleElement = createNS('title');\r\n        var titleId = createElementID();\r\n        titleElement.setAttribute('id', titleId);\r\n        titleElement.textContent = config.title;\r\n        this.svgElement.appendChild(titleElement);\r\n        ariaLabel += titleId;\r\n    }\r\n    if (config && config.description) {\r\n        var descElement = createNS('desc');\r\n        var descId = createElementID();\r\n        descElement.setAttribute('id', descId);\r\n        descElement.textContent = config.description;\r\n        this.svgElement.appendChild(descElement);\r\n        ariaLabel += ' ' + descId;\r\n    }\r\n    if (ariaLabel) {\r\n        this.svgElement.setAttribute('aria-labelledby', ariaLabel)\r\n    }\r\n    var defs = createNS( 'defs');\r\n    this.svgElement.appendChild(defs);\r\n    var maskElement = createNS('g');\r\n    this.svgElement.appendChild(maskElement);\r\n    this.layerElement = maskElement;\r\n    this.renderConfig = {\r\n        preserveAspectRatio: (config && config.preserveAspectRatio) || 'xMidYMid meet',\r\n        imagePreserveAspectRatio: (config && config.imagePreserveAspectRatio) || 'xMidYMid slice',\r\n        progressiveLoad: (config && config.progressiveLoad) || false,\r\n        hideOnTransparent: (config && config.hideOnTransparent === false) ? false : true,\r\n        viewBoxOnly: (config && config.viewBoxOnly) || false,\r\n        viewBoxSize: (config && config.viewBoxSize) || false,\r\n        className: (config && config.className) || '',\r\n        id: (config && config.id) || '',\r\n        focusable: config && config.focusable\r\n    };\r\n\r\n    this.globalData = {\r\n        _mdf: false,\r\n        frameNum: -1,\r\n        defs: defs,\r\n        renderConfig: this.renderConfig\r\n    };\r\n    this.elements = [];\r\n    this.pendingElements = [];\r\n    this.destroyed = false;\r\n    this.rendererType = 'svg';\r\n\r\n}\r\n\r\nextendPrototype([BaseRenderer],SVGRenderer);\r\n\r\nSVGRenderer.prototype.createNull = function (data) {\r\n    return new NullElement(data,this.globalData,this);\r\n};\r\n\r\nSVGRenderer.prototype.createShape = function (data) {\r\n    return new SVGShapeElement(data,this.globalData,this);\r\n};\r\n\r\nSVGRenderer.prototype.createText = function (data) {\r\n    return new SVGTextElement(data,this.globalData,this);\r\n\r\n};\r\n\r\nSVGRenderer.prototype.createImage = function (data) {\r\n    return new IImageElement(data,this.globalData,this);\r\n};\r\n\r\nSVGRenderer.prototype.createComp = function (data) {\r\n    return new SVGCompElement(data,this.globalData,this);\r\n\r\n};\r\n\r\nSVGRenderer.prototype.createSolid = function (data) {\r\n    return new ISolidElement(data,this.globalData,this);\r\n};\r\n\r\nSVGRenderer.prototype.configAnimation = function(animData){\r\n    this.svgElement.setAttribute('xmlns','http://www.w3.org/2000/svg');\r\n    if(this.renderConfig.viewBoxSize) {\r\n        this.svgElement.setAttribute('viewBox',this.renderConfig.viewBoxSize);\r\n    } else {\r\n        this.svgElement.setAttribute('viewBox','0 0 '+animData.w+' '+animData.h);\r\n    }\r\n\r\n    if(!this.renderConfig.viewBoxOnly) {\r\n        this.svgElement.setAttribute('width',animData.w);\r\n        this.svgElement.setAttribute('height',animData.h);\r\n        this.svgElement.style.width = '100%';\r\n        this.svgElement.style.height = '100%';\r\n        this.svgElement.style.transform = 'translate3d(0,0,0)';\r\n    }\r\n    if (this.renderConfig.className) {\r\n        this.svgElement.setAttribute('class', this.renderConfig.className);\r\n    }\r\n    if (this.renderConfig.id) {\r\n        this.svgElement.setAttribute('id', this.renderConfig.id);\r\n    }\r\n    if (this.renderConfig.focusable !== undefined) {\r\n        this.svgElement.setAttribute('focusable', this.renderConfig.focusable);\r\n    }\r\n    this.svgElement.setAttribute('preserveAspectRatio',this.renderConfig.preserveAspectRatio);\r\n    //this.layerElement.style.transform = 'translate3d(0,0,0)';\r\n    //this.layerElement.style.transformOrigin = this.layerElement.style.mozTransformOrigin = this.layerElement.style.webkitTransformOrigin = this.layerElement.style['-webkit-transform'] = \"0px 0px 0px\";\r\n    this.animationItem.wrapper.appendChild(this.svgElement);\r\n    //Mask animation\r\n    var defs = this.globalData.defs;\r\n\r\n    this.setupGlobalData(animData, defs);\r\n    this.globalData.progressiveLoad = this.renderConfig.progressiveLoad;\r\n    this.data = animData;\r\n\r\n    var maskElement = createNS( 'clipPath');\r\n    var rect = createNS('rect');\r\n    rect.setAttribute('width',animData.w);\r\n    rect.setAttribute('height',animData.h);\r\n    rect.setAttribute('x',0);\r\n    rect.setAttribute('y',0);\r\n    var maskId = createElementID();\r\n    maskElement.setAttribute('id', maskId);\r\n    maskElement.appendChild(rect);\r\n    this.layerElement.setAttribute(\"clip-path\", \"url(\" + locationHref + \"#\"+maskId+\")\");\r\n\r\n    defs.appendChild(maskElement);\r\n    this.layers = animData.layers;\r\n    this.elements = createSizedArray(animData.layers.length);\r\n};\r\n\r\n\r\nSVGRenderer.prototype.destroy = function () {\r\n    this.animationItem.wrapper.innerHTML = '';\r\n    this.layerElement = null;\r\n    this.globalData.defs = null;\r\n    var i, len = this.layers ? this.layers.length : 0;\r\n    for (i = 0; i < len; i++) {\r\n        if(this.elements[i]){\r\n            this.elements[i].destroy();\r\n        }\r\n    }\r\n    this.elements.length = 0;\r\n    this.destroyed = true;\r\n    this.animationItem = null;\r\n};\r\n\r\nSVGRenderer.prototype.updateContainerSize = function () {\r\n};\r\n\r\nSVGRenderer.prototype.buildItem  = function(pos){\r\n    var elements = this.elements;\r\n    if(elements[pos] || this.layers[pos].ty == 99){\r\n        return;\r\n    }\r\n    elements[pos] = true;\r\n    var element = this.createItem(this.layers[pos]);\r\n\r\n    elements[pos] = element;\r\n    if(expressionsPlugin){\r\n        if(this.layers[pos].ty === 0){\r\n            this.globalData.projectInterface.registerComposition(element);\r\n        }\r\n        element.initExpressions();\r\n    }\r\n    this.appendElementInPos(element,pos);\r\n    if(this.layers[pos].tt){\r\n        if(!this.elements[pos - 1] || this.elements[pos - 1] === true){\r\n            this.buildItem(pos - 1);\r\n            this.addPendingElement(element);\r\n        } else {\r\n            element.setMatte(elements[pos - 1].layerId);\r\n        }\r\n    }\r\n};\r\n\r\nSVGRenderer.prototype.checkPendingElements  = function(){\r\n    while(this.pendingElements.length){\r\n        var element = this.pendingElements.pop();\r\n        element.checkParenting();\r\n        if(element.data.tt){\r\n            var i = 0, len = this.elements.length;\r\n            while(i<len){\r\n                if(this.elements[i] === element){\r\n                    element.setMatte(this.elements[i - 1].layerId);\r\n                    break;\r\n                }\r\n                i += 1;\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nSVGRenderer.prototype.renderFrame = function(num){\r\n    if(this.renderedFrame === num || this.destroyed){\r\n        return;\r\n    }\r\n    if(num === null){\r\n        num = this.renderedFrame;\r\n    }else{\r\n        this.renderedFrame = num;\r\n    }\r\n    // console.log('-------');\r\n    // console.log('FRAME ',num);\r\n    this.globalData.frameNum = num;\r\n    this.globalData.frameId += 1;\r\n    this.globalData.projectInterface.currentFrame = num;\r\n    this.globalData._mdf = false;\r\n    var i, len = this.layers.length;\r\n    if(!this.completeLayers){\r\n        this.checkLayers(num);\r\n    }\r\n    for (i = len - 1; i >= 0; i--) {\r\n        if(this.completeLayers || this.elements[i]){\r\n            this.elements[i].prepareFrame(num - this.layers[i].st);\r\n        }\r\n    }\r\n    if(this.globalData._mdf) {\r\n        for (i = 0; i < len; i += 1) {\r\n            if(this.completeLayers || this.elements[i]){\r\n                this.elements[i].renderFrame();\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nSVGRenderer.prototype.appendElementInPos = function(element, pos){\r\n    var newElement = element.getBaseElement();\r\n    if(!newElement){\r\n        return;\r\n    }\r\n    var i = 0;\r\n    var nextElement;\r\n    while(i<pos){\r\n        if(this.elements[i] && this.elements[i]!== true && this.elements[i].getBaseElement()){\r\n            nextElement = this.elements[i].getBaseElement();\r\n        }\r\n        i += 1;\r\n    }\r\n    if(nextElement){\r\n        this.layerElement.insertBefore(newElement, nextElement);\r\n    } else {\r\n        this.layerElement.appendChild(newElement);\r\n    }\r\n};\r\n\r\nSVGRenderer.prototype.hide = function(){\r\n    this.layerElement.style.display = 'none';\r\n};\r\n\r\nSVGRenderer.prototype.show = function(){\r\n    this.layerElement.style.display = 'block';\r\n};\r\n\r\nfunction CanvasRenderer(animationItem, config){\r\n    this.animationItem = animationItem;\r\n    this.renderConfig = {\r\n        clearCanvas: (config && config.clearCanvas !== undefined) ? config.clearCanvas : true,\r\n        context: (config && config.context) || null,\r\n        progressiveLoad: (config && config.progressiveLoad) || false,\r\n        preserveAspectRatio: (config && config.preserveAspectRatio) || 'xMidYMid meet',\r\n        imagePreserveAspectRatio: (config && config.imagePreserveAspectRatio) || 'xMidYMid slice',\r\n        className: (config && config.className) || '',\r\n        id: (config && config.id) || '',\r\n    };\r\n    this.renderConfig.dpr = (config && config.dpr) || 1;\r\n    if (this.animationItem.wrapper) {\r\n        this.renderConfig.dpr = (config && config.dpr) || window.devicePixelRatio || 1;\r\n    }\r\n    this.renderedFrame = -1;\r\n    this.globalData = {\r\n        frameNum: -1,\r\n        _mdf: false,\r\n        renderConfig: this.renderConfig,\r\n        currentGlobalAlpha: -1\r\n    };\r\n    this.contextData = new CVContextData();\r\n    this.elements = [];\r\n    this.pendingElements = [];\r\n    this.transformMat = new Matrix();\r\n    this.completeLayers = false;\r\n    this.rendererType = 'canvas';\r\n}\r\nextendPrototype([BaseRenderer],CanvasRenderer);\r\n\r\nCanvasRenderer.prototype.createShape = function (data) {\r\n    return new CVShapeElement(data, this.globalData, this);\r\n};\r\n\r\nCanvasRenderer.prototype.createText = function (data) {\r\n    return new CVTextElement(data, this.globalData, this);\r\n};\r\n\r\nCanvasRenderer.prototype.createImage = function (data) {\r\n    return new CVImageElement(data, this.globalData, this);\r\n};\r\n\r\nCanvasRenderer.prototype.createComp = function (data) {\r\n    return new CVCompElement(data, this.globalData, this);\r\n};\r\n\r\nCanvasRenderer.prototype.createSolid = function (data) {\r\n    return new CVSolidElement(data, this.globalData, this);\r\n};\r\n\r\nCanvasRenderer.prototype.createNull = SVGRenderer.prototype.createNull;\r\n\r\nCanvasRenderer.prototype.ctxTransform = function(props){\r\n    if(props[0] === 1 && props[1] === 0 && props[4] === 0 && props[5] === 1 && props[12] === 0 && props[13] === 0){\r\n        return;\r\n    }\r\n    if(!this.renderConfig.clearCanvas){\r\n        this.canvasContext.transform(props[0],props[1],props[4],props[5],props[12],props[13]);\r\n        return;\r\n    }\r\n    this.transformMat.cloneFromProps(props);\r\n    var cProps = this.contextData.cTr.props;\r\n    this.transformMat.transform(cProps[0],cProps[1],cProps[2],cProps[3],cProps[4],cProps[5],cProps[6],cProps[7],cProps[8],cProps[9],cProps[10],cProps[11],cProps[12],cProps[13],cProps[14],cProps[15]);\r\n    //this.contextData.cTr.transform(props[0],props[1],props[2],props[3],props[4],props[5],props[6],props[7],props[8],props[9],props[10],props[11],props[12],props[13],props[14],props[15]);\r\n    this.contextData.cTr.cloneFromProps(this.transformMat.props);\r\n    var trProps = this.contextData.cTr.props;\r\n    this.canvasContext.setTransform(trProps[0],trProps[1],trProps[4],trProps[5],trProps[12],trProps[13]);\r\n};\r\n\r\nCanvasRenderer.prototype.ctxOpacity = function(op){\r\n    /*if(op === 1){\r\n        return;\r\n    }*/\r\n    if(!this.renderConfig.clearCanvas){\r\n        this.canvasContext.globalAlpha *= op < 0 ? 0 : op;\r\n        this.globalData.currentGlobalAlpha = this.contextData.cO;\r\n        return;\r\n    }\r\n    this.contextData.cO *= op < 0 ? 0 : op;\r\n    if(this.globalData.currentGlobalAlpha !== this.contextData.cO) {\r\n        this.canvasContext.globalAlpha = this.contextData.cO;\r\n        this.globalData.currentGlobalAlpha = this.contextData.cO;\r\n    }\r\n};\r\n\r\nCanvasRenderer.prototype.reset = function(){\r\n    if(!this.renderConfig.clearCanvas){\r\n        this.canvasContext.restore();\r\n        return;\r\n    }\r\n    this.contextData.reset();\r\n};\r\n\r\nCanvasRenderer.prototype.save = function(actionFlag){\r\n    if(!this.renderConfig.clearCanvas){\r\n        this.canvasContext.save();\r\n        return;\r\n    }\r\n    if(actionFlag){\r\n        this.canvasContext.save();\r\n    }\r\n    var props = this.contextData.cTr.props;\r\n    if(this.contextData._length <= this.contextData.cArrPos) {\r\n        this.contextData.duplicate();\r\n    }\r\n    var i, arr = this.contextData.saved[this.contextData.cArrPos];\r\n    for (i = 0; i < 16; i += 1) {\r\n        arr[i] = props[i];\r\n    }\r\n    this.contextData.savedOp[this.contextData.cArrPos] = this.contextData.cO;\r\n    this.contextData.cArrPos += 1;\r\n};\r\n\r\nCanvasRenderer.prototype.restore = function(actionFlag){\r\n    if(!this.renderConfig.clearCanvas){\r\n        this.canvasContext.restore();\r\n        return;\r\n    }\r\n    if(actionFlag){\r\n        this.canvasContext.restore();\r\n        this.globalData.blendMode = 'source-over';\r\n    }\r\n    this.contextData.cArrPos -= 1;\r\n    var popped = this.contextData.saved[this.contextData.cArrPos];\r\n    var i,arr = this.contextData.cTr.props;\r\n    for(i=0;i<16;i+=1){\r\n        arr[i] = popped[i];\r\n    }\r\n    this.canvasContext.setTransform(popped[0],popped[1],popped[4],popped[5],popped[12],popped[13]);\r\n    popped = this.contextData.savedOp[this.contextData.cArrPos];\r\n    this.contextData.cO = popped;\r\n    if(this.globalData.currentGlobalAlpha !== popped) {\r\n        this.canvasContext.globalAlpha = popped;\r\n        this.globalData.currentGlobalAlpha = popped;\r\n    }\r\n};\r\n\r\nCanvasRenderer.prototype.configAnimation = function(animData){\r\n    if(this.animationItem.wrapper){\r\n        this.animationItem.container = createTag('canvas');\r\n        this.animationItem.container.style.width = '100%';\r\n        this.animationItem.container.style.height = '100%';\r\n        //this.animationItem.container.style.transform = 'translate3d(0,0,0)';\r\n        //this.animationItem.container.style.webkitTransform = 'translate3d(0,0,0)';\r\n        this.animationItem.container.style.transformOrigin = this.animationItem.container.style.mozTransformOrigin = this.animationItem.container.style.webkitTransformOrigin = this.animationItem.container.style['-webkit-transform'] = \"0px 0px 0px\";\r\n        this.animationItem.wrapper.appendChild(this.animationItem.container);\r\n        this.canvasContext = this.animationItem.container.getContext('2d');\r\n        if(this.renderConfig.className) {\r\n            this.animationItem.container.setAttribute('class', this.renderConfig.className);\r\n        }\r\n        if(this.renderConfig.id) {\r\n            this.animationItem.container.setAttribute('id', this.renderConfig.id);\r\n        }\r\n    }else{\r\n        this.canvasContext = this.renderConfig.context;\r\n    }\r\n    this.data = animData;\r\n    this.layers = animData.layers;\r\n    this.transformCanvas = {\r\n        w: animData.w,\r\n        h:animData.h,\r\n        sx:0,\r\n        sy:0,\r\n        tx:0,\r\n        ty:0\r\n    };\r\n    this.setupGlobalData(animData, document.body);\r\n    this.globalData.canvasContext = this.canvasContext;\r\n    this.globalData.renderer = this;\r\n    this.globalData.isDashed = false;\r\n    this.globalData.progressiveLoad = this.renderConfig.progressiveLoad;\r\n    this.globalData.transformCanvas = this.transformCanvas;\r\n    this.elements = createSizedArray(animData.layers.length);\r\n\r\n    this.updateContainerSize();\r\n};\r\n\r\nCanvasRenderer.prototype.updateContainerSize = function () {\r\n    this.reset();\r\n    var elementWidth,elementHeight;\r\n    if(this.animationItem.wrapper && this.animationItem.container){\r\n        elementWidth = this.animationItem.wrapper.offsetWidth;\r\n        elementHeight = this.animationItem.wrapper.offsetHeight;\r\n        this.animationItem.container.setAttribute('width',elementWidth * this.renderConfig.dpr );\r\n        this.animationItem.container.setAttribute('height',elementHeight * this.renderConfig.dpr);\r\n    }else{\r\n        elementWidth = this.canvasContext.canvas.width * this.renderConfig.dpr;\r\n        elementHeight = this.canvasContext.canvas.height * this.renderConfig.dpr;\r\n    }\r\n    var elementRel,animationRel;\r\n    if(this.renderConfig.preserveAspectRatio.indexOf('meet') !== -1 || this.renderConfig.preserveAspectRatio.indexOf('slice') !== -1){\r\n        var par = this.renderConfig.preserveAspectRatio.split(' ');\r\n        var fillType = par[1] || 'meet';\r\n        var pos = par[0] || 'xMidYMid';\r\n        var xPos = pos.substr(0,4);\r\n        var yPos = pos.substr(4);\r\n        elementRel = elementWidth/elementHeight;\r\n        animationRel = this.transformCanvas.w/this.transformCanvas.h;\r\n        if(animationRel>elementRel && fillType === 'meet' || animationRel<elementRel && fillType === 'slice'){\r\n            this.transformCanvas.sx = elementWidth/(this.transformCanvas.w/this.renderConfig.dpr);\r\n            this.transformCanvas.sy = elementWidth/(this.transformCanvas.w/this.renderConfig.dpr);\r\n        }else{\r\n            this.transformCanvas.sx = elementHeight/(this.transformCanvas.h / this.renderConfig.dpr);\r\n            this.transformCanvas.sy = elementHeight/(this.transformCanvas.h / this.renderConfig.dpr);\r\n        }\r\n\r\n        if(xPos === 'xMid' && ((animationRel<elementRel && fillType==='meet') || (animationRel>elementRel && fillType === 'slice'))){\r\n            this.transformCanvas.tx = (elementWidth-this.transformCanvas.w*(elementHeight/this.transformCanvas.h))/2*this.renderConfig.dpr;\r\n        } else if(xPos === 'xMax' && ((animationRel<elementRel && fillType==='meet') || (animationRel>elementRel && fillType === 'slice'))){\r\n            this.transformCanvas.tx = (elementWidth-this.transformCanvas.w*(elementHeight/this.transformCanvas.h))*this.renderConfig.dpr;\r\n        } else {\r\n            this.transformCanvas.tx = 0;\r\n        }\r\n        if(yPos === 'YMid' && ((animationRel>elementRel && fillType==='meet') || (animationRel<elementRel && fillType === 'slice'))){\r\n            this.transformCanvas.ty = ((elementHeight-this.transformCanvas.h*(elementWidth/this.transformCanvas.w))/2)*this.renderConfig.dpr;\r\n        } else if(yPos === 'YMax' && ((animationRel>elementRel && fillType==='meet') || (animationRel<elementRel && fillType === 'slice'))){\r\n            this.transformCanvas.ty = ((elementHeight-this.transformCanvas.h*(elementWidth/this.transformCanvas.w)))*this.renderConfig.dpr;\r\n        } else {\r\n            this.transformCanvas.ty = 0;\r\n        }\r\n\r\n    }else if(this.renderConfig.preserveAspectRatio == 'none'){\r\n        this.transformCanvas.sx = elementWidth/(this.transformCanvas.w/this.renderConfig.dpr);\r\n        this.transformCanvas.sy = elementHeight/(this.transformCanvas.h/this.renderConfig.dpr);\r\n        this.transformCanvas.tx = 0;\r\n        this.transformCanvas.ty = 0;\r\n    }else{\r\n        this.transformCanvas.sx = this.renderConfig.dpr;\r\n        this.transformCanvas.sy = this.renderConfig.dpr;\r\n        this.transformCanvas.tx = 0;\r\n        this.transformCanvas.ty = 0;\r\n    }\r\n    this.transformCanvas.props = [this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1];\r\n    /*var i, len = this.elements.length;\r\n    for(i=0;i<len;i+=1){\r\n        if(this.elements[i] && this.elements[i].data.ty === 0){\r\n            this.elements[i].resize(this.globalData.transformCanvas);\r\n        }\r\n    }*/\r\n    this.ctxTransform(this.transformCanvas.props);\r\n    this.canvasContext.beginPath();\r\n    this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h);\r\n    this.canvasContext.closePath();\r\n    this.canvasContext.clip();\r\n\r\n    this.renderFrame(this.renderedFrame, true);\r\n};\r\n\r\nCanvasRenderer.prototype.destroy = function () {\r\n    if(this.renderConfig.clearCanvas) {\r\n        this.animationItem.wrapper.innerHTML = '';\r\n    }\r\n    var i, len = this.layers ? this.layers.length : 0;\r\n    for (i = len - 1; i >= 0; i-=1) {\r\n        if(this.elements[i]) {\r\n            this.elements[i].destroy();\r\n        }\r\n    }\r\n    this.elements.length = 0;\r\n    this.globalData.canvasContext = null;\r\n    this.animationItem.container = null;\r\n    this.destroyed = true;\r\n};\r\n\r\nCanvasRenderer.prototype.renderFrame = function(num, forceRender){\r\n    if((this.renderedFrame === num && this.renderConfig.clearCanvas === true && !forceRender) || this.destroyed || num === -1){\r\n        return;\r\n    }\r\n    this.renderedFrame = num;\r\n    this.globalData.frameNum = num - this.animationItem._isFirstFrame;\r\n    this.globalData.frameId += 1;\r\n    this.globalData._mdf = !this.renderConfig.clearCanvas || forceRender;\r\n    this.globalData.projectInterface.currentFrame = num;\r\n\r\n     // console.log('--------');\r\n     // console.log('NEW: ',num);\r\n    var i, len = this.layers.length;\r\n    if(!this.completeLayers){\r\n        this.checkLayers(num);\r\n    }\r\n\r\n    for (i = 0; i < len; i++) {\r\n        if(this.completeLayers || this.elements[i]){\r\n            this.elements[i].prepareFrame(num - this.layers[i].st);\r\n        }\r\n    }\r\n    if(this.globalData._mdf) {\r\n        if(this.renderConfig.clearCanvas === true){\r\n            this.canvasContext.clearRect(0, 0, this.transformCanvas.w, this.transformCanvas.h);\r\n        }else{\r\n            this.save();\r\n        }\r\n        for (i = len - 1; i >= 0; i-=1) {\r\n            if(this.completeLayers || this.elements[i]){\r\n                this.elements[i].renderFrame();\r\n            }\r\n        }\r\n        if(this.renderConfig.clearCanvas !== true){\r\n            this.restore();\r\n        }\r\n    }\r\n};\r\n\r\nCanvasRenderer.prototype.buildItem = function(pos){\r\n    var elements = this.elements;\r\n    if(elements[pos] || this.layers[pos].ty == 99){\r\n        return;\r\n    }\r\n    var element = this.createItem(this.layers[pos], this,this.globalData);\r\n    elements[pos] = element;\r\n    element.initExpressions();\r\n    /*if(this.layers[pos].ty === 0){\r\n        element.resize(this.globalData.transformCanvas);\r\n    }*/\r\n};\r\n\r\nCanvasRenderer.prototype.checkPendingElements  = function(){\r\n    while(this.pendingElements.length){\r\n        var element = this.pendingElements.pop();\r\n        element.checkParenting();\r\n    }\r\n};\r\n\r\nCanvasRenderer.prototype.hide = function(){\r\n    this.animationItem.container.style.display = 'none';\r\n};\r\n\r\nCanvasRenderer.prototype.show = function(){\r\n    this.animationItem.container.style.display = 'block';\r\n};\r\n\r\nfunction HybridRenderer(animationItem, config){\r\n    this.animationItem = animationItem;\r\n    this.layers = null;\r\n    this.renderedFrame = -1;\r\n    this.renderConfig = {\r\n        className: (config && config.className) || '',\r\n        imagePreserveAspectRatio: (config && config.imagePreserveAspectRatio) || 'xMidYMid slice',\r\n        hideOnTransparent: (config && config.hideOnTransparent === false) ? false : true\r\n    };\r\n    this.globalData = {\r\n        _mdf: false,\r\n        frameNum: -1,\r\n        renderConfig: this.renderConfig\r\n    };\r\n    this.pendingElements = [];\r\n    this.elements = [];\r\n    this.threeDElements = [];\r\n    this.destroyed = false;\r\n    this.camera = null;\r\n    this.supports3d = true;\r\n    this.rendererType = 'html';\r\n\r\n}\r\n\r\nextendPrototype([BaseRenderer],HybridRenderer);\r\n\r\nHybridRenderer.prototype.buildItem = SVGRenderer.prototype.buildItem;\r\n\r\nHybridRenderer.prototype.checkPendingElements  = function(){\r\n    while(this.pendingElements.length){\r\n        var element = this.pendingElements.pop();\r\n        element.checkParenting();\r\n    }\r\n};\r\n\r\nHybridRenderer.prototype.appendElementInPos = function(element, pos){\r\n    var newDOMElement = element.getBaseElement();\r\n    if(!newDOMElement){\r\n        return;\r\n    }\r\n    var layer = this.layers[pos];\r\n    if(!layer.ddd || !this.supports3d){\r\n        if(this.threeDElements) {\r\n            this.addTo3dContainer(newDOMElement,pos);\r\n        } else {\r\n            var i = 0;\r\n            var nextDOMElement, nextLayer, tmpDOMElement;\r\n            while(i<pos){\r\n                if(this.elements[i] && this.elements[i]!== true && this.elements[i].getBaseElement){\r\n                    nextLayer = this.elements[i];\r\n                    tmpDOMElement = this.layers[i].ddd ? this.getThreeDContainerByPos(i) : nextLayer.getBaseElement();\r\n                    nextDOMElement = tmpDOMElement || nextDOMElement;\r\n                }\r\n                i += 1;\r\n            }\r\n            if(nextDOMElement){\r\n                if(!layer.ddd || !this.supports3d){\r\n                    this.layerElement.insertBefore(newDOMElement, nextDOMElement);\r\n                }\r\n            } else {\r\n                if(!layer.ddd || !this.supports3d){\r\n                    this.layerElement.appendChild(newDOMElement);\r\n                }\r\n            }\r\n        }\r\n        \r\n    } else {\r\n        this.addTo3dContainer(newDOMElement,pos);\r\n    }\r\n};\r\n\r\nHybridRenderer.prototype.createShape = function (data) {\r\n    if(!this.supports3d){\r\n        return new SVGShapeElement(data, this.globalData, this);\r\n    }\r\n    return new HShapeElement(data, this.globalData, this);\r\n};\r\n\r\nHybridRenderer.prototype.createText = function (data) {\r\n    if(!this.supports3d){\r\n        return new SVGTextElement(data, this.globalData, this);\r\n    }\r\n    return new HTextElement(data, this.globalData, this);\r\n};\r\n\r\nHybridRenderer.prototype.createCamera = function (data) {\r\n    this.camera = new HCameraElement(data, this.globalData, this);\r\n    return this.camera;\r\n};\r\n\r\nHybridRenderer.prototype.createImage = function (data) {\r\n    if(!this.supports3d){\r\n        return new IImageElement(data, this.globalData, this);\r\n    }\r\n    return new HImageElement(data, this.globalData, this);\r\n};\r\n\r\nHybridRenderer.prototype.createComp = function (data) {\r\n    if(!this.supports3d){\r\n        return new SVGCompElement(data, this.globalData, this);\r\n    }\r\n    return new HCompElement(data, this.globalData, this);\r\n\r\n};\r\n\r\nHybridRenderer.prototype.createSolid = function (data) {\r\n    if(!this.supports3d){\r\n        return new ISolidElement(data, this.globalData, this);\r\n    }\r\n    return new HSolidElement(data, this.globalData, this);\r\n};\r\n\r\nHybridRenderer.prototype.createNull = SVGRenderer.prototype.createNull;\r\n\r\nHybridRenderer.prototype.getThreeDContainerByPos = function(pos){\r\n    var i = 0, len = this.threeDElements.length;\r\n    while(i<len) {\r\n        if(this.threeDElements[i].startPos <= pos && this.threeDElements[i].endPos >= pos) {\r\n            return this.threeDElements[i].perspectiveElem;\r\n        }\r\n        i += 1;\r\n    }\r\n};\r\n\r\nHybridRenderer.prototype.createThreeDContainer = function(pos, type){\r\n    var perspectiveElem = createTag('div');\r\n    styleDiv(perspectiveElem);\r\n    var container = createTag('div');\r\n    styleDiv(container);\r\n    if(type === '3d') {\r\n        perspectiveElem.style.width = this.globalData.compSize.w+'px';\r\n        perspectiveElem.style.height = this.globalData.compSize.h+'px';\r\n        perspectiveElem.style.transformOrigin = perspectiveElem.style.mozTransformOrigin = perspectiveElem.style.webkitTransformOrigin = \"50% 50%\";\r\n        container.style.transform = container.style.webkitTransform = 'matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)';\r\n    }\r\n    \r\n    perspectiveElem.appendChild(container);\r\n    //this.resizerElem.appendChild(perspectiveElem);\r\n    var threeDContainerData = {\r\n        container:container,\r\n        perspectiveElem:perspectiveElem,\r\n        startPos: pos,\r\n        endPos: pos,\r\n        type: type\r\n    };\r\n    this.threeDElements.push(threeDContainerData);\r\n    return threeDContainerData;\r\n};\r\n\r\nHybridRenderer.prototype.build3dContainers = function(){\r\n    var i, len = this.layers.length;\r\n    var lastThreeDContainerData;\r\n    var currentContainer = '';\r\n    for(i=0;i<len;i+=1){\r\n        if(this.layers[i].ddd && this.layers[i].ty !== 3){\r\n            if(currentContainer !== '3d'){\r\n                currentContainer = '3d';\r\n                lastThreeDContainerData = this.createThreeDContainer(i,'3d');\r\n            }\r\n            lastThreeDContainerData.endPos = Math.max(lastThreeDContainerData.endPos,i);\r\n        } else {\r\n            if(currentContainer !== '2d'){\r\n                currentContainer = '2d';\r\n                lastThreeDContainerData = this.createThreeDContainer(i,'2d');\r\n            }\r\n            lastThreeDContainerData.endPos = Math.max(lastThreeDContainerData.endPos,i);\r\n        }\r\n    }\r\n    len = this.threeDElements.length;\r\n    for(i = len - 1; i >= 0; i --) {\r\n        this.resizerElem.appendChild(this.threeDElements[i].perspectiveElem);\r\n    }\r\n};\r\n\r\nHybridRenderer.prototype.addTo3dContainer = function(elem,pos){\r\n    var i = 0, len = this.threeDElements.length;\r\n    while(i<len){\r\n        if(pos <= this.threeDElements[i].endPos){\r\n            var j = this.threeDElements[i].startPos;\r\n            var nextElement;\r\n            while(j<pos){\r\n                if(this.elements[j] && this.elements[j].getBaseElement){\r\n                    nextElement = this.elements[j].getBaseElement();\r\n                }\r\n                j += 1;\r\n            }\r\n            if(nextElement){\r\n                this.threeDElements[i].container.insertBefore(elem, nextElement);\r\n            } else {\r\n                this.threeDElements[i].container.appendChild(elem);\r\n            }\r\n            break;\r\n        }\r\n        i += 1;\r\n    }\r\n};\r\n\r\nHybridRenderer.prototype.configAnimation = function(animData){\r\n    var resizerElem = createTag('div');\r\n    var wrapper = this.animationItem.wrapper;\r\n    resizerElem.style.width = animData.w+'px';\r\n    resizerElem.style.height = animData.h+'px';\r\n    this.resizerElem = resizerElem;\r\n    styleDiv(resizerElem);\r\n    resizerElem.style.transformStyle = resizerElem.style.webkitTransformStyle = resizerElem.style.mozTransformStyle = \"flat\";\r\n    if(this.renderConfig.className) {\r\n      resizerElem.setAttribute('class', this.renderConfig.className);\r\n    }\r\n    wrapper.appendChild(resizerElem);\r\n\r\n    resizerElem.style.overflow = 'hidden';\r\n    var svg = createNS('svg');\r\n    svg.setAttribute('width','1');\r\n    svg.setAttribute('height','1');\r\n    styleDiv(svg);\r\n    this.resizerElem.appendChild(svg);\r\n    var defs = createNS('defs');\r\n    svg.appendChild(defs);\r\n    this.data = animData;\r\n    //Mask animation\r\n    this.setupGlobalData(animData, svg);\r\n    this.globalData.defs = defs;\r\n    this.layers = animData.layers;\r\n    this.layerElement = this.resizerElem;\r\n    this.build3dContainers();\r\n    this.updateContainerSize();\r\n};\r\n\r\nHybridRenderer.prototype.destroy = function () {\r\n    this.animationItem.wrapper.innerHTML = '';\r\n    this.animationItem.container = null;\r\n    this.globalData.defs = null;\r\n    var i, len = this.layers ? this.layers.length : 0;\r\n    for (i = 0; i < len; i++) {\r\n        this.elements[i].destroy();\r\n    }\r\n    this.elements.length = 0;\r\n    this.destroyed = true;\r\n    this.animationItem = null;\r\n};\r\n\r\nHybridRenderer.prototype.updateContainerSize = function () {\r\n    var elementWidth = this.animationItem.wrapper.offsetWidth;\r\n    var elementHeight = this.animationItem.wrapper.offsetHeight;\r\n    var elementRel = elementWidth/elementHeight;\r\n    var animationRel = this.globalData.compSize.w/this.globalData.compSize.h;\r\n    var sx,sy,tx,ty;\r\n    if(animationRel>elementRel){\r\n        sx = elementWidth/(this.globalData.compSize.w);\r\n        sy = elementWidth/(this.globalData.compSize.w);\r\n        tx = 0;\r\n        ty = ((elementHeight-this.globalData.compSize.h*(elementWidth/this.globalData.compSize.w))/2);\r\n    }else{\r\n        sx = elementHeight/(this.globalData.compSize.h);\r\n        sy = elementHeight/(this.globalData.compSize.h);\r\n        tx = (elementWidth-this.globalData.compSize.w*(elementHeight/this.globalData.compSize.h))/2;\r\n        ty = 0;\r\n    }\r\n    this.resizerElem.style.transform = this.resizerElem.style.webkitTransform = 'matrix3d(' + sx + ',0,0,0,0,'+sy+',0,0,0,0,1,0,'+tx+','+ty+',0,1)';\r\n};\r\n\r\nHybridRenderer.prototype.renderFrame = SVGRenderer.prototype.renderFrame;\r\n\r\nHybridRenderer.prototype.hide = function(){\r\n    this.resizerElem.style.display = 'none';\r\n};\r\n\r\nHybridRenderer.prototype.show = function(){\r\n    this.resizerElem.style.display = 'block';\r\n};\r\n\r\nHybridRenderer.prototype.initItems = function(){\r\n    this.buildAllItems();\r\n    if(this.camera){\r\n        this.camera.setup();\r\n    } else {\r\n        var cWidth = this.globalData.compSize.w;\r\n        var cHeight = this.globalData.compSize.h;\r\n        var i, len = this.threeDElements.length;\r\n        for(i=0;i<len;i+=1){\r\n            this.threeDElements[i].perspectiveElem.style.perspective = this.threeDElements[i].perspectiveElem.style.webkitPerspective = Math.sqrt(Math.pow(cWidth,2) + Math.pow(cHeight,2)) + 'px';\r\n        }\r\n    }\r\n};\r\n\r\nHybridRenderer.prototype.searchExtraCompositions = function(assets){\r\n    var i, len = assets.length;\r\n    var floatingContainer = createTag('div');\r\n    for(i=0;i<len;i+=1){\r\n        if(assets[i].xt){\r\n            var comp = this.createComp(assets[i],floatingContainer,this.globalData.comp,null);\r\n            comp.initExpressions();\r\n            this.globalData.projectInterface.registerComposition(comp);\r\n        }\r\n    }\r\n};\r\n\r\nfunction MaskElement(data,element,globalData) {\r\n    this.data = data;\r\n    this.element = element;\r\n    this.globalData = globalData;\r\n    this.storedData = [];\r\n    this.masksProperties = this.data.masksProperties || [];\r\n    this.maskElement = null;\r\n    var defs = this.globalData.defs;\r\n    var i, len = this.masksProperties ? this.masksProperties.length : 0;\r\n    this.viewData = createSizedArray(len);\r\n    this.solidPath = '';\r\n\r\n\r\n    var path, properties = this.masksProperties;\r\n    var count = 0;\r\n    var currentMasks = [];\r\n    var j, jLen;\r\n    var layerId = createElementID();\r\n    var rect, expansor, feMorph,x;\r\n    var maskType = 'clipPath', maskRef = 'clip-path';\r\n    for (i = 0; i < len; i++) {\r\n        if((properties[i].mode !== 'a' && properties[i].mode !== 'n')|| properties[i].inv || properties[i].o.k !== 100 || properties[i].o.x){\r\n            maskType = 'mask';\r\n            maskRef = 'mask';\r\n        }\r\n\r\n        if((properties[i].mode == 's' || properties[i].mode == 'i') && count === 0){\r\n            rect = createNS( 'rect');\r\n            rect.setAttribute('fill', '#ffffff');\r\n            rect.setAttribute('width', this.element.comp.data.w || 0);\r\n            rect.setAttribute('height', this.element.comp.data.h || 0);\r\n            currentMasks.push(rect);\r\n        } else {\r\n            rect = null;\r\n        }\r\n\r\n        path = createNS( 'path');\r\n        if(properties[i].mode == 'n') {\r\n            // TODO move this to a factory or to a constructor\r\n            this.viewData[i] = {\r\n                op: PropertyFactory.getProp(this.element,properties[i].o,0,0.01,this.element),\r\n                prop: ShapePropertyFactory.getShapeProp(this.element,properties[i],3),\r\n                elem: path,\r\n                lastPath: ''\r\n            };\r\n            defs.appendChild(path);\r\n            continue;\r\n        }\r\n        count += 1;\r\n\r\n        path.setAttribute('fill', properties[i].mode === 's' ? '#000000':'#ffffff');\r\n        path.setAttribute('clip-rule','nonzero');\r\n        var filterID;\r\n\r\n        if (properties[i].x.k !== 0) {\r\n            maskType = 'mask';\r\n            maskRef = 'mask';\r\n            x = PropertyFactory.getProp(this.element,properties[i].x,0,null,this.element);\r\n            filterID = createElementID();\r\n            expansor = createNS('filter');\r\n            expansor.setAttribute('id',filterID);\r\n            feMorph = createNS('feMorphology');\r\n            feMorph.setAttribute('operator','erode');\r\n            feMorph.setAttribute('in','SourceGraphic');\r\n            feMorph.setAttribute('radius','0');\r\n            expansor.appendChild(feMorph);\r\n            defs.appendChild(expansor);\r\n            path.setAttribute('stroke', properties[i].mode === 's' ? '#000000':'#ffffff');\r\n        } else {\r\n            feMorph = null;\r\n            x = null;\r\n        }\r\n\r\n        // TODO move this to a factory or to a constructor\r\n        this.storedData[i] = {\r\n             elem: path,\r\n             x: x,\r\n             expan: feMorph,\r\n            lastPath: '',\r\n            lastOperator:'',\r\n            filterId:filterID,\r\n            lastRadius:0\r\n        };\r\n        if(properties[i].mode == 'i'){\r\n            jLen = currentMasks.length;\r\n            var g = createNS('g');\r\n            for(j=0;j<jLen;j+=1){\r\n                g.appendChild(currentMasks[j]);\r\n            }\r\n            var mask = createNS('mask');\r\n            mask.setAttribute('mask-type','alpha');\r\n            mask.setAttribute('id',layerId+'_'+count);\r\n            mask.appendChild(path);\r\n            defs.appendChild(mask);\r\n            g.setAttribute('mask','url(' + locationHref + '#'+layerId+'_'+count+')');\r\n\r\n            currentMasks.length = 0;\r\n            currentMasks.push(g);\r\n        }else{\r\n            currentMasks.push(path);\r\n        }\r\n        if(properties[i].inv && !this.solidPath){\r\n            this.solidPath = this.createLayerSolidPath();\r\n        }\r\n        // TODO move this to a factory or to a constructor\r\n        this.viewData[i] = {\r\n            elem: path,\r\n            lastPath: '',\r\n            op: PropertyFactory.getProp(this.element,properties[i].o,0,0.01,this.element),\r\n            prop:ShapePropertyFactory.getShapeProp(this.element,properties[i],3),\r\n            invRect: rect\r\n        };\r\n        if(!this.viewData[i].prop.k){\r\n            this.drawPath(properties[i],this.viewData[i].prop.v,this.viewData[i]);\r\n        }\r\n    }\r\n\r\n    this.maskElement = createNS( maskType);\r\n\r\n    len = currentMasks.length;\r\n    for(i=0;i<len;i+=1){\r\n        this.maskElement.appendChild(currentMasks[i]);\r\n    }\r\n\r\n    if(count > 0){\r\n        this.maskElement.setAttribute('id', layerId);\r\n        this.element.maskedElement.setAttribute(maskRef, \"url(\" + locationHref + \"#\" + layerId + \")\");\r\n        defs.appendChild(this.maskElement);\r\n    }\r\n    if (this.viewData.length) {\r\n        this.element.addRenderableComponent(this);\r\n    }\r\n\r\n}\r\n\r\nMaskElement.prototype.getMaskProperty = function(pos){\r\n    return this.viewData[pos].prop;\r\n};\r\n\r\nMaskElement.prototype.renderFrame = function (isFirstFrame) {\r\n    var finalMat = this.element.finalTransform.mat;\r\n    var i, len = this.masksProperties.length;\r\n    for (i = 0; i < len; i++) {\r\n        if(this.viewData[i].prop._mdf || isFirstFrame){\r\n            this.drawPath(this.masksProperties[i],this.viewData[i].prop.v,this.viewData[i]);\r\n        }\r\n        if(this.viewData[i].op._mdf || isFirstFrame){\r\n            this.viewData[i].elem.setAttribute('fill-opacity',this.viewData[i].op.v);\r\n        }\r\n        if(this.masksProperties[i].mode !== 'n'){\r\n            if(this.viewData[i].invRect && (this.element.finalTransform.mProp._mdf || isFirstFrame)){\r\n                this.viewData[i].invRect.setAttribute('transform', finalMat.getInverseMatrix().to2dCSS())\r\n            }\r\n            if(this.storedData[i].x && (this.storedData[i].x._mdf || isFirstFrame)){\r\n                var feMorph = this.storedData[i].expan;\r\n                if(this.storedData[i].x.v < 0){\r\n                    if(this.storedData[i].lastOperator !== 'erode'){\r\n                        this.storedData[i].lastOperator = 'erode';\r\n                        this.storedData[i].elem.setAttribute('filter','url(' + locationHref + '#'+this.storedData[i].filterId+')');\r\n                    }\r\n                    feMorph.setAttribute('radius',-this.storedData[i].x.v);\r\n                }else{\r\n                    if(this.storedData[i].lastOperator !== 'dilate'){\r\n                        this.storedData[i].lastOperator = 'dilate';\r\n                        this.storedData[i].elem.setAttribute('filter',null);\r\n                    }\r\n                    this.storedData[i].elem.setAttribute('stroke-width', this.storedData[i].x.v*2);\r\n\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nMaskElement.prototype.getMaskelement = function () {\r\n    return this.maskElement;\r\n};\r\n\r\nMaskElement.prototype.createLayerSolidPath = function(){\r\n    var path = 'M0,0 ';\r\n    path += ' h' + this.globalData.compSize.w ;\r\n    path += ' v' + this.globalData.compSize.h ;\r\n    path += ' h-' + this.globalData.compSize.w ;\r\n    path += ' v-' + this.globalData.compSize.h + ' ';\r\n    return path;\r\n};\r\n\r\nMaskElement.prototype.drawPath = function(pathData,pathNodes,viewData){\r\n    var pathString = \" M\"+pathNodes.v[0][0]+','+pathNodes.v[0][1];\r\n    var i, len;\r\n    len = pathNodes._length;\r\n    for(i=1;i<len;i+=1){\r\n        //pathString += \" C\"+pathNodes.o[i-1][0]+','+pathNodes.o[i-1][1] + \" \"+pathNodes.i[i][0]+','+pathNodes.i[i][1] + \" \"+pathNodes.v[i][0]+','+pathNodes.v[i][1];\r\n        pathString += \" C\"+pathNodes.o[i-1][0]+','+pathNodes.o[i-1][1] + \" \"+pathNodes.i[i][0]+','+pathNodes.i[i][1] + \" \"+pathNodes.v[i][0]+','+pathNodes.v[i][1];\r\n    }\r\n        //pathString += \" C\"+pathNodes.o[i-1][0]+','+pathNodes.o[i-1][1] + \" \"+pathNodes.i[0][0]+','+pathNodes.i[0][1] + \" \"+pathNodes.v[0][0]+','+pathNodes.v[0][1];\r\n    if(pathNodes.c && len > 1){\r\n        pathString += \" C\"+pathNodes.o[i-1][0]+','+pathNodes.o[i-1][1] + \" \"+pathNodes.i[0][0]+','+pathNodes.i[0][1] + \" \"+pathNodes.v[0][0]+','+pathNodes.v[0][1];\r\n    }\r\n    //pathNodes.__renderedString = pathString;\r\n\r\n    if(viewData.lastPath !== pathString){\r\n        var pathShapeValue = '';\r\n        if(viewData.elem){\r\n            if(pathNodes.c){\r\n                pathShapeValue = pathData.inv ? this.solidPath + pathString : pathString;\r\n            }\r\n            viewData.elem.setAttribute('d',pathShapeValue);\r\n        }\r\n        viewData.lastPath = pathString;\r\n    }\r\n};\r\n\r\nMaskElement.prototype.destroy = function(){\r\n    this.element = null;\r\n    this.globalData = null;\r\n    this.maskElement = null;\r\n    this.data = null;\r\n    this.masksProperties = null;\r\n};\r\n\r\n/**\r\n * @file \r\n * Handles AE's layer parenting property.\r\n *\r\n */\r\n\r\nfunction HierarchyElement(){}\r\n\r\nHierarchyElement.prototype = {\r\n\t/**\r\n     * @function \r\n     * Initializes hierarchy properties\r\n     *\r\n     */\r\n\tinitHierarchy: function() {\r\n\t\t//element's parent list\r\n\t    this.hierarchy = [];\r\n\t    //if element is parent of another layer _isParent will be true\r\n\t    this._isParent = false;\r\n\t    this.checkParenting();\r\n\t},\r\n\t/**\r\n     * @function \r\n     * Sets layer's hierarchy.\r\n     * @param {array} hierarch\r\n     * layer's parent list\r\n     *\r\n     */ \r\n\tsetHierarchy: function(hierarchy){\r\n\t    this.hierarchy = hierarchy;\r\n\t},\r\n\t/**\r\n     * @function \r\n     * Sets layer as parent.\r\n     *\r\n     */ \r\n\tsetAsParent: function() {\r\n\t    this._isParent = true;\r\n\t},\r\n\t/**\r\n     * @function \r\n     * Searches layer's parenting chain\r\n     *\r\n     */ \r\n\tcheckParenting: function(){\r\n\t    if (this.data.parent !== undefined){\r\n\t        this.comp.buildElementParenting(this, this.data.parent, []);\r\n\t    }\r\n\t}\r\n};\r\n/**\r\n * @file \r\n * Handles element's layer frame update.\r\n * Checks layer in point and out point\r\n *\r\n */\r\n\r\nfunction FrameElement(){}\r\n\r\nFrameElement.prototype = {\r\n    /**\r\n     * @function \r\n     * Initializes frame related properties.\r\n     *\r\n     */\r\n    initFrame: function(){\r\n        //set to true when inpoint is rendered\r\n        this._isFirstFrame = false;\r\n        //list of animated properties\r\n        this.dynamicProperties = [];\r\n        // If layer has been modified in current tick this will be true\r\n        this._mdf = false;\r\n    },\r\n    /**\r\n     * @function \r\n     * Calculates all dynamic values\r\n     *\r\n     * @param {number} num\r\n     * current frame number in Layer's time\r\n     * @param {boolean} isVisible\r\n     * if layers is currently in range\r\n     * \r\n     */\r\n    prepareProperties: function(num, isVisible) {\r\n        var i, len = this.dynamicProperties.length;\r\n        for (i = 0;i < len; i += 1) {\r\n            if (isVisible || (this._isParent && this.dynamicProperties[i].propType === 'transform')) {\r\n                this.dynamicProperties[i].getValue();\r\n                if (this.dynamicProperties[i]._mdf) {\r\n                    this.globalData._mdf = true;\r\n                    this._mdf = true;\r\n                }\r\n            }\r\n        }\r\n    },\r\n    addDynamicProperty: function(prop) {\r\n        if(this.dynamicProperties.indexOf(prop) === -1) {\r\n            this.dynamicProperties.push(prop);\r\n        }\r\n    }\r\n};\r\nfunction TransformElement(){}\r\n\r\nTransformElement.prototype = {\r\n    initTransform: function() {\r\n        this.finalTransform = {\r\n            mProp: this.data.ks ? TransformPropertyFactory.getTransformProperty(this, this.data.ks, this) : {o:0},\r\n            _matMdf: false,\r\n            _opMdf: false,\r\n            mat: new Matrix()\r\n        };\r\n        if (this.data.ao) {\r\n            this.finalTransform.mProp.autoOriented = true;\r\n        }\r\n\r\n        //TODO: check TYPE 11: Guided elements\r\n        if (this.data.ty !== 11) {\r\n            //this.createElements();\r\n        }\r\n    },\r\n    renderTransform: function() {\r\n\r\n        this.finalTransform._opMdf = this.finalTransform.mProp.o._mdf || this._isFirstFrame;\r\n        this.finalTransform._matMdf = this.finalTransform.mProp._mdf || this._isFirstFrame;\r\n\r\n        if (this.hierarchy) {\r\n            var mat;\r\n            var finalMat = this.finalTransform.mat;\r\n            var i = 0, len = this.hierarchy.length;\r\n            //Checking if any of the transformation matrices in the hierarchy chain has changed.\r\n            if (!this.finalTransform._matMdf) {\r\n                while (i < len) {\r\n                    if (this.hierarchy[i].finalTransform.mProp._mdf) {\r\n                        this.finalTransform._matMdf = true;\r\n                        break;\r\n                    }\r\n                    i += 1;\r\n                }\r\n            }\r\n            \r\n            if (this.finalTransform._matMdf) {\r\n                mat = this.finalTransform.mProp.v.props;\r\n                finalMat.cloneFromProps(mat);\r\n                for (i = 0; i < len; i += 1) {\r\n                    mat = this.hierarchy[i].finalTransform.mProp.v.props;\r\n                    finalMat.transform(mat[0], mat[1], mat[2], mat[3], mat[4], mat[5], mat[6], mat[7], mat[8], mat[9], mat[10], mat[11], mat[12], mat[13], mat[14], mat[15]);\r\n                }\r\n            }\r\n        }\r\n    },\r\n    globalToLocal: function(pt) {\r\n        var transforms = [];\r\n        transforms.push(this.finalTransform);\r\n        var flag = true;\r\n        var comp = this.comp;\r\n        while (flag) {\r\n            if (comp.finalTransform) {\r\n                if (comp.data.hasMask) {\r\n                    transforms.splice(0, 0, comp.finalTransform);\r\n                }\r\n                comp = comp.comp;\r\n            } else {\r\n                flag = false;\r\n            }\r\n        }\r\n        var i, len = transforms.length,ptNew;\r\n        for (i = 0; i < len; i += 1) {\r\n            ptNew = transforms[i].mat.applyToPointArray(0, 0, 0);\r\n            //ptNew = transforms[i].mat.applyToPointArray(pt[0],pt[1],pt[2]);\r\n            pt = [pt[0] - ptNew[0], pt[1] - ptNew[1], 0];\r\n        }\r\n        return pt;\r\n    },\r\n    mHelper: new Matrix()\r\n};\r\nfunction RenderableElement(){\r\n\r\n}\r\n\r\nRenderableElement.prototype = {\r\n    initRenderable: function() {\r\n        //layer's visibility related to inpoint and outpoint. Rename isVisible to isInRange\r\n        this.isInRange = false;\r\n        //layer's display state\r\n        this.hidden = false;\r\n        // If layer's transparency equals 0, it can be hidden\r\n        this.isTransparent = false;\r\n        //list of animated components\r\n        this.renderableComponents = [];\r\n    },\r\n    addRenderableComponent: function(component) {\r\n        if(this.renderableComponents.indexOf(component) === -1) {\r\n            this.renderableComponents.push(component);\r\n        }\r\n    },\r\n    removeRenderableComponent: function(component) {\r\n        if(this.renderableComponents.indexOf(component) !== -1) {\r\n            this.renderableComponents.splice(this.renderableComponents.indexOf(component), 1);\r\n        }\r\n    },\r\n    prepareRenderableFrame: function(num) {\r\n        this.checkLayerLimits(num);\r\n    },\r\n    checkTransparency: function(){\r\n        if(this.finalTransform.mProp.o.v <= 0) {\r\n            if(!this.isTransparent && this.globalData.renderConfig.hideOnTransparent){\r\n                this.isTransparent = true;\r\n                this.hide();\r\n            }\r\n        } else if(this.isTransparent) {\r\n            this.isTransparent = false;\r\n            this.show();\r\n        }\r\n    },\r\n    /**\r\n     * @function \r\n     * Initializes frame related properties.\r\n     *\r\n     * @param {number} num\r\n     * current frame number in Layer's time\r\n     * \r\n     */\r\n    checkLayerLimits: function(num) {\r\n        if(this.data.ip - this.data.st <= num && this.data.op - this.data.st > num)\r\n        {\r\n            if(this.isInRange !== true){\r\n                this.globalData._mdf = true;\r\n                this._mdf = true;\r\n                this.isInRange = true;\r\n                this.show();\r\n            }\r\n        } else {\r\n            if(this.isInRange !== false){\r\n                this.globalData._mdf = true;\r\n                this.isInRange = false;\r\n                this.hide();\r\n            }\r\n        }\r\n    },\r\n    renderRenderable: function() {\r\n        var i, len = this.renderableComponents.length;\r\n        for(i = 0; i < len; i += 1) {\r\n            this.renderableComponents[i].renderFrame(this._isFirstFrame);\r\n        }\r\n        /*this.maskManager.renderFrame(this.finalTransform.mat);\r\n        this.renderableEffectsManager.renderFrame(this._isFirstFrame);*/\r\n    },\r\n    sourceRectAtTime: function(){\r\n        return {\r\n            top:0,\r\n            left:0,\r\n            width:100,\r\n            height:100\r\n        };\r\n    },\r\n    getLayerSize: function(){\r\n        if(this.data.ty === 5){\r\n            return {w:this.data.textData.width,h:this.data.textData.height};\r\n        }else{\r\n            return {w:this.data.width,h:this.data.height};\r\n        }\r\n    }\r\n};\r\nfunction RenderableDOMElement() {}\r\n\r\n(function(){\r\n    var _prototype = {\r\n        initElement: function(data,globalData,comp) {\r\n            this.initFrame();\r\n            this.initBaseData(data, globalData, comp);\r\n            this.initTransform(data, globalData, comp);\r\n            this.initHierarchy();\r\n            this.initRenderable();\r\n            this.initRendererElement();\r\n            this.createContainerElements();\r\n            this.createRenderableComponents();\r\n            this.createContent();\r\n            this.hide();\r\n        },\r\n        hide: function(){\r\n            if (!this.hidden && (!this.isInRange || this.isTransparent)) {\r\n                var elem = this.baseElement || this.layerElement;\r\n                elem.style.display = 'none';\r\n                this.hidden = true;\r\n            }\r\n        },\r\n        show: function(){\r\n            if (this.isInRange && !this.isTransparent){\r\n                if (!this.data.hd) {\r\n                    var elem = this.baseElement || this.layerElement;\r\n                    elem.style.display = 'block';\r\n                }\r\n                this.hidden = false;\r\n                this._isFirstFrame = true;\r\n            }\r\n        },\r\n        renderFrame: function() {\r\n            //If it is exported as hidden (data.hd === true) no need to render\r\n            //If it is not visible no need to render\r\n            if (this.data.hd || this.hidden) {\r\n                return;\r\n            }\r\n            this.renderTransform();\r\n            this.renderRenderable();\r\n            this.renderElement();\r\n            this.renderInnerContent();\r\n            if (this._isFirstFrame) {\r\n                this._isFirstFrame = false;\r\n            }\r\n        },\r\n        renderInnerContent: function() {},\r\n        prepareFrame: function(num) {\r\n            this._mdf = false;\r\n            this.prepareRenderableFrame(num);\r\n            this.prepareProperties(num, this.isInRange);\r\n            this.checkTransparency();\r\n        },\r\n        destroy: function(){\r\n            this.innerElem =  null;\r\n            this.destroyBaseElement();\r\n        }\r\n    };\r\n    extendPrototype([RenderableElement, createProxyFunction(_prototype)], RenderableDOMElement);\r\n}());\r\nfunction ProcessedElement(element, position) {\r\n\tthis.elem = element;\r\n\tthis.pos = position;\r\n}\r\nfunction SVGStyleData(data, level) {\r\n\tthis.data = data;\r\n\tthis.type = data.ty;\r\n\tthis.d = '';\r\n\tthis.lvl = level;\r\n\tthis._mdf = false;\r\n\tthis.closed = data.hd === true;\r\n\tthis.pElem = createNS('path');\r\n\tthis.msElem = null;\r\n}\r\n\r\nSVGStyleData.prototype.reset = function() {\r\n\tthis.d = '';\r\n\tthis._mdf = false;\r\n};\r\nfunction SVGShapeData(transformers, level, shape) {\r\n    this.caches = [];\r\n    this.styles = [];\r\n    this.transformers = transformers;\r\n    this.lStr = '';\r\n    this.sh = shape;\r\n    this.lvl = level;\r\n    //TODO find if there are some cases where _isAnimated can be false. \r\n    // For now, since shapes add up with other shapes. They have to be calculated every time.\r\n    // One way of finding out is checking if all styles associated to this shape depend only of this shape\r\n    this._isAnimated = !!shape.k;\r\n    // TODO: commenting this for now since all shapes are animated\r\n    var i = 0, len = transformers.length;\r\n    while(i < len) {\r\n    \tif(transformers[i].mProps.dynamicProperties.length) {\r\n    \t\tthis._isAnimated = true;\r\n    \t\tbreak;\r\n    \t}\r\n    \ti += 1;\r\n    }\r\n}\r\n\r\nSVGShapeData.prototype.setAsAnimated = function() {\r\n    this._isAnimated = true;\r\n}\r\nfunction SVGTransformData(mProps, op, container) {\r\n\tthis.transform = {\r\n\t\tmProps: mProps,\r\n\t\top: op,\r\n\t\tcontainer: container\r\n\t};\r\n\tthis.elements = [];\r\n    this._isAnimated = this.transform.mProps.dynamicProperties.length || this.transform.op.effectsSequence.length;\r\n}\r\nfunction SVGStrokeStyleData(elem, data, styleOb){\r\n\tthis.initDynamicPropertyContainer(elem);\r\n\tthis.getValue = this.iterateDynamicProperties;\r\n\tthis.o = PropertyFactory.getProp(elem,data.o,0,0.01,this);\r\n\tthis.w = PropertyFactory.getProp(elem,data.w,0,null,this);\r\n\tthis.d = new DashProperty(elem,data.d||{},'svg',this);\r\n\tthis.c = PropertyFactory.getProp(elem,data.c,1,255,this);\r\n\tthis.style = styleOb;\r\n    this._isAnimated = !!this._isAnimated;\r\n}\r\n\r\nextendPrototype([DynamicPropertyContainer], SVGStrokeStyleData);\r\nfunction SVGFillStyleData(elem, data, styleOb){\r\n\tthis.initDynamicPropertyContainer(elem);\r\n\tthis.getValue = this.iterateDynamicProperties;\r\n\tthis.o = PropertyFactory.getProp(elem,data.o,0,0.01,this);\r\n\tthis.c = PropertyFactory.getProp(elem,data.c,1,255,this);\r\n\tthis.style = styleOb;\r\n}\r\n\r\nextendPrototype([DynamicPropertyContainer], SVGFillStyleData);\r\nfunction SVGGradientFillStyleData(elem, data, styleOb){\r\n    this.initDynamicPropertyContainer(elem);\r\n    this.getValue = this.iterateDynamicProperties;\r\n    this.initGradientData(elem, data, styleOb);\r\n}\r\n\r\nSVGGradientFillStyleData.prototype.initGradientData = function(elem, data, styleOb){\r\n    this.o = PropertyFactory.getProp(elem,data.o,0,0.01,this);\r\n    this.s = PropertyFactory.getProp(elem,data.s,1,null,this);\r\n    this.e = PropertyFactory.getProp(elem,data.e,1,null,this);\r\n    this.h = PropertyFactory.getProp(elem,data.h||{k:0},0,0.01,this);\r\n    this.a = PropertyFactory.getProp(elem,data.a||{k:0},0,degToRads,this);\r\n    this.g = new GradientProperty(elem,data.g,this);\r\n    this.style = styleOb;\r\n    this.stops = [];\r\n    this.setGradientData(styleOb.pElem, data);\r\n    this.setGradientOpacity(data, styleOb);\r\n    this._isAnimated = !!this._isAnimated;\r\n\r\n};\r\n\r\nSVGGradientFillStyleData.prototype.setGradientData = function(pathElement,data){\r\n\r\n    var gradientId = createElementID();\r\n    var gfill = createNS(data.t === 1 ? 'linearGradient' : 'radialGradient');\r\n    gfill.setAttribute('id',gradientId);\r\n    gfill.setAttribute('spreadMethod','pad');\r\n    gfill.setAttribute('gradientUnits','userSpaceOnUse');\r\n    var stops = [];\r\n    var stop, j, jLen;\r\n    jLen = data.g.p*4;\r\n    for(j=0;j<jLen;j+=4){\r\n        stop = createNS('stop');\r\n        gfill.appendChild(stop);\r\n        stops.push(stop);\r\n    }\r\n    pathElement.setAttribute( data.ty === 'gf' ? 'fill':'stroke','url(' + locationHref + '#'+gradientId+')');\r\n    \r\n    this.gf = gfill;\r\n    this.cst = stops;\r\n};\r\n\r\nSVGGradientFillStyleData.prototype.setGradientOpacity = function(data, styleOb){\r\n    if(this.g._hasOpacity && !this.g._collapsable){\r\n        var stop, j, jLen;\r\n        var mask = createNS(\"mask\");\r\n        var maskElement = createNS( 'path');\r\n        mask.appendChild(maskElement);\r\n        var opacityId = createElementID();\r\n        var maskId = createElementID();\r\n        mask.setAttribute('id',maskId);\r\n        var opFill = createNS(data.t === 1 ? 'linearGradient' : 'radialGradient');\r\n        opFill.setAttribute('id',opacityId);\r\n        opFill.setAttribute('spreadMethod','pad');\r\n        opFill.setAttribute('gradientUnits','userSpaceOnUse');\r\n        jLen = data.g.k.k[0].s ? data.g.k.k[0].s.length : data.g.k.k.length;\r\n        var stops = this.stops;\r\n        for(j=data.g.p*4;j<jLen;j+=2){\r\n            stop = createNS('stop');\r\n            stop.setAttribute('stop-color','rgb(255,255,255)');\r\n            opFill.appendChild(stop);\r\n            stops.push(stop);\r\n        }\r\n        maskElement.setAttribute( data.ty === 'gf' ? 'fill':'stroke','url(' + locationHref + '#'+opacityId+')');\r\n        this.of = opFill;\r\n        this.ms = mask;\r\n        this.ost = stops;\r\n        this.maskId = maskId;\r\n        styleOb.msElem = maskElement;\r\n    }\r\n};\r\n\r\nextendPrototype([DynamicPropertyContainer], SVGGradientFillStyleData);\r\nfunction SVGGradientStrokeStyleData(elem, data, styleOb){\r\n\tthis.initDynamicPropertyContainer(elem);\r\n\tthis.getValue = this.iterateDynamicProperties;\r\n\tthis.w = PropertyFactory.getProp(elem,data.w,0,null,this);\r\n\tthis.d = new DashProperty(elem,data.d||{},'svg',this);\r\n    this.initGradientData(elem, data, styleOb);\r\n    this._isAnimated = !!this._isAnimated;\r\n}\r\n\r\nextendPrototype([SVGGradientFillStyleData, DynamicPropertyContainer], SVGGradientStrokeStyleData);\r\nfunction ShapeGroupData() {\r\n\tthis.it = [];\r\n    this.prevViewData = [];\r\n    this.gr = createNS('g');\r\n}\r\nvar SVGElementsRenderer = (function() {\r\n\tvar _identityMatrix = new Matrix();\r\n\tvar _matrixHelper = new Matrix();\r\n\r\n\tvar ob = {\r\n\t\tcreateRenderFunction: createRenderFunction\r\n\t}\r\n\r\n\tfunction createRenderFunction(data) {\r\n\t    var ty = data.ty;\r\n\t    switch(data.ty) {\r\n\t        case 'fl':\r\n\t        return renderFill;\r\n\t        case 'gf':\r\n\t        return renderGradient;\r\n\t        case 'gs':\r\n\t        return renderGradientStroke;\r\n\t        case 'st':\r\n\t        return renderStroke;\r\n\t        case 'sh':\r\n\t        case 'el':\r\n\t        case 'rc':\r\n\t        case 'sr':\r\n\t        return renderPath;\r\n\t        case 'tr':\r\n\t        return renderContentTransform;\r\n\t    }\r\n\t}\r\n\r\n\tfunction renderContentTransform(styleData, itemData, isFirstFrame) {\r\n\t    if(isFirstFrame || itemData.transform.op._mdf){\r\n\t        itemData.transform.container.setAttribute('opacity',itemData.transform.op.v);\r\n\t    }\r\n\t    if(isFirstFrame || itemData.transform.mProps._mdf){\r\n\t        itemData.transform.container.setAttribute('transform',itemData.transform.mProps.v.to2dCSS());\r\n\t    }\r\n\t}\r\n\r\n\tfunction renderPath(styleData, itemData, isFirstFrame) {\r\n\t    var j, jLen,pathStringTransformed,redraw,pathNodes,l, lLen = itemData.styles.length;\r\n\t    var lvl = itemData.lvl;\r\n\t    var paths, mat, props, iterations, k;\r\n\t    for(l=0;l<lLen;l+=1){\r\n\t        redraw = itemData.sh._mdf || isFirstFrame;\r\n\t        if(itemData.styles[l].lvl < lvl){\r\n\t            mat = _matrixHelper.reset();\r\n\t            iterations = lvl - itemData.styles[l].lvl;\r\n\t            k = itemData.transformers.length-1;\r\n\t            while(!redraw && iterations > 0) {\r\n\t                redraw = itemData.transformers[k].mProps._mdf || redraw;\r\n\t                iterations --;\r\n\t                k --;\r\n\t            }\r\n\t            if(redraw) {\r\n\t                iterations = lvl - itemData.styles[l].lvl;\r\n\t                k = itemData.transformers.length-1;\r\n\t                while(iterations > 0) {\r\n\t                    props = itemData.transformers[k].mProps.v.props;\r\n\t                    mat.transform(props[0],props[1],props[2],props[3],props[4],props[5],props[6],props[7],props[8],props[9],props[10],props[11],props[12],props[13],props[14],props[15]);\r\n\t                    iterations --;\r\n\t                    k --;\r\n\t                }\r\n\t            }\r\n\t        } else {\r\n\t            mat = _identityMatrix;\r\n\t        }\r\n\t        paths = itemData.sh.paths;\r\n\t        jLen = paths._length;\r\n\t        if(redraw){\r\n\t            pathStringTransformed = '';\r\n\t            for(j=0;j<jLen;j+=1){\r\n\t                pathNodes = paths.shapes[j];\r\n\t                if(pathNodes && pathNodes._length){\r\n\t                    pathStringTransformed += buildShapeString(pathNodes, pathNodes._length, pathNodes.c, mat);\r\n\t                }\r\n\t            }\r\n\t            itemData.caches[l] = pathStringTransformed;\r\n\t        } else {\r\n\t            pathStringTransformed = itemData.caches[l];\r\n\t        }\r\n\t        itemData.styles[l].d += styleData.hd === true ? '' : pathStringTransformed;\r\n\t        itemData.styles[l]._mdf = redraw || itemData.styles[l]._mdf;\r\n\t    }\r\n\t}\r\n\r\n\tfunction renderFill (styleData,itemData, isFirstFrame){\r\n\t    var styleElem = itemData.style;\r\n\r\n\t    if(itemData.c._mdf || isFirstFrame){\r\n\t        styleElem.pElem.setAttribute('fill','rgb('+bm_floor(itemData.c.v[0])+','+bm_floor(itemData.c.v[1])+','+bm_floor(itemData.c.v[2])+')');\r\n\t    }\r\n\t    if(itemData.o._mdf || isFirstFrame){\r\n\t        styleElem.pElem.setAttribute('fill-opacity',itemData.o.v);\r\n\t    }\r\n\t};\r\n\r\n\tfunction renderGradientStroke (styleData, itemData, isFirstFrame) {\r\n\t    renderGradient(styleData, itemData, isFirstFrame);\r\n\t    renderStroke(styleData, itemData, isFirstFrame);\r\n\t}\r\n\r\n\tfunction renderGradient(styleData, itemData, isFirstFrame) {\r\n\t    var gfill = itemData.gf;\r\n\t    var hasOpacity = itemData.g._hasOpacity;\r\n\t    var pt1 = itemData.s.v, pt2 = itemData.e.v;\r\n\r\n\t    if (itemData.o._mdf || isFirstFrame) {\r\n\t        var attr = styleData.ty === 'gf' ? 'fill-opacity' : 'stroke-opacity';\r\n\t        itemData.style.pElem.setAttribute(attr, itemData.o.v);\r\n\t    }\r\n\t    if (itemData.s._mdf || isFirstFrame) {\r\n\t        var attr1 = styleData.t === 1 ? 'x1' : 'cx';\r\n\t        var attr2 = attr1 === 'x1' ? 'y1' : 'cy';\r\n\t        gfill.setAttribute(attr1, pt1[0]);\r\n\t        gfill.setAttribute(attr2, pt1[1]);\r\n\t        if (hasOpacity && !itemData.g._collapsable) {\r\n\t            itemData.of.setAttribute(attr1, pt1[0]);\r\n\t            itemData.of.setAttribute(attr2, pt1[1]);\r\n\t        }\r\n\t    }\r\n\t    var stops, i, len, stop;\r\n\t    if (itemData.g._cmdf || isFirstFrame) {\r\n\t        stops = itemData.cst;\r\n\t        var cValues = itemData.g.c;\r\n\t        len = stops.length;\r\n\t        for (i = 0; i < len; i += 1){\r\n\t            stop = stops[i];\r\n\t            stop.setAttribute('offset', cValues[i * 4] + '%');\r\n\t            stop.setAttribute('stop-color','rgb('+ cValues[i * 4 + 1] + ',' + cValues[i * 4 + 2] + ','+cValues[i * 4 + 3] + ')');\r\n\t        }\r\n\t    }\r\n\t    if (hasOpacity && (itemData.g._omdf || isFirstFrame)) {\r\n\t        var oValues = itemData.g.o;\r\n\t        if(itemData.g._collapsable) {\r\n\t            stops = itemData.cst;\r\n\t        } else {\r\n\t            stops = itemData.ost;\r\n\t        }\r\n\t        len = stops.length;\r\n\t        for (i = 0; i < len; i += 1) {\r\n\t            stop = stops[i];\r\n\t            if(!itemData.g._collapsable) {\r\n\t                stop.setAttribute('offset', oValues[i * 2] + '%');\r\n\t            }\r\n\t            stop.setAttribute('stop-opacity', oValues[i * 2 + 1]);\r\n\t        }\r\n\t    }\r\n\t    if (styleData.t === 1) {\r\n\t        if (itemData.e._mdf  || isFirstFrame) {\r\n\t            gfill.setAttribute('x2', pt2[0]);\r\n\t            gfill.setAttribute('y2', pt2[1]);\r\n\t            if (hasOpacity && !itemData.g._collapsable) {\r\n\t                itemData.of.setAttribute('x2', pt2[0]);\r\n\t                itemData.of.setAttribute('y2', pt2[1]);\r\n\t            }\r\n\t        }\r\n\t    } else {\r\n\t        var rad;\r\n\t        if (itemData.s._mdf || itemData.e._mdf || isFirstFrame) {\r\n\t            rad = Math.sqrt(Math.pow(pt1[0] - pt2[0], 2) + Math.pow(pt1[1] - pt2[1], 2));\r\n\t            gfill.setAttribute('r', rad);\r\n\t            if(hasOpacity && !itemData.g._collapsable){\r\n\t                itemData.of.setAttribute('r', rad);\r\n\t            }\r\n\t        }\r\n\t        if (itemData.e._mdf || itemData.h._mdf || itemData.a._mdf || isFirstFrame) {\r\n\t            if (!rad) {\r\n\t                rad = Math.sqrt(Math.pow(pt1[0] - pt2[0], 2) + Math.pow(pt1[1] - pt2[1], 2));\r\n\t            }\r\n\t            var ang = Math.atan2(pt2[1] - pt1[1], pt2[0] - pt1[0]);\r\n\r\n\t            var percent = itemData.h.v >= 1 ? 0.99 : itemData.h.v <= -1 ? -0.99: itemData.h.v;\r\n\t            var dist = rad * percent;\r\n\t            var x = Math.cos(ang + itemData.a.v) * dist + pt1[0];\r\n\t            var y = Math.sin(ang + itemData.a.v) * dist + pt1[1];\r\n\t            gfill.setAttribute('fx', x);\r\n\t            gfill.setAttribute('fy', y);\r\n\t            if (hasOpacity && !itemData.g._collapsable) {\r\n\t                itemData.of.setAttribute('fx', x);\r\n\t                itemData.of.setAttribute('fy', y);\r\n\t            }\r\n\t        }\r\n\t        //gfill.setAttribute('fy','200');\r\n\t    }\r\n\t};\r\n\r\n\tfunction renderStroke(styleData, itemData, isFirstFrame) {\r\n\t    var styleElem = itemData.style;\r\n\t    var d = itemData.d;\r\n\t    if (d && (d._mdf || isFirstFrame) && d.dashStr) {\r\n\t        styleElem.pElem.setAttribute('stroke-dasharray', d.dashStr);\r\n\t        styleElem.pElem.setAttribute('stroke-dashoffset', d.dashoffset[0]);\r\n\t    }\r\n\t    if(itemData.c && (itemData.c._mdf || isFirstFrame)){\r\n\t        styleElem.pElem.setAttribute('stroke','rgb(' + bm_floor(itemData.c.v[0]) + ',' + bm_floor(itemData.c.v[1]) + ',' + bm_floor(itemData.c.v[2]) + ')');\r\n\t    }\r\n\t    if(itemData.o._mdf || isFirstFrame){\r\n\t        styleElem.pElem.setAttribute('stroke-opacity', itemData.o.v);\r\n\t    }\r\n\t    if(itemData.w._mdf || isFirstFrame){\r\n\t        styleElem.pElem.setAttribute('stroke-width', itemData.w.v);\r\n\t        if(styleElem.msElem){\r\n\t            styleElem.msElem.setAttribute('stroke-width', itemData.w.v);\r\n\t        }\r\n\t    }\r\n\t};\r\n\r\n\treturn ob;\r\n}())\r\nfunction ShapeTransformManager() {\r\n\tthis.sequences = {};\r\n\tthis.sequenceList = [];\r\n    this.transform_key_count = 0;\r\n}\r\n\r\nShapeTransformManager.prototype = {\r\n\taddTransformSequence: function(transforms) {\r\n\t\tvar i, len = transforms.length;\r\n\t\tvar key = '_';\r\n\t\tfor(i = 0; i < len; i += 1) {\r\n\t\t\tkey += transforms[i].transform.key + '_';\r\n\t\t}\r\n\t\tvar sequence = this.sequences[key];\r\n\t\tif(!sequence) {\r\n\t\t\tsequence = {\r\n\t\t\t\ttransforms: [].concat(transforms),\r\n\t\t\t\tfinalTransform: new Matrix(),\r\n\t\t\t\t_mdf: false\r\n\t\t\t};\r\n\t\t\tthis.sequences[key] = sequence;\r\n\t\t\tthis.sequenceList.push(sequence);\r\n\t\t}\r\n\t\treturn sequence;\r\n\t},\r\n\tprocessSequence: function(sequence, isFirstFrame) {\r\n\t\tvar i = 0, len = sequence.transforms.length, _mdf = isFirstFrame;\r\n\t\twhile (i < len && !isFirstFrame) {\r\n\t\t\tif (sequence.transforms[i].transform.mProps._mdf) {\r\n\t\t\t\t_mdf = true;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\ti += 1\r\n\t\t}\r\n\t\tif (_mdf) {\r\n\t\t\tvar props;\r\n\t\t\tsequence.finalTransform.reset();\r\n\t\t\tfor (i = len - 1; i >= 0; i -= 1) {\r\n\t\t        props = sequence.transforms[i].transform.mProps.v.props;\r\n\t\t        sequence.finalTransform.transform(props[0],props[1],props[2],props[3],props[4],props[5],props[6],props[7],props[8],props[9],props[10],props[11],props[12],props[13],props[14],props[15]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tsequence._mdf = _mdf;\r\n\t\t\r\n\t},\r\n\tprocessSequences: function(isFirstFrame) {\r\n\t\tvar i, len = this.sequenceList.length;\r\n\t\tfor (i = 0; i < len; i += 1) {\r\n\t\t\tthis.processSequence(this.sequenceList[i], isFirstFrame);\r\n\t\t}\r\n\r\n\t},\r\n\tgetNewKey: function() {\r\n\t\treturn '_' + this.transform_key_count++;\r\n\t}\r\n}\r\nfunction CVShapeData(element, data, styles, transformsManager) {\r\n    this.styledShapes = [];\r\n    this.tr = [0,0,0,0,0,0];\r\n    var ty = 4;\r\n    if(data.ty == 'rc'){\r\n        ty = 5;\r\n    }else if(data.ty == 'el'){\r\n        ty = 6;\r\n    }else if(data.ty == 'sr'){\r\n        ty = 7;\r\n    }\r\n    this.sh = ShapePropertyFactory.getShapeProp(element,data,ty,element);\r\n    var i , len = styles.length,styledShape;\r\n    for (i = 0; i < len; i += 1) {\r\n        if (!styles[i].closed) {\r\n            styledShape = {\r\n                transforms: transformsManager.addTransformSequence(styles[i].transforms),\r\n                trNodes: []\r\n            }\r\n            this.styledShapes.push(styledShape);\r\n            styles[i].elements.push(styledShape);\r\n        }\r\n    }\r\n}\r\n\r\nCVShapeData.prototype.setAsAnimated = SVGShapeData.prototype.setAsAnimated;\r\nfunction BaseElement(){\r\n}\r\n\r\nBaseElement.prototype = {\r\n    checkMasks: function(){\r\n        if(!this.data.hasMask){\r\n            return false;\r\n        }\r\n        var i = 0, len = this.data.masksProperties.length;\r\n        while(i<len) {\r\n            if((this.data.masksProperties[i].mode !== 'n' && this.data.masksProperties[i].cl !== false)) {\r\n                return true;\r\n            }\r\n            i += 1;\r\n        }\r\n        return false;\r\n    },\r\n    initExpressions: function(){\r\n        this.layerInterface = LayerExpressionInterface(this);\r\n        if(this.data.hasMask && this.maskManager) {\r\n            this.layerInterface.registerMaskInterface(this.maskManager);\r\n        }\r\n        var effectsInterface = EffectsExpressionInterface.createEffectsInterface(this,this.layerInterface);\r\n        this.layerInterface.registerEffectsInterface(effectsInterface);\r\n\r\n        if(this.data.ty === 0 || this.data.xt){\r\n            this.compInterface = CompExpressionInterface(this);\r\n        } else if(this.data.ty === 4){\r\n            this.layerInterface.shapeInterface = ShapeExpressionInterface(this.shapesData,this.itemsData,this.layerInterface);\r\n            this.layerInterface.content = this.layerInterface.shapeInterface;\r\n        } else if(this.data.ty === 5){\r\n            this.layerInterface.textInterface = TextExpressionInterface(this);\r\n            this.layerInterface.text = this.layerInterface.textInterface;\r\n        }\r\n    },\r\n    setBlendMode: function(){\r\n        var blendModeValue = getBlendMode(this.data.bm);\r\n        var elem = this.baseElement || this.layerElement;\r\n\r\n        elem.style['mix-blend-mode'] = blendModeValue;\r\n    },\r\n    initBaseData: function(data, globalData, comp){\r\n        this.globalData = globalData;\r\n        this.comp = comp;\r\n        this.data = data;\r\n        this.layerId = createElementID();\r\n        \r\n        //Stretch factor for old animations missing this property.\r\n        if(!this.data.sr){\r\n            this.data.sr = 1;\r\n        }\r\n        // effects manager\r\n        this.effectsManager = new EffectsManager(this.data,this,this.dynamicProperties);\r\n        \r\n    },\r\n    getType: function(){\r\n        return this.type;\r\n    }\r\n    ,sourceRectAtTime: function(){}\r\n}\r\nfunction NullElement(data,globalData,comp){\r\n    this.initFrame();\r\n\tthis.initBaseData(data, globalData, comp);\r\n    this.initFrame();\r\n    this.initTransform(data, globalData, comp);\r\n    this.initHierarchy();\r\n}\r\n\r\nNullElement.prototype.prepareFrame = function(num) {\r\n    this.prepareProperties(num, true);\r\n};\r\n\r\nNullElement.prototype.renderFrame = function() {\r\n};\r\n\r\nNullElement.prototype.getBaseElement = function() {\r\n\treturn null;\r\n};\r\n\r\nNullElement.prototype.destroy = function() {\r\n};\r\n\r\nNullElement.prototype.sourceRectAtTime = function() {\r\n};\r\n\r\nNullElement.prototype.hide = function() {\r\n};\r\n\r\nextendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement], NullElement);\r\n\r\nfunction SVGBaseElement(){\r\n}\r\n\r\nSVGBaseElement.prototype = {\r\n    initRendererElement: function() {\r\n        this.layerElement = createNS('g');\r\n    },\r\n    createContainerElements: function(){\r\n        this.matteElement = createNS('g');\r\n        this.transformedElement = this.layerElement;\r\n        this.maskedElement = this.layerElement;\r\n        this._sizeChanged = false;\r\n        var layerElementParent = null;\r\n        //If this layer acts as a mask for the following layer\r\n        var filId, fil, gg;\r\n        if (this.data.td) {\r\n            if (this.data.td == 3 || this.data.td == 1) {\r\n                var masker = createNS('mask');\r\n                masker.setAttribute('id', this.layerId);\r\n                masker.setAttribute('mask-type', this.data.td == 3 ? 'luminance' : 'alpha');\r\n                masker.appendChild(this.layerElement);\r\n                layerElementParent = masker;\r\n                this.globalData.defs.appendChild(masker);\r\n                // This is only for IE and Edge when mask if of type alpha\r\n                if (!featureSupport.maskType && this.data.td == 1) {\r\n                    masker.setAttribute('mask-type', 'luminance');\r\n                    filId = createElementID();\r\n                    fil = filtersFactory.createFilter(filId);\r\n                    this.globalData.defs.appendChild(fil);\r\n                    fil.appendChild(filtersFactory.createAlphaToLuminanceFilter());\r\n                    gg = createNS('g');\r\n                    gg.appendChild(this.layerElement);\r\n                    layerElementParent = gg;\r\n                    masker.appendChild(gg);\r\n                    gg.setAttribute('filter','url(' + locationHref + '#' + filId + ')');\r\n                }\r\n            } else if(this.data.td == 2) {\r\n                var maskGroup = createNS('mask');\r\n                maskGroup.setAttribute('id', this.layerId);\r\n                maskGroup.setAttribute('mask-type','alpha');\r\n                var maskGrouper = createNS('g');\r\n                maskGroup.appendChild(maskGrouper);\r\n                filId = createElementID();\r\n                fil = filtersFactory.createFilter(filId);\r\n                ////\r\n\r\n                // This solution doesn't work on Android when meta tag with viewport attribute is set\r\n                /*var feColorMatrix = createNS('feColorMatrix');\r\n                feColorMatrix.setAttribute('type', 'matrix');\r\n                feColorMatrix.setAttribute('color-interpolation-filters', 'sRGB');\r\n                feColorMatrix.setAttribute('values','1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 -1 1');\r\n                fil.appendChild(feColorMatrix);*/\r\n                ////\r\n                var feCTr = createNS('feComponentTransfer');\r\n                feCTr.setAttribute('in','SourceGraphic');\r\n                fil.appendChild(feCTr);\r\n                var feFunc = createNS('feFuncA');\r\n                feFunc.setAttribute('type','table');\r\n                feFunc.setAttribute('tableValues','1.0 0.0');\r\n                feCTr.appendChild(feFunc);\r\n                ////\r\n                this.globalData.defs.appendChild(fil);\r\n                var alphaRect = createNS('rect');\r\n                alphaRect.setAttribute('width',  this.comp.data.w);\r\n                alphaRect.setAttribute('height', this.comp.data.h);\r\n                alphaRect.setAttribute('x','0');\r\n                alphaRect.setAttribute('y','0');\r\n                alphaRect.setAttribute('fill','#ffffff');\r\n                alphaRect.setAttribute('opacity','0');\r\n                maskGrouper.setAttribute('filter', 'url(' + locationHref + '#'+filId+')');\r\n                maskGrouper.appendChild(alphaRect);\r\n                maskGrouper.appendChild(this.layerElement);\r\n                layerElementParent = maskGrouper;\r\n                if (!featureSupport.maskType) {\r\n                    maskGroup.setAttribute('mask-type', 'luminance');\r\n                    fil.appendChild(filtersFactory.createAlphaToLuminanceFilter());\r\n                    gg = createNS('g');\r\n                    maskGrouper.appendChild(alphaRect);\r\n                    gg.appendChild(this.layerElement);\r\n                    layerElementParent = gg;\r\n                    maskGrouper.appendChild(gg);\r\n                }\r\n                this.globalData.defs.appendChild(maskGroup);\r\n            }\r\n        } else if (this.data.tt) {\r\n            this.matteElement.appendChild(this.layerElement);\r\n            layerElementParent = this.matteElement;\r\n            this.baseElement = this.matteElement;\r\n        } else {\r\n            this.baseElement = this.layerElement;\r\n        }\r\n        if (this.data.ln) {\r\n            this.layerElement.setAttribute('id', this.data.ln);\r\n        }\r\n        if (this.data.cl) {\r\n            this.layerElement.setAttribute('class', this.data.cl);\r\n        }\r\n        //Clipping compositions to hide content that exceeds boundaries. If collapsed transformations is on, component should not be clipped\r\n        if (this.data.ty === 0 && !this.data.hd) {\r\n            var cp = createNS( 'clipPath');\r\n            var pt = createNS('path');\r\n            pt.setAttribute('d','M0,0 L' + this.data.w + ',0' + ' L' + this.data.w + ',' + this.data.h + ' L0,' + this.data.h + 'z');\r\n            var clipId = createElementID();\r\n            cp.setAttribute('id',clipId);\r\n            cp.appendChild(pt);\r\n            this.globalData.defs.appendChild(cp);\r\n\r\n            if (this.checkMasks()) {\r\n                var cpGroup = createNS('g');\r\n                cpGroup.setAttribute('clip-path','url(' + locationHref + '#'+clipId + ')');\r\n                cpGroup.appendChild(this.layerElement);\r\n                this.transformedElement = cpGroup;\r\n                if (layerElementParent) {\r\n                    layerElementParent.appendChild(this.transformedElement);\r\n                } else {\r\n                    this.baseElement = this.transformedElement;\r\n                }\r\n            } else {\r\n                this.layerElement.setAttribute('clip-path','url(' + locationHref + '#'+clipId+')');\r\n            }\r\n            \r\n        }\r\n        if (this.data.bm !== 0) {\r\n            this.setBlendMode();\r\n        }\r\n\r\n    },\r\n    renderElement: function() {\r\n        if (this.finalTransform._matMdf) {\r\n            this.transformedElement.setAttribute('transform', this.finalTransform.mat.to2dCSS());\r\n        }\r\n        if (this.finalTransform._opMdf) {\r\n            this.transformedElement.setAttribute('opacity', this.finalTransform.mProp.o.v);\r\n        }\r\n    },\r\n    destroyBaseElement: function() {\r\n        this.layerElement = null;\r\n        this.matteElement = null;\r\n        this.maskManager.destroy();\r\n    },\r\n    getBaseElement: function() {\r\n        if (this.data.hd) {\r\n            return null;\r\n        }\r\n        return this.baseElement;\r\n    },\r\n    createRenderableComponents: function() {\r\n        this.maskManager = new MaskElement(this.data, this, this.globalData);\r\n        this.renderableEffectsManager = new SVGEffects(this);\r\n    },\r\n    setMatte: function(id) {\r\n        if (!this.matteElement) {\r\n            return;\r\n        }\r\n        this.matteElement.setAttribute(\"mask\", \"url(\" + locationHref + \"#\" + id + \")\");\r\n    }\r\n};\r\nfunction IShapeElement(){\r\n}\r\n\r\nIShapeElement.prototype = {\r\n    addShapeToModifiers: function(data) {\r\n        var i, len = this.shapeModifiers.length;\r\n        for(i=0;i<len;i+=1){\r\n            this.shapeModifiers[i].addShape(data);\r\n        }\r\n    },\r\n    isShapeInAnimatedModifiers: function(data) {\r\n        var i = 0, len = this.shapeModifiers.length;\r\n        while(i < len) {\r\n            if(this.shapeModifiers[i].isAnimatedWithShape(data)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    },\r\n    renderModifiers: function() {\r\n        if(!this.shapeModifiers.length){\r\n            return;\r\n        }\r\n        var i, len = this.shapes.length;\r\n        for(i=0;i<len;i+=1){\r\n            this.shapes[i].sh.reset();\r\n        }\r\n\r\n        len = this.shapeModifiers.length;\r\n        for(i=len-1;i>=0;i-=1){\r\n            this.shapeModifiers[i].processShapes(this._isFirstFrame);\r\n        }\r\n    },\r\n    lcEnum: {\r\n        '1': 'butt',\r\n        '2': 'round',\r\n        '3': 'square'\r\n    },\r\n    ljEnum: {\r\n        '1': 'miter',\r\n        '2': 'round',\r\n        '3': 'bevel'\r\n    },\r\n    searchProcessedElement: function(elem){\r\n        var elements = this.processedElements;\r\n        var i = 0, len = elements.length;\r\n        while (i < len) {\r\n            if (elements[i].elem === elem) {\r\n                return elements[i].pos;\r\n            }\r\n            i += 1;\r\n        }\r\n        return 0;\r\n    },\r\n    addProcessedElement: function(elem, pos){\r\n        var elements = this.processedElements;\r\n        var i = elements.length;\r\n        while(i) {\r\n            i -= 1;\r\n            if (elements[i].elem === elem) {\r\n                elements[i].pos = pos;\r\n                return;\r\n            }\r\n        }\r\n        elements.push(new ProcessedElement(elem, pos));\r\n    },\r\n    prepareFrame: function(num) {\r\n        this.prepareRenderableFrame(num);\r\n        this.prepareProperties(num, this.isInRange);\r\n    }\r\n};\r\nfunction ITextElement(){\r\n}\r\n\r\nITextElement.prototype.initElement = function(data,globalData,comp){\r\n    this.lettersChangedFlag = true;\r\n    this.initFrame();\r\n    this.initBaseData(data, globalData, comp);\r\n    this.textProperty = new TextProperty(this, data.t, this.dynamicProperties);\r\n    this.textAnimator = new TextAnimatorProperty(data.t, this.renderType, this);\r\n    this.initTransform(data, globalData, comp);\r\n    this.initHierarchy();\r\n    this.initRenderable();\r\n    this.initRendererElement();\r\n    this.createContainerElements();\r\n    this.createRenderableComponents();\r\n    this.createContent();\r\n    this.hide();\r\n    this.textAnimator.searchProperties(this.dynamicProperties);\r\n};\r\n\r\nITextElement.prototype.prepareFrame = function(num) {\r\n    this._mdf = false;\r\n    this.prepareRenderableFrame(num);\r\n    this.prepareProperties(num, this.isInRange);\r\n    if(this.textProperty._mdf || this.textProperty._isFirstFrame) {\r\n        this.buildNewText();\r\n        this.textProperty._isFirstFrame = false;\r\n        this.textProperty._mdf = false;\r\n    }\r\n};\r\n\r\nITextElement.prototype.createPathShape = function(matrixHelper, shapes) {\r\n    var j,jLen = shapes.length;\r\n    var k, kLen, pathNodes;\r\n    var shapeStr = '';\r\n    for(j=0;j<jLen;j+=1){\r\n        pathNodes = shapes[j].ks.k;\r\n        shapeStr += buildShapeString(pathNodes, pathNodes.i.length, true, matrixHelper);\r\n    }\r\n    return shapeStr;\r\n};\r\n\r\nITextElement.prototype.updateDocumentData = function(newData, index) {\r\n    this.textProperty.updateDocumentData(newData, index);\r\n};\r\n\r\nITextElement.prototype.canResizeFont = function(_canResize) {\r\n    this.textProperty.canResizeFont(_canResize);\r\n};\r\n\r\nITextElement.prototype.setMinimumFontSize = function(_fontSize) {\r\n    this.textProperty.setMinimumFontSize(_fontSize);\r\n};\r\n\r\nITextElement.prototype.applyTextPropertiesToMatrix = function(documentData, matrixHelper, lineNumber, xPos, yPos) {\r\n    if(documentData.ps){\r\n        matrixHelper.translate(documentData.ps[0],documentData.ps[1] + documentData.ascent,0);\r\n    }\r\n    matrixHelper.translate(0,-documentData.ls,0);\r\n    switch(documentData.j){\r\n        case 1:\r\n            matrixHelper.translate(documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[lineNumber]),0,0);\r\n            break;\r\n        case 2:\r\n            matrixHelper.translate(documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[lineNumber] )/2,0,0);\r\n            break;\r\n    }\r\n    matrixHelper.translate(xPos, yPos, 0);\r\n};\r\n\r\n\r\nITextElement.prototype.buildColor = function(colorData) {\r\n    return 'rgb(' + Math.round(colorData[0]*255) + ',' + Math.round(colorData[1]*255) + ',' + Math.round(colorData[2]*255) + ')';\r\n};\r\n\r\nITextElement.prototype.emptyProp = new LetterProps();\r\n\r\nITextElement.prototype.destroy = function(){\r\n    \r\n};\r\nfunction ICompElement(){}\r\n\r\nextendPrototype([BaseElement, TransformElement, HierarchyElement, FrameElement, RenderableDOMElement], ICompElement);\r\n\r\nICompElement.prototype.initElement = function(data,globalData,comp) {\r\n    this.initFrame();\r\n    this.initBaseData(data, globalData, comp);\r\n    this.initTransform(data, globalData, comp);\r\n    this.initRenderable();\r\n    this.initHierarchy();\r\n    this.initRendererElement();\r\n    this.createContainerElements();\r\n    this.createRenderableComponents();\r\n    if(this.data.xt || !globalData.progressiveLoad){\r\n        this.buildAllItems();\r\n    }\r\n    this.hide();\r\n};\r\n\r\n/*ICompElement.prototype.hide = function(){\r\n    if(!this.hidden){\r\n        this.hideElement();\r\n        var i,len = this.elements.length;\r\n        for( i = 0; i < len; i+=1 ){\r\n            if(this.elements[i]){\r\n                this.elements[i].hide();\r\n            }\r\n        }\r\n    }\r\n};*/\r\n\r\nICompElement.prototype.prepareFrame = function(num){\r\n    this._mdf = false;\r\n    this.prepareRenderableFrame(num);\r\n    this.prepareProperties(num, this.isInRange);\r\n    if(!this.isInRange && !this.data.xt){\r\n        return;\r\n    }\r\n\r\n    if (!this.tm._placeholder) {\r\n        var timeRemapped = this.tm.v;\r\n        if(timeRemapped === this.data.op){\r\n            timeRemapped = this.data.op - 1;\r\n        }\r\n        this.renderedFrame = timeRemapped;\r\n    } else {\r\n        this.renderedFrame = num/this.data.sr;\r\n    }\r\n    var i,len = this.elements.length;\r\n    if(!this.completeLayers){\r\n        this.checkLayers(this.renderedFrame);\r\n    }\r\n    //This iteration needs to be backwards because of how expressions connect between each other\r\n    for( i = len - 1; i >= 0; i -= 1 ){\r\n        if(this.completeLayers || this.elements[i]){\r\n            this.elements[i].prepareFrame(this.renderedFrame - this.layers[i].st);\r\n            if(this.elements[i]._mdf) {\r\n                this._mdf = true;\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nICompElement.prototype.renderInnerContent = function() {\r\n    var i,len = this.layers.length;\r\n    for( i = 0; i < len; i += 1 ){\r\n        if(this.completeLayers || this.elements[i]){\r\n            this.elements[i].renderFrame();\r\n        }\r\n    }\r\n};\r\n\r\nICompElement.prototype.setElements = function(elems){\r\n    this.elements = elems;\r\n};\r\n\r\nICompElement.prototype.getElements = function(){\r\n    return this.elements;\r\n};\r\n\r\nICompElement.prototype.destroyElements = function(){\r\n    var i,len = this.layers.length;\r\n    for( i = 0; i < len; i+=1 ){\r\n        if(this.elements[i]){\r\n            this.elements[i].destroy();\r\n        }\r\n    }\r\n};\r\n\r\nICompElement.prototype.destroy = function(){\r\n    this.destroyElements();\r\n    this.destroyBaseElement();\r\n};\r\n\r\nfunction IImageElement(data,globalData,comp){\r\n    this.assetData = globalData.getAssetData(data.refId);\r\n    this.initElement(data,globalData,comp);\r\n    this.sourceRect = {top:0,left:0,width:this.assetData.w,height:this.assetData.h};\r\n}\r\n\r\nextendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement], IImageElement);\r\n\r\nIImageElement.prototype.createContent = function(){\r\n\r\n    var assetPath = this.globalData.getAssetsPath(this.assetData);\r\n\r\n    this.innerElem = createNS('image');\r\n    this.innerElem.setAttribute('width',this.assetData.w+\"px\");\r\n    this.innerElem.setAttribute('height',this.assetData.h+\"px\");\r\n    this.innerElem.setAttribute('preserveAspectRatio',this.assetData.pr || this.globalData.renderConfig.imagePreserveAspectRatio);\r\n    this.innerElem.setAttributeNS('http://www.w3.org/1999/xlink','href',assetPath);\r\n    \r\n    this.layerElement.appendChild(this.innerElem);\r\n};\r\n\r\nIImageElement.prototype.sourceRectAtTime = function() {\r\n\treturn this.sourceRect;\r\n}\r\nfunction ISolidElement(data,globalData,comp){\r\n    this.initElement(data,globalData,comp);\r\n}\r\nextendPrototype([IImageElement], ISolidElement);\r\n\r\nISolidElement.prototype.createContent = function(){\r\n\r\n    var rect = createNS('rect');\r\n    ////rect.style.width = this.data.sw;\r\n    ////rect.style.height = this.data.sh;\r\n    ////rect.style.fill = this.data.sc;\r\n    rect.setAttribute('width',this.data.sw);\r\n    rect.setAttribute('height',this.data.sh);\r\n    rect.setAttribute('fill',this.data.sc);\r\n    this.layerElement.appendChild(rect);\r\n};\r\nfunction SVGCompElement(data,globalData,comp){\r\n    this.layers = data.layers;\r\n    this.supports3d = true;\r\n    this.completeLayers = false;\r\n    this.pendingElements = [];\r\n    this.elements = this.layers ? createSizedArray(this.layers.length) : [];\r\n    //this.layerElement = createNS('g');\r\n    this.initElement(data,globalData,comp);\r\n    this.tm = data.tm ? PropertyFactory.getProp(this,data.tm,0,globalData.frameRate,this) : {_placeholder:true};\r\n}\r\n\r\nextendPrototype([SVGRenderer, ICompElement, SVGBaseElement], SVGCompElement);\r\nfunction SVGTextElement(data,globalData,comp){\r\n    this.textSpans = [];\r\n    this.renderType = 'svg';\r\n    this.initElement(data,globalData,comp);\r\n}\r\n\r\nextendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement], SVGTextElement);\r\n\r\nSVGTextElement.prototype.createContent = function(){\r\n\r\n    if (this.data.singleShape && !this.globalData.fontManager.chars) {\r\n        this.textContainer = createNS('text');\r\n    }\r\n};\r\n\r\nSVGTextElement.prototype.buildTextContents = function(textArray) {\r\n    var i = 0, len = textArray.length;\r\n    var textContents = [], currentTextContent = '';\r\n    while (i < len) {\r\n        if(textArray[i] === String.fromCharCode(13) || textArray[i] === String.fromCharCode(3)) {\r\n            textContents.push(currentTextContent);\r\n            currentTextContent = '';\r\n        } else {\r\n            currentTextContent += textArray[i];\r\n        }\r\n        i += 1;\r\n    }\r\n    textContents.push(currentTextContent);\r\n    return textContents;\r\n}\r\n\r\nSVGTextElement.prototype.buildNewText = function(){\r\n    var i, len;\r\n\r\n    var documentData = this.textProperty.currentData;\r\n    this.renderedLetters = createSizedArray(documentData ? documentData.l.length : 0);\r\n    if(documentData.fc) {\r\n        this.layerElement.setAttribute('fill', this.buildColor(documentData.fc));\r\n    }else{\r\n        this.layerElement.setAttribute('fill', 'rgba(0,0,0,0)');\r\n    }\r\n    if(documentData.sc){\r\n        this.layerElement.setAttribute('stroke', this.buildColor(documentData.sc));\r\n        this.layerElement.setAttribute('stroke-width', documentData.sw);\r\n    }\r\n    this.layerElement.setAttribute('font-size', documentData.finalSize);\r\n    var fontData = this.globalData.fontManager.getFontByName(documentData.f);\r\n    if(fontData.fClass){\r\n        this.layerElement.setAttribute('class',fontData.fClass);\r\n    } else {\r\n        this.layerElement.setAttribute('font-family', fontData.fFamily);\r\n        var fWeight = documentData.fWeight, fStyle = documentData.fStyle;\r\n        this.layerElement.setAttribute('font-style', fStyle);\r\n        this.layerElement.setAttribute('font-weight', fWeight);\r\n    }\r\n    this.layerElement.setAttribute('aria-label', documentData.t);\r\n\r\n    var letters = documentData.l || [];\r\n    var usesGlyphs = !!this.globalData.fontManager.chars;\r\n    len = letters.length;\r\n\r\n    var tSpan;\r\n    var matrixHelper = this.mHelper;\r\n    var shapes, shapeStr = '', singleShape = this.data.singleShape;\r\n    var xPos = 0, yPos = 0, firstLine = true;\r\n    var trackingOffset = documentData.tr/1000*documentData.finalSize;\r\n    if(singleShape && !usesGlyphs && !documentData.sz) {\r\n        var tElement = this.textContainer;\r\n        var justify = 'start';\r\n        switch(documentData.j) {\r\n            case 1:\r\n                justify = 'end';\r\n                break;\r\n            case 2:\r\n                justify = 'middle';\r\n                break;\r\n        }\r\n        tElement.setAttribute('text-anchor',justify);\r\n        tElement.setAttribute('letter-spacing',trackingOffset);\r\n        var textContent = this.buildTextContents(documentData.finalText);\r\n        len = textContent.length;\r\n        yPos = documentData.ps ? documentData.ps[1] + documentData.ascent : 0;\r\n        for ( i = 0; i < len; i += 1) {\r\n            tSpan = this.textSpans[i] || createNS('tspan');\r\n            tSpan.textContent = textContent[i];\r\n            tSpan.setAttribute('x', 0);\r\n            tSpan.setAttribute('y', yPos);\r\n            tSpan.style.display = 'inherit';\r\n            tElement.appendChild(tSpan);\r\n            this.textSpans[i] = tSpan;\r\n            yPos += documentData.finalLineHeight;\r\n        }\r\n        \r\n        this.layerElement.appendChild(tElement);\r\n    } else {\r\n        var cachedSpansLength = this.textSpans.length;\r\n        var shapeData, charData;\r\n        for (i = 0; i < len; i += 1) {\r\n            if(!usesGlyphs || !singleShape || i === 0){\r\n                tSpan = cachedSpansLength > i ? this.textSpans[i] : createNS(usesGlyphs?'path':'text');\r\n                if (cachedSpansLength <= i) {\r\n                    tSpan.setAttribute('stroke-linecap', 'butt');\r\n                    tSpan.setAttribute('stroke-linejoin','round');\r\n                    tSpan.setAttribute('stroke-miterlimit','4');\r\n                    this.textSpans[i] = tSpan;\r\n                    this.layerElement.appendChild(tSpan);\r\n                }\r\n                tSpan.style.display = 'inherit';\r\n            }\r\n            \r\n            matrixHelper.reset();\r\n            matrixHelper.scale(documentData.finalSize / 100, documentData.finalSize / 100);\r\n            if (singleShape) {\r\n                if(letters[i].n) {\r\n                    xPos = -trackingOffset;\r\n                    yPos += documentData.yOffset;\r\n                    yPos += firstLine ? 1 : 0;\r\n                    firstLine = false;\r\n                }\r\n                this.applyTextPropertiesToMatrix(documentData, matrixHelper, letters[i].line, xPos, yPos);\r\n                xPos += letters[i].l || 0;\r\n                //xPos += letters[i].val === ' ' ? 0 : trackingOffset;\r\n                xPos += trackingOffset;\r\n            }\r\n            if(usesGlyphs) {\r\n                charData = this.globalData.fontManager.getCharData(documentData.finalText[i], fontData.fStyle, this.globalData.fontManager.getFontByName(documentData.f).fFamily);\r\n                shapeData = charData && charData.data || {};\r\n                shapes = shapeData.shapes ? shapeData.shapes[0].it : [];\r\n                if(!singleShape){\r\n                    tSpan.setAttribute('d',this.createPathShape(matrixHelper,shapes));\r\n                } else {\r\n                    shapeStr += this.createPathShape(matrixHelper,shapes);\r\n                }\r\n            } else {\r\n                if(singleShape) {\r\n                    tSpan.setAttribute(\"transform\", \"translate(\" + matrixHelper.props[12] + \",\" + matrixHelper.props[13] + \")\");\r\n                }\r\n                tSpan.textContent = letters[i].val;\r\n                tSpan.setAttributeNS(\"http://www.w3.org/XML/1998/namespace\", \"xml:space\",\"preserve\");\r\n            }\r\n            //\r\n        }\r\n        if (singleShape && tSpan) {\r\n            tSpan.setAttribute('d',shapeStr);\r\n        }\r\n    }\r\n    while (i < this.textSpans.length){\r\n        this.textSpans[i].style.display = 'none';\r\n        i += 1;\r\n    }\r\n    \r\n    this._sizeChanged = true;\r\n};\r\n\r\nSVGTextElement.prototype.sourceRectAtTime = function(time){\r\n    this.prepareFrame(this.comp.renderedFrame - this.data.st);\r\n    this.renderInnerContent();\r\n    if(this._sizeChanged){\r\n        this._sizeChanged = false;\r\n        var textBox = this.layerElement.getBBox();\r\n        this.bbox = {\r\n            top: textBox.y,\r\n            left: textBox.x,\r\n            width: textBox.width,\r\n            height: textBox.height\r\n        };\r\n    }\r\n    return this.bbox;\r\n};\r\n\r\nSVGTextElement.prototype.renderInnerContent = function(){\r\n\r\n    if(!this.data.singleShape){\r\n        this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag);\r\n        if(this.lettersChangedFlag || this.textAnimator.lettersChangedFlag){\r\n            this._sizeChanged = true;\r\n            var  i,len;\r\n            var renderedLetters = this.textAnimator.renderedLetters;\r\n\r\n            var letters = this.textProperty.currentData.l;\r\n\r\n            len = letters.length;\r\n            var renderedLetter, textSpan;\r\n            for(i=0;i<len;i+=1){\r\n                if(letters[i].n){\r\n                    continue;\r\n                }\r\n                renderedLetter = renderedLetters[i];\r\n                textSpan = this.textSpans[i];\r\n                if(renderedLetter._mdf.m) {\r\n                    textSpan.setAttribute('transform',renderedLetter.m);\r\n                }\r\n                if(renderedLetter._mdf.o) {\r\n                    textSpan.setAttribute('opacity',renderedLetter.o);\r\n                }\r\n                if(renderedLetter._mdf.sw){\r\n                    textSpan.setAttribute('stroke-width',renderedLetter.sw);\r\n                }\r\n                if(renderedLetter._mdf.sc){\r\n                    textSpan.setAttribute('stroke',renderedLetter.sc);\r\n                }\r\n                if(renderedLetter._mdf.fc){\r\n                    textSpan.setAttribute('fill',renderedLetter.fc);\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nfunction SVGShapeElement(data,globalData,comp){\r\n    //List of drawable elements\r\n    this.shapes = [];\r\n    // Full shape data\r\n    this.shapesData = data.shapes;\r\n    //List of styles that will be applied to shapes\r\n    this.stylesList = [];\r\n    //List of modifiers that will be applied to shapes\r\n    this.shapeModifiers = [];\r\n    //List of items in shape tree\r\n    this.itemsData = [];\r\n    //List of items in previous shape tree\r\n    this.processedElements = [];\r\n    // List of animated components\r\n    this.animatedContents = [];\r\n    this.initElement(data,globalData,comp);\r\n    //Moving any property that doesn't get too much access after initialization because of v8 way of handling more than 10 properties.\r\n    // List of elements that have been created\r\n    this.prevViewData = [];\r\n    //Moving any property that doesn't get too much access after initialization because of v8 way of handling more than 10 properties.\r\n}\r\n\r\nextendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement], SVGShapeElement);\r\n\r\nSVGShapeElement.prototype.initSecondaryElement = function() {\r\n};\r\n\r\nSVGShapeElement.prototype.identityMatrix = new Matrix();\r\n\r\nSVGShapeElement.prototype.buildExpressionInterface = function(){};\r\n\r\nSVGShapeElement.prototype.createContent = function(){\r\n    this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement, 0, [], true);\r\n    this.filterUniqueShapes();\r\n};\r\n\r\n/*\r\nThis method searches for multiple shapes that affect a single element and one of them is animated\r\n*/\r\nSVGShapeElement.prototype.filterUniqueShapes = function(){\r\n    var i, len = this.shapes.length, shape;\r\n    var j, jLen = this.stylesList.length;\r\n    var style, count = 0;\r\n    var tempShapes = [];\r\n    var areAnimated = false;\r\n    for(j = 0; j < jLen; j += 1) {\r\n        style = this.stylesList[j];\r\n        areAnimated = false;\r\n        tempShapes.length = 0;\r\n        for(i = 0; i < len; i += 1) {\r\n            shape = this.shapes[i];\r\n            if(shape.styles.indexOf(style) !== -1) {\r\n                tempShapes.push(shape);\r\n                areAnimated = shape._isAnimated || areAnimated;\r\n            }\r\n        }\r\n        if(tempShapes.length > 1 && areAnimated) {\r\n            this.setShapesAsAnimated(tempShapes);\r\n        }\r\n    }\r\n}\r\n\r\nSVGShapeElement.prototype.setShapesAsAnimated = function(shapes){\r\n    var i, len = shapes.length;\r\n    for(i = 0; i < len; i += 1) {\r\n        shapes[i].setAsAnimated();\r\n    }\r\n}\r\n\r\nSVGShapeElement.prototype.createStyleElement = function(data, level){\r\n    //TODO: prevent drawing of hidden styles\r\n    var elementData;\r\n    var styleOb = new SVGStyleData(data, level);\r\n\r\n    var pathElement = styleOb.pElem;\r\n    if(data.ty === 'st') {\r\n        elementData = new SVGStrokeStyleData(this, data, styleOb);\r\n    } else if(data.ty === 'fl') {\r\n        elementData = new SVGFillStyleData(this, data, styleOb);\r\n    } else if(data.ty === 'gf' || data.ty === 'gs') {\r\n        var gradientConstructor = data.ty === 'gf' ? SVGGradientFillStyleData : SVGGradientStrokeStyleData;\r\n        elementData = new gradientConstructor(this, data, styleOb);\r\n        this.globalData.defs.appendChild(elementData.gf);\r\n        if (elementData.maskId) {\r\n            this.globalData.defs.appendChild(elementData.ms);\r\n            this.globalData.defs.appendChild(elementData.of);\r\n            pathElement.setAttribute('mask','url(' + locationHref + '#' + elementData.maskId + ')');\r\n        }\r\n    }\r\n    \r\n    if(data.ty === 'st' || data.ty === 'gs') {\r\n        pathElement.setAttribute('stroke-linecap', this.lcEnum[data.lc] || 'round');\r\n        pathElement.setAttribute('stroke-linejoin',this.ljEnum[data.lj] || 'round');\r\n        pathElement.setAttribute('fill-opacity','0');\r\n        if(data.lj === 1) {\r\n            pathElement.setAttribute('stroke-miterlimit',data.ml);\r\n        }\r\n    }\r\n\r\n    if(data.r === 2) {\r\n        pathElement.setAttribute('fill-rule', 'evenodd');\r\n    }\r\n\r\n    if(data.ln){\r\n        pathElement.setAttribute('id',data.ln);\r\n    }\r\n    if(data.cl){\r\n        pathElement.setAttribute('class',data.cl);\r\n    }\r\n    if(data.bm){\r\n        pathElement.style['mix-blend-mode'] = getBlendMode(data.bm);\r\n    }\r\n    this.stylesList.push(styleOb);\r\n    this.addToAnimatedContents(data, elementData);\r\n    return elementData;\r\n};\r\n\r\nSVGShapeElement.prototype.createGroupElement = function(data) {\r\n    var elementData = new ShapeGroupData();\r\n    if(data.ln){\r\n        elementData.gr.setAttribute('id',data.ln);\r\n    }\r\n    if(data.cl){\r\n        elementData.gr.setAttribute('class',data.cl);\r\n    }\r\n    if(data.bm){\r\n        elementData.gr.style['mix-blend-mode'] = getBlendMode(data.bm);\r\n    }\r\n    return elementData;\r\n};\r\n\r\nSVGShapeElement.prototype.createTransformElement = function(data, container) {\r\n    var transformProperty = TransformPropertyFactory.getTransformProperty(this,data,this);\r\n    var elementData = new SVGTransformData(transformProperty, transformProperty.o, container);\r\n    this.addToAnimatedContents(data, elementData);\r\n    return elementData;\r\n};\r\n\r\nSVGShapeElement.prototype.createShapeElement = function(data, ownTransformers, level) {\r\n    var ty = 4;\r\n    if(data.ty === 'rc'){\r\n        ty = 5;\r\n    }else if(data.ty === 'el'){\r\n        ty = 6;\r\n    }else if(data.ty === 'sr'){\r\n        ty = 7;\r\n    }\r\n    var shapeProperty = ShapePropertyFactory.getShapeProp(this,data,ty,this);\r\n    var elementData = new SVGShapeData(ownTransformers, level, shapeProperty);\r\n    this.shapes.push(elementData);\r\n    this.addShapeToModifiers(elementData);\r\n    this.addToAnimatedContents(data, elementData);\r\n    return elementData;\r\n};\r\n\r\nSVGShapeElement.prototype.addToAnimatedContents = function(data, element) {\r\n    var i = 0, len = this.animatedContents.length;\r\n    while(i < len) {\r\n        if(this.animatedContents[i].element === element) {\r\n            return;\r\n        }\r\n        i += 1;\r\n    }\r\n    this.animatedContents.push({\r\n        fn: SVGElementsRenderer.createRenderFunction(data),\r\n        element: element,\r\n        data: data\r\n    });\r\n};\r\n\r\nSVGShapeElement.prototype.setElementStyles = function(elementData){\r\n    var arr = elementData.styles;\r\n    var j, jLen = this.stylesList.length;\r\n    for (j = 0; j < jLen; j += 1) {\r\n        if (!this.stylesList[j].closed) {\r\n            arr.push(this.stylesList[j]);\r\n        }\r\n    }\r\n};\r\n\r\nSVGShapeElement.prototype.reloadShapes = function(){\r\n    this._isFirstFrame = true;\r\n    var i, len = this.itemsData.length;\r\n    for( i = 0; i < len; i += 1) {\r\n        this.prevViewData[i] = this.itemsData[i];\r\n    }\r\n    this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement, 0, [], true);\r\n    this.filterUniqueShapes();\r\n    len = this.dynamicProperties.length;\r\n    for(i = 0; i < len; i += 1) {\r\n        this.dynamicProperties[i].getValue();\r\n    }\r\n    this.renderModifiers();\r\n};\r\n\r\nSVGShapeElement.prototype.searchShapes = function(arr,itemsData,prevViewData,container, level, transformers, render){\r\n    var ownTransformers = [].concat(transformers);\r\n    var i, len = arr.length - 1;\r\n    var j, jLen;\r\n    var ownStyles = [], ownModifiers = [], styleOb, currentTransform, modifier, processedPos;\r\n    for(i=len;i>=0;i-=1){\r\n        processedPos = this.searchProcessedElement(arr[i]);\r\n        if(!processedPos){\r\n            arr[i]._render = render;\r\n        } else {\r\n            itemsData[i] = prevViewData[processedPos - 1];\r\n        }\r\n        if(arr[i].ty == 'fl' || arr[i].ty == 'st' || arr[i].ty == 'gf' || arr[i].ty == 'gs'){\r\n            if(!processedPos){\r\n                itemsData[i] = this.createStyleElement(arr[i], level);\r\n            } else {\r\n                itemsData[i].style.closed = false;\r\n            }\r\n            if(arr[i]._render){\r\n                container.appendChild(itemsData[i].style.pElem);\r\n            }\r\n            ownStyles.push(itemsData[i].style);\r\n        }else if(arr[i].ty == 'gr'){\r\n            if(!processedPos){\r\n                itemsData[i] = this.createGroupElement(arr[i]);\r\n            } else {\r\n                jLen = itemsData[i].it.length;\r\n                for(j=0;j<jLen;j+=1){\r\n                    itemsData[i].prevViewData[j] = itemsData[i].it[j];\r\n                }\r\n            }\r\n            this.searchShapes(arr[i].it,itemsData[i].it,itemsData[i].prevViewData,itemsData[i].gr, level + 1, ownTransformers, render);\r\n            if(arr[i]._render){\r\n                container.appendChild(itemsData[i].gr);\r\n            }\r\n        }else if(arr[i].ty == 'tr'){\r\n            if(!processedPos){\r\n                itemsData[i] = this.createTransformElement(arr[i], container);\r\n            }\r\n            currentTransform = itemsData[i].transform;\r\n            ownTransformers.push(currentTransform);\r\n        }else if(arr[i].ty == 'sh' || arr[i].ty == 'rc' || arr[i].ty == 'el' || arr[i].ty == 'sr'){\r\n            if(!processedPos){\r\n                itemsData[i] = this.createShapeElement(arr[i], ownTransformers, level);\r\n            }\r\n            this.setElementStyles(itemsData[i]);\r\n\r\n        }else if(arr[i].ty == 'tm' || arr[i].ty == 'rd' || arr[i].ty == 'ms'){\r\n            if(!processedPos){\r\n                modifier = ShapeModifiers.getModifier(arr[i].ty);\r\n                modifier.init(this,arr[i]);\r\n                itemsData[i] = modifier;\r\n                this.shapeModifiers.push(modifier);\r\n            } else {\r\n                modifier = itemsData[i];\r\n                modifier.closed = false;\r\n            }\r\n            ownModifiers.push(modifier);\r\n        }else if(arr[i].ty == 'rp'){\r\n            if(!processedPos){\r\n                modifier = ShapeModifiers.getModifier(arr[i].ty);\r\n                itemsData[i] = modifier;\r\n                modifier.init(this,arr,i,itemsData);\r\n                this.shapeModifiers.push(modifier);\r\n                render = false;\r\n            }else{\r\n                modifier = itemsData[i];\r\n                modifier.closed = true;\r\n            }\r\n            ownModifiers.push(modifier);\r\n        }\r\n        this.addProcessedElement(arr[i], i + 1);\r\n    }\r\n    len = ownStyles.length;\r\n    for(i=0;i<len;i+=1){\r\n        ownStyles[i].closed = true;\r\n    }\r\n    len = ownModifiers.length;\r\n    for(i=0;i<len;i+=1){\r\n        ownModifiers[i].closed = true;\r\n    }\r\n};\r\n\r\nSVGShapeElement.prototype.renderInnerContent = function() {\r\n    this.renderModifiers();\r\n    var i, len = this.stylesList.length;\r\n    for(i=0;i<len;i+=1){\r\n        this.stylesList[i].reset();\r\n    }\r\n    this.renderShape();\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n        if (this.stylesList[i]._mdf || this._isFirstFrame) {\r\n            if(this.stylesList[i].msElem){\r\n                this.stylesList[i].msElem.setAttribute('d', this.stylesList[i].d);\r\n                //Adding M0 0 fixes same mask bug on all browsers\r\n                this.stylesList[i].d = 'M0 0' + this.stylesList[i].d;\r\n            }\r\n            this.stylesList[i].pElem.setAttribute('d', this.stylesList[i].d || 'M0 0');\r\n        }\r\n    }\r\n};\r\n\r\nSVGShapeElement.prototype.renderShape = function() {\r\n    var i, len = this.animatedContents.length;\r\n    var animatedContent;\r\n    for(i = 0; i < len; i += 1) {\r\n        animatedContent = this.animatedContents[i];\r\n        if((this._isFirstFrame || animatedContent.element._isAnimated) && animatedContent.data !== true) {\r\n            animatedContent.fn(animatedContent.data, animatedContent.element, this._isFirstFrame);\r\n        }\r\n    }\r\n}\r\n\r\nSVGShapeElement.prototype.destroy = function(){\r\n    this.destroyBaseElement();\r\n    this.shapesData = null;\r\n    this.itemsData = null;\r\n};\r\n\r\nfunction SVGTintFilter(filter, filterManager){\r\n    this.filterManager = filterManager;\r\n    var feColorMatrix = createNS('feColorMatrix');\r\n    feColorMatrix.setAttribute('type','matrix');\r\n    feColorMatrix.setAttribute('color-interpolation-filters','linearRGB');\r\n    feColorMatrix.setAttribute('values','0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0');\r\n    feColorMatrix.setAttribute('result','f1');\r\n    filter.appendChild(feColorMatrix);\r\n    feColorMatrix = createNS('feColorMatrix');\r\n    feColorMatrix.setAttribute('type','matrix');\r\n    feColorMatrix.setAttribute('color-interpolation-filters','sRGB');\r\n    feColorMatrix.setAttribute('values','1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0');\r\n    feColorMatrix.setAttribute('result','f2');\r\n    filter.appendChild(feColorMatrix);\r\n    this.matrixFilter = feColorMatrix;\r\n    if(filterManager.effectElements[2].p.v !== 100 || filterManager.effectElements[2].p.k){\r\n        var feMerge = createNS('feMerge');\r\n        filter.appendChild(feMerge);\r\n        var feMergeNode;\r\n        feMergeNode = createNS('feMergeNode');\r\n        feMergeNode.setAttribute('in','SourceGraphic');\r\n        feMerge.appendChild(feMergeNode);\r\n        feMergeNode = createNS('feMergeNode');\r\n        feMergeNode.setAttribute('in','f2');\r\n        feMerge.appendChild(feMergeNode);\r\n    }\r\n}\r\n\r\nSVGTintFilter.prototype.renderFrame = function(forceRender){\r\n    if(forceRender || this.filterManager._mdf){\r\n        var colorBlack = this.filterManager.effectElements[0].p.v;\r\n        var colorWhite = this.filterManager.effectElements[1].p.v;\r\n        var opacity = this.filterManager.effectElements[2].p.v/100;\r\n        this.matrixFilter.setAttribute('values',(colorWhite[0]- colorBlack[0])+' 0 0 0 '+ colorBlack[0] +' '+ (colorWhite[1]- colorBlack[1]) +' 0 0 0 '+ colorBlack[1] +' '+ (colorWhite[2]- colorBlack[2]) +' 0 0 0 '+ colorBlack[2] +' 0 0 0 ' + opacity + ' 0');\r\n    }\r\n};\r\nfunction SVGFillFilter(filter, filterManager){\r\n    this.filterManager = filterManager;\r\n    var feColorMatrix = createNS('feColorMatrix');\r\n    feColorMatrix.setAttribute('type','matrix');\r\n    feColorMatrix.setAttribute('color-interpolation-filters','sRGB');\r\n    feColorMatrix.setAttribute('values','1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0');\r\n    filter.appendChild(feColorMatrix);\r\n    this.matrixFilter = feColorMatrix;\r\n}\r\nSVGFillFilter.prototype.renderFrame = function(forceRender){\r\n    if(forceRender || this.filterManager._mdf){\r\n        var color = this.filterManager.effectElements[2].p.v;\r\n        var opacity = this.filterManager.effectElements[6].p.v;\r\n        this.matrixFilter.setAttribute('values','0 0 0 0 '+color[0]+' 0 0 0 0 '+color[1]+' 0 0 0 0 '+color[2]+' 0 0 0 '+opacity+' 0');\r\n    }\r\n};\r\nfunction SVGGaussianBlurEffect(filter, filterManager){\r\n    // Outset the filter region by 100% on all sides to accommodate blur expansion.\r\n    filter.setAttribute('x','-100%');\r\n    filter.setAttribute('y','-100%');\r\n    filter.setAttribute('width','300%');\r\n    filter.setAttribute('height','300%');\r\n\r\n    this.filterManager = filterManager;\r\n    var feGaussianBlur = createNS('feGaussianBlur');\r\n    filter.appendChild(feGaussianBlur);\r\n    this.feGaussianBlur = feGaussianBlur;\r\n}\r\n\r\nSVGGaussianBlurEffect.prototype.renderFrame = function(forceRender){\r\n    if(forceRender || this.filterManager._mdf){\r\n        // Empirical value, matching AE's blur appearance.\r\n        var kBlurrinessToSigma = 0.3;\r\n        var sigma = this.filterManager.effectElements[0].p.v * kBlurrinessToSigma;\r\n\r\n        // Dimensions mapping:\r\n        //\r\n        //   1 -> horizontal & vertical\r\n        //   2 -> horizontal only\r\n        //   3 -> vertical only\r\n        //\r\n        var dimensions = this.filterManager.effectElements[1].p.v;\r\n        var sigmaX = (dimensions == 3) ? 0 : sigma;\r\n        var sigmaY = (dimensions == 2) ? 0 : sigma;\r\n\r\n        this.feGaussianBlur.setAttribute('stdDeviation', sigmaX + \" \" + sigmaY);\r\n\r\n        // Repeat edges mapping:\r\n        //\r\n        //   0 -> off -> duplicate\r\n        //   1 -> on  -> wrap\r\n        var edgeMode = (this.filterManager.effectElements[2].p.v == 1) ? 'wrap' : 'duplicate';\r\n        this.feGaussianBlur.setAttribute('edgeMode', edgeMode);\r\n    }\r\n}\r\nfunction SVGStrokeEffect(elem, filterManager){\r\n    this.initialized = false;\r\n    this.filterManager = filterManager;\r\n    this.elem = elem;\r\n    this.paths = [];\r\n}\r\n\r\nSVGStrokeEffect.prototype.initialize = function(){\r\n\r\n    var elemChildren = this.elem.layerElement.children || this.elem.layerElement.childNodes;\r\n    var path,groupPath, i, len;\r\n    if(this.filterManager.effectElements[1].p.v === 1){\r\n        len = this.elem.maskManager.masksProperties.length;\r\n        i = 0;\r\n    } else {\r\n        i = this.filterManager.effectElements[0].p.v - 1;\r\n        len = i + 1;\r\n    }\r\n    groupPath = createNS('g'); \r\n    groupPath.setAttribute('fill','none');\r\n    groupPath.setAttribute('stroke-linecap','round');\r\n    groupPath.setAttribute('stroke-dashoffset',1);\r\n    for(i;i<len;i+=1){\r\n        path = createNS('path');\r\n        groupPath.appendChild(path);\r\n        this.paths.push({p:path,m:i});\r\n    }\r\n    if(this.filterManager.effectElements[10].p.v === 3){\r\n        var mask = createNS('mask');\r\n        var id = createElementID();\r\n        mask.setAttribute('id',id);\r\n        mask.setAttribute('mask-type','alpha');\r\n        mask.appendChild(groupPath);\r\n        this.elem.globalData.defs.appendChild(mask);\r\n        var g = createNS('g');\r\n        g.setAttribute('mask','url(' + locationHref + '#'+id+')');\r\n        while (elemChildren[0]) {\r\n            g.appendChild(elemChildren[0]);\r\n        }\r\n        this.elem.layerElement.appendChild(g);\r\n        this.masker = mask;\r\n        groupPath.setAttribute('stroke','#fff');\r\n    } else if(this.filterManager.effectElements[10].p.v === 1 || this.filterManager.effectElements[10].p.v === 2){\r\n        if(this.filterManager.effectElements[10].p.v === 2){\r\n            elemChildren = this.elem.layerElement.children || this.elem.layerElement.childNodes;\r\n            while(elemChildren.length){\r\n                this.elem.layerElement.removeChild(elemChildren[0]);\r\n            }\r\n        }\r\n        this.elem.layerElement.appendChild(groupPath);\r\n        this.elem.layerElement.removeAttribute('mask');\r\n        groupPath.setAttribute('stroke','#fff');\r\n    }\r\n    this.initialized = true;\r\n    this.pathMasker = groupPath;\r\n};\r\n\r\nSVGStrokeEffect.prototype.renderFrame = function(forceRender){\r\n    if(!this.initialized){\r\n        this.initialize();\r\n    }\r\n    var i, len = this.paths.length;\r\n    var mask, path;\r\n    for(i=0;i<len;i+=1){\r\n        if(this.paths[i].m === -1) {\r\n            continue;\r\n        }\r\n        mask = this.elem.maskManager.viewData[this.paths[i].m];\r\n        path = this.paths[i].p;\r\n        if(forceRender || this.filterManager._mdf || mask.prop._mdf){\r\n            path.setAttribute('d',mask.lastPath);\r\n        }\r\n        if(forceRender || this.filterManager.effectElements[9].p._mdf || this.filterManager.effectElements[4].p._mdf || this.filterManager.effectElements[7].p._mdf || this.filterManager.effectElements[8].p._mdf || mask.prop._mdf){\r\n            var dasharrayValue;\r\n            if(this.filterManager.effectElements[7].p.v !== 0 || this.filterManager.effectElements[8].p.v !== 100){\r\n                var s = Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)/100;\r\n                var e = Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)/100;\r\n                var l = path.getTotalLength();\r\n                dasharrayValue = '0 0 0 ' + l*s + ' ';\r\n                var lineLength = l*(e-s);\r\n                var segment = 1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v/100;\r\n                var units = Math.floor(lineLength/segment);\r\n                var j;\r\n                for(j=0;j<units;j+=1){\r\n                    dasharrayValue += '1 ' + this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v/100 + ' ';\r\n                }\r\n                dasharrayValue += '0 ' + l*10 + ' 0 0';\r\n            } else {\r\n                dasharrayValue = '1 ' + this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v/100;\r\n            }\r\n            path.setAttribute('stroke-dasharray',dasharrayValue);\r\n        }\r\n    }\r\n    if(forceRender || this.filterManager.effectElements[4].p._mdf){\r\n        this.pathMasker.setAttribute('stroke-width',this.filterManager.effectElements[4].p.v*2);\r\n    }\r\n    \r\n    if(forceRender || this.filterManager.effectElements[6].p._mdf){\r\n        this.pathMasker.setAttribute('opacity',this.filterManager.effectElements[6].p.v);\r\n    }\r\n    if(this.filterManager.effectElements[10].p.v === 1 || this.filterManager.effectElements[10].p.v === 2){\r\n        if(forceRender || this.filterManager.effectElements[3].p._mdf){\r\n            var color = this.filterManager.effectElements[3].p.v;\r\n            this.pathMasker.setAttribute('stroke','rgb('+bm_floor(color[0]*255)+','+bm_floor(color[1]*255)+','+bm_floor(color[2]*255)+')');\r\n        }\r\n    }\r\n};\r\nfunction SVGTritoneFilter(filter, filterManager){\r\n    this.filterManager = filterManager;\r\n    var feColorMatrix = createNS('feColorMatrix');\r\n    feColorMatrix.setAttribute('type','matrix');\r\n    feColorMatrix.setAttribute('color-interpolation-filters','linearRGB');\r\n    feColorMatrix.setAttribute('values','0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0');\r\n    feColorMatrix.setAttribute('result','f1');\r\n    filter.appendChild(feColorMatrix);\r\n    var feComponentTransfer = createNS('feComponentTransfer');\r\n    feComponentTransfer.setAttribute('color-interpolation-filters','sRGB');\r\n    filter.appendChild(feComponentTransfer);\r\n    this.matrixFilter = feComponentTransfer;\r\n    var feFuncR = createNS('feFuncR');\r\n    feFuncR.setAttribute('type','table');\r\n    feComponentTransfer.appendChild(feFuncR);\r\n    this.feFuncR = feFuncR;\r\n    var feFuncG = createNS('feFuncG');\r\n    feFuncG.setAttribute('type','table');\r\n    feComponentTransfer.appendChild(feFuncG);\r\n    this.feFuncG = feFuncG;\r\n    var feFuncB = createNS('feFuncB');\r\n    feFuncB.setAttribute('type','table');\r\n    feComponentTransfer.appendChild(feFuncB);\r\n    this.feFuncB = feFuncB;\r\n}\r\n\r\nSVGTritoneFilter.prototype.renderFrame = function(forceRender){\r\n    if(forceRender || this.filterManager._mdf){\r\n        var color1 = this.filterManager.effectElements[0].p.v;\r\n        var color2 = this.filterManager.effectElements[1].p.v;\r\n        var color3 = this.filterManager.effectElements[2].p.v;\r\n        var tableR = color3[0] + ' ' + color2[0] + ' ' + color1[0];\r\n        var tableG = color3[1] + ' ' + color2[1] + ' ' + color1[1];\r\n        var tableB = color3[2] + ' ' + color2[2] + ' ' + color1[2];\r\n        this.feFuncR.setAttribute('tableValues', tableR);\r\n        this.feFuncG.setAttribute('tableValues', tableG);\r\n        this.feFuncB.setAttribute('tableValues', tableB);\r\n        //var opacity = this.filterManager.effectElements[2].p.v/100;\r\n        //this.matrixFilter.setAttribute('values',(colorWhite[0]- colorBlack[0])+' 0 0 0 '+ colorBlack[0] +' '+ (colorWhite[1]- colorBlack[1]) +' 0 0 0 '+ colorBlack[1] +' '+ (colorWhite[2]- colorBlack[2]) +' 0 0 0 '+ colorBlack[2] +' 0 0 0 ' + opacity + ' 0');\r\n    }\r\n};\r\nfunction SVGProLevelsFilter(filter, filterManager){\r\n    this.filterManager = filterManager;\r\n    var effectElements = this.filterManager.effectElements;\r\n    var feComponentTransfer = createNS('feComponentTransfer');\r\n    var feFuncR, feFuncG, feFuncB;\r\n    \r\n    if(effectElements[10].p.k || effectElements[10].p.v !== 0 || effectElements[11].p.k || effectElements[11].p.v !== 1 || effectElements[12].p.k || effectElements[12].p.v !== 1 || effectElements[13].p.k || effectElements[13].p.v !== 0 || effectElements[14].p.k || effectElements[14].p.v !== 1){\r\n        this.feFuncR = this.createFeFunc('feFuncR', feComponentTransfer);\r\n    }\r\n    if(effectElements[17].p.k || effectElements[17].p.v !== 0 || effectElements[18].p.k || effectElements[18].p.v !== 1 || effectElements[19].p.k || effectElements[19].p.v !== 1 || effectElements[20].p.k || effectElements[20].p.v !== 0 || effectElements[21].p.k || effectElements[21].p.v !== 1){\r\n        this.feFuncG = this.createFeFunc('feFuncG', feComponentTransfer);\r\n    }\r\n    if(effectElements[24].p.k || effectElements[24].p.v !== 0 || effectElements[25].p.k || effectElements[25].p.v !== 1 || effectElements[26].p.k || effectElements[26].p.v !== 1 || effectElements[27].p.k || effectElements[27].p.v !== 0 || effectElements[28].p.k || effectElements[28].p.v !== 1){\r\n        this.feFuncB = this.createFeFunc('feFuncB', feComponentTransfer);\r\n    }\r\n    if(effectElements[31].p.k || effectElements[31].p.v !== 0 || effectElements[32].p.k || effectElements[32].p.v !== 1 || effectElements[33].p.k || effectElements[33].p.v !== 1 || effectElements[34].p.k || effectElements[34].p.v !== 0 || effectElements[35].p.k || effectElements[35].p.v !== 1){\r\n        this.feFuncA = this.createFeFunc('feFuncA', feComponentTransfer);\r\n    }\r\n    \r\n    if(this.feFuncR || this.feFuncG || this.feFuncB || this.feFuncA){\r\n        feComponentTransfer.setAttribute('color-interpolation-filters','sRGB');\r\n        filter.appendChild(feComponentTransfer);\r\n        feComponentTransfer = createNS('feComponentTransfer');\r\n    }\r\n\r\n    if(effectElements[3].p.k || effectElements[3].p.v !== 0 || effectElements[4].p.k || effectElements[4].p.v !== 1 || effectElements[5].p.k || effectElements[5].p.v !== 1 || effectElements[6].p.k || effectElements[6].p.v !== 0 || effectElements[7].p.k || effectElements[7].p.v !== 1){\r\n\r\n        feComponentTransfer.setAttribute('color-interpolation-filters','sRGB');\r\n        filter.appendChild(feComponentTransfer);\r\n        this.feFuncRComposed = this.createFeFunc('feFuncR', feComponentTransfer);\r\n        this.feFuncGComposed = this.createFeFunc('feFuncG', feComponentTransfer);\r\n        this.feFuncBComposed = this.createFeFunc('feFuncB', feComponentTransfer);\r\n    }\r\n}\r\n\r\nSVGProLevelsFilter.prototype.createFeFunc = function(type, feComponentTransfer) {\r\n    var feFunc = createNS(type);\r\n    feFunc.setAttribute('type','table');\r\n    feComponentTransfer.appendChild(feFunc);\r\n    return feFunc;\r\n};\r\n\r\nSVGProLevelsFilter.prototype.getTableValue = function(inputBlack, inputWhite, gamma, outputBlack, outputWhite) {\r\n    var cnt = 0;\r\n    var segments = 256;\r\n    var perc;\r\n    var min = Math.min(inputBlack, inputWhite);\r\n    var max = Math.max(inputBlack, inputWhite);\r\n    var table = Array.call(null,{length:segments});\r\n    var colorValue;\r\n    var pos = 0;\r\n    var outputDelta = outputWhite - outputBlack; \r\n    var inputDelta = inputWhite - inputBlack; \r\n    while(cnt <= 256) {\r\n        perc = cnt/256;\r\n        if(perc <= min){\r\n            colorValue = inputDelta < 0 ? outputWhite : outputBlack;\r\n        } else if(perc >= max){\r\n            colorValue = inputDelta < 0 ? outputBlack : outputWhite;\r\n        } else {\r\n            colorValue = (outputBlack + outputDelta * Math.pow((perc - inputBlack) / inputDelta, 1 / gamma));\r\n        }\r\n        table[pos++] = colorValue;\r\n        cnt += 256/(segments-1);\r\n    }\r\n    return table.join(' ');\r\n};\r\n\r\nSVGProLevelsFilter.prototype.renderFrame = function(forceRender){\r\n    if(forceRender || this.filterManager._mdf){\r\n        var val, cnt, perc, bezier;\r\n        var effectElements = this.filterManager.effectElements;\r\n        if(this.feFuncRComposed && (forceRender || effectElements[3].p._mdf || effectElements[4].p._mdf || effectElements[5].p._mdf || effectElements[6].p._mdf || effectElements[7].p._mdf)){\r\n            val = this.getTableValue(effectElements[3].p.v,effectElements[4].p.v,effectElements[5].p.v,effectElements[6].p.v,effectElements[7].p.v);\r\n            this.feFuncRComposed.setAttribute('tableValues',val);\r\n            this.feFuncGComposed.setAttribute('tableValues',val);\r\n            this.feFuncBComposed.setAttribute('tableValues',val);\r\n        }\r\n\r\n\r\n        if(this.feFuncR && (forceRender || effectElements[10].p._mdf || effectElements[11].p._mdf || effectElements[12].p._mdf || effectElements[13].p._mdf || effectElements[14].p._mdf)){\r\n            val = this.getTableValue(effectElements[10].p.v,effectElements[11].p.v,effectElements[12].p.v,effectElements[13].p.v,effectElements[14].p.v);\r\n            this.feFuncR.setAttribute('tableValues',val);\r\n        }\r\n\r\n        if(this.feFuncG && (forceRender || effectElements[17].p._mdf || effectElements[18].p._mdf || effectElements[19].p._mdf || effectElements[20].p._mdf || effectElements[21].p._mdf)){\r\n            val = this.getTableValue(effectElements[17].p.v,effectElements[18].p.v,effectElements[19].p.v,effectElements[20].p.v,effectElements[21].p.v);\r\n            this.feFuncG.setAttribute('tableValues',val);\r\n        }\r\n\r\n        if(this.feFuncB && (forceRender || effectElements[24].p._mdf || effectElements[25].p._mdf || effectElements[26].p._mdf || effectElements[27].p._mdf || effectElements[28].p._mdf)){\r\n            val = this.getTableValue(effectElements[24].p.v,effectElements[25].p.v,effectElements[26].p.v,effectElements[27].p.v,effectElements[28].p.v);\r\n            this.feFuncB.setAttribute('tableValues',val);\r\n        }\r\n\r\n        if(this.feFuncA && (forceRender || effectElements[31].p._mdf || effectElements[32].p._mdf || effectElements[33].p._mdf || effectElements[34].p._mdf || effectElements[35].p._mdf)){\r\n            val = this.getTableValue(effectElements[31].p.v,effectElements[32].p.v,effectElements[33].p.v,effectElements[34].p.v,effectElements[35].p.v);\r\n            this.feFuncA.setAttribute('tableValues',val);\r\n        }\r\n        \r\n    }\r\n};\r\nfunction SVGDropShadowEffect(filter, filterManager){\r\n    filter.setAttribute('x','-100%');\r\n    filter.setAttribute('y','-100%');\r\n    filter.setAttribute('width','400%');\r\n    filter.setAttribute('height','400%');\r\n    this.filterManager = filterManager;\r\n\r\n    var feGaussianBlur = createNS('feGaussianBlur');\r\n    feGaussianBlur.setAttribute('in','SourceAlpha');\r\n    feGaussianBlur.setAttribute('result','drop_shadow_1');\r\n    feGaussianBlur.setAttribute('stdDeviation','0');\r\n    this.feGaussianBlur = feGaussianBlur;\r\n    filter.appendChild(feGaussianBlur);\r\n\r\n    var feOffset = createNS('feOffset');\r\n    feOffset.setAttribute('dx','25');\r\n    feOffset.setAttribute('dy','0');\r\n    feOffset.setAttribute('in','drop_shadow_1');\r\n    feOffset.setAttribute('result','drop_shadow_2');\r\n    this.feOffset = feOffset;\r\n    filter.appendChild(feOffset);\r\n    var feFlood = createNS('feFlood');\r\n    feFlood.setAttribute('flood-color','#00ff00');\r\n    feFlood.setAttribute('flood-opacity','1');\r\n    feFlood.setAttribute('result','drop_shadow_3');\r\n    this.feFlood = feFlood;\r\n    filter.appendChild(feFlood);\r\n\r\n    var feComposite = createNS('feComposite');\r\n    feComposite.setAttribute('in','drop_shadow_3');\r\n    feComposite.setAttribute('in2','drop_shadow_2');\r\n    feComposite.setAttribute('operator','in');\r\n    feComposite.setAttribute('result','drop_shadow_4');\r\n    filter.appendChild(feComposite);\r\n\r\n\r\n    var feMerge = createNS('feMerge');\r\n    filter.appendChild(feMerge);\r\n    var feMergeNode;\r\n    feMergeNode = createNS('feMergeNode');\r\n    feMerge.appendChild(feMergeNode);\r\n    feMergeNode = createNS('feMergeNode');\r\n    feMergeNode.setAttribute('in','SourceGraphic');\r\n    this.feMergeNode = feMergeNode;\r\n    this.feMerge = feMerge;\r\n    this.originalNodeAdded = false;\r\n    feMerge.appendChild(feMergeNode);\r\n}\r\n\r\nSVGDropShadowEffect.prototype.renderFrame = function(forceRender){\r\n    if(forceRender || this.filterManager._mdf){\r\n        if(forceRender || this.filterManager.effectElements[4].p._mdf){\r\n            this.feGaussianBlur.setAttribute('stdDeviation', this.filterManager.effectElements[4].p.v / 4);\r\n        }\r\n        if(forceRender || this.filterManager.effectElements[0].p._mdf){\r\n            var col = this.filterManager.effectElements[0].p.v;\r\n            this.feFlood.setAttribute('flood-color',rgbToHex(Math.round(col[0]*255),Math.round(col[1]*255),Math.round(col[2]*255)));\r\n        }\r\n        if(forceRender || this.filterManager.effectElements[1].p._mdf){\r\n            this.feFlood.setAttribute('flood-opacity',this.filterManager.effectElements[1].p.v/255);\r\n        }\r\n        if(forceRender || this.filterManager.effectElements[2].p._mdf || this.filterManager.effectElements[3].p._mdf){\r\n            var distance = this.filterManager.effectElements[3].p.v;\r\n            var angle = (this.filterManager.effectElements[2].p.v - 90) * degToRads;\r\n            var x = distance * Math.cos(angle);\r\n            var y = distance * Math.sin(angle);\r\n            this.feOffset.setAttribute('dx', x);\r\n            this.feOffset.setAttribute('dy', y);\r\n        }\r\n        /*if(forceRender || this.filterManager.effectElements[5].p._mdf){\r\n            if(this.filterManager.effectElements[5].p.v === 1 && this.originalNodeAdded) {\r\n                this.feMerge.removeChild(this.feMergeNode);\r\n                this.originalNodeAdded = false;\r\n            } else if(this.filterManager.effectElements[5].p.v === 0 && !this.originalNodeAdded) {\r\n                this.feMerge.appendChild(this.feMergeNode);\r\n                this.originalNodeAdded = true;\r\n            }\r\n        }*/\r\n    }\r\n};\r\nvar _svgMatteSymbols = [];\r\n\r\nfunction SVGMatte3Effect(filterElem, filterManager, elem){\r\n    this.initialized = false;\r\n    this.filterManager = filterManager;\r\n    this.filterElem = filterElem;\r\n    this.elem = elem;\r\n    elem.matteElement = createNS('g');\r\n    elem.matteElement.appendChild(elem.layerElement);\r\n    elem.matteElement.appendChild(elem.transformedElement);\r\n    elem.baseElement = elem.matteElement;\r\n}\r\n\r\nSVGMatte3Effect.prototype.findSymbol = function(mask) {\r\n    var i = 0, len = _svgMatteSymbols.length;\r\n    while(i < len) {\r\n        if(_svgMatteSymbols[i] === mask) {\r\n            return _svgMatteSymbols[i];\r\n        }\r\n        i += 1;\r\n    }\r\n    return null;\r\n};\r\n\r\nSVGMatte3Effect.prototype.replaceInParent = function(mask, symbolId) {\r\n    var parentNode = mask.layerElement.parentNode;\r\n    if(!parentNode) {\r\n        return;\r\n    }\r\n    var children = parentNode.children;\r\n    var i = 0, len = children.length;\r\n    while (i < len) {\r\n        if (children[i] === mask.layerElement) {\r\n            break;\r\n        }\r\n        i += 1;\r\n    }\r\n    var nextChild;\r\n    if (i <= len - 2) {\r\n        nextChild = children[i + 1];\r\n    }\r\n    var useElem = createNS('use');\r\n    useElem.setAttribute('href', '#' + symbolId);\r\n    if(nextChild) {\r\n        parentNode.insertBefore(useElem, nextChild);\r\n    } else {\r\n        parentNode.appendChild(useElem);\r\n    }\r\n};\r\n\r\nSVGMatte3Effect.prototype.setElementAsMask = function(elem, mask) {\r\n    if(!this.findSymbol(mask)) {\r\n        var symbolId = createElementID();\r\n        var masker = createNS('mask');\r\n        masker.setAttribute('id', mask.layerId);\r\n        masker.setAttribute('mask-type', 'alpha');\r\n        _svgMatteSymbols.push(mask);\r\n        var defs = elem.globalData.defs;\r\n        defs.appendChild(masker);\r\n        var symbol = createNS('symbol');\r\n        symbol.setAttribute('id', symbolId);\r\n        this.replaceInParent(mask, symbolId);\r\n        symbol.appendChild(mask.layerElement);\r\n        defs.appendChild(symbol);\r\n        var useElem = createNS('use');\r\n        useElem.setAttribute('href', '#' + symbolId);\r\n        masker.appendChild(useElem);\r\n        mask.data.hd = false;\r\n        mask.show();\r\n    }\r\n    elem.setMatte(mask.layerId);\r\n};\r\n\r\nSVGMatte3Effect.prototype.initialize = function() {\r\n    var ind = this.filterManager.effectElements[0].p.v;\r\n    var elements = this.elem.comp.elements;\r\n    var i = 0, len = elements.length;\r\n    while (i < len) {\r\n    \tif (elements[i] && elements[i].data.ind === ind) {\r\n    \t\tthis.setElementAsMask(this.elem, elements[i]);\r\n    \t}\r\n    \ti += 1;\r\n    }\r\n    this.initialized = true;\r\n};\r\n\r\nSVGMatte3Effect.prototype.renderFrame = function() {\r\n\tif(!this.initialized) {\r\n\t\tthis.initialize();\r\n\t}\r\n};\r\nfunction SVGEffects(elem){\r\n    var i, len = elem.data.ef ? elem.data.ef.length : 0;\r\n    var filId = createElementID();\r\n    var fil = filtersFactory.createFilter(filId);\r\n    var count = 0;\r\n    this.filters = [];\r\n    var filterManager;\r\n    for(i=0;i<len;i+=1){\r\n        filterManager = null;\r\n        if(elem.data.ef[i].ty === 20){\r\n            count += 1;\r\n            filterManager = new SVGTintFilter(fil, elem.effectsManager.effectElements[i]);\r\n        }else if(elem.data.ef[i].ty === 21){\r\n            count += 1;\r\n            filterManager = new SVGFillFilter(fil, elem.effectsManager.effectElements[i]);\r\n        }else if(elem.data.ef[i].ty === 22){\r\n            filterManager = new SVGStrokeEffect(elem, elem.effectsManager.effectElements[i]);\r\n        }else if(elem.data.ef[i].ty === 23){\r\n            count += 1;\r\n            filterManager = new SVGTritoneFilter(fil, elem.effectsManager.effectElements[i]);\r\n        }else if(elem.data.ef[i].ty === 24){\r\n            count += 1;\r\n            filterManager = new SVGProLevelsFilter(fil, elem.effectsManager.effectElements[i]);\r\n        }else if(elem.data.ef[i].ty === 25){\r\n            count += 1;\r\n            filterManager = new SVGDropShadowEffect(fil, elem.effectsManager.effectElements[i]);\r\n        }else if(elem.data.ef[i].ty === 28){\r\n            //count += 1;\r\n            filterManager = new SVGMatte3Effect(fil, elem.effectsManager.effectElements[i], elem);\r\n        }else if(elem.data.ef[i].ty === 29){\r\n            count += 1;\r\n            filterManager = new SVGGaussianBlurEffect(fil, elem.effectsManager.effectElements[i]);\r\n        }\r\n        if(filterManager) {\r\n            this.filters.push(filterManager);\r\n        }\r\n    }\r\n    if(count){\r\n        elem.globalData.defs.appendChild(fil);\r\n        elem.layerElement.setAttribute('filter','url(' + locationHref + '#'+filId+')');\r\n    }\r\n    if (this.filters.length) {\r\n        elem.addRenderableComponent(this);\r\n    }\r\n}\r\n\r\nSVGEffects.prototype.renderFrame = function(_isFirstFrame){\r\n    var i, len = this.filters.length;\r\n    for(i=0;i<len;i+=1){\r\n        this.filters[i].renderFrame(_isFirstFrame);\r\n    }\r\n};\r\nfunction CVContextData() {\r\n\tthis.saved = [];\r\n    this.cArrPos = 0;\r\n    this.cTr = new Matrix();\r\n    this.cO = 1;\r\n    var i, len = 15;\r\n    this.savedOp = createTypedArray('float32', len);\r\n    for(i=0;i<len;i+=1){\r\n        this.saved[i] = createTypedArray('float32', 16);\r\n    }\r\n    this._length = len;\r\n}\r\n\r\nCVContextData.prototype.duplicate = function() {\r\n\tvar newLength = this._length * 2;\r\n\tvar currentSavedOp = this.savedOp;\r\n    this.savedOp = createTypedArray('float32', newLength);\r\n    this.savedOp.set(currentSavedOp);\r\n    var i = 0;\r\n    for(i = this._length; i < newLength; i += 1) {\r\n        this.saved[i] = createTypedArray('float32', 16);\r\n    }\r\n    this._length = newLength;\r\n};\r\n\r\nCVContextData.prototype.reset = function() {\r\n\tthis.cArrPos = 0;\r\n\tthis.cTr.reset();\r\n    this.cO = 1;\r\n};\r\nfunction CVBaseElement(){\r\n}\r\n\r\nCVBaseElement.prototype = {\r\n    createElements: function(){},\r\n    initRendererElement: function(){},\r\n    createContainerElements: function(){\r\n        this.canvasContext = this.globalData.canvasContext;\r\n        this.renderableEffectsManager = new CVEffects(this);\r\n    },\r\n    createContent: function(){},\r\n    setBlendMode: function(){\r\n        var globalData = this.globalData;\r\n        if(globalData.blendMode !== this.data.bm) {\r\n            globalData.blendMode = this.data.bm;\r\n            var blendModeValue = getBlendMode(this.data.bm);\r\n            globalData.canvasContext.globalCompositeOperation = blendModeValue;\r\n        }\r\n    },\r\n    createRenderableComponents: function(){\r\n        this.maskManager = new CVMaskElement(this.data, this);\r\n    },\r\n    hideElement: function(){\r\n        if (!this.hidden && (!this.isInRange || this.isTransparent)) {\r\n            this.hidden = true;\r\n        }\r\n    },\r\n    showElement: function(){\r\n        if (this.isInRange && !this.isTransparent){\r\n            this.hidden = false;\r\n            this._isFirstFrame = true;\r\n            this.maskManager._isFirstFrame = true;\r\n        }\r\n    },\r\n    renderFrame: function() {\r\n        if (this.hidden || this.data.hd) {\r\n            return;\r\n        }\r\n        this.renderTransform();\r\n        this.renderRenderable();\r\n        this.setBlendMode();\r\n        var forceRealStack = this.data.ty === 0;\r\n        this.globalData.renderer.save(forceRealStack);\r\n        this.globalData.renderer.ctxTransform(this.finalTransform.mat.props);\r\n        this.globalData.renderer.ctxOpacity(this.finalTransform.mProp.o.v);\r\n        this.renderInnerContent();\r\n        this.globalData.renderer.restore(forceRealStack);\r\n        if(this.maskManager.hasMasks) {\r\n            this.globalData.renderer.restore(true);\r\n        }\r\n        if (this._isFirstFrame) {\r\n            this._isFirstFrame = false;\r\n        }\r\n    },\r\n    destroy: function(){\r\n        this.canvasContext = null;\r\n        this.data = null;\r\n        this.globalData = null;\r\n        this.maskManager.destroy();\r\n    },\r\n    mHelper: new Matrix()\r\n};\r\nCVBaseElement.prototype.hide = CVBaseElement.prototype.hideElement;\r\nCVBaseElement.prototype.show = CVBaseElement.prototype.showElement;\r\n\r\nfunction CVImageElement(data, globalData, comp){\r\n    this.assetData = globalData.getAssetData(data.refId);\r\n    this.img = globalData.imageLoader.getImage(this.assetData);\r\n    this.initElement(data,globalData,comp);\r\n}\r\nextendPrototype([BaseElement, TransformElement, CVBaseElement, HierarchyElement, FrameElement, RenderableElement], CVImageElement);\r\n\r\nCVImageElement.prototype.initElement = SVGShapeElement.prototype.initElement;\r\nCVImageElement.prototype.prepareFrame = IImageElement.prototype.prepareFrame;\r\n\r\nCVImageElement.prototype.createContent = function(){\r\n\r\n    if (this.img.width && (this.assetData.w !== this.img.width || this.assetData.h !== this.img.height)) {\r\n        var canvas = createTag('canvas');\r\n        canvas.width = this.assetData.w;\r\n        canvas.height = this.assetData.h;\r\n        var ctx = canvas.getContext('2d');\r\n\r\n        var imgW = this.img.width;\r\n        var imgH = this.img.height;\r\n        var imgRel = imgW / imgH;\r\n        var canvasRel = this.assetData.w/this.assetData.h;\r\n        var widthCrop, heightCrop;\r\n        var par = this.assetData.pr || this.globalData.renderConfig.imagePreserveAspectRatio;\r\n        if((imgRel > canvasRel && par === 'xMidYMid slice') || (imgRel < canvasRel && par !== 'xMidYMid slice')) {\r\n            heightCrop = imgH;\r\n            widthCrop = heightCrop*canvasRel;\r\n        } else {\r\n            widthCrop = imgW;\r\n            heightCrop = widthCrop/canvasRel;\r\n        }\r\n        ctx.drawImage(this.img,(imgW-widthCrop)/2,(imgH-heightCrop)/2,widthCrop,heightCrop,0,0,this.assetData.w,this.assetData.h);\r\n        this.img = canvas;\r\n    }\r\n\r\n};\r\n\r\nCVImageElement.prototype.renderInnerContent = function(parentMatrix){\r\n    this.canvasContext.drawImage(this.img, 0, 0);\r\n};\r\n\r\nCVImageElement.prototype.destroy = function(){\r\n    this.img = null;\r\n};\r\nfunction CVCompElement(data, globalData, comp) {\r\n    this.completeLayers = false;\r\n    this.layers = data.layers;\r\n    this.pendingElements = [];\r\n    this.elements = createSizedArray(this.layers.length);\r\n    this.initElement(data, globalData, comp);\r\n    this.tm = data.tm ? PropertyFactory.getProp(this,data.tm,0,globalData.frameRate, this) : {_placeholder:true};\r\n}\r\n\r\nextendPrototype([CanvasRenderer, ICompElement, CVBaseElement], CVCompElement);\r\n\r\nCVCompElement.prototype.renderInnerContent = function() {\r\n    var ctx = this.canvasContext;\r\n    ctx.beginPath();\r\n    ctx.moveTo(0, 0);\r\n    ctx.lineTo(this.data.w, 0);\r\n    ctx.lineTo(this.data.w, this.data.h);\r\n    ctx.lineTo(0, this.data.h);\r\n    ctx.lineTo(0, 0);\r\n    ctx.clip();\r\n    var i,len = this.layers.length;\r\n    for( i = len - 1; i >= 0; i -= 1 ){\r\n        if(this.completeLayers || this.elements[i]){\r\n            this.elements[i].renderFrame();\r\n        }\r\n    }\r\n};\r\n\r\nCVCompElement.prototype.destroy = function(){\r\n    var i,len = this.layers.length;\r\n    for( i = len - 1; i >= 0; i -= 1 ){\r\n        if(this.elements[i]) {\r\n            this.elements[i].destroy();\r\n        }\r\n    }\r\n    this.layers = null;\r\n    this.elements = null;\r\n};\r\n\r\nfunction CVMaskElement(data,element){\r\n    this.data = data;\r\n    this.element = element;\r\n    this.masksProperties = this.data.masksProperties || [];\r\n    this.viewData = createSizedArray(this.masksProperties.length);\r\n    var i, len = this.masksProperties.length, hasMasks = false;\r\n    for (i = 0; i < len; i++) {\r\n        if(this.masksProperties[i].mode !== 'n'){\r\n            hasMasks = true;\r\n        }\r\n        this.viewData[i] = ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[i],3);\r\n    }\r\n    this.hasMasks = hasMasks;\r\n    if(hasMasks) {\r\n        this.element.addRenderableComponent(this);\r\n    }\r\n}\r\n\r\nCVMaskElement.prototype.renderFrame = function () {\r\n    if(!this.hasMasks){\r\n        return;\r\n    }\r\n    var transform = this.element.finalTransform.mat;\r\n    var ctx = this.element.canvasContext;\r\n    var i, len = this.masksProperties.length;\r\n    var pt,pts,data;\r\n    ctx.beginPath();\r\n    for (i = 0; i < len; i++) {\r\n        if(this.masksProperties[i].mode !== 'n'){\r\n            if (this.masksProperties[i].inv) {\r\n                ctx.moveTo(0, 0);\r\n                ctx.lineTo(this.element.globalData.compSize.w, 0);\r\n                ctx.lineTo(this.element.globalData.compSize.w, this.element.globalData.compSize.h);\r\n                ctx.lineTo(0, this.element.globalData.compSize.h);\r\n                ctx.lineTo(0, 0);\r\n            }\r\n            data = this.viewData[i].v;\r\n            pt = transform.applyToPointArray(data.v[0][0],data.v[0][1],0);\r\n            ctx.moveTo(pt[0], pt[1]);\r\n            var j, jLen = data._length;\r\n            for (j = 1; j < jLen; j++) {\r\n                pts = transform.applyToTriplePoints(data.o[j - 1], data.i[j], data.v[j]);\r\n                ctx.bezierCurveTo(pts[0], pts[1], pts[2], pts[3], pts[4], pts[5]);\r\n            }\r\n            pts = transform.applyToTriplePoints(data.o[j - 1], data.i[0], data.v[0]);\r\n            ctx.bezierCurveTo(pts[0], pts[1], pts[2], pts[3], pts[4], pts[5]);\r\n        }\r\n    }\r\n    this.element.globalData.renderer.save(true);\r\n    ctx.clip();\r\n};\r\n\r\nCVMaskElement.prototype.getMaskProperty = MaskElement.prototype.getMaskProperty;\r\n\r\nCVMaskElement.prototype.destroy = function(){\r\n    this.element = null;\r\n};\r\nfunction CVShapeElement(data, globalData, comp) {\r\n    this.shapes = [];\r\n    this.shapesData = data.shapes;\r\n    this.stylesList = [];\r\n    this.itemsData = [];\r\n    this.prevViewData = [];\r\n    this.shapeModifiers = [];\r\n    this.processedElements = [];\r\n    this.transformsManager = new ShapeTransformManager();\r\n    this.initElement(data, globalData, comp);\r\n}\r\n\r\nextendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement], CVShapeElement);\r\n\r\nCVShapeElement.prototype.initElement = RenderableDOMElement.prototype.initElement;\r\n\r\nCVShapeElement.prototype.transformHelper = {opacity:1,_opMdf:false};\r\n\r\nCVShapeElement.prototype.dashResetter = [];\r\n\r\nCVShapeElement.prototype.createContent = function(){\r\n    this.searchShapes(this.shapesData,this.itemsData,this.prevViewData, true, []);\r\n};\r\n\r\nCVShapeElement.prototype.createStyleElement = function(data, transforms) {\r\n    var styleElem = {\r\n        data: data,\r\n        type: data.ty,\r\n        preTransforms: this.transformsManager.addTransformSequence(transforms),\r\n        transforms: [],\r\n        elements: [],\r\n        closed: data.hd === true\r\n    };\r\n    var elementData = {};\r\n    if(data.ty == 'fl' || data.ty == 'st'){\r\n        elementData.c = PropertyFactory.getProp(this,data.c,1,255,this);\r\n        if(!elementData.c.k){\r\n            styleElem.co = 'rgb('+bm_floor(elementData.c.v[0])+','+bm_floor(elementData.c.v[1])+','+bm_floor(elementData.c.v[2])+')';\r\n        }\r\n    } else if (data.ty === 'gf' || data.ty === 'gs') {\r\n        elementData.s = PropertyFactory.getProp(this,data.s,1,null,this);\r\n        elementData.e = PropertyFactory.getProp(this,data.e,1,null,this);\r\n        elementData.h = PropertyFactory.getProp(this,data.h||{k:0},0,0.01,this);\r\n        elementData.a = PropertyFactory.getProp(this,data.a||{k:0},0,degToRads,this);\r\n        elementData.g = new GradientProperty(this,data.g,this);\r\n    }\r\n    elementData.o = PropertyFactory.getProp(this,data.o,0,0.01,this);\r\n    if(data.ty == 'st' || data.ty == 'gs') {\r\n        styleElem.lc = this.lcEnum[data.lc] || 'round';\r\n        styleElem.lj = this.ljEnum[data.lj] || 'round';\r\n        if(data.lj == 1) {\r\n            styleElem.ml = data.ml;\r\n        }\r\n        elementData.w = PropertyFactory.getProp(this,data.w,0,null,this);\r\n        if(!elementData.w.k){\r\n            styleElem.wi = elementData.w.v;\r\n        }\r\n        if(data.d){\r\n            var d = new DashProperty(this,data.d,'canvas', this);\r\n            elementData.d = d;\r\n            if(!elementData.d.k){\r\n                styleElem.da = elementData.d.dashArray;\r\n                styleElem.do = elementData.d.dashoffset[0];\r\n            }\r\n        }\r\n    } else {\r\n        styleElem.r = data.r === 2 ? 'evenodd' : 'nonzero';\r\n    }\r\n    this.stylesList.push(styleElem);\r\n    elementData.style = styleElem;\r\n    return elementData;\r\n};\r\n\r\nCVShapeElement.prototype.createGroupElement = function(data) {\r\n    var elementData = {\r\n        it: [],\r\n        prevViewData: []\r\n    };\r\n    return elementData;\r\n};\r\n\r\nCVShapeElement.prototype.createTransformElement = function(data) {\r\n    var elementData = {\r\n        transform : {\r\n            opacity: 1,\r\n            _opMdf:false,\r\n            key: this.transformsManager.getNewKey(),\r\n            op: PropertyFactory.getProp(this,data.o,0,0.01,this),\r\n            mProps: TransformPropertyFactory.getTransformProperty(this,data,this)\r\n        }\r\n    };\r\n    return elementData;\r\n};\r\n\r\nCVShapeElement.prototype.createShapeElement = function(data) {\r\n    var elementData = new CVShapeData(this, data, this.stylesList, this.transformsManager);\r\n    \r\n    this.shapes.push(elementData);\r\n    this.addShapeToModifiers(elementData);\r\n    return elementData;\r\n};\r\n\r\nCVShapeElement.prototype.reloadShapes = function() {\r\n    this._isFirstFrame = true;\r\n    var i, len = this.itemsData.length;\r\n    for (i = 0; i < len; i += 1) {\r\n        this.prevViewData[i] = this.itemsData[i];\r\n    }\r\n    this.searchShapes(this.shapesData,this.itemsData,this.prevViewData, true, []);\r\n    len = this.dynamicProperties.length;\r\n    for (i = 0; i < len; i += 1) {\r\n        this.dynamicProperties[i].getValue();\r\n    }\r\n    this.renderModifiers();\r\n    this.transformsManager.processSequences(this._isFirstFrame);\r\n};\r\n\r\nCVShapeElement.prototype.addTransformToStyleList = function(transform) {\r\n    var i, len = this.stylesList.length;\r\n    for (i = 0; i < len; i += 1) {\r\n        if(!this.stylesList[i].closed) {\r\n            this.stylesList[i].transforms.push(transform);\r\n        }\r\n    }\r\n}\r\n\r\nCVShapeElement.prototype.removeTransformFromStyleList = function() {\r\n    var i, len = this.stylesList.length;\r\n    for (i = 0; i < len; i += 1) {\r\n        if(!this.stylesList[i].closed) {\r\n            this.stylesList[i].transforms.pop();\r\n        }\r\n    }\r\n}\r\n\r\nCVShapeElement.prototype.closeStyles = function(styles) {\r\n    var i, len = styles.length, j, jLen;\r\n    for (i = 0; i < len; i += 1) {\r\n        styles[i].closed = true;\r\n    }\r\n}\r\n\r\nCVShapeElement.prototype.searchShapes = function(arr,itemsData, prevViewData, shouldRender, transforms){\r\n    var i, len = arr.length - 1;\r\n    var j, jLen;\r\n    var ownStyles = [], ownModifiers = [], processedPos, modifier, currentTransform;\r\n    var ownTransforms = [].concat(transforms);\r\n    for(i=len;i>=0;i-=1){\r\n        processedPos = this.searchProcessedElement(arr[i]);\r\n        if(!processedPos){\r\n            arr[i]._shouldRender = shouldRender;\r\n        } else {\r\n            itemsData[i] = prevViewData[processedPos - 1];\r\n        }\r\n        if(arr[i].ty == 'fl' || arr[i].ty == 'st'|| arr[i].ty == 'gf'|| arr[i].ty == 'gs'){\r\n            if(!processedPos){\r\n                itemsData[i] = this.createStyleElement(arr[i], ownTransforms);\r\n            } else {\r\n                itemsData[i].style.closed = false;\r\n            }\r\n            \r\n            ownStyles.push(itemsData[i].style);\r\n        }else if(arr[i].ty == 'gr'){\r\n            if(!processedPos){\r\n                itemsData[i] = this.createGroupElement(arr[i]);\r\n            } else {\r\n                jLen = itemsData[i].it.length;\r\n                for(j=0;j<jLen;j+=1){\r\n                    itemsData[i].prevViewData[j] = itemsData[i].it[j];\r\n                }\r\n            }\r\n            this.searchShapes(arr[i].it,itemsData[i].it,itemsData[i].prevViewData, shouldRender, ownTransforms);\r\n        }else if(arr[i].ty == 'tr'){\r\n            if(!processedPos){\r\n                currentTransform = this.createTransformElement(arr[i]);\r\n                itemsData[i] = currentTransform;\r\n            }\r\n            ownTransforms.push(itemsData[i]);\r\n            this.addTransformToStyleList(itemsData[i]);\r\n        }else if(arr[i].ty == 'sh' || arr[i].ty == 'rc' || arr[i].ty == 'el' || arr[i].ty == 'sr'){\r\n            if(!processedPos){\r\n                itemsData[i] = this.createShapeElement(arr[i]);\r\n            }\r\n            \r\n        }else if(arr[i].ty == 'tm' || arr[i].ty == 'rd'){\r\n            if(!processedPos){\r\n                modifier = ShapeModifiers.getModifier(arr[i].ty);\r\n                modifier.init(this,arr[i]);\r\n                itemsData[i] = modifier;\r\n                this.shapeModifiers.push(modifier);\r\n            } else {\r\n                modifier = itemsData[i];\r\n                modifier.closed = false;\r\n            }\r\n            ownModifiers.push(modifier);\r\n        } else if(arr[i].ty == 'rp'){\r\n            if(!processedPos){\r\n                modifier = ShapeModifiers.getModifier(arr[i].ty);\r\n                itemsData[i] = modifier;\r\n                modifier.init(this,arr,i,itemsData);\r\n                this.shapeModifiers.push(modifier);\r\n                shouldRender = false;\r\n            }else{\r\n                modifier = itemsData[i];\r\n                modifier.closed = true;\r\n            }\r\n            ownModifiers.push(modifier);\r\n        }\r\n        this.addProcessedElement(arr[i], i + 1);\r\n    }\r\n    this.removeTransformFromStyleList();\r\n    this.closeStyles(ownStyles);\r\n    len = ownModifiers.length;\r\n    for(i=0;i<len;i+=1){\r\n        ownModifiers[i].closed = true;\r\n    }\r\n};\r\n\r\nCVShapeElement.prototype.renderInnerContent = function() {\r\n    this.transformHelper.opacity = 1;\r\n    this.transformHelper._opMdf = false;\r\n    this.renderModifiers();\r\n    this.transformsManager.processSequences(this._isFirstFrame);\r\n    this.renderShape(this.transformHelper,this.shapesData,this.itemsData,true);\r\n};\r\n\r\nCVShapeElement.prototype.renderShapeTransform = function(parentTransform, groupTransform) {\r\n    var props, groupMatrix;\r\n    if(parentTransform._opMdf || groupTransform.op._mdf || this._isFirstFrame) {\r\n        groupTransform.opacity = parentTransform.opacity;\r\n        groupTransform.opacity *= groupTransform.op.v;\r\n        groupTransform._opMdf = true;\r\n    }\r\n};\r\n\r\nCVShapeElement.prototype.drawLayer = function() {\r\n    var i, len = this.stylesList.length;\r\n    var j, jLen, k, kLen,elems,nodes, renderer = this.globalData.renderer, ctx = this.globalData.canvasContext, type, currentStyle;\r\n    for(i=0;i<len;i+=1){\r\n        currentStyle = this.stylesList[i];\r\n        type = currentStyle.type;\r\n\r\n        //Skipping style when\r\n        //Stroke width equals 0\r\n        //style should not be rendered (extra unused repeaters)\r\n        //current opacity equals 0\r\n        //global opacity equals 0\r\n        if(((type === 'st' || type === 'gs') && currentStyle.wi === 0) || !currentStyle.data._shouldRender || currentStyle.coOp === 0 || this.globalData.currentGlobalAlpha === 0){\r\n            continue;\r\n        }\r\n        renderer.save();\r\n        elems = currentStyle.elements;\r\n        if(type === 'st' || type === 'gs'){\r\n            ctx.strokeStyle = type === 'st' ? currentStyle.co : currentStyle.grd;\r\n            ctx.lineWidth = currentStyle.wi;\r\n            ctx.lineCap = currentStyle.lc;\r\n            ctx.lineJoin = currentStyle.lj;\r\n            ctx.miterLimit = currentStyle.ml || 0;\r\n        } else {\r\n            ctx.fillStyle = type === 'fl' ? currentStyle.co : currentStyle.grd;\r\n        }\r\n        renderer.ctxOpacity(currentStyle.coOp);\r\n        if(type !== 'st' && type !== 'gs'){\r\n            ctx.beginPath();\r\n        }\r\n        renderer.ctxTransform(currentStyle.preTransforms.finalTransform.props);\r\n        jLen = elems.length;\r\n        for(j=0;j<jLen;j+=1){\r\n            if(type === 'st' || type === 'gs'){\r\n                ctx.beginPath();\r\n                if(currentStyle.da){\r\n                    ctx.setLineDash(currentStyle.da);\r\n                    ctx.lineDashOffset = currentStyle.do;\r\n                }\r\n            }\r\n            nodes = elems[j].trNodes;\r\n            kLen = nodes.length;\r\n\r\n            for(k=0;k<kLen;k+=1){\r\n                if(nodes[k].t == 'm'){\r\n                    ctx.moveTo(nodes[k].p[0],nodes[k].p[1]);\r\n                }else if(nodes[k].t == 'c'){\r\n                    ctx.bezierCurveTo(nodes[k].pts[0],nodes[k].pts[1],nodes[k].pts[2],nodes[k].pts[3],nodes[k].pts[4],nodes[k].pts[5]);\r\n                }else{\r\n                    ctx.closePath();\r\n                }\r\n            }\r\n            if(type === 'st' || type === 'gs'){\r\n                ctx.stroke();\r\n                if(currentStyle.da){\r\n                    ctx.setLineDash(this.dashResetter);\r\n                }\r\n            }\r\n        }\r\n        if(type !== 'st' && type !== 'gs'){\r\n            ctx.fill(currentStyle.r);\r\n        }\r\n        renderer.restore();\r\n    }\r\n};\r\n\r\nCVShapeElement.prototype.renderShape = function(parentTransform,items,data,isMain){\r\n    var i, len = items.length - 1;\r\n    var groupTransform;\r\n    groupTransform = parentTransform;\r\n    for(i=len;i>=0;i-=1){\r\n        if(items[i].ty == 'tr'){\r\n            groupTransform = data[i].transform;\r\n            this.renderShapeTransform(parentTransform, groupTransform);\r\n        }else if(items[i].ty == 'sh' || items[i].ty == 'el' || items[i].ty == 'rc' || items[i].ty == 'sr'){\r\n            this.renderPath(items[i],data[i]);\r\n        }else if(items[i].ty == 'fl'){\r\n            this.renderFill(items[i],data[i],groupTransform);\r\n        }else if(items[i].ty == 'st'){\r\n            this.renderStroke(items[i],data[i],groupTransform);\r\n        }else if(items[i].ty == 'gf' || items[i].ty == 'gs'){\r\n            this.renderGradientFill(items[i],data[i],groupTransform);\r\n        }else if(items[i].ty == 'gr'){\r\n            this.renderShape(groupTransform,items[i].it,data[i].it);\r\n        }else if(items[i].ty == 'tm'){\r\n            //\r\n        }\r\n    }\r\n    if(isMain){\r\n        this.drawLayer();\r\n    }\r\n    \r\n};\r\n\r\nCVShapeElement.prototype.renderStyledShape = function(styledShape, shape){\r\n    if(this._isFirstFrame || shape._mdf || styledShape.transforms._mdf) {\r\n        var shapeNodes = styledShape.trNodes;\r\n        var paths = shape.paths;\r\n        var i, len, j, jLen = paths._length;\r\n        shapeNodes.length = 0;\r\n        var groupTransformMat = styledShape.transforms.finalTransform;\r\n        for (j = 0; j < jLen; j += 1) {\r\n            var pathNodes = paths.shapes[j];\r\n            if(pathNodes && pathNodes.v){\r\n                len = pathNodes._length;\r\n                for (i = 1; i < len; i += 1) {\r\n                    if (i === 1) {\r\n                        shapeNodes.push({\r\n                            t: 'm',\r\n                            p: groupTransformMat.applyToPointArray(pathNodes.v[0][0], pathNodes.v[0][1], 0)\r\n                        });\r\n                    }\r\n                    shapeNodes.push({\r\n                        t: 'c',\r\n                        pts: groupTransformMat.applyToTriplePoints(pathNodes.o[i - 1], pathNodes.i[i], pathNodes.v[i])\r\n                    });\r\n                }\r\n                if (len === 1) {\r\n                    shapeNodes.push({\r\n                        t: 'm',\r\n                        p: groupTransformMat.applyToPointArray(pathNodes.v[0][0], pathNodes.v[0][1], 0)\r\n                    });\r\n                }\r\n                if (pathNodes.c && len) {\r\n                    shapeNodes.push({\r\n                        t: 'c',\r\n                        pts: groupTransformMat.applyToTriplePoints(pathNodes.o[i - 1], pathNodes.i[0], pathNodes.v[0])\r\n                    });\r\n                    shapeNodes.push({\r\n                        t: 'z'\r\n                    });\r\n                }\r\n            }\r\n        }\r\n        styledShape.trNodes = shapeNodes;\r\n    }\r\n}\r\n\r\nCVShapeElement.prototype.renderPath = function(pathData,itemData){\r\n    if(pathData.hd !== true && pathData._shouldRender) {\r\n        var i, len = itemData.styledShapes.length;\r\n        for (i = 0; i < len; i += 1) {\r\n            this.renderStyledShape(itemData.styledShapes[i], itemData.sh);\r\n        }\r\n    }\r\n};\r\n\r\nCVShapeElement.prototype.renderFill = function(styleData,itemData, groupTransform){\r\n    var styleElem = itemData.style;\r\n\r\n    if (itemData.c._mdf || this._isFirstFrame) {\r\n        styleElem.co = 'rgb(' \r\n        + bm_floor(itemData.c.v[0]) + ',' \r\n        + bm_floor(itemData.c.v[1]) + ',' \r\n        + bm_floor(itemData.c.v[2]) + ')';\r\n    }\r\n    if (itemData.o._mdf || groupTransform._opMdf || this._isFirstFrame) {\r\n        styleElem.coOp = itemData.o.v * groupTransform.opacity;\r\n    }\r\n};\r\n\r\nCVShapeElement.prototype.renderGradientFill = function(styleData,itemData, groupTransform){\r\n    var styleElem = itemData.style;\r\n    if(!styleElem.grd || itemData.g._mdf || itemData.s._mdf || itemData.e._mdf || (styleData.t !== 1 && (itemData.h._mdf || itemData.a._mdf))) {\r\n        var ctx = this.globalData.canvasContext;\r\n        var grd;\r\n        var pt1 = itemData.s.v, pt2 = itemData.e.v;\r\n        if (styleData.t === 1) {\r\n            grd = ctx.createLinearGradient(pt1[0], pt1[1], pt2[0], pt2[1]);\r\n        } else {\r\n            var rad = Math.sqrt(Math.pow(pt1[0] - pt2[0], 2) + Math.pow(pt1[1] - pt2[1], 2));\r\n            var ang = Math.atan2(pt2[1] - pt1[1], pt2[0] - pt1[0]);\r\n\r\n            var percent = itemData.h.v >= 1 ? 0.99 : itemData.h.v <= -1 ? -0.99: itemData.h.v;\r\n            var dist = rad * percent;\r\n            var x = Math.cos(ang + itemData.a.v) * dist + pt1[0];\r\n            var y = Math.sin(ang + itemData.a.v) * dist + pt1[1];\r\n            var grd = ctx.createRadialGradient(x, y, 0, pt1[0], pt1[1], rad);\r\n        }\r\n\r\n        var i, len = styleData.g.p;\r\n        var cValues = itemData.g.c;\r\n        var opacity = 1;\r\n\r\n        for (i = 0; i < len; i += 1){\r\n            if(itemData.g._hasOpacity && itemData.g._collapsable) {\r\n                opacity = itemData.g.o[i*2 + 1];\r\n            }\r\n            grd.addColorStop(cValues[i * 4] / 100,'rgba('+ cValues[i * 4 + 1] + ',' + cValues[i * 4 + 2] + ','+cValues[i * 4 + 3] + ',' + opacity + ')');\r\n        }\r\n        styleElem.grd = grd;\r\n    }\r\n    styleElem.coOp = itemData.o.v*groupTransform.opacity;\r\n    \r\n};\r\n\r\nCVShapeElement.prototype.renderStroke = function(styleData,itemData, groupTransform){\r\n    var styleElem = itemData.style;\r\n    var d = itemData.d;\r\n    if(d && (d._mdf  || this._isFirstFrame)){\r\n        styleElem.da = d.dashArray;\r\n        styleElem.do = d.dashoffset[0];\r\n    }\r\n    if(itemData.c._mdf || this._isFirstFrame){\r\n        styleElem.co = 'rgb('+bm_floor(itemData.c.v[0])+','+bm_floor(itemData.c.v[1])+','+bm_floor(itemData.c.v[2])+')';\r\n    }\r\n    if(itemData.o._mdf || groupTransform._opMdf || this._isFirstFrame){\r\n        styleElem.coOp = itemData.o.v*groupTransform.opacity;\r\n    }\r\n    if(itemData.w._mdf || this._isFirstFrame){\r\n        styleElem.wi = itemData.w.v;\r\n    }\r\n};\r\n\r\n\r\nCVShapeElement.prototype.destroy = function(){\r\n    this.shapesData = null;\r\n    this.globalData = null;\r\n    this.canvasContext = null;\r\n    this.stylesList.length = 0;\r\n    this.itemsData.length = 0;\r\n};\r\n\r\n\r\nfunction CVSolidElement(data, globalData, comp) {\r\n    this.initElement(data,globalData,comp);\r\n}\r\nextendPrototype([BaseElement, TransformElement, CVBaseElement, HierarchyElement, FrameElement, RenderableElement], CVSolidElement);\r\n\r\nCVSolidElement.prototype.initElement = SVGShapeElement.prototype.initElement;\r\nCVSolidElement.prototype.prepareFrame = IImageElement.prototype.prepareFrame;\r\n\r\nCVSolidElement.prototype.renderInnerContent = function() {\r\n    var ctx = this.canvasContext;\r\n    ctx.fillStyle = this.data.sc;\r\n    ctx.fillRect(0, 0, this.data.sw, this.data.sh);\r\n    //\r\n};\r\nfunction CVTextElement(data, globalData, comp){\r\n    this.textSpans = [];\r\n    this.yOffset = 0;\r\n    this.fillColorAnim = false;\r\n    this.strokeColorAnim = false;\r\n    this.strokeWidthAnim = false;\r\n    this.stroke = false;\r\n    this.fill = false;\r\n    this.justifyOffset = 0;\r\n    this.currentRender = null;\r\n    this.renderType = 'canvas';\r\n    this.values = {\r\n        fill: 'rgba(0,0,0,0)',\r\n        stroke: 'rgba(0,0,0,0)',\r\n        sWidth: 0,\r\n        fValue: ''\r\n    };\r\n    this.initElement(data,globalData,comp);\r\n}\r\nextendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement], CVTextElement);\r\n\r\nCVTextElement.prototype.tHelper = createTag('canvas').getContext('2d');\r\n\r\nCVTextElement.prototype.buildNewText = function(){\r\n    var documentData = this.textProperty.currentData;\r\n    this.renderedLetters = createSizedArray(documentData.l ? documentData.l.length : 0);\r\n\r\n    var hasFill = false;\r\n    if(documentData.fc) {\r\n        hasFill = true;\r\n        this.values.fill = this.buildColor(documentData.fc);\r\n    }else{\r\n        this.values.fill = 'rgba(0,0,0,0)';\r\n    }\r\n    this.fill = hasFill;\r\n    var hasStroke = false;\r\n    if(documentData.sc){\r\n        hasStroke = true;\r\n        this.values.stroke = this.buildColor(documentData.sc);\r\n        this.values.sWidth = documentData.sw;\r\n    }\r\n    var fontData = this.globalData.fontManager.getFontByName(documentData.f);\r\n    var i, len;\r\n    var letters = documentData.l;\r\n    var matrixHelper = this.mHelper;\r\n    this.stroke = hasStroke;\r\n    this.values.fValue = documentData.finalSize + 'px '+ this.globalData.fontManager.getFontByName(documentData.f).fFamily;\r\n    len = documentData.finalText.length;\r\n    //this.tHelper.font = this.values.fValue;\r\n    var charData, shapeData, k, kLen, shapes, j, jLen, pathNodes, commands, pathArr, singleShape = this.data.singleShape;\r\n    var trackingOffset = documentData.tr/1000*documentData.finalSize;\r\n    var xPos = 0, yPos = 0, firstLine = true;\r\n    var cnt = 0;\r\n    for (i = 0; i < len; i += 1) {\r\n        charData = this.globalData.fontManager.getCharData(documentData.finalText[i], fontData.fStyle, this.globalData.fontManager.getFontByName(documentData.f).fFamily);\r\n        shapeData = charData && charData.data || {};\r\n        matrixHelper.reset();\r\n        if(singleShape && letters[i].n) {\r\n            xPos = -trackingOffset;\r\n            yPos += documentData.yOffset;\r\n            yPos += firstLine ? 1 : 0;\r\n            firstLine = false;\r\n        }\r\n\r\n        shapes = shapeData.shapes ? shapeData.shapes[0].it : [];\r\n        jLen = shapes.length;\r\n        matrixHelper.scale(documentData.finalSize/100,documentData.finalSize/100);\r\n        if(singleShape){\r\n            this.applyTextPropertiesToMatrix(documentData, matrixHelper, letters[i].line, xPos, yPos);\r\n        }\r\n        commands = createSizedArray(jLen);\r\n        for(j=0;j<jLen;j+=1){\r\n            kLen = shapes[j].ks.k.i.length;\r\n            pathNodes = shapes[j].ks.k;\r\n            pathArr = [];\r\n            for(k=1;k<kLen;k+=1){\r\n                if(k==1){\r\n                    pathArr.push(matrixHelper.applyToX(pathNodes.v[0][0],pathNodes.v[0][1],0),matrixHelper.applyToY(pathNodes.v[0][0],pathNodes.v[0][1],0));\r\n                }\r\n                pathArr.push(matrixHelper.applyToX(pathNodes.o[k-1][0],pathNodes.o[k-1][1],0),matrixHelper.applyToY(pathNodes.o[k-1][0],pathNodes.o[k-1][1],0),matrixHelper.applyToX(pathNodes.i[k][0],pathNodes.i[k][1],0),matrixHelper.applyToY(pathNodes.i[k][0],pathNodes.i[k][1],0),matrixHelper.applyToX(pathNodes.v[k][0],pathNodes.v[k][1],0),matrixHelper.applyToY(pathNodes.v[k][0],pathNodes.v[k][1],0));\r\n            }\r\n            pathArr.push(matrixHelper.applyToX(pathNodes.o[k-1][0],pathNodes.o[k-1][1],0),matrixHelper.applyToY(pathNodes.o[k-1][0],pathNodes.o[k-1][1],0),matrixHelper.applyToX(pathNodes.i[0][0],pathNodes.i[0][1],0),matrixHelper.applyToY(pathNodes.i[0][0],pathNodes.i[0][1],0),matrixHelper.applyToX(pathNodes.v[0][0],pathNodes.v[0][1],0),matrixHelper.applyToY(pathNodes.v[0][0],pathNodes.v[0][1],0));\r\n            commands[j] = pathArr;\r\n        }\r\n        if(singleShape){\r\n            xPos += letters[i].l;\r\n            xPos += trackingOffset;\r\n        }\r\n        if(this.textSpans[cnt]){\r\n            this.textSpans[cnt].elem = commands;\r\n        } else {\r\n            this.textSpans[cnt] = {elem: commands};\r\n        }\r\n        cnt +=1;\r\n    }\r\n};\r\n\r\nCVTextElement.prototype.renderInnerContent = function(){\r\n    var ctx = this.canvasContext;\r\n    var finalMat = this.finalTransform.mat.props;\r\n    ctx.font = this.values.fValue;\r\n    ctx.lineCap = 'butt';\r\n    ctx.lineJoin = 'miter';\r\n    ctx.miterLimit = 4;\r\n\r\n    if(!this.data.singleShape){\r\n        this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag);\r\n    }\r\n\r\n    var  i,len, j, jLen, k, kLen;\r\n    var renderedLetters = this.textAnimator.renderedLetters;\r\n\r\n    var letters = this.textProperty.currentData.l;\r\n\r\n    len = letters.length;\r\n    var renderedLetter;\r\n    var lastFill = null, lastStroke = null, lastStrokeW = null, commands, pathArr;\r\n    for(i=0;i<len;i+=1){\r\n        if(letters[i].n){\r\n            continue;\r\n        }\r\n        renderedLetter = renderedLetters[i];\r\n        if(renderedLetter){\r\n            this.globalData.renderer.save();\r\n            this.globalData.renderer.ctxTransform(renderedLetter.p);\r\n            this.globalData.renderer.ctxOpacity(renderedLetter.o);\r\n        }\r\n        if(this.fill){\r\n            if(renderedLetter && renderedLetter.fc){\r\n                if(lastFill !== renderedLetter.fc){\r\n                    lastFill = renderedLetter.fc;\r\n                    ctx.fillStyle = renderedLetter.fc;\r\n                }\r\n            }else if(lastFill !== this.values.fill){\r\n                lastFill = this.values.fill;\r\n                ctx.fillStyle = this.values.fill;\r\n            }\r\n            commands = this.textSpans[i].elem;\r\n            jLen = commands.length;\r\n            this.globalData.canvasContext.beginPath();\r\n            for(j=0;j<jLen;j+=1) {\r\n                pathArr = commands[j];\r\n                kLen = pathArr.length;\r\n                this.globalData.canvasContext.moveTo(pathArr[0], pathArr[1]);\r\n                for (k = 2; k < kLen; k += 6) {\r\n                    this.globalData.canvasContext.bezierCurveTo(pathArr[k], pathArr[k + 1], pathArr[k + 2], pathArr[k + 3], pathArr[k + 4], pathArr[k + 5]);\r\n                }\r\n            }\r\n            this.globalData.canvasContext.closePath();\r\n            this.globalData.canvasContext.fill();\r\n            ///ctx.fillText(this.textSpans[i].val,0,0);\r\n        }\r\n        if(this.stroke){\r\n            if(renderedLetter && renderedLetter.sw){\r\n                if(lastStrokeW !== renderedLetter.sw){\r\n                    lastStrokeW = renderedLetter.sw;\r\n                    ctx.lineWidth = renderedLetter.sw;\r\n                }\r\n            }else if(lastStrokeW !== this.values.sWidth){\r\n                lastStrokeW = this.values.sWidth;\r\n                ctx.lineWidth = this.values.sWidth;\r\n            }\r\n            if(renderedLetter && renderedLetter.sc){\r\n                if(lastStroke !== renderedLetter.sc){\r\n                    lastStroke = renderedLetter.sc;\r\n                    ctx.strokeStyle = renderedLetter.sc;\r\n                }\r\n            }else if(lastStroke !== this.values.stroke){\r\n                lastStroke = this.values.stroke;\r\n                ctx.strokeStyle = this.values.stroke;\r\n            }\r\n            commands = this.textSpans[i].elem;\r\n            jLen = commands.length;\r\n            this.globalData.canvasContext.beginPath();\r\n            for(j=0;j<jLen;j+=1) {\r\n                pathArr = commands[j];\r\n                kLen = pathArr.length;\r\n                this.globalData.canvasContext.moveTo(pathArr[0], pathArr[1]);\r\n                for (k = 2; k < kLen; k += 6) {\r\n                    this.globalData.canvasContext.bezierCurveTo(pathArr[k], pathArr[k + 1], pathArr[k + 2], pathArr[k + 3], pathArr[k + 4], pathArr[k + 5]);\r\n                }\r\n            }\r\n            this.globalData.canvasContext.closePath();\r\n            this.globalData.canvasContext.stroke();\r\n            ///ctx.strokeText(letters[i].val,0,0);\r\n        }\r\n        if(renderedLetter) {\r\n            this.globalData.renderer.restore();\r\n        }\r\n    }\r\n};\r\nfunction CVEffects() {\r\n\r\n}\r\nCVEffects.prototype.renderFrame = function(){};\r\nfunction HBaseElement(data,globalData,comp){}\r\nHBaseElement.prototype = {\r\n    checkBlendMode: function(){},\r\n    initRendererElement: function(){\r\n        this.baseElement = createTag(this.data.tg || 'div');\r\n        if(this.data.hasMask) {\r\n            this.svgElement = createNS('svg');\r\n            this.layerElement = createNS('g');\r\n            this.maskedElement = this.layerElement;\r\n            this.svgElement.appendChild(this.layerElement);\r\n            this.baseElement.appendChild(this.svgElement);\r\n        } else {\r\n            this.layerElement = this.baseElement;\r\n        }\r\n        styleDiv(this.baseElement);\r\n    },\r\n    createContainerElements: function(){\r\n        this.renderableEffectsManager = new CVEffects(this);\r\n        this.transformedElement = this.baseElement;\r\n        this.maskedElement = this.layerElement;\r\n        if (this.data.ln) {\r\n            this.layerElement.setAttribute('id',this.data.ln);\r\n        }\r\n        if (this.data.cl) {\r\n            this.layerElement.setAttribute('class', this.data.cl);\r\n        }\r\n        if (this.data.bm !== 0) {\r\n            this.setBlendMode();\r\n        }\r\n    },\r\n    renderElement: function() {\r\n        if(this.finalTransform._matMdf){\r\n            this.transformedElement.style.transform = this.transformedElement.style.webkitTransform = this.finalTransform.mat.toCSS();\r\n        }\r\n        if(this.finalTransform._opMdf){\r\n            this.transformedElement.style.opacity = this.finalTransform.mProp.o.v;\r\n        }\r\n    },\r\n    renderFrame: function() {\r\n        //If it is exported as hidden (data.hd === true) no need to render\r\n        //If it is not visible no need to render\r\n        if (this.data.hd || this.hidden) {\r\n            return;\r\n        }\r\n        this.renderTransform();\r\n        this.renderRenderable();\r\n        this.renderElement();\r\n        this.renderInnerContent();\r\n        if (this._isFirstFrame) {\r\n            this._isFirstFrame = false;\r\n        }\r\n    },\r\n    destroy: function(){\r\n        this.layerElement = null;\r\n        this.transformedElement = null;\r\n        if(this.matteElement) {\r\n            this.matteElement = null;\r\n        }\r\n        if(this.maskManager) {\r\n            this.maskManager.destroy();\r\n            this.maskManager = null;\r\n        }\r\n    },\r\n    createRenderableComponents: function(){\r\n        this.maskManager = new MaskElement(this.data, this, this.globalData);\r\n    },\r\n    addEffects: function(){\r\n    },\r\n    setMatte: function(){}\r\n};\r\nHBaseElement.prototype.getBaseElement = SVGBaseElement.prototype.getBaseElement;\r\nHBaseElement.prototype.destroyBaseElement = HBaseElement.prototype.destroy;\r\nHBaseElement.prototype.buildElementParenting = HybridRenderer.prototype.buildElementParenting;\r\nfunction HSolidElement(data,globalData,comp){\r\n    this.initElement(data,globalData,comp);\r\n}\r\nextendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement], HSolidElement);\r\n\r\nHSolidElement.prototype.createContent = function(){\r\n    var rect;\r\n    if(this.data.hasMask){\r\n        rect = createNS('rect');\r\n        rect.setAttribute('width',this.data.sw);\r\n        rect.setAttribute('height',this.data.sh);\r\n        rect.setAttribute('fill',this.data.sc);\r\n        this.svgElement.setAttribute('width',this.data.sw);\r\n        this.svgElement.setAttribute('height',this.data.sh);\r\n    } else {\r\n        rect = createTag('div');\r\n        rect.style.width = this.data.sw + 'px';\r\n        rect.style.height = this.data.sh + 'px';\r\n        rect.style.backgroundColor = this.data.sc;\r\n    }\r\n    this.layerElement.appendChild(rect);\r\n};\r\n\r\nfunction HCompElement(data,globalData,comp){\r\n    this.layers = data.layers;\r\n    this.supports3d = !data.hasMask;\r\n    this.completeLayers = false;\r\n    this.pendingElements = [];\r\n    this.elements = this.layers ? createSizedArray(this.layers.length) : [];\r\n    this.initElement(data,globalData,comp);\r\n    this.tm = data.tm ? PropertyFactory.getProp(this,data.tm,0,globalData.frameRate,this) : {_placeholder:true};\r\n}\r\n\r\nextendPrototype([HybridRenderer, ICompElement, HBaseElement], HCompElement);\r\nHCompElement.prototype._createBaseContainerElements = HCompElement.prototype.createContainerElements;\r\n\r\nHCompElement.prototype.createContainerElements = function(){\r\n    this._createBaseContainerElements();\r\n    //divElement.style.clip = 'rect(0px, '+this.data.w+'px, '+this.data.h+'px, 0px)';\r\n    if(this.data.hasMask){\r\n        this.svgElement.setAttribute('width',this.data.w);\r\n        this.svgElement.setAttribute('height',this.data.h);\r\n        this.transformedElement = this.baseElement;\r\n    } else {\r\n        this.transformedElement = this.layerElement;\r\n    }\r\n};\r\n\r\nHCompElement.prototype.addTo3dContainer = function(elem,pos) {\r\n    var j = 0;\r\n    var nextElement;\r\n    while(j<pos){\r\n        if(this.elements[j] && this.elements[j].getBaseElement){\r\n            nextElement = this.elements[j].getBaseElement();\r\n        }\r\n        j += 1;\r\n    }\r\n    if(nextElement){\r\n        this.layerElement.insertBefore(elem, nextElement);\r\n    } else {\r\n        this.layerElement.appendChild(elem);\r\n    }\r\n}\r\n\r\nfunction HShapeElement(data,globalData,comp){\r\n    //List of drawable elements\r\n    this.shapes = [];\r\n    // Full shape data\r\n    this.shapesData = data.shapes;\r\n    //List of styles that will be applied to shapes\r\n    this.stylesList = [];\r\n    //List of modifiers that will be applied to shapes\r\n    this.shapeModifiers = [];\r\n    //List of items in shape tree\r\n    this.itemsData = [];\r\n    //List of items in previous shape tree\r\n    this.processedElements = [];\r\n    // List of animated components\r\n    this.animatedContents = [];\r\n    this.shapesContainer = createNS('g');\r\n    this.initElement(data,globalData,comp);\r\n    //Moving any property that doesn't get too much access after initialization because of v8 way of handling more than 10 properties.\r\n    // List of elements that have been created\r\n    this.prevViewData = [];\r\n    this.currentBBox = {\r\n        x:999999,\r\n        y: -999999,\r\n        h: 0,\r\n        w: 0\r\n    };\r\n}\r\nextendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement], HShapeElement);\r\nHShapeElement.prototype._renderShapeFrame = HShapeElement.prototype.renderInnerContent;\r\n\r\nHShapeElement.prototype.createContent = function(){\r\n    var cont;\r\n    this.baseElement.style.fontSize = 0;\r\n    if (this.data.hasMask) {\r\n        this.layerElement.appendChild(this.shapesContainer);\r\n        cont = this.svgElement;\r\n    } else {\r\n        cont = createNS('svg');\r\n        var size = this.comp.data ? this.comp.data : this.globalData.compSize;\r\n        cont.setAttribute('width',size.w);\r\n        cont.setAttribute('height',size.h);\r\n        cont.appendChild(this.shapesContainer);\r\n        this.layerElement.appendChild(cont);\r\n    }\r\n\r\n    this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0, [], true);\r\n    this.filterUniqueShapes();\r\n    this.shapeCont = cont;\r\n};\r\n\r\nHShapeElement.prototype.getTransformedPoint = function(transformers, point) {\r\n    var i, len = transformers.length;\r\n    for(i = 0; i < len; i += 1) {\r\n        point = transformers[i].mProps.v.applyToPointArray(point[0], point[1], 0);\r\n    }\r\n    return point;\r\n}\r\n\r\nHShapeElement.prototype.calculateShapeBoundingBox = function(item, boundingBox) {\r\n    var shape = item.sh.v;\r\n    var transformers = item.transformers;\r\n    var i, len = shape._length, vPoint, oPoint, nextIPoint, nextVPoint, bounds;\r\n    if (len <= 1) {\r\n        return;\r\n    }\r\n    for (i = 0; i < len - 1; i += 1) {\r\n        vPoint = this.getTransformedPoint(transformers, shape.v[i]);\r\n        oPoint = this.getTransformedPoint(transformers, shape.o[i]);\r\n        nextIPoint = this.getTransformedPoint(transformers, shape.i[i + 1]);\r\n        nextVPoint = this.getTransformedPoint(transformers, shape.v[i + 1]);\r\n        this.checkBounds(vPoint, oPoint, nextIPoint, nextVPoint, boundingBox);\r\n    }\r\n    if(shape.c) {\r\n        vPoint = this.getTransformedPoint(transformers, shape.v[i]);\r\n        oPoint = this.getTransformedPoint(transformers, shape.o[i]);\r\n        nextIPoint = this.getTransformedPoint(transformers, shape.i[0]);\r\n        nextVPoint = this.getTransformedPoint(transformers, shape.v[0]);\r\n        this.checkBounds(vPoint, oPoint, nextIPoint, nextVPoint, boundingBox);\r\n    }\r\n}\r\n\r\nHShapeElement.prototype.checkBounds = function(vPoint, oPoint, nextIPoint, nextVPoint, boundingBox) {\r\n    this.getBoundsOfCurve(vPoint, oPoint, nextIPoint, nextVPoint);\r\n    var bounds = this.shapeBoundingBox;\r\n    boundingBox.x = bm_min(bounds.left, boundingBox.x);\r\n    boundingBox.xMax = bm_max(bounds.right, boundingBox.xMax);\r\n    boundingBox.y = bm_min(bounds.top, boundingBox.y);\r\n    boundingBox.yMax = bm_max(bounds.bottom, boundingBox.yMax);\r\n}\r\n\r\nHShapeElement.prototype.shapeBoundingBox = {\r\n    left:0,\r\n    right:0,\r\n    top:0,\r\n    bottom:0,\r\n}\r\n\r\nHShapeElement.prototype.tempBoundingBox = {\r\n    x:0,\r\n    xMax:0,\r\n    y:0,\r\n    yMax:0,\r\n    width:0,\r\n    height:0\r\n}\r\n\r\nHShapeElement.prototype.getBoundsOfCurve = function(p0, p1, p2, p3) {\r\n\r\n    var bounds = [[p0[0],p3[0]], [p0[1],p3[1]]];\r\n\r\n    for (var a, b, c, t, b2ac, t1, t2, i = 0; i < 2; ++i) {\r\n\r\n      b = 6 * p0[i] - 12 * p1[i] + 6 * p2[i];\r\n      a = -3 * p0[i] + 9 * p1[i] - 9 * p2[i] + 3 * p3[i];\r\n      c = 3 * p1[i] - 3 * p0[i];\r\n\r\n      b = b | 0;\r\n      a = a | 0;\r\n      c = c | 0;\r\n\r\n      if (a === 0) {\r\n\r\n        if (b === 0) {\r\n          continue;\r\n        }\r\n\r\n        t = -c / b;\r\n\r\n        if (0 < t && t < 1) {\r\n          bounds[i].push(this.calculateF(t,p0,p1,p2,p3,i));\r\n        }\r\n        continue;\r\n      }\r\n\r\n      b2ac = b * b - 4 * c * a;\r\n\r\n      if (b2ac < 0) {\r\n        continue;\r\n      }\r\n\r\n      t1 = (-b + bm_sqrt(b2ac))/(2 * a);\r\n      if (0 < t1 && t1 < 1) bounds[i].push(this.calculateF(t1,p0,p1,p2,p3,i));\r\n\r\n      t2 = (-b - bm_sqrt(b2ac))/(2 * a);\r\n      if (0 < t2 && t2 < 1) bounds[i].push(this.calculateF(t2,p0,p1,p2,p3,i));\r\n\r\n    }\r\n\r\n    this.shapeBoundingBox.left = bm_min.apply(null, bounds[0]);\r\n    this.shapeBoundingBox.top = bm_min.apply(null, bounds[1]);\r\n    this.shapeBoundingBox.right = bm_max.apply(null, bounds[0]);\r\n    this.shapeBoundingBox.bottom = bm_max.apply(null, bounds[1]);\r\n  };\r\n\r\n  HShapeElement.prototype.calculateF = function(t, p0, p1, p2, p3, i) {\r\n    return bm_pow(1-t, 3) * p0[i]\r\n        + 3 * bm_pow(1-t, 2) * t * p1[i]\r\n        + 3 * (1-t) * bm_pow(t, 2) * p2[i]\r\n        + bm_pow(t, 3) * p3[i];\r\n  }\r\n\r\nHShapeElement.prototype.calculateBoundingBox = function(itemsData, boundingBox) {\r\n    var i, len = itemsData.length, path;\r\n    for(i = 0; i < len; i += 1) {\r\n        if(itemsData[i] && itemsData[i].sh) {\r\n            this.calculateShapeBoundingBox(itemsData[i], boundingBox)\r\n        } else if(itemsData[i] && itemsData[i].it) {\r\n            this.calculateBoundingBox(itemsData[i].it, boundingBox)\r\n        }\r\n    }\r\n}\r\n\r\nHShapeElement.prototype.currentBoxContains = function(box) {\r\n    return this.currentBBox.x <= box.x \r\n    && this.currentBBox.y <= box.y \r\n    && this.currentBBox.width + this.currentBBox.x >= box.x + box.width\r\n    && this.currentBBox.height + this.currentBBox.y >= box.y + box.height\r\n}\r\n\r\nHShapeElement.prototype.renderInnerContent = function() {\r\n    this._renderShapeFrame();\r\n\r\n    if(!this.hidden && (this._isFirstFrame || this._mdf)) {\r\n        var tempBoundingBox = this.tempBoundingBox;\r\n        var max = 999999;\r\n        tempBoundingBox.x = max;\r\n        tempBoundingBox.xMax = -max;\r\n        tempBoundingBox.y = max;\r\n        tempBoundingBox.yMax = -max;\r\n        this.calculateBoundingBox(this.itemsData, tempBoundingBox);\r\n        tempBoundingBox.width = tempBoundingBox.xMax < tempBoundingBox.x ? 0 : tempBoundingBox.xMax - tempBoundingBox.x;\r\n        tempBoundingBox.height = tempBoundingBox.yMax < tempBoundingBox.y ? 0 : tempBoundingBox.yMax - tempBoundingBox.y;\r\n        //var tempBoundingBox = this.shapeCont.getBBox();\r\n        if(this.currentBoxContains(tempBoundingBox)) {\r\n            return;\r\n        }\r\n        var changed = false;\r\n        if(this.currentBBox.w !== tempBoundingBox.width){\r\n            this.currentBBox.w = tempBoundingBox.width;\r\n            this.shapeCont.setAttribute('width',tempBoundingBox.width);\r\n            changed = true;\r\n        }\r\n        if(this.currentBBox.h !== tempBoundingBox.height){\r\n            this.currentBBox.h = tempBoundingBox.height;\r\n            this.shapeCont.setAttribute('height',tempBoundingBox.height);\r\n            changed = true;\r\n        }\r\n        if(changed  || this.currentBBox.x !== tempBoundingBox.x  || this.currentBBox.y !== tempBoundingBox.y){\r\n            this.currentBBox.w = tempBoundingBox.width;\r\n            this.currentBBox.h = tempBoundingBox.height;\r\n            this.currentBBox.x = tempBoundingBox.x;\r\n            this.currentBBox.y = tempBoundingBox.y;\r\n\r\n            this.shapeCont.setAttribute('viewBox',this.currentBBox.x+' '+this.currentBBox.y+' '+this.currentBBox.w+' '+this.currentBBox.h);\r\n            this.shapeCont.style.transform = this.shapeCont.style.webkitTransform = 'translate(' + this.currentBBox.x + 'px,' + this.currentBBox.y + 'px)';\r\n        }\r\n    }\r\n\r\n};\r\nfunction HTextElement(data,globalData,comp){\r\n    this.textSpans = [];\r\n    this.textPaths = [];\r\n    this.currentBBox = {\r\n        x:999999,\r\n        y: -999999,\r\n        h: 0,\r\n        w: 0\r\n    };\r\n    this.renderType = 'svg';\r\n    this.isMasked = false;\r\n    this.initElement(data,globalData,comp);\r\n\r\n}\r\nextendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement], HTextElement);\r\n\r\nHTextElement.prototype.createContent = function(){\r\n    this.isMasked = this.checkMasks();\r\n    if(this.isMasked){\r\n        this.renderType = 'svg';\r\n        this.compW = this.comp.data.w;\r\n        this.compH = this.comp.data.h;\r\n        this.svgElement.setAttribute('width',this.compW);\r\n        this.svgElement.setAttribute('height',this.compH);\r\n        var g = createNS('g');\r\n        this.maskedElement.appendChild(g);\r\n        this.innerElem = g;\r\n    } else {\r\n        this.renderType = 'html';\r\n        this.innerElem = this.layerElement;\r\n    }\r\n\r\n    this.checkParenting();\r\n\r\n};\r\n\r\nHTextElement.prototype.buildNewText = function(){\r\n    var documentData = this.textProperty.currentData;\r\n    this.renderedLetters = createSizedArray(documentData.l ? documentData.l.length : 0);\r\n    var innerElemStyle = this.innerElem.style;\r\n    innerElemStyle.color = innerElemStyle.fill = documentData.fc ? this.buildColor(documentData.fc) : 'rgba(0,0,0,0)';\r\n    if(documentData.sc){\r\n        innerElemStyle.stroke = this.buildColor(documentData.sc);\r\n        innerElemStyle.strokeWidth = documentData.sw+'px';\r\n    }\r\n    var fontData = this.globalData.fontManager.getFontByName(documentData.f);\r\n    if(!this.globalData.fontManager.chars){\r\n        innerElemStyle.fontSize = documentData.finalSize+'px';\r\n        innerElemStyle.lineHeight = documentData.finalSize+'px';\r\n        if(fontData.fClass){\r\n            this.innerElem.className = fontData.fClass;\r\n        } else {\r\n            innerElemStyle.fontFamily = fontData.fFamily;\r\n            var fWeight = documentData.fWeight, fStyle = documentData.fStyle;\r\n            innerElemStyle.fontStyle = fStyle;\r\n            innerElemStyle.fontWeight = fWeight;\r\n        }\r\n    }\r\n    var i, len;\r\n\r\n    var letters = documentData.l;\r\n    len = letters.length;\r\n    var tSpan,tParent,tCont;\r\n    var matrixHelper = this.mHelper;\r\n    var shapes, shapeStr = '';\r\n    var cnt = 0;\r\n    for (i = 0;i < len ;i += 1) {\r\n        if(this.globalData.fontManager.chars){\r\n            if(!this.textPaths[cnt]){\r\n                tSpan = createNS('path');\r\n                tSpan.setAttribute('stroke-linecap', 'butt');\r\n                tSpan.setAttribute('stroke-linejoin','round');\r\n                tSpan.setAttribute('stroke-miterlimit','4');\r\n            } else {\r\n                tSpan = this.textPaths[cnt];\r\n            }\r\n            if(!this.isMasked){\r\n                if(this.textSpans[cnt]){\r\n                    tParent = this.textSpans[cnt];\r\n                    tCont = tParent.children[0];\r\n                } else {\r\n\r\n                    tParent = createTag('div');\r\n                    tParent.style.lineHeight = 0;\r\n                    tCont = createNS('svg');\r\n                    tCont.appendChild(tSpan);\r\n                    styleDiv(tParent);\r\n                }\r\n            }\r\n        }else{\r\n            if(!this.isMasked){\r\n                if(this.textSpans[cnt]){\r\n                    tParent = this.textSpans[cnt];\r\n                    tSpan = this.textPaths[cnt];\r\n                } else {\r\n                    tParent = createTag('span');\r\n                    styleDiv(tParent);\r\n                    tSpan = createTag('span');\r\n                    styleDiv(tSpan);\r\n                    tParent.appendChild(tSpan);\r\n                }\r\n            } else {\r\n                tSpan = this.textPaths[cnt] ? this.textPaths[cnt] : createNS('text');\r\n            }\r\n        }\r\n        //tSpan.setAttribute('visibility', 'hidden');\r\n        if(this.globalData.fontManager.chars){\r\n            var charData = this.globalData.fontManager.getCharData(documentData.finalText[i], fontData.fStyle, this.globalData.fontManager.getFontByName(documentData.f).fFamily);\r\n            var shapeData;\r\n            if(charData){\r\n                shapeData = charData.data;\r\n            } else {\r\n                shapeData = null;\r\n            }\r\n            matrixHelper.reset();\r\n            if(shapeData && shapeData.shapes){\r\n                shapes = shapeData.shapes[0].it;\r\n                matrixHelper.scale(documentData.finalSize/100,documentData.finalSize/100);\r\n                shapeStr = this.createPathShape(matrixHelper,shapes);\r\n                tSpan.setAttribute('d',shapeStr);\r\n            }\r\n            if(!this.isMasked){\r\n                this.innerElem.appendChild(tParent);\r\n                if(shapeData && shapeData.shapes){\r\n\r\n                    //document.body.appendChild is needed to get exact measure of shape\r\n                    document.body.appendChild(tCont);\r\n                    var boundingBox = tCont.getBBox();\r\n                    tCont.setAttribute('width',boundingBox.width + 2);\r\n                    tCont.setAttribute('height',boundingBox.height + 2);\r\n                    tCont.setAttribute('viewBox',(boundingBox.x-1)+' '+ (boundingBox.y-1)+' '+ (boundingBox.width+2)+' '+ (boundingBox.height+2));\r\n                    tCont.style.transform = tCont.style.webkitTransform = 'translate(' + (boundingBox.x-1) + 'px,' + (boundingBox.y-1) + 'px)';\r\n\r\n                    letters[i].yOffset = boundingBox.y-1;\r\n\r\n                } else{\r\n                    tCont.setAttribute('width',1);\r\n                    tCont.setAttribute('height',1);\r\n                }\r\n                    tParent.appendChild(tCont);\r\n            }else{\r\n                this.innerElem.appendChild(tSpan);\r\n            }\r\n        }else{\r\n            tSpan.textContent = letters[i].val;\r\n            tSpan.setAttributeNS(\"http://www.w3.org/XML/1998/namespace\", \"xml:space\",\"preserve\");\r\n            if(!this.isMasked){\r\n                this.innerElem.appendChild(tParent);\r\n                //\r\n                tSpan.style.transform = tSpan.style.webkitTransform = 'translate3d(0,'+ -documentData.finalSize/1.2+'px,0)';\r\n            } else {\r\n                this.innerElem.appendChild(tSpan);\r\n            }\r\n        }\r\n        //\r\n        if(!this.isMasked){\r\n            this.textSpans[cnt] = tParent;\r\n        }else{\r\n            this.textSpans[cnt] = tSpan;\r\n        }\r\n        this.textSpans[cnt].style.display = 'block';\r\n        this.textPaths[cnt] = tSpan;\r\n        cnt += 1;\r\n    }\r\n    while(cnt < this.textSpans.length){\r\n        this.textSpans[cnt].style.display = 'none';\r\n        cnt += 1;\r\n    }\r\n};\r\n\r\nHTextElement.prototype.renderInnerContent = function() {\r\n\r\n    if(this.data.singleShape){\r\n        if(!this._isFirstFrame && !this.lettersChangedFlag){\r\n            return;\r\n        } else {\r\n            // Todo Benchmark if using this is better than getBBox\r\n             if(this.isMasked && this.finalTransform._matMdf){\r\n                 this.svgElement.setAttribute('viewBox',-this.finalTransform.mProp.p.v[0]+' '+ -this.finalTransform.mProp.p.v[1]+' '+this.compW+' '+this.compH);\r\n                this.svgElement.style.transform = this.svgElement.style.webkitTransform = 'translate(' + -this.finalTransform.mProp.p.v[0] + 'px,' + -this.finalTransform.mProp.p.v[1] + 'px)';\r\n             }\r\n        }\r\n    }\r\n\r\n    this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag);\r\n    if(!this.lettersChangedFlag && !this.textAnimator.lettersChangedFlag){\r\n        return;\r\n    }\r\n    var  i,len, count = 0;\r\n    var renderedLetters = this.textAnimator.renderedLetters;\r\n\r\n    var letters = this.textProperty.currentData.l;\r\n\r\n    len = letters.length;\r\n    var renderedLetter, textSpan, textPath;\r\n    for(i=0;i<len;i+=1){\r\n        if(letters[i].n){\r\n            count += 1;\r\n            continue;\r\n        }\r\n        textSpan = this.textSpans[i];\r\n        textPath = this.textPaths[i];\r\n        renderedLetter = renderedLetters[count];\r\n        count += 1;\r\n        if(renderedLetter._mdf.m) {\r\n            if(!this.isMasked){\r\n                textSpan.style.transform = textSpan.style.webkitTransform = renderedLetter.m;\r\n            }else{\r\n                textSpan.setAttribute('transform',renderedLetter.m);\r\n            }\r\n        }\r\n        ////textSpan.setAttribute('opacity',renderedLetter.o);\r\n        textSpan.style.opacity = renderedLetter.o;\r\n        if(renderedLetter.sw && renderedLetter._mdf.sw){\r\n            textPath.setAttribute('stroke-width',renderedLetter.sw);\r\n        }\r\n        if(renderedLetter.sc && renderedLetter._mdf.sc){\r\n            textPath.setAttribute('stroke',renderedLetter.sc);\r\n        }\r\n        if(renderedLetter.fc && renderedLetter._mdf.fc){\r\n            textPath.setAttribute('fill',renderedLetter.fc);\r\n            textPath.style.color = renderedLetter.fc;\r\n        }\r\n    }\r\n\r\n    if(this.innerElem.getBBox && !this.hidden && (this._isFirstFrame || this._mdf)){\r\n        var boundingBox = this.innerElem.getBBox();\r\n\r\n        if(this.currentBBox.w !== boundingBox.width){\r\n            this.currentBBox.w = boundingBox.width;\r\n            this.svgElement.setAttribute('width',boundingBox.width);\r\n        }\r\n        if(this.currentBBox.h !== boundingBox.height){\r\n            this.currentBBox.h = boundingBox.height;\r\n            this.svgElement.setAttribute('height',boundingBox.height);\r\n        }\r\n\r\n        var margin = 1;\r\n        if(this.currentBBox.w !== (boundingBox.width + margin*2) || this.currentBBox.h !== (boundingBox.height + margin*2)  || this.currentBBox.x !== (boundingBox.x - margin)  || this.currentBBox.y !== (boundingBox.y - margin)){\r\n            this.currentBBox.w = boundingBox.width + margin*2;\r\n            this.currentBBox.h = boundingBox.height + margin*2;\r\n            this.currentBBox.x = boundingBox.x - margin;\r\n            this.currentBBox.y = boundingBox.y - margin;\r\n\r\n            this.svgElement.setAttribute('viewBox',this.currentBBox.x+' '+this.currentBBox.y+' '+this.currentBBox.w+' '+this.currentBBox.h);\r\n            this.svgElement.style.transform = this.svgElement.style.webkitTransform = 'translate(' + this.currentBBox.x + 'px,' + this.currentBBox.y + 'px)';\r\n        }\r\n    }\r\n};\r\nfunction HImageElement(data,globalData,comp){\r\n    this.assetData = globalData.getAssetData(data.refId);\r\n    this.initElement(data,globalData,comp);\r\n}\r\n\r\nextendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement], HImageElement);\r\n\r\n\r\nHImageElement.prototype.createContent = function(){\r\n    var assetPath = this.globalData.getAssetsPath(this.assetData);\r\n    var img = new Image();\r\n\r\n    if(this.data.hasMask){\r\n        this.imageElem = createNS('image');\r\n        this.imageElem.setAttribute('width',this.assetData.w+\"px\");\r\n        this.imageElem.setAttribute('height',this.assetData.h+\"px\");\r\n        this.imageElem.setAttributeNS('http://www.w3.org/1999/xlink','href',assetPath);\r\n        this.layerElement.appendChild(this.imageElem);\r\n        this.baseElement.setAttribute('width',this.assetData.w);\r\n        this.baseElement.setAttribute('height',this.assetData.h);\r\n    } else {\r\n        this.layerElement.appendChild(img);\r\n    }\r\n    img.src = assetPath;\r\n    if(this.data.ln){\r\n        this.baseElement.setAttribute('id',this.data.ln);\r\n    }\r\n};\r\nfunction HCameraElement(data,globalData,comp){\r\n    this.initFrame();\r\n    this.initBaseData(data,globalData,comp);\r\n    this.initHierarchy();\r\n    var getProp = PropertyFactory.getProp;\r\n    this.pe = getProp(this,data.pe,0,0,this);\r\n    if(data.ks.p.s){\r\n        this.px = getProp(this,data.ks.p.x,1,0,this);\r\n        this.py = getProp(this,data.ks.p.y,1,0,this);\r\n        this.pz = getProp(this,data.ks.p.z,1,0,this);\r\n    }else{\r\n        this.p = getProp(this,data.ks.p,1,0,this);\r\n    }\r\n    if(data.ks.a){\r\n        this.a = getProp(this,data.ks.a,1,0,this);\r\n    }\r\n    if(data.ks.or.k.length && data.ks.or.k[0].to){\r\n        var i,len = data.ks.or.k.length;\r\n        for(i=0;i<len;i+=1){\r\n            data.ks.or.k[i].to = null;\r\n            data.ks.or.k[i].ti = null;\r\n        }\r\n    }\r\n    this.or = getProp(this,data.ks.or,1,degToRads,this);\r\n    this.or.sh = true;\r\n    this.rx = getProp(this,data.ks.rx,0,degToRads,this);\r\n    this.ry = getProp(this,data.ks.ry,0,degToRads,this);\r\n    this.rz = getProp(this,data.ks.rz,0,degToRads,this);\r\n    this.mat = new Matrix();\r\n    this._prevMat = new Matrix();\r\n    this._isFirstFrame = true;\r\n    \r\n    // TODO: find a better way to make the HCamera element to be compatible with the LayerInterface and TransformInterface.\r\n    this.finalTransform = {\r\n        mProp: this\r\n    };\r\n}\r\nextendPrototype([BaseElement, FrameElement, HierarchyElement], HCameraElement);\r\n\r\nHCameraElement.prototype.setup = function() {\r\n    var i, len = this.comp.threeDElements.length, comp;\r\n    for(i=0;i<len;i+=1){\r\n        //[perspectiveElem,container]\r\n        comp = this.comp.threeDElements[i];\r\n        if(comp.type === '3d') {\r\n            comp.perspectiveElem.style.perspective = comp.perspectiveElem.style.webkitPerspective = this.pe.v+'px';\r\n            comp.container.style.transformOrigin = comp.container.style.mozTransformOrigin = comp.container.style.webkitTransformOrigin = \"0px 0px 0px\";\r\n            comp.perspectiveElem.style.transform = comp.perspectiveElem.style.webkitTransform = 'matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)';\r\n        }\r\n    }\r\n};\r\n\r\nHCameraElement.prototype.createElements = function(){\r\n};\r\n\r\nHCameraElement.prototype.hide = function(){\r\n};\r\n\r\nHCameraElement.prototype.renderFrame = function(){\r\n    var _mdf = this._isFirstFrame;\r\n    var i, len;\r\n    if(this.hierarchy){\r\n        len = this.hierarchy.length;\r\n        for(i=0;i<len;i+=1){\r\n            _mdf = this.hierarchy[i].finalTransform.mProp._mdf || _mdf;\r\n        }\r\n    }\r\n    if(_mdf || this.pe._mdf || (this.p && this.p._mdf) || (this.px && (this.px._mdf || this.py._mdf || this.pz._mdf)) || this.rx._mdf || this.ry._mdf || this.rz._mdf || this.or._mdf || (this.a && this.a._mdf)) {\r\n        this.mat.reset();\r\n\r\n        if(this.hierarchy){\r\n            var mat;\r\n            len = this.hierarchy.length - 1;\r\n            for (i = len; i >= 0; i -= 1) {\r\n                var mTransf = this.hierarchy[i].finalTransform.mProp;\r\n                this.mat.translate(-mTransf.p.v[0],-mTransf.p.v[1],mTransf.p.v[2]);\r\n                this.mat.rotateX(-mTransf.or.v[0]).rotateY(-mTransf.or.v[1]).rotateZ(mTransf.or.v[2]);\r\n                this.mat.rotateX(-mTransf.rx.v).rotateY(-mTransf.ry.v).rotateZ(mTransf.rz.v);\r\n                this.mat.scale(1/mTransf.s.v[0],1/mTransf.s.v[1],1/mTransf.s.v[2]);\r\n                this.mat.translate(mTransf.a.v[0],mTransf.a.v[1],mTransf.a.v[2]);\r\n            }\r\n        }\r\n        if (this.p) {\r\n            this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]);\r\n        } else {\r\n            this.mat.translate(-this.px.v,-this.py.v,this.pz.v);\r\n        }\r\n        if (this.a) {\r\n            var diffVector\r\n            if (this.p) {\r\n                diffVector = [this.p.v[0] - this.a.v[0], this.p.v[1] - this.a.v[1], this.p.v[2] - this.a.v[2]];\r\n            } else {\r\n                diffVector = [this.px.v - this.a.v[0], this.py.v - this.a.v[1], this.pz.v - this.a.v[2]];\r\n            }\r\n            var mag = Math.sqrt(Math.pow(diffVector[0],2)+Math.pow(diffVector[1],2)+Math.pow(diffVector[2],2));\r\n            //var lookDir = getNormalizedPoint(getDiffVector(this.a.v,this.p.v));\r\n            var lookDir = [diffVector[0]/mag,diffVector[1]/mag,diffVector[2]/mag];\r\n            var lookLengthOnXZ = Math.sqrt( lookDir[2]*lookDir[2] + lookDir[0]*lookDir[0] );\r\n            var m_rotationX = (Math.atan2( lookDir[1], lookLengthOnXZ ));\r\n            var m_rotationY = (Math.atan2( lookDir[0], -lookDir[2]));\r\n            this.mat.rotateY(m_rotationY).rotateX(-m_rotationX);\r\n\r\n        }\r\n        this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v);\r\n        this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]);\r\n        this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0);\r\n        this.mat.translate(0,0,this.pe.v);\r\n\r\n\r\n        \r\n\r\n        var hasMatrixChanged = !this._prevMat.equals(this.mat);\r\n        if((hasMatrixChanged || this.pe._mdf) && this.comp.threeDElements) {\r\n            len = this.comp.threeDElements.length;\r\n            var comp;\r\n            for(i=0;i<len;i+=1){\r\n                comp = this.comp.threeDElements[i];\r\n                if(comp.type === '3d') {\r\n                    if(hasMatrixChanged) {\r\n                        comp.container.style.transform = comp.container.style.webkitTransform = this.mat.toCSS();\r\n                    }\r\n                    if(this.pe._mdf) {\r\n                        comp.perspectiveElem.style.perspective = comp.perspectiveElem.style.webkitPerspective = this.pe.v+'px';\r\n                    }\r\n                }\r\n            }\r\n            this.mat.clone(this._prevMat);\r\n        }\r\n    }\r\n    this._isFirstFrame = false;\r\n};\r\n\r\nHCameraElement.prototype.prepareFrame = function(num) {\r\n    this.prepareProperties(num, true);\r\n};\r\n\r\nHCameraElement.prototype.destroy = function(){\r\n};\r\nHCameraElement.prototype.getBaseElement = function(){return null;};\r\nfunction HEffects() {\r\n}\r\nHEffects.prototype.renderFrame = function(){};\r\nvar animationManager = (function(){\r\n    var moduleOb = {};\r\n    var registeredAnimations = [];\r\n    var initTime = 0;\r\n    var len = 0;\r\n    var playingAnimationsNum = 0;\r\n    var _stopped = true;\r\n    var _isFrozen = false;\r\n\r\n    function removeElement(ev){\r\n        var i = 0;\r\n        var animItem = ev.target;\r\n        while(i<len) {\r\n            if (registeredAnimations[i].animation === animItem) {\r\n                registeredAnimations.splice(i, 1);\r\n                i -= 1;\r\n                len -= 1;\r\n                if(!animItem.isPaused){\r\n                    subtractPlayingCount();\r\n                }\r\n            }\r\n            i += 1;\r\n        }\r\n    }\r\n\r\n    function registerAnimation(element, animationData){\r\n        if(!element){\r\n            return null;\r\n        }\r\n        var i=0;\r\n        while(i<len){\r\n            if(registeredAnimations[i].elem == element && registeredAnimations[i].elem !== null ){\r\n                return registeredAnimations[i].animation;\r\n            }\r\n            i+=1;\r\n        }\r\n        var animItem = new AnimationItem();\r\n        setupAnimation(animItem, element);\r\n        animItem.setData(element, animationData);\r\n        return animItem;\r\n    }\r\n\r\n    function getRegisteredAnimations() {\r\n        var i, len = registeredAnimations.length;\r\n        var animations = [];\r\n        for(i = 0; i < len; i += 1) {\r\n            animations.push(registeredAnimations[i].animation);\r\n        }\r\n        return animations;\r\n    }\r\n\r\n    function addPlayingCount(){\r\n        playingAnimationsNum += 1;\r\n        activate();\r\n    }\r\n\r\n    function subtractPlayingCount(){\r\n        playingAnimationsNum -= 1;\r\n    }\r\n\r\n    function setupAnimation(animItem, element){\r\n        animItem.addEventListener('destroy',removeElement);\r\n        animItem.addEventListener('_active',addPlayingCount);\r\n        animItem.addEventListener('_idle',subtractPlayingCount);\r\n        registeredAnimations.push({elem: element,animation:animItem});\r\n        len += 1;\r\n    }\r\n\r\n    function loadAnimation(params){\r\n        var animItem = new AnimationItem();\r\n        setupAnimation(animItem, null);\r\n        animItem.setParams(params);\r\n        return animItem;\r\n    }\r\n\r\n\r\n    function setSpeed(val,animation){\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.setSpeed(val, animation);\r\n        }\r\n    }\r\n\r\n    function setDirection(val, animation){\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.setDirection(val, animation);\r\n        }\r\n    }\r\n\r\n    function play(animation){\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.play(animation);\r\n        }\r\n    }\r\n    function resume(nowTime) {\r\n        var elapsedTime = nowTime - initTime;\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.advanceTime(elapsedTime);\r\n        }\r\n        initTime = nowTime;\r\n        if(playingAnimationsNum && !_isFrozen) {\r\n            window.requestAnimationFrame(resume);\r\n        } else {\r\n            _stopped = true;\r\n        }\r\n    }\r\n\r\n    function first(nowTime){\r\n        initTime = nowTime;\r\n        window.requestAnimationFrame(resume);\r\n    }\r\n\r\n    function pause(animation) {\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.pause(animation);\r\n        }\r\n    }\r\n\r\n    function goToAndStop(value,isFrame,animation) {\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.goToAndStop(value,isFrame,animation);\r\n        }\r\n    }\r\n\r\n    function stop(animation) {\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.stop(animation);\r\n        }\r\n    }\r\n\r\n    function togglePause(animation) {\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.togglePause(animation);\r\n        }\r\n    }\r\n\r\n    function destroy(animation) {\r\n        var i;\r\n        for(i=(len-1);i>=0;i-=1){\r\n            registeredAnimations[i].animation.destroy(animation);\r\n        }\r\n    }\r\n\r\n    function searchAnimations(animationData, standalone, renderer){\r\n        var animElements = [].concat([].slice.call(document.getElementsByClassName('lottie')),\r\n                  [].slice.call(document.getElementsByClassName('bodymovin')));\r\n        var i, len = animElements.length;\r\n        for(i=0;i<len;i+=1){\r\n            if(renderer){\r\n                animElements[i].setAttribute('data-bm-type',renderer);\r\n            }\r\n            registerAnimation(animElements[i], animationData);\r\n        }\r\n        if(standalone && len === 0){\r\n            if(!renderer){\r\n                renderer = 'svg';\r\n            }\r\n            var body = document.getElementsByTagName('body')[0];\r\n            body.innerHTML = '';\r\n            var div = createTag('div');\r\n            div.style.width = '100%';\r\n            div.style.height = '100%';\r\n            div.setAttribute('data-bm-type',renderer);\r\n            body.appendChild(div);\r\n            registerAnimation(div, animationData);\r\n        }\r\n    }\r\n\r\n    function resize(){\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.resize();\r\n        }\r\n    }\r\n\r\n    function activate(){\r\n        if(!_isFrozen && playingAnimationsNum){\r\n            if(_stopped) {\r\n                window.requestAnimationFrame(first);\r\n                _stopped = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    function freeze() {\r\n        _isFrozen = true;\r\n    }\r\n\r\n    function unfreeze() {\r\n        _isFrozen = false;\r\n        activate();\r\n    }\r\n\r\n    moduleOb.registerAnimation = registerAnimation;\r\n    moduleOb.loadAnimation = loadAnimation;\r\n    moduleOb.setSpeed = setSpeed;\r\n    moduleOb.setDirection = setDirection;\r\n    moduleOb.play = play;\r\n    moduleOb.pause = pause;\r\n    moduleOb.stop = stop;\r\n    moduleOb.togglePause = togglePause;\r\n    moduleOb.searchAnimations = searchAnimations;\r\n    moduleOb.resize = resize;\r\n    //moduleOb.start = start;\r\n    moduleOb.goToAndStop = goToAndStop;\r\n    moduleOb.destroy = destroy;\r\n    moduleOb.freeze = freeze;\r\n    moduleOb.unfreeze = unfreeze;\r\n    moduleOb.getRegisteredAnimations = getRegisteredAnimations;\r\n    return moduleOb;\r\n}());\r\n\r\nvar AnimationItem = function () {\r\n    this._cbs = [];\r\n    this.name = '';\r\n    this.path = '';\r\n    this.isLoaded = false;\r\n    this.currentFrame = 0;\r\n    this.currentRawFrame = 0;\r\n    this.totalFrames = 0;\r\n    this.frameRate = 0;\r\n    this.frameMult = 0;\r\n    this.playSpeed = 1;\r\n    this.playDirection = 1;\r\n    this.playCount = 0;\r\n    this.animationData = {};\r\n    this.assets = [];\r\n    this.isPaused = true;\r\n    this.autoplay = false;\r\n    this.loop = true;\r\n    this.renderer = null;\r\n    this.animationID = createElementID();\r\n    this.assetsPath = '';\r\n    this.timeCompleted = 0;\r\n    this.segmentPos = 0;\r\n    this.subframeEnabled = subframeEnabled;\r\n    this.segments = [];\r\n    this._idle = true;\r\n    this._completedLoop = false;\r\n    this.projectInterface = ProjectInterface();\r\n    this.imagePreloader = new ImagePreloader();\r\n};\r\n\r\nextendPrototype([BaseEvent], AnimationItem);\r\n\r\nAnimationItem.prototype.setParams = function(params) {\r\n    if(params.context){\r\n        this.context = params.context;\r\n    }\r\n    if(params.wrapper || params.container){\r\n        this.wrapper = params.wrapper || params.container;\r\n    }\r\n    var animType = params.animType ? params.animType : params.renderer ? params.renderer : 'svg';\r\n    switch(animType){\r\n        case 'canvas':\r\n            this.renderer = new CanvasRenderer(this, params.rendererSettings);\r\n            break;\r\n        case 'svg':\r\n            this.renderer = new SVGRenderer(this, params.rendererSettings);\r\n            break;\r\n        default:\r\n            this.renderer = new HybridRenderer(this, params.rendererSettings);\r\n            break;\r\n    }\r\n    this.renderer.setProjectInterface(this.projectInterface);\r\n    this.animType = animType;\r\n\r\n    if(params.loop === '' || params.loop === null){\r\n    }else if(params.loop === false){\r\n        this.loop = false;\r\n    }else if(params.loop === true){\r\n        this.loop = true;\r\n    }else{\r\n        this.loop = parseInt(params.loop);\r\n    }\r\n    this.autoplay = 'autoplay' in params ? params.autoplay : true;\r\n    this.name = params.name ? params.name :  '';\r\n    this.autoloadSegments = params.hasOwnProperty('autoloadSegments') ? params.autoloadSegments :  true;\r\n    this.assetsPath = params.assetsPath;\r\n    if (params.animationData) {\r\n        this.configAnimation(params.animationData);\r\n    } else if(params.path){\r\n\r\n        if( params.path.lastIndexOf('\\\\') !== -1){\r\n            this.path = params.path.substr(0,params.path.lastIndexOf('\\\\')+1);\r\n        } else {\r\n            this.path = params.path.substr(0,params.path.lastIndexOf('/')+1);\r\n        }\r\n        this.fileName = params.path.substr(params.path.lastIndexOf('/')+1);\r\n        this.fileName = this.fileName.substr(0,this.fileName.lastIndexOf('.json'));\r\n\r\n        assetLoader.load(params.path, this.configAnimation.bind(this), function() {\r\n            this.trigger('data_failed');\r\n        }.bind(this));\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.setData = function (wrapper, animationData) {\r\n    var params = {\r\n        wrapper: wrapper,\r\n        animationData: animationData ? (typeof animationData  === \"object\") ? animationData : JSON.parse(animationData) : null\r\n    };\r\n    var wrapperAttributes = wrapper.attributes;\r\n\r\n    params.path = wrapperAttributes.getNamedItem('data-animation-path') ? wrapperAttributes.getNamedItem('data-animation-path').value : wrapperAttributes.getNamedItem('data-bm-path') ? wrapperAttributes.getNamedItem('data-bm-path').value :  wrapperAttributes.getNamedItem('bm-path') ? wrapperAttributes.getNamedItem('bm-path').value : '';\r\n    params.animType = wrapperAttributes.getNamedItem('data-anim-type') ? wrapperAttributes.getNamedItem('data-anim-type').value : wrapperAttributes.getNamedItem('data-bm-type') ? wrapperAttributes.getNamedItem('data-bm-type').value : wrapperAttributes.getNamedItem('bm-type') ? wrapperAttributes.getNamedItem('bm-type').value :  wrapperAttributes.getNamedItem('data-bm-renderer') ? wrapperAttributes.getNamedItem('data-bm-renderer').value : wrapperAttributes.getNamedItem('bm-renderer') ? wrapperAttributes.getNamedItem('bm-renderer').value : 'canvas';\r\n\r\n    var loop = wrapperAttributes.getNamedItem('data-anim-loop') ? wrapperAttributes.getNamedItem('data-anim-loop').value :  wrapperAttributes.getNamedItem('data-bm-loop') ? wrapperAttributes.getNamedItem('data-bm-loop').value :  wrapperAttributes.getNamedItem('bm-loop') ? wrapperAttributes.getNamedItem('bm-loop').value : '';\r\n    if(loop === ''){\r\n    }else if(loop === 'false'){\r\n        params.loop = false;\r\n    }else if(loop === 'true'){\r\n        params.loop = true;\r\n    }else{\r\n        params.loop = parseInt(loop);\r\n    }\r\n    var autoplay = wrapperAttributes.getNamedItem('data-anim-autoplay') ? wrapperAttributes.getNamedItem('data-anim-autoplay').value :  wrapperAttributes.getNamedItem('data-bm-autoplay') ? wrapperAttributes.getNamedItem('data-bm-autoplay').value :  wrapperAttributes.getNamedItem('bm-autoplay') ? wrapperAttributes.getNamedItem('bm-autoplay').value : true;\r\n    params.autoplay = autoplay !== \"false\";\r\n\r\n    params.name = wrapperAttributes.getNamedItem('data-name') ? wrapperAttributes.getNamedItem('data-name').value :  wrapperAttributes.getNamedItem('data-bm-name') ? wrapperAttributes.getNamedItem('data-bm-name').value : wrapperAttributes.getNamedItem('bm-name') ? wrapperAttributes.getNamedItem('bm-name').value :  '';\r\n    var prerender = wrapperAttributes.getNamedItem('data-anim-prerender') ? wrapperAttributes.getNamedItem('data-anim-prerender').value :  wrapperAttributes.getNamedItem('data-bm-prerender') ? wrapperAttributes.getNamedItem('data-bm-prerender').value :  wrapperAttributes.getNamedItem('bm-prerender') ? wrapperAttributes.getNamedItem('bm-prerender').value : '';\r\n\r\n    if(prerender === 'false'){\r\n        params.prerender = false;\r\n    }\r\n    this.setParams(params);\r\n};\r\n\r\nAnimationItem.prototype.includeLayers = function(data) {\r\n    if(data.op > this.animationData.op){\r\n        this.animationData.op = data.op;\r\n        this.totalFrames = Math.floor(data.op - this.animationData.ip);\r\n    }\r\n    var layers = this.animationData.layers;\r\n    var i, len = layers.length;\r\n    var newLayers = data.layers;\r\n    var j, jLen = newLayers.length;\r\n    for(j=0;j<jLen;j+=1){\r\n        i = 0;\r\n        while(i<len){\r\n            if(layers[i].id == newLayers[j].id){\r\n                layers[i] = newLayers[j];\r\n                break;\r\n            }\r\n            i += 1;\r\n        }\r\n    }\r\n    if(data.chars || data.fonts){\r\n        this.renderer.globalData.fontManager.addChars(data.chars);\r\n        this.renderer.globalData.fontManager.addFonts(data.fonts, this.renderer.globalData.defs);\r\n    }\r\n    if(data.assets){\r\n        len = data.assets.length;\r\n        for(i = 0; i < len; i += 1){\r\n            this.animationData.assets.push(data.assets[i]);\r\n        }\r\n    }\r\n    this.animationData.__complete = false;\r\n    dataManager.completeData(this.animationData,this.renderer.globalData.fontManager);\r\n    this.renderer.includeLayers(data.layers);\r\n    if(expressionsPlugin){\r\n        expressionsPlugin.initExpressions(this);\r\n    }\r\n    this.loadNextSegment();\r\n};\r\n\r\nAnimationItem.prototype.loadNextSegment = function() {\r\n    var segments = this.animationData.segments;\r\n    if(!segments || segments.length === 0 || !this.autoloadSegments){\r\n        this.trigger('data_ready');\r\n        this.timeCompleted = this.totalFrames;\r\n        return;\r\n    }\r\n    var segment = segments.shift();\r\n    this.timeCompleted = segment.time * this.frameRate;\r\n    var segmentPath = this.path+this.fileName+'_' + this.segmentPos + '.json';\r\n    this.segmentPos += 1;\r\n    assetLoader.load(segmentPath, this.includeLayers.bind(this), function() {\r\n        this.trigger('data_failed');\r\n    }.bind(this));\r\n};\r\n\r\nAnimationItem.prototype.loadSegments = function() {\r\n    var segments = this.animationData.segments;\r\n    if(!segments) {\r\n        this.timeCompleted = this.totalFrames;\r\n    }\r\n    this.loadNextSegment();\r\n};\r\n\r\nAnimationItem.prototype.imagesLoaded = function() {\r\n    this.trigger('loaded_images');\r\n    this.checkLoaded()\r\n}\r\n\r\nAnimationItem.prototype.preloadImages = function() {\r\n    this.imagePreloader.setAssetsPath(this.assetsPath);\r\n    this.imagePreloader.setPath(this.path);\r\n    this.imagePreloader.loadAssets(this.animationData.assets, this.imagesLoaded.bind(this));\r\n}\r\n\r\nAnimationItem.prototype.configAnimation = function (animData) {\r\n    if(!this.renderer){\r\n        return;\r\n    }\r\n    try {\r\n        this.animationData = animData;\r\n        this.totalFrames = Math.floor(this.animationData.op - this.animationData.ip);\r\n        this.renderer.configAnimation(animData);\r\n        if(!animData.assets){\r\n            animData.assets = [];\r\n        }\r\n\r\n        this.assets = this.animationData.assets;\r\n        this.frameRate = this.animationData.fr;\r\n        this.firstFrame = Math.round(this.animationData.ip);\r\n        this.frameMult = this.animationData.fr / 1000;\r\n        this.renderer.searchExtraCompositions(animData.assets);\r\n        this.trigger('config_ready');\r\n        this.preloadImages();\r\n        this.loadSegments();\r\n        this.updaFrameModifier();\r\n        this.waitForFontsLoaded();\r\n    } catch(error) {\r\n        this.triggerConfigError(error);\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.waitForFontsLoaded = function(){\r\n    if(!this.renderer) {\r\n        return;\r\n    }\r\n    if(this.renderer.globalData.fontManager.loaded()){\r\n        this.checkLoaded();\r\n    }else{\r\n        setTimeout(this.waitForFontsLoaded.bind(this),20);\r\n    }\r\n}\r\n\r\nAnimationItem.prototype.checkLoaded = function () {\r\n    if (!this.isLoaded && this.renderer.globalData.fontManager.loaded() && (this.imagePreloader.loaded() || this.renderer.rendererType !== 'canvas')) {\r\n        this.isLoaded = true;\r\n        dataManager.completeData(this.animationData, this.renderer.globalData.fontManager);\r\n        if(expressionsPlugin){\r\n            expressionsPlugin.initExpressions(this);\r\n        }\r\n        this.renderer.initItems();\r\n        setTimeout(function() {\r\n            this.trigger('DOMLoaded');\r\n        }.bind(this), 0);\r\n        this.gotoFrame();\r\n        if(this.autoplay){\r\n            this.play();\r\n        }\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.resize = function () {\r\n    this.renderer.updateContainerSize();\r\n};\r\n\r\nAnimationItem.prototype.setSubframe = function(flag){\r\n    this.subframeEnabled = flag ? true : false;\r\n};\r\n\r\nAnimationItem.prototype.gotoFrame = function () {\r\n    this.currentFrame = this.subframeEnabled ? this.currentRawFrame : ~~this.currentRawFrame;\r\n\r\n    if(this.timeCompleted !== this.totalFrames && this.currentFrame > this.timeCompleted){\r\n        this.currentFrame = this.timeCompleted;\r\n    }\r\n    this.trigger('enterFrame');\r\n    this.renderFrame();\r\n};\r\n\r\nAnimationItem.prototype.renderFrame = function () {\r\n    if(this.isLoaded === false){\r\n        return;\r\n    }\r\n    try {\r\n        this.renderer.renderFrame(this.currentFrame + this.firstFrame);\r\n    } catch(error) {\r\n        this.triggerRenderFrameError(error);\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.play = function (name) {\r\n    if(name && this.name != name){\r\n        return;\r\n    }\r\n    if(this.isPaused === true){\r\n        this.isPaused = false;\r\n        if(this._idle){\r\n            this._idle = false;\r\n            this.trigger('_active');\r\n        }\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.pause = function (name) {\r\n    if(name && this.name != name){\r\n        return;\r\n    }\r\n    if(this.isPaused === false){\r\n        this.isPaused = true;\r\n        this._idle = true;\r\n        this.trigger('_idle');\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.togglePause = function (name) {\r\n    if(name && this.name != name){\r\n        return;\r\n    }\r\n    if(this.isPaused === true){\r\n        this.play();\r\n    }else{\r\n        this.pause();\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.stop = function (name) {\r\n    if(name && this.name != name){\r\n        return;\r\n    }\r\n    this.pause();\r\n    this.playCount = 0;\r\n    this._completedLoop = false;\r\n    this.setCurrentRawFrameValue(0);\r\n};\r\n\r\nAnimationItem.prototype.goToAndStop = function (value, isFrame, name) {\r\n    if(name && this.name != name){\r\n        return;\r\n    }\r\n    if(isFrame){\r\n        this.setCurrentRawFrameValue(value);\r\n    }else{\r\n        this.setCurrentRawFrameValue(value * this.frameModifier);\r\n    }\r\n    this.pause();\r\n};\r\n\r\nAnimationItem.prototype.goToAndPlay = function (value, isFrame, name) {\r\n    this.goToAndStop(value, isFrame, name);\r\n    this.play();\r\n};\r\n\r\nAnimationItem.prototype.advanceTime = function (value) {\r\n    if (this.isPaused === true || this.isLoaded === false) {\r\n        return;\r\n    }\r\n    var nextValue = this.currentRawFrame + value * this.frameModifier;\r\n    var _isComplete = false;\r\n    // Checking if nextValue > totalFrames - 1 for addressing non looping and looping animations.\r\n    // If animation won't loop, it should stop at totalFrames - 1. If it will loop it should complete the last frame and then loop.\r\n    if (nextValue >= this.totalFrames - 1 && this.frameModifier > 0) {\r\n        if (!this.loop || this.playCount === this.loop) {\r\n            if (!this.checkSegments(nextValue >  this.totalFrames ? nextValue % this.totalFrames : 0)) {\r\n                _isComplete = true;\r\n                nextValue = this.totalFrames - 1;\r\n            }\r\n        } else if (nextValue >= this.totalFrames) {\r\n            this.playCount += 1;\r\n            if (!this.checkSegments(nextValue % this.totalFrames)) {\r\n                this.setCurrentRawFrameValue(nextValue % this.totalFrames);\r\n                this._completedLoop = true;\r\n                this.trigger('loopComplete');\r\n            }\r\n        } else {\r\n            this.setCurrentRawFrameValue(nextValue);\r\n        }\r\n    } else if(nextValue < 0) {\r\n        if (!this.checkSegments(nextValue % this.totalFrames)) {\r\n            if (this.loop && !(this.playCount-- <= 0 && this.loop !== true)) {\r\n                this.setCurrentRawFrameValue(this.totalFrames + (nextValue % this.totalFrames));\r\n                if(!this._completedLoop) {\r\n                    this._completedLoop = true;\r\n                } else {\r\n                    this.trigger('loopComplete');\r\n                }\r\n            } else {\r\n                _isComplete = true;\r\n                nextValue = 0;\r\n            }\r\n        }\r\n    } else {\r\n        this.setCurrentRawFrameValue(nextValue);\r\n    }\r\n    if (_isComplete) {\r\n        this.setCurrentRawFrameValue(nextValue);\r\n        this.pause();\r\n        this.trigger('complete');\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.adjustSegment = function(arr, offset){\r\n    this.playCount = 0;\r\n    if(arr[1] < arr[0]){\r\n        if(this.frameModifier > 0){\r\n            if(this.playSpeed < 0){\r\n                this.setSpeed(-this.playSpeed);\r\n            } else {\r\n                this.setDirection(-1);\r\n            }\r\n        }\r\n        this.timeCompleted = this.totalFrames = arr[0] - arr[1];\r\n        this.firstFrame = arr[1];\r\n        this.setCurrentRawFrameValue(this.totalFrames - 0.001 - offset);\r\n    } else if(arr[1] > arr[0]){\r\n        if(this.frameModifier < 0){\r\n            if(this.playSpeed < 0){\r\n                this.setSpeed(-this.playSpeed);\r\n            } else {\r\n                this.setDirection(1);\r\n            }\r\n        }\r\n        this.timeCompleted = this.totalFrames = arr[1] - arr[0];\r\n        this.firstFrame = arr[0];\r\n        this.setCurrentRawFrameValue(0.001 + offset);\r\n    }\r\n    this.trigger('segmentStart');\r\n};\r\nAnimationItem.prototype.setSegment = function (init,end) {\r\n    var pendingFrame = -1;\r\n    if(this.isPaused) {\r\n        if (this.currentRawFrame + this.firstFrame < init) {\r\n            pendingFrame = init;\r\n        } else if (this.currentRawFrame + this.firstFrame > end) {\r\n            pendingFrame = end - init;\r\n        }\r\n    }\r\n\r\n    this.firstFrame = init;\r\n    this.timeCompleted = this.totalFrames = end - init;\r\n    if(pendingFrame !== -1) {\r\n        this.goToAndStop(pendingFrame,true);\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.playSegments = function (arr, forceFlag) {\r\n    if (forceFlag) {\r\n        this.segments.length = 0;\r\n    }\r\n    if (typeof arr[0] === 'object') {\r\n        var i, len = arr.length;\r\n        for (i = 0; i < len; i += 1) {\r\n            this.segments.push(arr[i]);\r\n        }\r\n    } else {\r\n        this.segments.push(arr);\r\n    }\r\n    if (this.segments.length && forceFlag) {\r\n        this.adjustSegment(this.segments.shift(), 0);\r\n    }\r\n    if (this.isPaused) {\r\n        this.play();\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.resetSegments = function (forceFlag) {\r\n    this.segments.length = 0;\r\n    this.segments.push([this.animationData.ip,this.animationData.op]);\r\n    //this.segments.push([this.animationData.ip*this.frameRate,Math.floor(this.animationData.op - this.animationData.ip+this.animationData.ip*this.frameRate)]);\r\n    if (forceFlag) {\r\n        this.checkSegments(0);\r\n    }\r\n};\r\nAnimationItem.prototype.checkSegments = function(offset) {\r\n    if (this.segments.length) {\r\n        this.adjustSegment(this.segments.shift(), offset);\r\n        return true;\r\n    }\r\n    return false;\r\n};\r\n\r\nAnimationItem.prototype.destroy = function (name) {\r\n    if ((name && this.name != name) || !this.renderer) {\r\n        return;\r\n    }\r\n    this.renderer.destroy();\r\n    this.imagePreloader.destroy();\r\n    this.trigger('destroy');\r\n    this._cbs = null;\r\n    this.onEnterFrame = this.onLoopComplete = this.onComplete = this.onSegmentStart = this.onDestroy = null;\r\n    this.renderer = null;\r\n};\r\n\r\nAnimationItem.prototype.setCurrentRawFrameValue = function(value){\r\n    this.currentRawFrame = value;\r\n    this.gotoFrame();\r\n};\r\n\r\nAnimationItem.prototype.setSpeed = function (val) {\r\n    this.playSpeed = val;\r\n    this.updaFrameModifier();\r\n};\r\n\r\nAnimationItem.prototype.setDirection = function (val) {\r\n    this.playDirection = val < 0 ? -1 : 1;\r\n    this.updaFrameModifier();\r\n};\r\n\r\nAnimationItem.prototype.updaFrameModifier = function () {\r\n    this.frameModifier = this.frameMult * this.playSpeed * this.playDirection;\r\n};\r\n\r\nAnimationItem.prototype.getPath = function () {\r\n    return this.path;\r\n};\r\n\r\nAnimationItem.prototype.getAssetsPath = function (assetData) {\r\n    var path = '';\r\n    if(assetData.e) {\r\n        path = assetData.p;\r\n    } else if(this.assetsPath){\r\n        var imagePath = assetData.p;\r\n        if(imagePath.indexOf('images/') !== -1){\r\n            imagePath = imagePath.split('/')[1];\r\n        }\r\n        path = this.assetsPath + imagePath;\r\n    } else {\r\n        path = this.path;\r\n        path += assetData.u ? assetData.u : '';\r\n        path += assetData.p;\r\n    }\r\n    return path;\r\n};\r\n\r\nAnimationItem.prototype.getAssetData = function (id) {\r\n    var i = 0, len = this.assets.length;\r\n    while (i < len) {\r\n        if(id == this.assets[i].id){\r\n            return this.assets[i];\r\n        }\r\n        i += 1;\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.hide = function () {\r\n    this.renderer.hide();\r\n};\r\n\r\nAnimationItem.prototype.show = function () {\r\n    this.renderer.show();\r\n};\r\n\r\nAnimationItem.prototype.getDuration = function (isFrame) {\r\n    return isFrame ? this.totalFrames : this.totalFrames / this.frameRate;\r\n};\r\n\r\nAnimationItem.prototype.trigger = function(name){\r\n    if(this._cbs && this._cbs[name]){\r\n        switch(name){\r\n            case 'enterFrame':\r\n                this.triggerEvent(name,new BMEnterFrameEvent(name,this.currentFrame,this.totalFrames,this.frameModifier));\r\n                break;\r\n            case 'loopComplete':\r\n                this.triggerEvent(name,new BMCompleteLoopEvent(name,this.loop,this.playCount,this.frameMult));\r\n                break;\r\n            case 'complete':\r\n                this.triggerEvent(name,new BMCompleteEvent(name,this.frameMult));\r\n                break;\r\n            case 'segmentStart':\r\n                this.triggerEvent(name,new BMSegmentStartEvent(name,this.firstFrame,this.totalFrames));\r\n                break;\r\n            case 'destroy':\r\n                this.triggerEvent(name,new BMDestroyEvent(name,this));\r\n                break;\r\n            default:\r\n                this.triggerEvent(name);\r\n        }\r\n    }\r\n    if(name === 'enterFrame' && this.onEnterFrame){\r\n        this.onEnterFrame.call(this,new BMEnterFrameEvent(name,this.currentFrame,this.totalFrames,this.frameMult));\r\n    }\r\n    if(name === 'loopComplete' && this.onLoopComplete){\r\n        this.onLoopComplete.call(this,new BMCompleteLoopEvent(name,this.loop,this.playCount,this.frameMult));\r\n    }\r\n    if(name === 'complete' && this.onComplete){\r\n        this.onComplete.call(this,new BMCompleteEvent(name,this.frameMult));\r\n    }\r\n    if(name === 'segmentStart' && this.onSegmentStart){\r\n        this.onSegmentStart.call(this,new BMSegmentStartEvent(name,this.firstFrame,this.totalFrames));\r\n    }\r\n    if(name === 'destroy' && this.onDestroy){\r\n        this.onDestroy.call(this,new BMDestroyEvent(name,this));\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.triggerRenderFrameError = function(nativeError) {\r\n\r\n    var error = new BMRenderFrameErrorEvent(nativeError, this.currentFrame);\r\n    this.triggerEvent('error', error);\r\n\r\n    if (this.onError) {\r\n        this.onError.call(this, error);\r\n    }\r\n}\r\n\r\nAnimationItem.prototype.triggerConfigError = function(nativeError) {\r\n\r\n    var error = new BMConfigErrorEvent(nativeError, this.currentFrame);\r\n    this.triggerEvent('error', error);\r\n\r\n    if (this.onError) {\r\n        this.onError.call(this, error);\r\n    }\r\n}\r\nvar Expressions = (function(){\r\n    var ob = {};\r\n    ob.initExpressions = initExpressions;\r\n\r\n\r\n    function initExpressions(animation){\r\n\r\n    \tvar stackCount = 0;\r\n    \tvar registers = [];\r\n\r\n    \tfunction pushExpression() {\r\n\t\t\tstackCount += 1;\r\n    \t}\r\n\r\n    \tfunction popExpression() {\r\n\t\t\tstackCount -= 1;\r\n\t\t\tif (stackCount === 0) {\r\n\t\t\t\treleaseInstances();\r\n\t\t\t}\r\n    \t}\r\n\r\n    \tfunction registerExpressionProperty(expression) {\r\n    \t\tif (registers.indexOf(expression) === -1) {\r\n\t\t\t\tregisters.push(expression)\r\n    \t\t}\r\n    \t}\r\n\r\n    \tfunction releaseInstances() {\r\n    \t\tvar i, len = registers.length;\r\n    \t\tfor (i = 0; i < len; i += 1) {\r\n\t\t\t\tregisters[i].release();\r\n    \t\t}\r\n    \t\tregisters.length = 0;\r\n    \t}\r\n\r\n        animation.renderer.compInterface = CompExpressionInterface(animation.renderer);\r\n        animation.renderer.globalData.projectInterface.registerComposition(animation.renderer);\r\n        animation.renderer.globalData.pushExpression = pushExpression;\r\n        animation.renderer.globalData.popExpression = popExpression;\r\n        animation.renderer.globalData.registerExpressionProperty = registerExpressionProperty;\r\n    }\r\n   return ob;\r\n}());\r\n\r\nexpressionsPlugin = Expressions;\r\n\r\nvar ExpressionManager = (function(){\r\n    'use strict';\r\n    var ob = {};\r\n    var Math = BMMath;\r\n    var window = null;\r\n    var document = null;\r\n\r\n    function $bm_isInstanceOfArray(arr) {\r\n        return arr.constructor === Array || arr.constructor === Float32Array;\r\n    }\r\n\r\n    function isNumerable(tOfV, v) {\r\n        return tOfV === 'number' || tOfV === 'boolean' || tOfV === 'string' || v instanceof Number;\r\n    }\r\n\r\n    function $bm_neg(a){\r\n        var tOfA = typeof a;\r\n        if(tOfA === 'number' || tOfA === 'boolean'  || a instanceof Number ){\r\n            return -a;\r\n        }\r\n        if($bm_isInstanceOfArray(a)){\r\n            var i, lenA = a.length;\r\n            var retArr = [];\r\n            for(i=0;i<lenA;i+=1){\r\n                retArr[i] = -a[i];\r\n            }\r\n            return retArr;\r\n        }\r\n        if (a.propType) {\r\n            return a.v;\r\n        }\r\n    }\r\n\r\n    var easeInBez = BezierFactory.getBezierEasing(0.333,0,.833,.833, 'easeIn').get;\r\n    var easeOutBez = BezierFactory.getBezierEasing(0.167,0.167,.667,1, 'easeOut').get;\r\n    var easeInOutBez = BezierFactory.getBezierEasing(.33,0,.667,1, 'easeInOut').get;\r\n\r\n    function sum(a,b) {\r\n        var tOfA = typeof a;\r\n        var tOfB = typeof b;\r\n        if(tOfA === 'string' || tOfB === 'string'){\r\n            return a + b;\r\n        }\r\n        if(isNumerable(tOfA, a) && isNumerable(tOfB, b)) {\r\n            return a + b;\r\n        }\r\n        if($bm_isInstanceOfArray(a) && isNumerable(tOfB, b)){\r\n            a = a.slice(0);\r\n            a[0] = a[0] + b;\r\n            return a;\r\n        }\r\n        if(isNumerable(tOfA, a) && $bm_isInstanceOfArray(b)){\r\n            b = b.slice(0);\r\n            b[0] = a + b[0];\r\n            return b;\r\n        }\r\n        if($bm_isInstanceOfArray(a) && $bm_isInstanceOfArray(b)){\r\n            \r\n            var i = 0, lenA = a.length, lenB = b.length;\r\n            var retArr = [];\r\n            while(i<lenA || i < lenB){\r\n                if((typeof a[i] === 'number' || a[i] instanceof Number) && (typeof b[i] === 'number' || b[i] instanceof Number)){\r\n                    retArr[i] = a[i] + b[i];\r\n                }else{\r\n                    retArr[i] = b[i] === undefined ? a[i] : a[i] || b[i];\r\n                }\r\n                i += 1;\r\n            }\r\n            return retArr;\r\n        }\r\n        return 0;\r\n    }\r\n    var add = sum;\r\n\r\n    function sub(a,b) {\r\n        var tOfA = typeof a;\r\n        var tOfB = typeof b;\r\n        if(isNumerable(tOfA, a) && isNumerable(tOfB, b)) {\r\n            if(tOfA === 'string') {\r\n                a = parseInt(a);\r\n            }\r\n            if(tOfB === 'string') {\r\n                b = parseInt(b);\r\n            }\r\n            return a - b;\r\n        }\r\n        if( $bm_isInstanceOfArray(a) && isNumerable(tOfB, b)){\r\n            a = a.slice(0);\r\n            a[0] = a[0] - b;\r\n            return a;\r\n        }\r\n        if(isNumerable(tOfA, a) &&  $bm_isInstanceOfArray(b)){\r\n            b = b.slice(0);\r\n            b[0] = a - b[0];\r\n            return b;\r\n        }\r\n        if($bm_isInstanceOfArray(a) && $bm_isInstanceOfArray(b)){\r\n            var i = 0, lenA = a.length, lenB = b.length;\r\n            var retArr = [];\r\n            while(i<lenA || i < lenB){\r\n                if((typeof a[i] === 'number' || a[i] instanceof Number) && (typeof b[i] === 'number' || b[i] instanceof Number)){\r\n                    retArr[i] = a[i] - b[i];\r\n                }else{\r\n                    retArr[i] = b[i] === undefined ? a[i] : a[i] || b[i];\r\n                }\r\n                i += 1;\r\n            }\r\n            return retArr;\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    function mul(a,b) {\r\n        var tOfA = typeof a;\r\n        var tOfB = typeof b;\r\n        var arr;\r\n        if(isNumerable(tOfA, a) && isNumerable(tOfB, b)) {\r\n            return a * b;\r\n        }\r\n\r\n        var i, len;\r\n        if($bm_isInstanceOfArray(a) && isNumerable(tOfB, b)){\r\n            len = a.length;\r\n            arr = createTypedArray('float32', len);\r\n            for(i=0;i<len;i+=1){\r\n                arr[i] = a[i] * b;\r\n            }\r\n            return arr;\r\n        }\r\n        if(isNumerable(tOfA, a) && $bm_isInstanceOfArray(b)){\r\n            len = b.length;\r\n            arr = createTypedArray('float32', len);\r\n            for(i=0;i<len;i+=1){\r\n                arr[i] = a * b[i];\r\n            }\r\n            return arr;\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    function div(a,b) {\r\n        var tOfA = typeof a;\r\n        var tOfB = typeof b;\r\n        var arr;\r\n        if(isNumerable(tOfA, a) && isNumerable(tOfB, b)) {\r\n            return a / b;\r\n        }\r\n        var i, len;\r\n        if($bm_isInstanceOfArray(a) && isNumerable(tOfB, b)){\r\n            len = a.length;\r\n            arr = createTypedArray('float32', len);\r\n            for(i=0;i<len;i+=1){\r\n                arr[i] = a[i] / b;\r\n            }\r\n            return arr;\r\n        }\r\n        if(isNumerable(tOfA, a) && $bm_isInstanceOfArray(b)){\r\n            len = b.length;\r\n            arr = createTypedArray('float32', len);\r\n            for(i=0;i<len;i+=1){\r\n                arr[i] = a / b[i];\r\n            }\r\n            return arr;\r\n        }\r\n        return 0;\r\n    }\r\n    function mod(a,b) {\r\n        if(typeof a === 'string') {\r\n            a = parseInt(a);\r\n        }\r\n        if(typeof b === 'string') {\r\n            b = parseInt(b);\r\n        }\r\n        return a % b;\r\n    }\r\n    var $bm_sum = sum;\r\n    var $bm_sub = sub;\r\n    var $bm_mul = mul;\r\n    var $bm_div = div;\r\n    var $bm_mod = mod;\r\n\r\n    function clamp(num, min, max) {\r\n        if(min > max){\r\n            var mm = max;\r\n            max = min;\r\n            min = mm;\r\n        }\r\n        return Math.min(Math.max(num, min), max);\r\n    }\r\n\r\n    function radiansToDegrees(val) {\r\n        return val/degToRads;\r\n    }\r\n    var radians_to_degrees = radiansToDegrees;\r\n\r\n    function degreesToRadians(val) {\r\n        return val*degToRads;\r\n    }\r\n    var degrees_to_radians = radiansToDegrees;\r\n\r\n    var helperLengthArray = [0,0,0,0,0,0];\r\n\r\n    function length(arr1, arr2) {\r\n        if (typeof arr1 === 'number' || arr1 instanceof Number) {\r\n            arr2 = arr2 || 0;\r\n            return Math.abs(arr1 - arr2);\r\n        }\r\n        if(!arr2) {\r\n            arr2 = helperLengthArray;\r\n        }\r\n        var i, len = Math.min(arr1.length, arr2.length);\r\n        var addedLength = 0;\r\n        for (i = 0; i < len; i += 1) {\r\n            addedLength += Math.pow(arr2[i] - arr1[i], 2);\r\n        }\r\n        return Math.sqrt(addedLength);\r\n    }\r\n\r\n    function normalize(vec) {\r\n        return div(vec, length(vec));\r\n    }\r\n\r\n    function rgbToHsl(val) {\r\n        var r = val[0]; var g = val[1]; var b = val[2];\r\n        var max = Math.max(r, g, b), min = Math.min(r, g, b);\r\n        var h, s, l = (max + min) / 2;\r\n\r\n        if(max == min){\r\n            h = s = 0; // achromatic\r\n        }else{\r\n            var d = max - min;\r\n            s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\r\n            switch(max){\r\n                case r: h = (g - b) / d + (g < b ? 6 : 0); break;\r\n                case g: h = (b - r) / d + 2; break;\r\n                case b: h = (r - g) / d + 4; break;\r\n            }\r\n            h /= 6;\r\n        }\r\n\r\n        return [h, s, l,val[3]];\r\n    }\r\n\r\n    function hue2rgb(p, q, t){\r\n        if(t < 0) t += 1;\r\n        if(t > 1) t -= 1;\r\n        if(t < 1/6) return p + (q - p) * 6 * t;\r\n        if(t < 1/2) return q;\r\n        if(t < 2/3) return p + (q - p) * (2/3 - t) * 6;\r\n        return p;\r\n    }\r\n\r\n    function hslToRgb(val){\r\n        var h = val[0];\r\n        var s = val[1];\r\n        var l = val[2];\r\n\r\n        var r, g, b;\r\n\r\n        if(s === 0){\r\n            r = g = b = l; // achromatic\r\n        }else{\r\n\r\n            var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\r\n            var p = 2 * l - q;\r\n            r = hue2rgb(p, q, h + 1/3);\r\n            g = hue2rgb(p, q, h);\r\n            b = hue2rgb(p, q, h - 1/3);\r\n        }\r\n\r\n        return [r, g , b, val[3]];\r\n    }\r\n\r\n    function linear(t, tMin, tMax, value1, value2){\r\n        if(value1 === undefined || value2 === undefined){\r\n            value1 = tMin;\r\n            value2 = tMax;\r\n            tMin = 0;\r\n            tMax = 1;\r\n        }\r\n        if(tMax < tMin) {\r\n            var _tMin = tMax;\r\n            tMax = tMin;\r\n            tMin = _tMin;\r\n        }\r\n        if(t <= tMin) {\r\n            return value1;\r\n        }else if(t >= tMax){\r\n            return value2;\r\n        }\r\n        var perc = tMax === tMin ? 0 : (t-tMin)/(tMax-tMin);\r\n        if(!value1.length){\r\n            return value1 + (value2-value1)*perc;\r\n        }\r\n        var i, len = value1.length;\r\n        var arr = createTypedArray('float32', len);\r\n        for(i=0;i<len;i+=1){\r\n            arr[i] = value1[i] + (value2[i]-value1[i])*perc;\r\n        }\r\n        return arr;\r\n    }\r\n    function random(min,max){\r\n        if(max === undefined){\r\n            if(min === undefined){\r\n                min = 0;\r\n                max = 1;\r\n            } else {\r\n                max = min;\r\n                min = undefined;\r\n            }\r\n        }\r\n        if(max.length){\r\n            var i, len = max.length;\r\n            if(!min){\r\n                min = createTypedArray('float32', len);\r\n            }\r\n            var arr = createTypedArray('float32', len);\r\n            var rnd = BMMath.random();\r\n            for(i=0;i<len;i+=1){\r\n                arr[i] = min[i] + rnd*(max[i]-min[i]);\r\n            }\r\n            return arr;\r\n        }\r\n        if(min === undefined){\r\n            min = 0;\r\n        }\r\n        var rndm = BMMath.random();\r\n        return min + rndm*(max-min);\r\n    }\r\n\r\n    function createPath(points, inTangents, outTangents, closed) {\r\n        var i, len = points.length;\r\n        var path = shape_pool.newElement();\r\n        path.setPathData(!!closed, len);\r\n        var arrPlaceholder = [0,0], inVertexPoint, outVertexPoint;\r\n        for(i = 0; i < len; i += 1) {\r\n            inVertexPoint = (inTangents && inTangents[i]) ? inTangents[i] : arrPlaceholder;\r\n            outVertexPoint = (outTangents && outTangents[i]) ? outTangents[i] : arrPlaceholder;\r\n            path.setTripleAt(points[i][0],points[i][1],outVertexPoint[0] + points[i][0],outVertexPoint[1] + points[i][1],inVertexPoint[0] + points[i][0],inVertexPoint[1] + points[i][1],i,true);\r\n        }\r\n        return path;\r\n    }\r\n\r\n    function initiateExpression(elem,data,property){\r\n        var val = data.x;\r\n        var needsVelocity = /velocity(?![\\w\\d])/.test(val);\r\n        var _needsRandom = val.indexOf('random') !== -1;\r\n        var elemType = elem.data.ty;\r\n        var transform,$bm_transform,content,effect;\r\n        var thisProperty = property;\r\n        thisProperty.valueAtTime = thisProperty.getValueAtTime;\r\n        Object.defineProperty(thisProperty, 'value', {\r\n            get: function() {\r\n                return thisProperty.v\r\n            }\r\n        })\r\n        elem.comp.frameDuration = 1/elem.comp.globalData.frameRate;\r\n        elem.comp.displayStartTime = 0;\r\n        var inPoint = elem.data.ip/elem.comp.globalData.frameRate;\r\n        var outPoint = elem.data.op/elem.comp.globalData.frameRate;\r\n        var width = elem.data.sw ? elem.data.sw : 0;\r\n        var height = elem.data.sh ? elem.data.sh : 0;\r\n        var name = elem.data.nm;\r\n        var loopIn, loop_in, loopOut, loop_out, smooth;\r\n        var toWorld,fromWorld,fromComp,toComp,fromCompToSurface, position, rotation, anchorPoint, scale, thisLayer, thisComp,mask,valueAtTime,velocityAtTime;\r\n        var __expression_functions = [];\r\n        if(data.xf) {\r\n            var i, len = data.xf.length;\r\n            for(i = 0; i < len; i += 1) {\r\n                __expression_functions[i] = eval('(function(){ return ' + data.xf[i] + '}())');\r\n            }\r\n        }\r\n\r\n        var scoped_bm_rt;\r\n        var expression_function = eval('[function _expression_function(){' + val+';scoped_bm_rt=$bm_rt}' + ']')[0];\r\n        var numKeys = property.kf ? data.k.length : 0;\r\n\r\n        var active = !this.data || this.data.hd !== true;\r\n\r\n        var wiggle = function wiggle(freq,amp){\r\n            var i,j, len = this.pv.length ? this.pv.length : 1;\r\n            var addedAmps = createTypedArray('float32', len);\r\n            freq = 5;\r\n            var iterations = Math.floor(time*freq);\r\n            i = 0;\r\n            j = 0;\r\n            while(i<iterations){\r\n                //var rnd = BMMath.random();\r\n                for(j=0;j<len;j+=1){\r\n                    addedAmps[j] += -amp + amp*2*BMMath.random();\r\n                    //addedAmps[j] += -amp + amp*2*rnd;\r\n                }\r\n                i += 1;\r\n            }\r\n            //var rnd2 = BMMath.random();\r\n            var periods = time*freq;\r\n            var perc = periods - Math.floor(periods);\r\n            var arr = createTypedArray('float32', len);\r\n            if(len>1){\r\n                for(j=0;j<len;j+=1){\r\n                    arr[j] = this.pv[j] + addedAmps[j] + (-amp + amp*2*BMMath.random())*perc;\r\n                    //arr[j] = this.pv[j] + addedAmps[j] + (-amp + amp*2*rnd)*perc;\r\n                    //arr[i] = this.pv[i] + addedAmp + amp1*perc + amp2*(1-perc);\r\n                }\r\n                return arr;\r\n            } else {\r\n                return this.pv + addedAmps[0] + (-amp + amp*2*BMMath.random())*perc;\r\n            }\r\n        }.bind(this);\r\n\r\n        if(thisProperty.loopIn) {\r\n            loopIn = thisProperty.loopIn.bind(thisProperty);\r\n            loop_in = loopIn;\r\n        }\r\n\r\n        if(thisProperty.loopOut) {\r\n            loopOut = thisProperty.loopOut.bind(thisProperty);\r\n            loop_out = loopOut;\r\n        }\r\n\r\n        if(thisProperty.smooth) {\r\n            smooth = thisProperty.smooth.bind(thisProperty);\r\n        }\r\n\r\n        function loopInDuration(type,duration){\r\n            return loopIn(type,duration,true);\r\n        }\r\n\r\n        function loopOutDuration(type,duration){\r\n            return loopOut(type,duration,true);\r\n        }\r\n\r\n        if(this.getValueAtTime) {\r\n            valueAtTime = this.getValueAtTime.bind(this);\r\n        }\r\n\r\n        if(this.getVelocityAtTime) {\r\n            velocityAtTime = this.getVelocityAtTime.bind(this);\r\n        }\r\n\r\n        var comp = elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);\r\n\r\n        function lookAt(elem1,elem2){\r\n            var fVec = [elem2[0]-elem1[0],elem2[1]-elem1[1],elem2[2]-elem1[2]];\r\n            var pitch = Math.atan2(fVec[0],Math.sqrt(fVec[1]*fVec[1]+fVec[2]*fVec[2]))/degToRads;\r\n            var yaw = -Math.atan2(fVec[1],fVec[2])/degToRads;\r\n            return [yaw,pitch,0];\r\n        }\r\n\r\n        function easeOut(t, tMin, tMax, val1, val2){\r\n            return applyEase(easeOutBez, t, tMin, tMax, val1, val2);\r\n        }\r\n\r\n        function easeIn(t, tMin, tMax, val1, val2){\r\n            return applyEase(easeInBez, t, tMin, tMax, val1, val2);\r\n        }\r\n\r\n        function ease(t, tMin, tMax, val1, val2){\r\n            return applyEase(easeInOutBez, t, tMin, tMax, val1, val2);\r\n        }\r\n\r\n        function applyEase(fn, t, tMin, tMax, val1, val2) {\r\n            if(val1 === undefined){\r\n                val1 = tMin;\r\n                val2 = tMax;\r\n            } else {\r\n                t = (t - tMin) / (tMax - tMin);\r\n            }\r\n            t = t > 1 ? 1 : t < 0 ? 0 : t;\r\n            var mult = fn(t);\r\n            if($bm_isInstanceOfArray(val1)) {\r\n                var i, len = val1.length;\r\n                var arr = createTypedArray('float32', len);\r\n                for (i = 0; i < len; i += 1) {\r\n                    arr[i] = (val2[i] - val1[i]) * mult + val1[i];\r\n                }\r\n                return arr;\r\n            } else {\r\n                return (val2 - val1) * mult + val1;\r\n            }\r\n        }\r\n\r\n        function nearestKey(time){\r\n            var i, len = data.k.length,index,keyTime;\r\n            if(!data.k.length || typeof(data.k[0]) === 'number'){\r\n                index = 0;\r\n                keyTime = 0;\r\n            } else {\r\n                index = -1;\r\n                time *= elem.comp.globalData.frameRate;\r\n                if (time < data.k[0].t) {\r\n                    index = 1;\r\n                    keyTime = data.k[0].t;\r\n                } else {\r\n                    for(i=0;i<len-1;i+=1){\r\n                        if(time === data.k[i].t){\r\n                            index = i + 1;\r\n                            keyTime = data.k[i].t;\r\n                            break;\r\n                        }else if(time>data.k[i].t && time<data.k[i+1].t){\r\n                            if(time-data.k[i].t > data.k[i+1].t - time){\r\n                                index = i + 2;\r\n                                keyTime = data.k[i+1].t;\r\n                            } else {\r\n                                index = i + 1;\r\n                                keyTime = data.k[i].t;\r\n                            }\r\n                            break;\r\n                        }\r\n                    }\r\n                    if(index === -1){\r\n                        index = i + 1;\r\n                        keyTime = data.k[i].t;\r\n                    }\r\n                }\r\n                \r\n            }\r\n            var ob = {};\r\n            ob.index = index;\r\n            ob.time = keyTime/elem.comp.globalData.frameRate;\r\n            return ob;\r\n        }\r\n\r\n        function key(ind){\r\n            var ob, i, len;\r\n            if(!data.k.length || typeof(data.k[0]) === 'number'){\r\n                throw new Error('The property has no keyframe at index ' + ind);\r\n            }\r\n            ind -= 1;\r\n            ob = {\r\n                time: data.k[ind].t/elem.comp.globalData.frameRate,\r\n                value: []\r\n            };\r\n            var arr = data.k[ind].hasOwnProperty('s') ? data.k[ind].s : data.k[ind - 1].e;\r\n\r\n            len = arr.length;\r\n            for(i=0;i<len;i+=1){\r\n                ob[i] = arr[i];\r\n                ob.value[i] = arr[i]\r\n            }\r\n            return ob;\r\n        }\r\n\r\n        function framesToTime(frames, fps) { \r\n            if (!fps) {\r\n                fps = elem.comp.globalData.frameRate;\r\n            }\r\n            return frames / fps;\r\n        }\r\n\r\n        function timeToFrames(t, fps) {\r\n            if (!t && t !== 0) {\r\n                t = time;\r\n            }\r\n            if (!fps) {\r\n                fps = elem.comp.globalData.frameRate;\r\n            }\r\n            return t * fps;\r\n        }\r\n\r\n        function seedRandom(seed){\r\n            BMMath.seedrandom(randSeed + seed);\r\n        }\r\n\r\n        function sourceRectAtTime() {\r\n            return elem.sourceRectAtTime();\r\n        }\r\n\r\n        function substring(init, end) {\r\n            if(typeof value === 'string') {\r\n                if(end === undefined) {\r\n                return value.substring(init)\r\n                }\r\n                return value.substring(init, end)\r\n            }\r\n            return '';\r\n        }\r\n\r\n        function substr(init, end) {\r\n            if(typeof value === 'string') {\r\n                if(end === undefined) {\r\n                return value.substr(init)\r\n                }\r\n                return value.substr(init, end)\r\n            }\r\n            return '';\r\n        }\r\n\r\n        function posterizeTime(framesPerSecond) {\r\n            time = framesPerSecond === 0 ? 0 : Math.floor(time * framesPerSecond) / framesPerSecond\r\n            value = valueAtTime(time)\r\n        }\r\n\r\n        var time, velocity, value, text, textIndex, textTotal, selectorValue;\r\n        var index = elem.data.ind;\r\n        var hasParent = !!(elem.hierarchy && elem.hierarchy.length);\r\n        var parent;\r\n        var randSeed = Math.floor(Math.random()*1000000);\r\n        var globalData = elem.globalData;\r\n        function executeExpression(_value) {\r\n            // globalData.pushExpression();\r\n            value = _value;\r\n            if (_needsRandom) {\r\n                seedRandom(randSeed);\r\n            }\r\n            if (this.frameExpressionId === elem.globalData.frameId && this.propType !== 'textSelector') {\r\n                return value;\r\n            }\r\n            if(this.propType === 'textSelector'){\r\n                textIndex = this.textIndex;\r\n                textTotal = this.textTotal;\r\n                selectorValue = this.selectorValue;\r\n            }\r\n            if (!thisLayer) {\r\n                text = elem.layerInterface.text;\r\n                thisLayer = elem.layerInterface;\r\n                thisComp = elem.comp.compInterface;\r\n                toWorld = thisLayer.toWorld.bind(thisLayer);\r\n                fromWorld = thisLayer.fromWorld.bind(thisLayer);\r\n                fromComp = thisLayer.fromComp.bind(thisLayer);\r\n                toComp = thisLayer.toComp.bind(thisLayer);\r\n                mask = thisLayer.mask ? thisLayer.mask.bind(thisLayer) : null;\r\n                fromCompToSurface = fromComp;\r\n            }\r\n            if (!transform) {\r\n                transform = elem.layerInterface(\"ADBE Transform Group\");\r\n                $bm_transform = transform;\r\n                if(transform) {\r\n                    anchorPoint = transform.anchorPoint;\r\n                    /*position = transform.position;\r\n                    rotation = transform.rotation;\r\n                    scale = transform.scale;*/\r\n                }\r\n            }\r\n            \r\n            if (elemType === 4 && !content) {\r\n                content = thisLayer(\"ADBE Root Vectors Group\");\r\n            }\r\n            if (!effect) {\r\n                effect = thisLayer(4);\r\n            }\r\n            hasParent = !!(elem.hierarchy && elem.hierarchy.length);\r\n            if (hasParent && !parent) {\r\n                parent = elem.hierarchy[0].layerInterface;\r\n            }\r\n            time = this.comp.renderedFrame/this.comp.globalData.frameRate;\r\n            if (needsVelocity) {\r\n                velocity = velocityAtTime(time);\r\n            }\r\n            expression_function();\r\n            this.frameExpressionId = elem.globalData.frameId;\r\n\r\n\r\n            //TODO: Check if it's possible to return on ShapeInterface the .v value\r\n            if (scoped_bm_rt.propType === \"shape\") {\r\n                scoped_bm_rt = scoped_bm_rt.v;\r\n            }\r\n            // globalData.popExpression();\r\n            return scoped_bm_rt;\r\n        }\r\n        return executeExpression;\r\n    }\r\n\r\n    ob.initiateExpression = initiateExpression;\r\n    return ob;\r\n}());\r\nvar expressionHelpers = (function(){\r\n\r\n    function searchExpressions(elem,data,prop){\r\n        if(data.x){\r\n            prop.k = true;\r\n            prop.x = true;\r\n            prop.initiateExpression = ExpressionManager.initiateExpression;\r\n            prop.effectsSequence.push(prop.initiateExpression(elem,data,prop).bind(prop));\r\n        }\r\n    }\r\n\r\n    function getValueAtTime(frameNum) {\r\n        frameNum *= this.elem.globalData.frameRate;\r\n        frameNum -= this.offsetTime;\r\n        if(frameNum !== this._cachingAtTime.lastFrame) {\r\n            this._cachingAtTime.lastIndex = this._cachingAtTime.lastFrame < frameNum ? this._cachingAtTime.lastIndex : 0;\r\n            this._cachingAtTime.value = this.interpolateValue(frameNum, this._cachingAtTime);\r\n            this._cachingAtTime.lastFrame = frameNum;\r\n        }\r\n        return this._cachingAtTime.value;\r\n\r\n    }\r\n\r\n    function getSpeedAtTime(frameNum) {\r\n        var delta = -0.01;\r\n        var v1 = this.getValueAtTime(frameNum);\r\n        var v2 = this.getValueAtTime(frameNum + delta);\r\n        var speed = 0;\r\n        if(v1.length){\r\n            var i;\r\n            for(i=0;i<v1.length;i+=1){\r\n                speed += Math.pow(v2[i] - v1[i], 2);\r\n            }\r\n            speed = Math.sqrt(speed) * 100;\r\n        } else {\r\n            speed = 0;\r\n        }\r\n        return speed;\r\n    }\r\n\r\n    function getVelocityAtTime(frameNum) {\r\n        if(this.vel !== undefined){\r\n            return this.vel;\r\n        }\r\n        var delta = -0.001;\r\n        //frameNum += this.elem.data.st;\r\n        var v1 = this.getValueAtTime(frameNum);\r\n        var v2 = this.getValueAtTime(frameNum + delta);\r\n        var velocity;\r\n        if(v1.length){\r\n            velocity = createTypedArray('float32', v1.length);\r\n            var i;\r\n            for(i=0;i<v1.length;i+=1){\r\n                //removing frameRate\r\n                //if needed, don't add it here\r\n                //velocity[i] = this.elem.globalData.frameRate*((v2[i] - v1[i])/delta);\r\n                velocity[i] = (v2[i] - v1[i])/delta;\r\n            }\r\n        } else {\r\n            velocity = (v2 - v1)/delta;\r\n        }\r\n        return velocity;\r\n    }\r\n\r\n    function getStaticValueAtTime() {\r\n        return this.pv;\r\n    }\r\n\r\n    function setGroupProperty(propertyGroup){\r\n        this.propertyGroup = propertyGroup;\r\n    }\r\n\r\n\treturn {\r\n\t\tsearchExpressions: searchExpressions,\r\n\t\tgetSpeedAtTime: getSpeedAtTime,\r\n\t\tgetVelocityAtTime: getVelocityAtTime,\r\n\t\tgetValueAtTime: getValueAtTime,\r\n\t\tgetStaticValueAtTime: getStaticValueAtTime,\r\n\t\tsetGroupProperty: setGroupProperty,\r\n\t}\r\n}());\r\n(function addPropertyDecorator() {\r\n\r\n    function loopOut(type,duration,durationFlag){\r\n        if(!this.k || !this.keyframes){\r\n            return this.pv;\r\n        }\r\n        type = type ? type.toLowerCase() : '';\r\n        var currentFrame = this.comp.renderedFrame;\r\n        var keyframes = this.keyframes;\r\n        var lastKeyFrame = keyframes[keyframes.length - 1].t;\r\n        if(currentFrame<=lastKeyFrame){\r\n            return this.pv;\r\n        }else{\r\n            var cycleDuration, firstKeyFrame;\r\n            if(!durationFlag){\r\n                if(!duration || duration > keyframes.length - 1){\r\n                    duration = keyframes.length - 1;\r\n                }\r\n                firstKeyFrame = keyframes[keyframes.length - 1 - duration].t;\r\n                cycleDuration = lastKeyFrame - firstKeyFrame;\r\n            } else {\r\n                if(!duration){\r\n                    cycleDuration = Math.max(0,lastKeyFrame - this.elem.data.ip);\r\n                } else {\r\n                    cycleDuration = Math.abs(lastKeyFrame - elem.comp.globalData.frameRate*duration);\r\n                }\r\n                firstKeyFrame = lastKeyFrame - cycleDuration;\r\n            }\r\n            var i, len, ret;\r\n            if(type === 'pingpong') {\r\n                var iterations = Math.floor((currentFrame - firstKeyFrame)/cycleDuration);\r\n                if(iterations % 2 !== 0){\r\n                    return this.getValueAtTime(((cycleDuration - (currentFrame - firstKeyFrame) % cycleDuration +  firstKeyFrame)) / this.comp.globalData.frameRate, 0);\r\n                }\r\n            } else if(type === 'offset'){\r\n                var initV = this.getValueAtTime(firstKeyFrame / this.comp.globalData.frameRate, 0);\r\n                var endV = this.getValueAtTime(lastKeyFrame / this.comp.globalData.frameRate, 0);\r\n                var current = this.getValueAtTime(((currentFrame - firstKeyFrame) % cycleDuration +  firstKeyFrame) / this.comp.globalData.frameRate, 0);\r\n                var repeats = Math.floor((currentFrame - firstKeyFrame)/cycleDuration);\r\n                if(this.pv.length){\r\n                    ret = new Array(initV.length);\r\n                    len = ret.length;\r\n                    for(i=0;i<len;i+=1){\r\n                        ret[i] = (endV[i]-initV[i])*repeats + current[i];\r\n                    }\r\n                    return ret;\r\n                }\r\n                return (endV-initV)*repeats + current;\r\n            } else if(type === 'continue'){\r\n                var lastValue = this.getValueAtTime(lastKeyFrame / this.comp.globalData.frameRate, 0);\r\n                var nextLastValue = this.getValueAtTime((lastKeyFrame - 0.001) / this.comp.globalData.frameRate, 0);\r\n                if(this.pv.length){\r\n                    ret = new Array(lastValue.length);\r\n                    len = ret.length;\r\n                    for(i=0;i<len;i+=1){\r\n                        ret[i] = lastValue[i] + (lastValue[i]-nextLastValue[i])*((currentFrame - lastKeyFrame)/ this.comp.globalData.frameRate)/0.0005;\r\n                    }\r\n                    return ret;\r\n                }\r\n                return lastValue + (lastValue-nextLastValue)*(((currentFrame - lastKeyFrame))/0.001);\r\n            }\r\n            return this.getValueAtTime((((currentFrame - firstKeyFrame) % cycleDuration +  firstKeyFrame)) / this.comp.globalData.frameRate, 0);\r\n        }\r\n    }\r\n\r\n    function loopIn(type,duration, durationFlag) {\r\n        if(!this.k){\r\n            return this.pv;\r\n        }\r\n        type = type ? type.toLowerCase() : '';\r\n        var currentFrame = this.comp.renderedFrame;\r\n        var keyframes = this.keyframes;\r\n        var firstKeyFrame = keyframes[0].t;\r\n        if(currentFrame>=firstKeyFrame){\r\n            return this.pv;\r\n        }else{\r\n            var cycleDuration, lastKeyFrame;\r\n            if(!durationFlag){\r\n                if(!duration || duration > keyframes.length - 1){\r\n                    duration = keyframes.length - 1;\r\n                }\r\n                lastKeyFrame = keyframes[duration].t;\r\n                cycleDuration = lastKeyFrame - firstKeyFrame;\r\n            } else {\r\n                if(!duration){\r\n                    cycleDuration = Math.max(0,this.elem.data.op - firstKeyFrame);\r\n                } else {\r\n                    cycleDuration = Math.abs(elem.comp.globalData.frameRate*duration);\r\n                }\r\n                lastKeyFrame = firstKeyFrame + cycleDuration;\r\n            }\r\n            var i, len, ret;\r\n            if(type === 'pingpong') {\r\n                var iterations = Math.floor((firstKeyFrame - currentFrame)/cycleDuration);\r\n                if(iterations % 2 === 0){\r\n                    return this.getValueAtTime((((firstKeyFrame - currentFrame)%cycleDuration +  firstKeyFrame)) / this.comp.globalData.frameRate, 0);\r\n                }\r\n            } else if(type === 'offset'){\r\n                var initV = this.getValueAtTime(firstKeyFrame / this.comp.globalData.frameRate, 0);\r\n                var endV = this.getValueAtTime(lastKeyFrame / this.comp.globalData.frameRate, 0);\r\n                var current = this.getValueAtTime((cycleDuration - (firstKeyFrame - currentFrame)%cycleDuration +  firstKeyFrame) / this.comp.globalData.frameRate, 0);\r\n                var repeats = Math.floor((firstKeyFrame - currentFrame)/cycleDuration)+1;\r\n                if(this.pv.length){\r\n                    ret = new Array(initV.length);\r\n                    len = ret.length;\r\n                    for(i=0;i<len;i+=1){\r\n                        ret[i] = current[i]-(endV[i]-initV[i])*repeats;\r\n                    }\r\n                    return ret;\r\n                }\r\n                return current-(endV-initV)*repeats;\r\n            } else if(type === 'continue'){\r\n                var firstValue = this.getValueAtTime(firstKeyFrame / this.comp.globalData.frameRate, 0);\r\n                var nextFirstValue = this.getValueAtTime((firstKeyFrame + 0.001) / this.comp.globalData.frameRate, 0);\r\n                if(this.pv.length){\r\n                    ret = new Array(firstValue.length);\r\n                    len = ret.length;\r\n                    for(i=0;i<len;i+=1){\r\n                        ret[i] = firstValue[i] + (firstValue[i]-nextFirstValue[i])*(firstKeyFrame - currentFrame)/0.001;\r\n                    }\r\n                    return ret;\r\n                }\r\n                return firstValue + (firstValue-nextFirstValue)*(firstKeyFrame - currentFrame)/0.001;\r\n            }\r\n            return this.getValueAtTime(((cycleDuration - (firstKeyFrame - currentFrame) % cycleDuration +  firstKeyFrame)) / this.comp.globalData.frameRate, 0);\r\n        }\r\n    }\r\n\r\n    function smooth(width, samples) {\r\n        if (!this.k){\r\n            return this.pv;\r\n        }\r\n        width = (width || 0.4) * 0.5;\r\n        samples = Math.floor(samples || 5);\r\n        if (samples <= 1) {\r\n            return this.pv;\r\n        }\r\n        var currentTime = this.comp.renderedFrame / this.comp.globalData.frameRate;\r\n        var initFrame = currentTime - width;\r\n        var endFrame = currentTime + width;\r\n        var sampleFrequency = samples > 1 ? (endFrame - initFrame) / (samples - 1) : 1;\r\n        var i = 0, j = 0;\r\n        var value;\r\n        if (this.pv.length) {\r\n            value = createTypedArray('float32', this.pv.length);\r\n        } else {\r\n            value = 0;\r\n        }\r\n        var sampleValue;\r\n        while (i < samples) {\r\n            sampleValue = this.getValueAtTime(initFrame + i * sampleFrequency);\r\n            if(this.pv.length) {\r\n                for (j = 0; j < this.pv.length; j += 1) {\r\n                    value[j] += sampleValue[j];\r\n                }\r\n            } else {\r\n                value += sampleValue;\r\n            }\r\n            i += 1;\r\n        }\r\n        if(this.pv.length) {\r\n            for (j = 0; j < this.pv.length; j += 1) {\r\n                value[j] /= samples;\r\n            }\r\n        } else {\r\n            value /= samples;\r\n        }\r\n        return value;\r\n    }\r\n\r\n    function getValueAtTime(frameNum) {\r\n        frameNum *= this.elem.globalData.frameRate;\r\n        frameNum -= this.offsetTime;\r\n        if(frameNum !== this._cachingAtTime.lastFrame) {\r\n            this._cachingAtTime.lastIndex = this._cachingAtTime.lastFrame < frameNum ? this._cachingAtTime.lastIndex : 0;\r\n            this._cachingAtTime.value = this.interpolateValue(frameNum, this._cachingAtTime);\r\n            this._cachingAtTime.lastFrame = frameNum;\r\n        }\r\n        return this._cachingAtTime.value;\r\n\r\n    }\r\n\r\n    function getTransformValueAtTime(time) {\r\n        console.warn('Transform at time not supported');\r\n    }\r\n\r\n    function getTransformStaticValueAtTime(time) {\r\n\r\n    }\r\n\r\n    var getTransformProperty = TransformPropertyFactory.getTransformProperty;\r\n    TransformPropertyFactory.getTransformProperty = function(elem, data, container) {\r\n        var prop = getTransformProperty(elem, data, container);\r\n        if(prop.dynamicProperties.length) {\r\n            prop.getValueAtTime = getTransformValueAtTime.bind(prop);\r\n        } else {\r\n            prop.getValueAtTime = getTransformStaticValueAtTime.bind(prop);\r\n        }\r\n        prop.setGroupProperty = expressionHelpers.setGroupProperty;\r\n        return prop;\r\n    };\r\n\r\n    var propertyGetProp = PropertyFactory.getProp;\r\n    PropertyFactory.getProp = function(elem,data,type, mult, container){\r\n        var prop = propertyGetProp(elem,data,type, mult, container);\r\n        //prop.getVelocityAtTime = getVelocityAtTime;\r\n        //prop.loopOut = loopOut;\r\n        //prop.loopIn = loopIn;\r\n        if(prop.kf){\r\n            prop.getValueAtTime = expressionHelpers.getValueAtTime.bind(prop);\r\n        } else {\r\n            prop.getValueAtTime = expressionHelpers.getStaticValueAtTime.bind(prop);\r\n        }\r\n        prop.setGroupProperty = expressionHelpers.setGroupProperty;\r\n        prop.loopOut = loopOut;\r\n        prop.loopIn = loopIn;\r\n        prop.smooth = smooth;\r\n        prop.getVelocityAtTime = expressionHelpers.getVelocityAtTime.bind(prop);\r\n        prop.getSpeedAtTime = expressionHelpers.getSpeedAtTime.bind(prop);\r\n        prop.numKeys = data.a === 1 ? data.k.length : 0;\r\n        prop.propertyIndex = data.ix;\r\n        var value = 0;\r\n        if(type !== 0) {\r\n            value = createTypedArray('float32', data.a === 1 ?  data.k[0].s.length : data.k.length);\r\n        }\r\n        prop._cachingAtTime = {\r\n            lastFrame: initialDefaultFrame,\r\n            lastIndex: 0,\r\n            value: value\r\n        };\r\n        expressionHelpers.searchExpressions(elem,data,prop);\r\n        if(prop.k){\r\n            container.addDynamicProperty(prop);\r\n        }\r\n\r\n        return prop;\r\n    };\r\n\r\n    function getShapeValueAtTime(frameNum) {\r\n        //For now this caching object is created only when needed instead of creating it when the shape is initialized.\r\n        if (!this._cachingAtTime) {\r\n            this._cachingAtTime = {\r\n                shapeValue: shape_pool.clone(this.pv),\r\n                lastIndex: 0,\r\n                lastTime: initialDefaultFrame\r\n            };\r\n        }\r\n        \r\n        frameNum *= this.elem.globalData.frameRate;\r\n        frameNum -= this.offsetTime;\r\n        if(frameNum !== this._cachingAtTime.lastTime) {\r\n            this._cachingAtTime.lastIndex = this._cachingAtTime.lastTime < frameNum ? this._caching.lastIndex : 0;\r\n            this._cachingAtTime.lastTime = frameNum;\r\n            this.interpolateShape(frameNum, this._cachingAtTime.shapeValue, this._cachingAtTime);\r\n        }\r\n        return this._cachingAtTime.shapeValue;\r\n    }\r\n\r\n    var ShapePropertyConstructorFunction = ShapePropertyFactory.getConstructorFunction();\r\n    var KeyframedShapePropertyConstructorFunction = ShapePropertyFactory.getKeyframedConstructorFunction();\r\n\r\n    function ShapeExpressions(){}\r\n    ShapeExpressions.prototype = {\r\n        vertices: function(prop, time){\r\n            if (this.k) {\r\n                this.getValue();\r\n            }\r\n            var shapePath = this.v;\r\n            if(time !== undefined) {\r\n                shapePath = this.getValueAtTime(time, 0);\r\n            }\r\n            var i, len = shapePath._length;\r\n            var vertices = shapePath[prop];\r\n            var points = shapePath.v;\r\n            var arr = createSizedArray(len);\r\n            for(i = 0; i < len; i += 1) {\r\n                if(prop === 'i' || prop === 'o') {\r\n                    arr[i] = [vertices[i][0] - points[i][0], vertices[i][1] - points[i][1]];\r\n                } else {\r\n                    arr[i] = [vertices[i][0], vertices[i][1]];\r\n                }\r\n                \r\n            }\r\n            return arr;\r\n        },\r\n        points: function(time){\r\n            return this.vertices('v', time);\r\n        },\r\n        inTangents: function(time){\r\n            return this.vertices('i', time);\r\n        },\r\n        outTangents: function(time){\r\n            return this.vertices('o', time);\r\n        },\r\n        isClosed: function(){\r\n            return this.v.c;\r\n        },\r\n        pointOnPath: function(perc, time){\r\n            var shapePath = this.v;\r\n            if(time !== undefined) {\r\n                shapePath = this.getValueAtTime(time, 0);\r\n            }\r\n            if(!this._segmentsLength) {\r\n                this._segmentsLength = bez.getSegmentsLength(shapePath);\r\n            }\r\n\r\n            var segmentsLength = this._segmentsLength;\r\n            var lengths = segmentsLength.lengths;\r\n            var lengthPos = segmentsLength.totalLength * perc;\r\n            var i = 0, len = lengths.length;\r\n            var j = 0, jLen;\r\n            var accumulatedLength = 0, pt;\r\n            while(i < len) {\r\n                if(accumulatedLength + lengths[i].addedLength > lengthPos) {\r\n                    var initIndex = i;\r\n                    var endIndex = (shapePath.c && i === len - 1) ? 0 : i + 1;\r\n                    var segmentPerc = (lengthPos - accumulatedLength)/lengths[i].addedLength;\r\n                    pt = bez.getPointInSegment(shapePath.v[initIndex], shapePath.v[endIndex], shapePath.o[initIndex], shapePath.i[endIndex], segmentPerc, lengths[i]);\r\n                    break;\r\n                } else {\r\n                    accumulatedLength += lengths[i].addedLength;\r\n                }\r\n                i += 1;\r\n            }\r\n            if(!pt){\r\n                pt = shapePath.c ? [shapePath.v[0][0],shapePath.v[0][1]]:[shapePath.v[shapePath._length-1][0],shapePath.v[shapePath._length-1][1]];\r\n            }\r\n            return pt;\r\n        },\r\n        vectorOnPath: function(perc, time, vectorType){\r\n            //perc doesn't use triple equality because it can be a Number object as well as a primitive.\r\n            perc = perc == 1 ? this.v.c ? 0 : 0.999 : perc;\r\n            var pt1 = this.pointOnPath(perc, time);\r\n            var pt2 = this.pointOnPath(perc + 0.001, time);\r\n            var xLength = pt2[0] - pt1[0];\r\n            var yLength = pt2[1] - pt1[1];\r\n            var magnitude = Math.sqrt(Math.pow(xLength,2) + Math.pow(yLength,2));\r\n            if (magnitude === 0) {\r\n                return [0,0];\r\n            }\r\n            var unitVector = vectorType === 'tangent' ? [xLength/magnitude, yLength/magnitude] : [-yLength/magnitude, xLength/magnitude];\r\n            return unitVector;\r\n        },\r\n        tangentOnPath: function(perc, time){\r\n            return this.vectorOnPath(perc, time, 'tangent');\r\n        },\r\n        normalOnPath: function(perc, time){\r\n            return this.vectorOnPath(perc, time, 'normal');\r\n        },\r\n        setGroupProperty: expressionHelpers.setGroupProperty,\r\n        getValueAtTime: expressionHelpers.getStaticValueAtTime\r\n    };\r\n    extendPrototype([ShapeExpressions], ShapePropertyConstructorFunction);\r\n    extendPrototype([ShapeExpressions], KeyframedShapePropertyConstructorFunction);\r\n    KeyframedShapePropertyConstructorFunction.prototype.getValueAtTime = getShapeValueAtTime;\r\n    KeyframedShapePropertyConstructorFunction.prototype.initiateExpression = ExpressionManager.initiateExpression;\r\n\r\n    var propertyGetShapeProp = ShapePropertyFactory.getShapeProp;\r\n    ShapePropertyFactory.getShapeProp = function(elem,data,type, arr, trims){\r\n        var prop = propertyGetShapeProp(elem,data,type, arr, trims);\r\n        prop.propertyIndex = data.ix;\r\n        prop.lock = false;\r\n        if(type === 3){\r\n            expressionHelpers.searchExpressions(elem,data.pt,prop);\r\n        } else if(type === 4){\r\n            expressionHelpers.searchExpressions(elem,data.ks,prop);\r\n        }\r\n        if(prop.k){\r\n            elem.addDynamicProperty(prop);\r\n        }\r\n        return prop;\r\n    };\r\n}());\r\n(function addDecorator() {\r\n\r\n    function searchExpressions(){\r\n        if(this.data.d.x){\r\n            this.calculateExpression = ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this);\r\n            this.addEffect(this.getExpressionValue.bind(this));\r\n            return true;\r\n        }\r\n    }\r\n\r\n    TextProperty.prototype.getExpressionValue = function(currentValue, text) {\r\n        var newValue = this.calculateExpression(text);\r\n        if(currentValue.t !== newValue) {\r\n            var newData = {};\r\n            this.copyData(newData, currentValue);\r\n            newData.t = newValue.toString();\r\n            newData.__complete = false;\r\n            return newData;\r\n        }\r\n        return currentValue;\r\n    }\r\n\r\n    TextProperty.prototype.searchProperty = function(){\r\n\r\n        var isKeyframed = this.searchKeyframes();\r\n        var hasExpressions = this.searchExpressions();\r\n        this.kf = isKeyframed || hasExpressions;\r\n        return this.kf;\r\n    };\r\n\r\n    TextProperty.prototype.searchExpressions = searchExpressions;\r\n    \r\n}());\r\nvar ShapeExpressionInterface = (function(){\r\n\r\n    function iterateElements(shapes,view, propertyGroup){\r\n        var arr = [];\r\n        var i, len = shapes ? shapes.length : 0;\r\n        for(i=0;i<len;i+=1){\r\n            if(shapes[i].ty == 'gr'){\r\n                arr.push(groupInterfaceFactory(shapes[i],view[i],propertyGroup));\r\n            }else if(shapes[i].ty == 'fl'){\r\n                arr.push(fillInterfaceFactory(shapes[i],view[i],propertyGroup));\r\n            }else if(shapes[i].ty == 'st'){\r\n                arr.push(strokeInterfaceFactory(shapes[i],view[i],propertyGroup));\r\n            }else if(shapes[i].ty == 'tm'){\r\n                arr.push(trimInterfaceFactory(shapes[i],view[i],propertyGroup));\r\n            }else if(shapes[i].ty == 'tr'){\r\n                //arr.push(transformInterfaceFactory(shapes[i],view[i],propertyGroup));\r\n            }else if(shapes[i].ty == 'el'){\r\n                arr.push(ellipseInterfaceFactory(shapes[i],view[i],propertyGroup));\r\n            }else if(shapes[i].ty == 'sr'){\r\n                arr.push(starInterfaceFactory(shapes[i],view[i],propertyGroup));\r\n            } else if(shapes[i].ty == 'sh'){\r\n                arr.push(pathInterfaceFactory(shapes[i],view[i],propertyGroup));\r\n            } else if(shapes[i].ty == 'rc'){\r\n                arr.push(rectInterfaceFactory(shapes[i],view[i],propertyGroup));\r\n            } else if(shapes[i].ty == 'rd'){\r\n                arr.push(roundedInterfaceFactory(shapes[i],view[i],propertyGroup));\r\n            } else if(shapes[i].ty == 'rp'){\r\n                arr.push(repeaterInterfaceFactory(shapes[i],view[i],propertyGroup));\r\n            }\r\n        }\r\n        return arr;\r\n    }\r\n\r\n    function contentsInterfaceFactory(shape,view, propertyGroup){\r\n       var interfaces;\r\n       var interfaceFunction = function _interfaceFunction(value){\r\n           var i = 0, len = interfaces.length;\r\n            while(i<len){\r\n                if(interfaces[i]._name === value || interfaces[i].mn === value || interfaces[i].propertyIndex === value || interfaces[i].ix === value || interfaces[i].ind === value){\r\n                   return interfaces[i];\r\n                }\r\n                i+=1;\r\n            }\r\n            if(typeof value === 'number'){\r\n               return interfaces[value-1];\r\n            }\r\n       };\r\n       interfaceFunction.propertyGroup = function(val){\r\n           if(val === 1){\r\n               return interfaceFunction;\r\n           } else{\r\n               return propertyGroup(val-1);\r\n           }\r\n       };\r\n       interfaces = iterateElements(shape.it, view.it, interfaceFunction.propertyGroup);\r\n       interfaceFunction.numProperties = interfaces.length;\r\n       interfaceFunction.propertyIndex = shape.cix;\r\n       interfaceFunction._name = shape.nm;\r\n\r\n       return interfaceFunction;\r\n   }\r\n\r\n    function groupInterfaceFactory(shape,view, propertyGroup){\r\n        var interfaceFunction = function _interfaceFunction(value){\r\n            switch(value){\r\n                case 'ADBE Vectors Group':\r\n                case 'Contents':\r\n                case 2:\r\n                    return interfaceFunction.content;\r\n                //Not necessary for now. Keeping them here in case a new case appears\r\n                //case 'ADBE Vector Transform Group':\r\n                //case 3:\r\n                default:\r\n                    return interfaceFunction.transform;\r\n            }\r\n        };\r\n        interfaceFunction.propertyGroup = function(val){\r\n            if(val === 1){\r\n                return interfaceFunction;\r\n            } else{\r\n                return propertyGroup(val-1);\r\n            }\r\n        };\r\n        var content = contentsInterfaceFactory(shape,view,interfaceFunction.propertyGroup);\r\n        var transformInterface = transformInterfaceFactory(shape.it[shape.it.length - 1],view.it[view.it.length - 1],interfaceFunction.propertyGroup);\r\n        interfaceFunction.content = content;\r\n        interfaceFunction.transform = transformInterface;\r\n        Object.defineProperty(interfaceFunction, '_name', {\r\n            get: function(){\r\n                return shape.nm;\r\n            }\r\n        });\r\n        //interfaceFunction.content = interfaceFunction;\r\n        interfaceFunction.numProperties = shape.np;\r\n        interfaceFunction.propertyIndex = shape.ix;\r\n        interfaceFunction.nm = shape.nm;\r\n        interfaceFunction.mn = shape.mn;\r\n        return interfaceFunction;\r\n    }\r\n\r\n    function fillInterfaceFactory(shape,view,propertyGroup){\r\n        function interfaceFunction(val){\r\n            if(val === 'Color' || val === 'color'){\r\n                return interfaceFunction.color;\r\n            } else if(val === 'Opacity' || val === 'opacity'){\r\n                return interfaceFunction.opacity;\r\n            }\r\n        }\r\n        Object.defineProperties(interfaceFunction, {\r\n            'color': {\r\n                get: ExpressionPropertyInterface(view.c)\r\n            },\r\n            'opacity': {\r\n                get: ExpressionPropertyInterface(view.o)\r\n            },\r\n            '_name': { value: shape.nm },\r\n            'mn': { value: shape.mn }\r\n        });\r\n\r\n        view.c.setGroupProperty(propertyGroup);\r\n        view.o.setGroupProperty(propertyGroup);\r\n        return interfaceFunction;\r\n    }\r\n\r\n    function strokeInterfaceFactory(shape,view,propertyGroup){\r\n        function _propertyGroup(val){\r\n            if(val === 1){\r\n                return ob;\r\n            } else{\r\n                return propertyGroup(val-1);\r\n            }\r\n        }\r\n        function _dashPropertyGroup(val){\r\n            if(val === 1){\r\n                return dashOb;\r\n            } else{\r\n                return _propertyGroup(val-1);\r\n            }\r\n        }\r\n        function addPropertyToDashOb(i) {\r\n            Object.defineProperty(dashOb, shape.d[i].nm, {\r\n                get: ExpressionPropertyInterface(view.d.dataProps[i].p)\r\n            });\r\n        }\r\n        var i, len = shape.d ? shape.d.length : 0;\r\n        var dashOb = {};\r\n        for (i = 0; i < len; i += 1) {\r\n            addPropertyToDashOb(i);\r\n            view.d.dataProps[i].p.setGroupProperty(_dashPropertyGroup);\r\n        }\r\n\r\n        function interfaceFunction(val){\r\n            if(val === 'Color' || val === 'color'){\r\n                return interfaceFunction.color;\r\n            } else if(val === 'Opacity' || val === 'opacity'){\r\n                return interfaceFunction.opacity;\r\n            } else if(val === 'Stroke Width' || val === 'stroke width'){\r\n                return interfaceFunction.strokeWidth;\r\n            }\r\n        }\r\n        Object.defineProperties(interfaceFunction, {\r\n            'color': {\r\n                get: ExpressionPropertyInterface(view.c)\r\n            },\r\n            'opacity': {\r\n                get: ExpressionPropertyInterface(view.o)\r\n            },\r\n            'strokeWidth': {\r\n                get: ExpressionPropertyInterface(view.w)\r\n            },\r\n            'dash': {\r\n                get: function() {\r\n                    return dashOb;\r\n                }\r\n            },\r\n            '_name': { value: shape.nm },\r\n            'mn': { value: shape.mn }\r\n        });\r\n\r\n        view.c.setGroupProperty(_propertyGroup);\r\n        view.o.setGroupProperty(_propertyGroup);\r\n        view.w.setGroupProperty(_propertyGroup);\r\n        return interfaceFunction;\r\n    }\r\n\r\n    function trimInterfaceFactory(shape,view,propertyGroup){\r\n        function _propertyGroup(val){\r\n            if(val == 1){\r\n                return interfaceFunction;\r\n            } else {\r\n                return propertyGroup(--val);\r\n            }\r\n        }\r\n        interfaceFunction.propertyIndex = shape.ix;\r\n\r\n        view.s.setGroupProperty(_propertyGroup);\r\n        view.e.setGroupProperty(_propertyGroup);\r\n        view.o.setGroupProperty(_propertyGroup);\r\n\r\n        function interfaceFunction(val){\r\n            if(val === shape.e.ix || val === 'End' || val === 'end'){\r\n                return interfaceFunction.end;\r\n            }\r\n            if(val === shape.s.ix){\r\n                return interfaceFunction.start;\r\n            }\r\n            if(val === shape.o.ix){\r\n                return interfaceFunction.offset;\r\n            }\r\n        }\r\n        interfaceFunction.propertyIndex = shape.ix;\r\n        interfaceFunction.propertyGroup = propertyGroup;\r\n\r\n        Object.defineProperties(interfaceFunction, {\r\n            'start': {\r\n                get: ExpressionPropertyInterface(view.s)\r\n            },\r\n            'end': {\r\n                get: ExpressionPropertyInterface(view.e)\r\n            },\r\n            'offset': {\r\n                get: ExpressionPropertyInterface(view.o)\r\n            },\r\n            '_name': { value: shape.nm }\r\n        });\r\n        interfaceFunction.mn = shape.mn;\r\n        return interfaceFunction;\r\n    }\r\n\r\n    function transformInterfaceFactory(shape,view,propertyGroup){\r\n        function _propertyGroup(val){\r\n            if(val == 1){\r\n                return interfaceFunction;\r\n            } else {\r\n                return propertyGroup(--val);\r\n            }\r\n        }\r\n        view.transform.mProps.o.setGroupProperty(_propertyGroup);\r\n        view.transform.mProps.p.setGroupProperty(_propertyGroup);\r\n        view.transform.mProps.a.setGroupProperty(_propertyGroup);\r\n        view.transform.mProps.s.setGroupProperty(_propertyGroup);\r\n        view.transform.mProps.r.setGroupProperty(_propertyGroup);\r\n        if(view.transform.mProps.sk){\r\n            view.transform.mProps.sk.setGroupProperty(_propertyGroup);\r\n            view.transform.mProps.sa.setGroupProperty(_propertyGroup);\r\n        }\r\n        view.transform.op.setGroupProperty(_propertyGroup);\r\n\r\n        function interfaceFunction(value){\r\n            if(shape.a.ix === value || value === 'Anchor Point'){\r\n                return interfaceFunction.anchorPoint;\r\n            }\r\n            if(shape.o.ix === value || value === 'Opacity'){\r\n                return interfaceFunction.opacity;\r\n            }\r\n            if(shape.p.ix === value || value === 'Position'){\r\n                return interfaceFunction.position;\r\n            }\r\n            if(shape.r.ix === value || value === 'Rotation' || value === 'ADBE Vector Rotation'){\r\n                return interfaceFunction.rotation;\r\n            }\r\n            if(shape.s.ix === value || value === 'Scale'){\r\n                return interfaceFunction.scale;\r\n            }\r\n            if(shape.sk && shape.sk.ix === value || value === 'Skew'){\r\n                return interfaceFunction.skew;\r\n            }\r\n            if(shape.sa && shape.sa.ix === value || value === 'Skew Axis'){\r\n                return interfaceFunction.skewAxis;\r\n            }\r\n\r\n        }\r\n        Object.defineProperties(interfaceFunction, {\r\n            'opacity': {\r\n                get: ExpressionPropertyInterface(view.transform.mProps.o)\r\n            },\r\n            'position': {\r\n                get: ExpressionPropertyInterface(view.transform.mProps.p)\r\n            },\r\n            'anchorPoint': {\r\n                get: ExpressionPropertyInterface(view.transform.mProps.a)\r\n            },\r\n            'scale': {\r\n                get: ExpressionPropertyInterface(view.transform.mProps.s)\r\n            },\r\n            'rotation': {\r\n                get: ExpressionPropertyInterface(view.transform.mProps.r)\r\n            },\r\n            'skew': {\r\n                get: ExpressionPropertyInterface(view.transform.mProps.sk)\r\n            },\r\n            'skewAxis': {\r\n                get: ExpressionPropertyInterface(view.transform.mProps.sa)\r\n            },\r\n            '_name': { value: shape.nm }\r\n        });\r\n        interfaceFunction.ty = 'tr';\r\n        interfaceFunction.mn = shape.mn;\r\n        interfaceFunction.propertyGroup = propertyGroup;\r\n        return interfaceFunction;\r\n    }\r\n\r\n    function ellipseInterfaceFactory(shape,view,propertyGroup){\r\n        function _propertyGroup(val){\r\n            if(val == 1){\r\n                return interfaceFunction;\r\n            } else {\r\n                return propertyGroup(--val);\r\n            }\r\n        }\r\n        interfaceFunction.propertyIndex = shape.ix;\r\n        var prop = view.sh.ty === 'tm' ? view.sh.prop : view.sh;\r\n        prop.s.setGroupProperty(_propertyGroup);\r\n        prop.p.setGroupProperty(_propertyGroup);\r\n        function interfaceFunction(value){\r\n            if(shape.p.ix === value){\r\n                return interfaceFunction.position;\r\n            }\r\n            if(shape.s.ix === value){\r\n                return interfaceFunction.size;\r\n            }\r\n        }\r\n\r\n        Object.defineProperties(interfaceFunction, {\r\n            'size': {\r\n                get: ExpressionPropertyInterface(prop.s)\r\n            },\r\n            'position': {\r\n                get: ExpressionPropertyInterface(prop.p)\r\n            },\r\n            '_name': { value: shape.nm }\r\n        });\r\n        interfaceFunction.mn = shape.mn;\r\n        return interfaceFunction;\r\n    }\r\n\r\n    function starInterfaceFactory(shape,view,propertyGroup){\r\n        function _propertyGroup(val){\r\n            if(val == 1){\r\n                return interfaceFunction;\r\n            } else {\r\n                return propertyGroup(--val);\r\n            }\r\n        }\r\n        var prop = view.sh.ty === 'tm' ? view.sh.prop : view.sh;\r\n        interfaceFunction.propertyIndex = shape.ix;\r\n        prop.or.setGroupProperty(_propertyGroup);\r\n        prop.os.setGroupProperty(_propertyGroup);\r\n        prop.pt.setGroupProperty(_propertyGroup);\r\n        prop.p.setGroupProperty(_propertyGroup);\r\n        prop.r.setGroupProperty(_propertyGroup);\r\n        if(shape.ir){\r\n            prop.ir.setGroupProperty(_propertyGroup);\r\n            prop.is.setGroupProperty(_propertyGroup);\r\n        }\r\n\r\n        function interfaceFunction(value){\r\n            if(shape.p.ix === value){\r\n                return interfaceFunction.position;\r\n            }\r\n            if(shape.r.ix === value){\r\n                return interfaceFunction.rotation;\r\n            }\r\n            if(shape.pt.ix === value){\r\n                return interfaceFunction.points;\r\n            }\r\n            if(shape.or.ix === value || 'ADBE Vector Star Outer Radius' === value){\r\n                return interfaceFunction.outerRadius;\r\n            }\r\n            if(shape.os.ix === value){\r\n                return interfaceFunction.outerRoundness;\r\n            }\r\n            if(shape.ir && (shape.ir.ix === value || 'ADBE Vector Star Inner Radius' === value)){\r\n                return interfaceFunction.innerRadius;\r\n            }\r\n            if(shape.is && shape.is.ix === value){\r\n                return interfaceFunction.innerRoundness;\r\n            }\r\n\r\n        }\r\n\r\n        Object.defineProperties(interfaceFunction, {\r\n            'position': {\r\n                get: ExpressionPropertyInterface(prop.p)\r\n            },\r\n            'rotation': {\r\n                get: ExpressionPropertyInterface(prop.r)\r\n            },\r\n            'points': {\r\n                get: ExpressionPropertyInterface(prop.pt)\r\n            },\r\n            'outerRadius': {\r\n                get: ExpressionPropertyInterface(prop.or)\r\n            },\r\n            'outerRoundness': {\r\n                get: ExpressionPropertyInterface(prop.os)\r\n            },\r\n            'innerRadius': {\r\n                get: ExpressionPropertyInterface(prop.ir)\r\n            },\r\n            'innerRoundness': {\r\n                get: ExpressionPropertyInterface(prop.is)\r\n            },\r\n            '_name': { value: shape.nm }\r\n        });\r\n        interfaceFunction.mn = shape.mn;\r\n        return interfaceFunction;\r\n    }\r\n\r\n    function rectInterfaceFactory(shape,view,propertyGroup){\r\n        function _propertyGroup(val){\r\n            if(val == 1){\r\n                return interfaceFunction;\r\n            } else {\r\n                return propertyGroup(--val);\r\n            }\r\n        }\r\n        var prop = view.sh.ty === 'tm' ? view.sh.prop : view.sh;\r\n        interfaceFunction.propertyIndex = shape.ix;\r\n        prop.p.setGroupProperty(_propertyGroup);\r\n        prop.s.setGroupProperty(_propertyGroup);\r\n        prop.r.setGroupProperty(_propertyGroup);\r\n\r\n        function interfaceFunction(value){\r\n            if(shape.p.ix === value){\r\n                return interfaceFunction.position;\r\n            }\r\n            if(shape.r.ix === value){\r\n                return interfaceFunction.roundness;\r\n            }\r\n            if(shape.s.ix === value || value === 'Size' || value === 'ADBE Vector Rect Size'){\r\n                return interfaceFunction.size;\r\n            }\r\n\r\n        }\r\n        Object.defineProperties(interfaceFunction, {\r\n            'position': {\r\n                get: ExpressionPropertyInterface(prop.p)\r\n            },\r\n            'roundness': {\r\n                get: ExpressionPropertyInterface(prop.r)\r\n            },\r\n            'size': {\r\n                get: ExpressionPropertyInterface(prop.s)\r\n            },\r\n            '_name': { value: shape.nm }\r\n        });\r\n        interfaceFunction.mn = shape.mn;\r\n        return interfaceFunction;\r\n    }\r\n\r\n    function roundedInterfaceFactory(shape,view,propertyGroup){\r\n        function _propertyGroup(val){\r\n            if(val == 1){\r\n                return interfaceFunction;\r\n            } else {\r\n                return propertyGroup(--val);\r\n            }\r\n        }\r\n        var prop = view;\r\n        interfaceFunction.propertyIndex = shape.ix;\r\n        prop.rd.setGroupProperty(_propertyGroup);\r\n\r\n        function interfaceFunction(value){\r\n            if(shape.r.ix === value || 'Round Corners 1' === value){\r\n                return interfaceFunction.radius;\r\n            }\r\n\r\n        }\r\n        Object.defineProperties(interfaceFunction, {\r\n            'radius': {\r\n                get: ExpressionPropertyInterface(prop.rd)\r\n            },\r\n            '_name': { value: shape.nm }\r\n        });\r\n        interfaceFunction.mn = shape.mn;\r\n        return interfaceFunction;\r\n    }\r\n\r\n    function repeaterInterfaceFactory(shape,view,propertyGroup){\r\n        function _propertyGroup(val){\r\n            if(val == 1){\r\n                return interfaceFunction;\r\n            } else {\r\n                return propertyGroup(--val);\r\n            }\r\n        }\r\n        var prop = view;\r\n        interfaceFunction.propertyIndex = shape.ix;\r\n        prop.c.setGroupProperty(_propertyGroup);\r\n        prop.o.setGroupProperty(_propertyGroup);\r\n\r\n        function interfaceFunction(value){\r\n            if(shape.c.ix === value || 'Copies' === value){\r\n                return interfaceFunction.copies;\r\n            } else if(shape.o.ix === value || 'Offset' === value){\r\n                return interfaceFunction.offset;\r\n            }\r\n\r\n        }\r\n        Object.defineProperties(interfaceFunction, {\r\n            'copies': {\r\n                get: ExpressionPropertyInterface(prop.c)\r\n            },\r\n            'offset': {\r\n                get: ExpressionPropertyInterface(prop.o)\r\n            },\r\n            '_name': { value: shape.nm }\r\n        });\r\n        interfaceFunction.mn = shape.mn;\r\n        return interfaceFunction;\r\n    }\r\n\r\n    function pathInterfaceFactory(shape,view,propertyGroup){\r\n        var prop = view.sh;\r\n        function _propertyGroup(val){\r\n            if(val == 1){\r\n                return interfaceFunction;\r\n            } else {\r\n                return propertyGroup(--val);\r\n            }\r\n        }\r\n        prop.setGroupProperty(_propertyGroup);\r\n\r\n        function interfaceFunction(val){\r\n            if(val === 'Shape' || val === 'shape' || val === 'Path' || val === 'path' || val === 'ADBE Vector Shape' || val === 2){\r\n                return interfaceFunction.path;\r\n            }\r\n        }\r\n        Object.defineProperties(interfaceFunction, {\r\n            'path': {\r\n                get: function(){\r\n                    if(prop.k){\r\n                        prop.getValue();\r\n                    }\r\n                    return prop;\r\n                }\r\n            },\r\n            'shape': {\r\n                get: function(){\r\n                    if(prop.k){\r\n                        prop.getValue();\r\n                    }\r\n                    return prop;\r\n                }\r\n            },\r\n            '_name': { value: shape.nm },\r\n            'ix': { value: shape.ix },\r\n            'propertyIndex': { value: shape.ix },\r\n            'mn': { value: shape.mn }\r\n        });\r\n        return interfaceFunction;\r\n    }\r\n\r\n    return function(shapes,view,propertyGroup) {\r\n        var interfaces;\r\n        function _interfaceFunction(value){\r\n            if(typeof value === 'number'){\r\n                return interfaces[value-1];\r\n            } else {\r\n                var i = 0, len = interfaces.length;\r\n                while(i<len){\r\n                    if(interfaces[i]._name === value){\r\n                        return interfaces[i];\r\n                    }\r\n                    i+=1;\r\n                }\r\n            }\r\n        }\r\n        _interfaceFunction.propertyGroup = propertyGroup;\r\n        interfaces = iterateElements(shapes, view, _interfaceFunction);\r\n        _interfaceFunction.numProperties = interfaces.length;\r\n        return _interfaceFunction;\r\n    };\r\n}());\r\n\r\nvar TextExpressionInterface = (function(){\r\n\treturn function(elem){\r\n        var _prevValue, _sourceText;\r\n        function _thisLayerFunction(){\r\n        }\r\n        Object.defineProperty(_thisLayerFunction, \"sourceText\", {\r\n            get: function(){\r\n                elem.textProperty.getValue()\r\n                var stringValue = elem.textProperty.currentData.t;\r\n                if(stringValue !== _prevValue) {\r\n                    elem.textProperty.currentData.t = _prevValue;\r\n                    _sourceText = new String(stringValue);\r\n                    //If stringValue is an empty string, eval returns undefined, so it has to be returned as a String primitive\r\n                    _sourceText.value = stringValue ? stringValue : new String(stringValue);\r\n                }\r\n                return _sourceText;\r\n            }\r\n        });\r\n        return _thisLayerFunction;\r\n    };\r\n}());\r\nvar LayerExpressionInterface = (function (){\r\n    function toWorld(arr, time){\r\n        var toWorldMat = new Matrix();\r\n        toWorldMat.reset();\r\n        var transformMat;\r\n        if(time) {\r\n            //Todo implement value at time on transform properties\r\n            //transformMat = this._elem.finalTransform.mProp.getValueAtTime(time);\r\n            transformMat = this._elem.finalTransform.mProp;\r\n        } else {\r\n            transformMat = this._elem.finalTransform.mProp;\r\n        }\r\n        transformMat.applyToMatrix(toWorldMat);\r\n        if(this._elem.hierarchy && this._elem.hierarchy.length){\r\n            var i, len = this._elem.hierarchy.length;\r\n            for(i=0;i<len;i+=1){\r\n                this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(toWorldMat);\r\n            }\r\n            return toWorldMat.applyToPointArray(arr[0],arr[1],arr[2]||0);\r\n        }\r\n        return toWorldMat.applyToPointArray(arr[0],arr[1],arr[2]||0);\r\n    }\r\n    function fromWorld(arr, time){\r\n        var toWorldMat = new Matrix();\r\n        toWorldMat.reset();\r\n        var transformMat;\r\n        if(time) {\r\n            //Todo implement value at time on transform properties\r\n            //transformMat = this._elem.finalTransform.mProp.getValueAtTime(time);\r\n            transformMat = this._elem.finalTransform.mProp;\r\n        } else {\r\n            transformMat = this._elem.finalTransform.mProp;\r\n        }\r\n        transformMat.applyToMatrix(toWorldMat);\r\n        if(this._elem.hierarchy && this._elem.hierarchy.length){\r\n            var i, len = this._elem.hierarchy.length;\r\n            for(i=0;i<len;i+=1){\r\n                this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(toWorldMat);\r\n            }\r\n            return toWorldMat.inversePoint(arr);\r\n        }\r\n        return toWorldMat.inversePoint(arr);\r\n    }\r\n    function fromComp(arr){\r\n        var toWorldMat = new Matrix();\r\n        toWorldMat.reset();\r\n        this._elem.finalTransform.mProp.applyToMatrix(toWorldMat);\r\n        if(this._elem.hierarchy && this._elem.hierarchy.length){\r\n            var i, len = this._elem.hierarchy.length;\r\n            for(i=0;i<len;i+=1){\r\n                this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(toWorldMat);\r\n            }\r\n            return toWorldMat.inversePoint(arr);\r\n        }\r\n        return toWorldMat.inversePoint(arr);\r\n    }\r\n\r\n    function sampleImage() {\r\n        return [1,1,1,1];\r\n    }\r\n\r\n\r\n    return function(elem){\r\n\r\n        var transformInterface;\r\n\r\n        function _registerMaskInterface(maskManager){\r\n            _thisLayerFunction.mask = new MaskManagerInterface(maskManager, elem);\r\n        }\r\n        function _registerEffectsInterface(effects){\r\n            _thisLayerFunction.effect = effects;\r\n        }\r\n\r\n        function _thisLayerFunction(name){\r\n            switch(name){\r\n                case \"ADBE Root Vectors Group\":\r\n                case \"Contents\":\r\n                case 2:\r\n                    return _thisLayerFunction.shapeInterface;\r\n                case 1:\r\n                case 6:\r\n                case \"Transform\":\r\n                case \"transform\":\r\n                case \"ADBE Transform Group\":\r\n                    return transformInterface;\r\n                case 4:\r\n                case \"ADBE Effect Parade\":\r\n                case \"effects\":\r\n                case \"Effects\":\r\n                    return _thisLayerFunction.effect;\r\n            }\r\n        }\r\n        _thisLayerFunction.toWorld = toWorld;\r\n        _thisLayerFunction.fromWorld = fromWorld;\r\n        _thisLayerFunction.toComp = toWorld;\r\n        _thisLayerFunction.fromComp = fromComp;\r\n        _thisLayerFunction.sampleImage = sampleImage;\r\n        _thisLayerFunction.sourceRectAtTime = elem.sourceRectAtTime.bind(elem);\r\n        _thisLayerFunction._elem = elem;\r\n        transformInterface = TransformExpressionInterface(elem.finalTransform.mProp);\r\n        var anchorPointDescriptor = getDescriptor(transformInterface, 'anchorPoint');\r\n        Object.defineProperties(_thisLayerFunction,{\r\n            hasParent: {\r\n                get: function(){\r\n                    return elem.hierarchy.length;\r\n                }\r\n            },\r\n            parent: {\r\n                get: function(){\r\n                    return elem.hierarchy[0].layerInterface;\r\n                }\r\n            },\r\n            rotation: getDescriptor(transformInterface, 'rotation'),\r\n            scale: getDescriptor(transformInterface, 'scale'),\r\n            position: getDescriptor(transformInterface, 'position'),\r\n            opacity: getDescriptor(transformInterface, 'opacity'),\r\n            anchorPoint: anchorPointDescriptor,\r\n            anchor_point: anchorPointDescriptor,\r\n            transform: {\r\n                get: function () {\r\n                    return transformInterface;\r\n                }\r\n            },\r\n            active: {\r\n                get: function(){\r\n                    return elem.isInRange;\r\n                }\r\n            }\r\n        });\r\n\r\n        _thisLayerFunction.startTime = elem.data.st;\r\n        _thisLayerFunction.index = elem.data.ind;\r\n        _thisLayerFunction.source = elem.data.refId;\r\n        _thisLayerFunction.height = elem.data.ty === 0 ? elem.data.h : 100;\r\n        _thisLayerFunction.width = elem.data.ty === 0 ? elem.data.w : 100;\r\n        _thisLayerFunction.inPoint = elem.data.ip/elem.comp.globalData.frameRate;\r\n        _thisLayerFunction.outPoint = elem.data.op/elem.comp.globalData.frameRate;\r\n        _thisLayerFunction._name = elem.data.nm;\r\n\r\n        _thisLayerFunction.registerMaskInterface = _registerMaskInterface;\r\n        _thisLayerFunction.registerEffectsInterface = _registerEffectsInterface;\r\n        return _thisLayerFunction;\r\n    };\r\n}());\r\n\r\nvar CompExpressionInterface = (function () {\r\n    return function(comp) {\r\n        function _thisLayerFunction(name) {\r\n            var i = 0, len = comp.layers.length;\r\n            while ( i < len) {\r\n                if (comp.layers[i].nm === name || comp.layers[i].ind === name) {\r\n                    return comp.elements[i].layerInterface;\r\n                }\r\n                i += 1;\r\n            }\r\n            return null;\r\n            //return {active:false};\r\n        }\r\n        Object.defineProperty(_thisLayerFunction, \"_name\", { value: comp.data.nm });\r\n        _thisLayerFunction.layer = _thisLayerFunction;\r\n        _thisLayerFunction.pixelAspect = 1;\r\n        _thisLayerFunction.height = comp.data.h || comp.globalData.compSize.h;\r\n        _thisLayerFunction.width = comp.data.w || comp.globalData.compSize.w;\r\n        _thisLayerFunction.pixelAspect = 1;\r\n        _thisLayerFunction.frameDuration = 1 / comp.globalData.frameRate;\r\n        _thisLayerFunction.displayStartTime = 0;\r\n        _thisLayerFunction.numLayers = comp.layers.length;\r\n        return _thisLayerFunction;\r\n    };\r\n}());\r\nvar TransformExpressionInterface = (function (){\r\n    return function(transform){\r\n        function _thisFunction(name){\r\n            switch(name){\r\n                case \"scale\":\r\n                case \"Scale\":\r\n                case \"ADBE Scale\":\r\n                case 6:\r\n                    return _thisFunction.scale;\r\n                case \"rotation\":\r\n                case \"Rotation\":\r\n                case \"ADBE Rotation\":\r\n                case \"ADBE Rotate Z\":\r\n                case 10:\r\n                    return _thisFunction.rotation;\r\n                case \"ADBE Rotate X\":\r\n                    return _thisFunction.xRotation;\r\n                case \"ADBE Rotate Y\":\r\n                    return _thisFunction.yRotation;\r\n                case \"position\":\r\n                case \"Position\":\r\n                case \"ADBE Position\":\r\n                case 2:\r\n                    return _thisFunction.position;\r\n                case 'ADBE Position_0':\r\n                    return _thisFunction.xPosition;\r\n                case 'ADBE Position_1':\r\n                    return _thisFunction.yPosition;\r\n                case 'ADBE Position_2':\r\n                    return _thisFunction.zPosition;\r\n                case \"anchorPoint\":\r\n                case \"AnchorPoint\":\r\n                case \"Anchor Point\":\r\n                case \"ADBE AnchorPoint\":\r\n                case 1:\r\n                    return _thisFunction.anchorPoint;\r\n                case \"opacity\":\r\n                case \"Opacity\":\r\n                case 11:\r\n                    return _thisFunction.opacity;\r\n            }\r\n        }\r\n\r\n        Object.defineProperty(_thisFunction, \"rotation\", {\r\n            get: ExpressionPropertyInterface(transform.r || transform.rz)\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"zRotation\", {\r\n            get: ExpressionPropertyInterface(transform.rz || transform.r)\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"xRotation\", {\r\n            get: ExpressionPropertyInterface(transform.rx)\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"yRotation\", {\r\n            get: ExpressionPropertyInterface(transform.ry)\r\n        });\r\n        Object.defineProperty(_thisFunction, \"scale\", {\r\n            get: ExpressionPropertyInterface(transform.s)\r\n        });\r\n\r\n        if(transform.p) {\r\n            var _transformFactory = ExpressionPropertyInterface(transform.p);\r\n        }\r\n        Object.defineProperty(_thisFunction, \"position\", {\r\n            get: function () {\r\n                if(transform.p) {\r\n                    return _transformFactory();\r\n                } else {\r\n                    return [transform.px.v, transform.py.v, transform.pz ? transform.pz.v : 0];\r\n                }\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"xPosition\", {\r\n            get: ExpressionPropertyInterface(transform.px)\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"yPosition\", {\r\n            get: ExpressionPropertyInterface(transform.py)\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"zPosition\", {\r\n            get: ExpressionPropertyInterface(transform.pz)\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"anchorPoint\", {\r\n            get: ExpressionPropertyInterface(transform.a)\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"opacity\", {\r\n            get: ExpressionPropertyInterface(transform.o)\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"skew\", {\r\n            get: ExpressionPropertyInterface(transform.sk)\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"skewAxis\", {\r\n            get: ExpressionPropertyInterface(transform.sa)\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"orientation\", {\r\n            get: ExpressionPropertyInterface(transform.or)\r\n        });\r\n\r\n        return _thisFunction;\r\n    };\r\n}());\r\nvar ProjectInterface = (function (){\r\n\r\n    function registerComposition(comp){\r\n        this.compositions.push(comp);\r\n    }\r\n\r\n    return function(){\r\n        function _thisProjectFunction(name){\r\n            var i = 0, len = this.compositions.length;\r\n            while(i<len){\r\n                if(this.compositions[i].data && this.compositions[i].data.nm === name){\r\n                    if(this.compositions[i].prepareFrame && this.compositions[i].data.xt) {\r\n                        this.compositions[i].prepareFrame(this.currentFrame);\r\n                    }\r\n                    return this.compositions[i].compInterface;\r\n                }\r\n                i+=1;\r\n            }\r\n        }\r\n\r\n        _thisProjectFunction.compositions = [];\r\n        _thisProjectFunction.currentFrame = 0;\r\n\r\n        _thisProjectFunction.registerComposition = registerComposition;\r\n\r\n\r\n\r\n        return _thisProjectFunction;\r\n    };\r\n}());\r\nvar EffectsExpressionInterface = (function (){\r\n    var ob = {\r\n        createEffectsInterface: createEffectsInterface\r\n    };\r\n\r\n    function createEffectsInterface(elem, propertyGroup){\r\n        if(elem.effectsManager){\r\n\r\n            var effectElements = [];\r\n            var effectsData = elem.data.ef;\r\n            var i, len = elem.effectsManager.effectElements.length;\r\n            for(i=0;i<len;i+=1){\r\n                effectElements.push(createGroupInterface(effectsData[i],elem.effectsManager.effectElements[i],propertyGroup,elem));\r\n            }\r\n\r\n            return function(name){\r\n                var effects = elem.data.ef || [], i = 0, len = effects.length;\r\n                while(i<len) {\r\n                    if(name === effects[i].nm || name === effects[i].mn || name === effects[i].ix){\r\n                        return effectElements[i];\r\n                    }\r\n                    i += 1;\r\n                }\r\n            };\r\n        }\r\n    }\r\n\r\n    function createGroupInterface(data,elements, propertyGroup, elem){\r\n        var effectElements = [];\r\n        var i, len = data.ef.length;\r\n        for(i=0;i<len;i+=1){\r\n            if(data.ef[i].ty === 5){\r\n                effectElements.push(createGroupInterface(data.ef[i],elements.effectElements[i],elements.effectElements[i].propertyGroup, elem));\r\n            } else {\r\n                effectElements.push(createValueInterface(elements.effectElements[i],data.ef[i].ty, elem, _propertyGroup));\r\n            }\r\n        }\r\n\r\n        function _propertyGroup(val) {\r\n            if(val === 1){\r\n               return groupInterface;\r\n            } else{\r\n               return propertyGroup(val-1);\r\n            }\r\n        }\r\n\r\n        var groupInterface = function(name){\r\n            var effects = data.ef, i = 0, len = effects.length;\r\n            while(i<len) {\r\n                if(name === effects[i].nm || name === effects[i].mn || name === effects[i].ix){\r\n                    if(effects[i].ty === 5){\r\n                        return effectElements[i];\r\n                    } else {\r\n                        return effectElements[i]();\r\n                    }\r\n                }\r\n                i += 1;\r\n            }\r\n            return effectElements[0]();\r\n        };\r\n\r\n        groupInterface.propertyGroup = _propertyGroup;\r\n\r\n        if(data.mn === 'ADBE Color Control'){\r\n            Object.defineProperty(groupInterface, 'color', {\r\n                get: function(){\r\n                    return effectElements[0]();\r\n                }\r\n            });\r\n        }\r\n        Object.defineProperty(groupInterface, 'numProperties', {\r\n            get: function(){\r\n                return data.np;\r\n            }\r\n        });\r\n        groupInterface.active = groupInterface.enabled = data.en !== 0;\r\n        return groupInterface;\r\n    }\r\n\r\n    function createValueInterface(element, type, elem, propertyGroup){\r\n        var expressionProperty = ExpressionPropertyInterface(element.p);\r\n        function interfaceFunction(){\r\n            if(type === 10){\r\n                return elem.comp.compInterface(element.p.v);\r\n            }\r\n            return expressionProperty();\r\n        }\r\n\r\n        if(element.p.setGroupProperty) {\r\n            element.p.setGroupProperty(propertyGroup);\r\n        }\r\n\r\n        return interfaceFunction;\r\n    }\r\n\r\n    return ob;\r\n\r\n}());\r\nvar MaskManagerInterface = (function(){\r\n\r\n\tfunction MaskInterface(mask, data){\r\n\t\tthis._mask = mask;\r\n\t\tthis._data = data;\r\n\t}\r\n\tObject.defineProperty(MaskInterface.prototype, 'maskPath', {\r\n        get: function(){\r\n            if(this._mask.prop.k){\r\n                this._mask.prop.getValue();\r\n            }\r\n            return this._mask.prop;\r\n        }\r\n    });\r\n\tObject.defineProperty(MaskInterface.prototype, 'maskOpacity', {\r\n        get: function(){\r\n            if(this._mask.op.k){\r\n                this._mask.op.getValue();\r\n            }\r\n            return this._mask.op.v * 100;\r\n        }\r\n    });\r\n\r\n\tvar MaskManager = function(maskManager, elem){\r\n\t\tvar _maskManager = maskManager;\r\n\t\tvar _elem = elem;\r\n\t\tvar _masksInterfaces = createSizedArray(maskManager.viewData.length);\r\n\t\tvar i, len = maskManager.viewData.length;\r\n\t\tfor(i = 0; i < len; i += 1) {\r\n\t\t\t_masksInterfaces[i] = new MaskInterface(maskManager.viewData[i], maskManager.masksProperties[i]);\r\n\t\t}\r\n\r\n\t\tvar maskFunction = function(name){\r\n\t\t\ti = 0;\r\n\t\t    while(i<len){\r\n\t\t        if(maskManager.masksProperties[i].nm === name){\r\n\t\t            return _masksInterfaces[i];\r\n\t\t        }\r\n\t\t        i += 1;\r\n\t\t    }\r\n\t\t};\r\n\t\treturn maskFunction;\r\n\t};\r\n\treturn MaskManager;\r\n}());\r\n\r\nvar ExpressionPropertyInterface = (function() {\r\n\r\n    var defaultUnidimensionalValue = {pv:0, v:0, mult: 1}\r\n    var defaultMultidimensionalValue = {pv:[0,0,0], v:[0,0,0], mult: 1}\r\n\r\n    function completeProperty(expressionValue, property, type) {\r\n        Object.defineProperty(expressionValue, 'velocity', {\r\n            get: function(){\r\n                return property.getVelocityAtTime(property.comp.currentFrame);\r\n            }\r\n        });\r\n        expressionValue.numKeys = property.keyframes ? property.keyframes.length : 0;\r\n        expressionValue.key = function(pos) {\r\n            if (!expressionValue.numKeys) {\r\n                return 0;\r\n            } else {\r\n                var value = '';\r\n                if ('s' in property.keyframes[pos-1]) {\r\n                    value = property.keyframes[pos-1].s;\r\n                } else if ('e' in property.keyframes[pos-2]) {\r\n                    value = property.keyframes[pos-2].e;\r\n                } else {\r\n                    value = property.keyframes[pos-2].s;\r\n                }\r\n                var valueProp = type === 'unidimensional' ? new Number(value) : Object.assign({}, value);\r\n                valueProp.time = property.keyframes[pos-1].t / property.elem.comp.globalData.frameRate;\r\n                return valueProp;\r\n            }\r\n        };\r\n        expressionValue.valueAtTime = property.getValueAtTime;\r\n        expressionValue.speedAtTime = property.getSpeedAtTime;\r\n        expressionValue.velocityAtTime = property.getVelocityAtTime;\r\n        expressionValue.propertyGroup = property.propertyGroup;\r\n    }\r\n\r\n    function UnidimensionalPropertyInterface(property) {\r\n        if(!property || !('pv' in property)) {\r\n            property = defaultUnidimensionalValue;\r\n        }\r\n        var mult = 1 / property.mult;\r\n        var val = property.pv * mult;\r\n        var expressionValue = new Number(val);\r\n        expressionValue.value = val;\r\n        completeProperty(expressionValue, property, 'unidimensional');\r\n\r\n        return function() {\r\n            if (property.k) {\r\n                property.getValue();\r\n            }\r\n            val = property.v * mult;\r\n            if(expressionValue.value !== val) {\r\n                expressionValue = new Number(val);\r\n                expressionValue.value = val;\r\n                completeProperty(expressionValue, property, 'unidimensional');\r\n            }\r\n            return expressionValue;\r\n        }\r\n    }\r\n\r\n    function MultidimensionalPropertyInterface(property) {\r\n        if(!property || !('pv' in property)) {\r\n            property = defaultMultidimensionalValue;\r\n        }\r\n        var mult = 1 / property.mult;\r\n        var len = property.pv.length;\r\n        var expressionValue = createTypedArray('float32', len);\r\n        var arrValue = createTypedArray('float32', len);\r\n        expressionValue.value = arrValue;\r\n        completeProperty(expressionValue, property, 'multidimensional');\r\n\r\n        return function() {\r\n            if (property.k) {\r\n                property.getValue();\r\n            }\r\n            for (var i = 0; i < len; i += 1) {\r\n                expressionValue[i] = arrValue[i] = property.v[i] * mult;\r\n            }\r\n            return expressionValue;\r\n        }\r\n    }\r\n\r\n    //TODO: try to avoid using this getter\r\n    function defaultGetter() {\r\n        return defaultUnidimensionalValue;\r\n    }\r\n    \r\n    return function(property) {\r\n        if(!property) {\r\n            return defaultGetter;\r\n        } else if (property.propType === 'unidimensional') {\r\n            return UnidimensionalPropertyInterface(property);\r\n        } else {\r\n            return MultidimensionalPropertyInterface(property);\r\n        }\r\n    }\r\n}());\r\n\r\n(function(){\r\n\r\n    var TextExpressionSelectorProp = (function(){\r\n\r\n        function getValueProxy(index,total){\r\n            this.textIndex = index+1;\r\n            this.textTotal = total;\r\n            this.v = this.getValue() * this.mult;\r\n            return this.v;\r\n        }\r\n\r\n        return function TextExpressionSelectorProp(elem,data){\r\n            this.pv = 1;\r\n            this.comp = elem.comp;\r\n            this.elem = elem;\r\n            this.mult = 0.01;\r\n            this.propType = 'textSelector';\r\n            this.textTotal = data.totalChars;\r\n            this.selectorValue = 100;\r\n            this.lastValue = [1,1,1];\r\n            this.k = true;\r\n            this.x = true;\r\n            this.getValue = ExpressionManager.initiateExpression.bind(this)(elem,data,this);\r\n            this.getMult = getValueProxy;\r\n            this.getVelocityAtTime = expressionHelpers.getVelocityAtTime;\r\n            if(this.kf){\r\n                this.getValueAtTime = expressionHelpers.getValueAtTime.bind(this);\r\n            } else {\r\n                this.getValueAtTime = expressionHelpers.getStaticValueAtTime.bind(this);\r\n            }\r\n            this.setGroupProperty = expressionHelpers.setGroupProperty;\r\n        };\r\n    }());\r\n\r\n\tvar propertyGetTextProp = TextSelectorProp.getTextSelectorProp;\r\n\tTextSelectorProp.getTextSelectorProp = function(elem, data,arr){\r\n\t    if(data.t === 1){\r\n\t        return new TextExpressionSelectorProp(elem, data,arr);\r\n\t    } else {\r\n\t        return propertyGetTextProp(elem,data,arr);\r\n\t    }\r\n\t};\r\n}());\r\nfunction SliderEffect(data,elem, container){\r\n    this.p = PropertyFactory.getProp(elem,data.v,0,0,container);\r\n}\r\nfunction AngleEffect(data,elem, container){\r\n    this.p = PropertyFactory.getProp(elem,data.v,0,0,container);\r\n}\r\nfunction ColorEffect(data,elem, container){\r\n    this.p = PropertyFactory.getProp(elem,data.v,1,0,container);\r\n}\r\nfunction PointEffect(data,elem, container){\r\n    this.p = PropertyFactory.getProp(elem,data.v,1,0,container);\r\n}\r\nfunction LayerIndexEffect(data,elem, container){\r\n    this.p = PropertyFactory.getProp(elem,data.v,0,0,container);\r\n}\r\nfunction MaskIndexEffect(data,elem, container){\r\n    this.p = PropertyFactory.getProp(elem,data.v,0,0,container);\r\n}\r\nfunction CheckboxEffect(data,elem, container){\r\n    this.p = PropertyFactory.getProp(elem,data.v,0,0,container);\r\n}\r\nfunction NoValueEffect(){\r\n    this.p = {};\r\n}\r\nfunction EffectsManager(){}\r\nfunction EffectsManager(data,element){\r\n    var effects = data.ef || [];\r\n    this.effectElements = [];\r\n    var i,len = effects.length;\r\n    var effectItem;\r\n    for(i=0;i<len;i++) {\r\n        effectItem = new GroupEffect(effects[i],element);\r\n        this.effectElements.push(effectItem);\r\n    }\r\n}\r\n\r\nfunction GroupEffect(data,element){\r\n    this.init(data,element);\r\n}\r\n\r\nextendPrototype([DynamicPropertyContainer], GroupEffect);\r\n\r\nGroupEffect.prototype.getValue = GroupEffect.prototype.iterateDynamicProperties;\r\n\r\nGroupEffect.prototype.init = function(data,element){\r\n    this.data = data;\r\n    this.effectElements = [];\r\n    this.initDynamicPropertyContainer(element);\r\n    var i, len = this.data.ef.length;\r\n    var eff, effects = this.data.ef;\r\n    for(i=0;i<len;i+=1){\r\n        eff = null;\r\n        switch(effects[i].ty){\r\n            case 0:\r\n                eff = new SliderEffect(effects[i],element,this);\r\n                break;\r\n            case 1:\r\n                eff = new AngleEffect(effects[i],element,this);\r\n                break;\r\n            case 2:\r\n                eff = new ColorEffect(effects[i],element,this);\r\n                break;\r\n            case 3:\r\n                eff = new PointEffect(effects[i],element,this);\r\n                break;\r\n            case 4:\r\n            case 7:\r\n                eff = new CheckboxEffect(effects[i],element,this);\r\n                break;\r\n            case 10:\r\n                eff = new LayerIndexEffect(effects[i],element,this);\r\n                break;\r\n            case 11:\r\n                eff = new MaskIndexEffect(effects[i],element,this);\r\n                break;\r\n            case 5:\r\n                eff = new EffectsManager(effects[i],element,this);\r\n                break;\r\n            //case 6:\r\n            default:\r\n                eff = new NoValueEffect(effects[i],element,this);\r\n                break;\r\n        }\r\n        if(eff) {\r\n            this.effectElements.push(eff);\r\n        }\r\n    }\r\n};\r\n\r\nvar lottie = {};\r\n\r\nvar _isFrozen = false;\r\n\r\nfunction setLocationHref (href) {\r\n    locationHref = href;\r\n}\r\n\r\nfunction searchAnimations() {\r\n    if (standalone === true) {\r\n        animationManager.searchAnimations(animationData, standalone, renderer);\r\n    } else {\r\n        animationManager.searchAnimations();\r\n    }\r\n}\r\n\r\nfunction setSubframeRendering(flag) {\r\n    subframeEnabled = flag;\r\n}\r\n\r\nfunction loadAnimation(params) {\r\n    if (standalone === true) {\r\n        params.animationData = JSON.parse(animationData);\r\n    }\r\n    return animationManager.loadAnimation(params);\r\n}\r\n\r\nfunction setQuality(value) {\r\n    if (typeof value === 'string') {\r\n        switch (value) {\r\n            case 'high':\r\n                defaultCurveSegments = 200;\r\n                break;\r\n            case 'medium':\r\n                defaultCurveSegments = 50;\r\n                break;\r\n            case 'low':\r\n                defaultCurveSegments = 10;\r\n                break;\r\n        }\r\n    } else if (!isNaN(value) && value > 1) {\r\n        defaultCurveSegments = value;\r\n    }\r\n    if (defaultCurveSegments >= 50) {\r\n        roundValues(false);\r\n    } else {\r\n        roundValues(true);\r\n    }\r\n}\r\n\r\nfunction inBrowser() {\r\n    return typeof navigator !== 'undefined';\r\n}\r\n\r\nfunction installPlugin(type, plugin) {\r\n    if (type === 'expressions') {\r\n        expressionsPlugin = plugin;\r\n    }\r\n}\r\n\r\nfunction getFactory(name) {\r\n    switch (name) {\r\n        case \"propertyFactory\":\r\n            return PropertyFactory;\r\n        case \"shapePropertyFactory\":\r\n            return ShapePropertyFactory;\r\n        case \"matrix\":\r\n            return Matrix;\r\n    }\r\n}\r\n\r\nlottie.play = animationManager.play;\r\nlottie.pause = animationManager.pause;\r\nlottie.setLocationHref = setLocationHref;\r\nlottie.togglePause = animationManager.togglePause;\r\nlottie.setSpeed = animationManager.setSpeed;\r\nlottie.setDirection = animationManager.setDirection;\r\nlottie.stop = animationManager.stop;\r\nlottie.searchAnimations = searchAnimations;\r\nlottie.registerAnimation = animationManager.registerAnimation;\r\nlottie.loadAnimation = loadAnimation;\r\nlottie.setSubframeRendering = setSubframeRendering;\r\nlottie.resize = animationManager.resize;\r\n//lottie.start = start;\r\nlottie.goToAndStop = animationManager.goToAndStop;\r\nlottie.destroy = animationManager.destroy;\r\nlottie.setQuality = setQuality;\r\nlottie.inBrowser = inBrowser;\r\nlottie.installPlugin = installPlugin;\r\nlottie.freeze = animationManager.freeze;\r\nlottie.unfreeze = animationManager.unfreeze;\r\nlottie.getRegisteredAnimations = animationManager.getRegisteredAnimations;\r\nlottie.__getFactory = getFactory;\r\nlottie.version = '5.6.4';\r\n\r\nfunction checkReady() {\r\n    if (document.readyState === \"complete\") {\r\n        clearInterval(readyStateCheckInterval);\r\n        searchAnimations();\r\n    }\r\n}\r\n\r\nfunction getQueryVariable(variable) {\r\n    var vars = queryString.split('&');\r\n    for (var i = 0; i < vars.length; i++) {\r\n        var pair = vars[i].split('=');\r\n        if (decodeURIComponent(pair[0]) == variable) {\r\n            return decodeURIComponent(pair[1]);\r\n        }\r\n    }\r\n}\r\nvar standalone = '__[STANDALONE]__';\r\nvar animationData = '__[ANIMATIONDATA]__';\r\nvar renderer = '';\r\nif (standalone) {\r\n    var scripts = document.getElementsByTagName('script');\r\n    var index = scripts.length - 1;\r\n    var myScript = scripts[index] || {\r\n        src: ''\r\n    };\r\n    var queryString = myScript.src.replace(/^[^\\?]+\\??/, '');\r\n    renderer = getQueryVariable('renderer');\r\n}\r\nvar readyStateCheckInterval = setInterval(checkReady, 100);\r\n\nreturn lottie;\n}));","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar isForced = require('../internals/is-forced');\nvar redefine = require('../internals/redefine');\nvar has = require('../internals/has');\nvar classof = require('../internals/classof-raw');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar toPrimitive = require('../internals/to-primitive');\nvar fails = require('../internals/fails');\nvar create = require('../internals/object-create');\nvar getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar defineProperty = require('../internals/object-define-property').f;\nvar trim = require('../internals/string-trim').trim;\n\nvar NUMBER = 'Number';\nvar NativeNumber = global[NUMBER];\nvar NumberPrototype = NativeNumber.prototype;\n\n// Opera ~12 has broken Object#toString\nvar BROKEN_CLASSOF = classof(create(NumberPrototype)) == NUMBER;\n\n// `ToNumber` abstract operation\n// https://tc39.github.io/ecma262/#sec-tonumber\nvar toNumber = function (argument) {\n  var it = toPrimitive(argument, false);\n  var first, third, radix, maxCode, digits, length, index, code;\n  if (typeof it == 'string' && it.length > 2) {\n    it = trim(it);\n    first = it.charCodeAt(0);\n    if (first === 43 || first === 45) {\n      third = it.charCodeAt(2);\n      if (third === 88 || third === 120) return NaN; // Number('+0x1') should be NaN, old V8 fix\n    } else if (first === 48) {\n      switch (it.charCodeAt(1)) {\n        case 66: case 98: radix = 2; maxCode = 49; break; // fast equal of /^0b[01]+$/i\n        case 79: case 111: radix = 8; maxCode = 55; break; // fast equal of /^0o[0-7]+$/i\n        default: return +it;\n      }\n      digits = it.slice(2);\n      length = digits.length;\n      for (index = 0; index < length; index++) {\n        code = digits.charCodeAt(index);\n        // parseInt parses a string to a first unavailable symbol\n        // but ToNumber should return NaN if a string contains unavailable symbols\n        if (code < 48 || code > maxCode) return NaN;\n      } return parseInt(digits, radix);\n    }\n  } return +it;\n};\n\n// `Number` constructor\n// https://tc39.github.io/ecma262/#sec-number-constructor\nif (isForced(NUMBER, !NativeNumber(' 0o1') || !NativeNumber('0b1') || NativeNumber('+0x1'))) {\n  var NumberWrapper = function Number(value) {\n    var it = arguments.length < 1 ? 0 : value;\n    var dummy = this;\n    return dummy instanceof NumberWrapper\n      // check on 1..constructor(foo) case\n      && (BROKEN_CLASSOF ? fails(function () { NumberPrototype.valueOf.call(dummy); }) : classof(dummy) != NUMBER)\n        ? inheritIfRequired(new NativeNumber(toNumber(it)), dummy, NumberWrapper) : toNumber(it);\n  };\n  for (var keys = DESCRIPTORS ? getOwnPropertyNames(NativeNumber) : (\n    // ES3:\n    'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,' +\n    // ES2015 (in case, if modules with ES2015 Number statics required before):\n    'EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,' +\n    'MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger'\n  ).split(','), j = 0, key; keys.length > j; j++) {\n    if (has(NativeNumber, key = keys[j]) && !has(NumberWrapper, key)) {\n      defineProperty(NumberWrapper, key, getOwnPropertyDescriptor(NativeNumber, key));\n    }\n  }\n  NumberWrapper.prototype = NumberPrototype;\n  NumberPrototype.constructor = NumberWrapper;\n  redefine(global, NUMBER, NumberWrapper);\n}\n","// .dirname, .basename, and .extname methods are extracted from Node.js v8.11.1,\n// backported and transplited with Babel, with backwards-compat fixes\n\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  if (path.length === 0) return '.';\n  var code = path.charCodeAt(0);\n  var hasRoot = code === 47 /*/*/;\n  var end = -1;\n  var matchedSlash = true;\n  for (var i = path.length - 1; i >= 1; --i) {\n    code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        if (!matchedSlash) {\n          end = i;\n          break;\n        }\n      } else {\n      // We saw the first non-path separator\n      matchedSlash = false;\n    }\n  }\n\n  if (end === -1) return hasRoot ? '/' : '.';\n  if (hasRoot && end === 1) {\n    // return '//';\n    // Backwards-compat fix:\n    return '/';\n  }\n  return path.slice(0, end);\n};\n\nfunction basename(path) {\n  if (typeof path !== 'string') path = path + '';\n\n  var start = 0;\n  var end = -1;\n  var matchedSlash = true;\n  var i;\n\n  for (i = path.length - 1; i >= 0; --i) {\n    if (path.charCodeAt(i) === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          start = i + 1;\n          break;\n        }\n      } else if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // path component\n      matchedSlash = false;\n      end = i + 1;\n    }\n  }\n\n  if (end === -1) return '';\n  return path.slice(start, end);\n}\n\n// Uses a mixed approach for backwards-compatibility, as ext behavior changed\n// in new Node.js versions, so only basename() above is backported here\nexports.basename = function (path, ext) {\n  var f = basename(path);\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\nexports.extname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  var startDot = -1;\n  var startPart = 0;\n  var end = -1;\n  var matchedSlash = true;\n  // Track the state of characters (if any) we see before our first dot and\n  // after any path separator we find\n  var preDotState = 0;\n  for (var i = path.length - 1; i >= 0; --i) {\n    var code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n        continue;\n      }\n    if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // extension\n      matchedSlash = false;\n      end = i + 1;\n    }\n    if (code === 46 /*.*/) {\n        // If this is our first dot, mark it as the start of our extension\n        if (startDot === -1)\n          startDot = i;\n        else if (preDotState !== 1)\n          preDotState = 1;\n    } else if (startDot !== -1) {\n      // We saw a non-dot and non-path separator before our dot, so we should\n      // have a good chance at having a non-empty extension\n      preDotState = -1;\n    }\n  }\n\n  if (startDot === -1 || end === -1 ||\n      // We saw a non-dot character immediately before the dot\n      preDotState === 0 ||\n      // The (right-most) trimmed path component is exactly '..'\n      preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n    return '';\n  }\n  return path.slice(startDot, end);\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n"],"sourceRoot":""}